{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-3!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/webcams/Mjpegstreamer.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/webcams/Mjpegstreamer.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLXN0YXJ0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IENvbXBvbmVudCBmcm9tICd2dWUtY2xhc3MtY29tcG9uZW50JzsKaW1wb3J0IHsgTWl4aW5zLCBQcm9wLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgQmFzZU1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvYmFzZSc7CnZhciBDT05URU5UX0xFTkdUSCA9ICdjb250ZW50LWxlbmd0aCc7CnZhciBUWVBFX0pQRUcgPSAnaW1hZ2UvanBlZyc7Cgp2YXIgTWpwZWdzdHJlYW1lciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX01peGlucykgewogIF9pbmhlcml0cyhNanBlZ3N0cmVhbWVyLCBfTWl4aW5zKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihNanBlZ3N0cmVhbWVyKTsKCiAgZnVuY3Rpb24gTWpwZWdzdHJlYW1lcigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWpwZWdzdHJlYW1lcik7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImlzVmlzaWJsZSIsIHRydWUpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImN1cnJlbnRGUFMiLCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0aW1lckZQUyIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInRpbWVyUmVzdGFydCIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0cmVhbSIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNvbnRyb2xsZXIiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjYW1TZXR0aW5ncyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicHJpbnRlclVybCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2hvd0ZwcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiJHJlZnMiLCB2b2lkIDApOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhNanBlZ3N0cmVhbWVyLCBbewogICAga2V5OiAidXJsIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgYmFzZVVybCA9IHRoaXMuY2FtU2V0dGluZ3MudXJsU3RyZWFtOwogICAgICB2YXIgdXJsID0gbmV3IFVSTChiYXNlVXJsLCB0aGlzLnByaW50ZXJVcmwgPT09IHVuZGVmaW5lZCA/IHRoaXMuaG9zdFVybC50b1N0cmluZygpIDogdGhpcy5wcmludGVyVXJsKTsKICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh1cmwudG9TdHJpbmcoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAid2ViY2FtU3R5bGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciB0cmFuc2Zvcm1zID0gJyc7CiAgICAgIGlmICgnZmxpcFgnIGluIHRoaXMuY2FtU2V0dGluZ3MgJiYgdGhpcy5jYW1TZXR0aW5ncy5mbGlwWCkgdHJhbnNmb3JtcyArPSAnIHNjYWxlWCgtMSknOwogICAgICBpZiAoJ2ZsaXBYJyBpbiB0aGlzLmNhbVNldHRpbmdzICYmIHRoaXMuY2FtU2V0dGluZ3MuZmxpcFkpIHRyYW5zZm9ybXMgKz0gJyBzY2FsZVkoLTEpJzsKICAgICAgaWYgKHRyYW5zZm9ybXMudHJpbUxlZnQoKS5sZW5ndGgpIHJldHVybiB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm1zLnRyaW1MZWZ0KCkKICAgICAgfTsKICAgICAgcmV0dXJuICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImZwc091dHB1dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEZQUyA8IDEwID8gJzAnICsgdGhpcy5jdXJyZW50RlBTLnRvU3RyaW5nKCkgOiB0aGlzLmN1cnJlbnRGUFM7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RhcnRTdHJlYW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0U3RyZWFtKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBTT0kgPSBuZXcgVWludDhBcnJheSgyKTsKICAgICAgU09JWzBdID0gMHhGRjsKICAgICAgU09JWzFdID0gMHhEODsKCiAgICAgIGZ1bmN0aW9uIGdldExlbmd0aChoZWFkZXJzKSB7CiAgICAgICAgdmFyIGNvbnRlbnRMZW5ndGggPSAtMTsKICAgICAgICBoZWFkZXJzLnNwbGl0KCdcbicpLmZvckVhY2goZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgICAgdmFyIHBhaXIgPSBoZWFkZXIuc3BsaXQoJzonKTsKCiAgICAgICAgICBpZiAocGFpclswXS50b0xvd2VyQ2FzZSgpID09PSBDT05URU5UX0xFTkdUSCkgewogICAgICAgICAgICAvLyBGaXggZm9yIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcnVudGovbWpwZWctcmVhZGFibGUtc3RyZWFtL2lzc3Vlcy8zIHN1Z2dlc3RlZCBieSBtYXJ0YXBhbmMKICAgICAgICAgICAgY29udGVudExlbmd0aCA9IHBhaXJbMV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGNvbnRlbnRMZW5ndGg7CiAgICAgIH0KCiAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgICAgdmFyIHNpZ25hbCA9IHRoaXMuY29udHJvbGxlci5zaWduYWw7IC8vcmVhZGFibGUgc3RyZWFtIGNyZWRpdCB0byBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hcnVudGovbWpwZWctcmVhZGFibGUtc3RyZWFtCgogICAgICBmZXRjaCh0aGlzLnVybCwgewogICAgICAgIHNpZ25hbDogc2lnbmFsCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJvZHk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJiKSB7CiAgICAgICAgdmFyIHJlYWRlciA9IHJiID09PSBudWxsIHx8IHJiID09PSB2b2lkIDAgPyB2b2lkIDAgOiByYi5nZXRSZWFkZXIoKTsKICAgICAgICB2YXIgaGVhZGVycyA9ICcnOwogICAgICAgIHZhciBjb250ZW50TGVuZ3RoID0gLTE7CiAgICAgICAgdmFyIGltYWdlQnVmZmVyID0gbnVsbDsKICAgICAgICB2YXIgYnl0ZXNSZWFkID0gMDsKICAgICAgICB2YXIgaW1nID0gX3RoaXMyLiRyZWZzLmltYWdlOyAvLyBjYWxjdWxhdGluZyBmcHMuIFRoaXMgaXMgcHJldHR5IGxhbWUuIFNob3VsZCBwcm9iYWJseSBpbXBsZW1lbnQgYSBmbG9hdGluZyB3aW5kb3cgZnVuY3Rpb24uCgogICAgICAgIHZhciBmcmFtZXMgPSAwOwogICAgICAgIF90aGlzMi50aW1lckZQUyA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi5jdXJyZW50RlBTID0gZnJhbWVzOwogICAgICAgICAgZnJhbWVzID0gMDsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICBfdGhpczIudGltZXJSZXN0YXJ0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnJlc3RhcnRTdHJlYW0oKTsKICAgICAgICB9LCA2MDAwMCk7CiAgICAgICAgX3RoaXMyLnN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7CiAgICAgICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoY29udHJvbGxlcikgewogICAgICAgICAgICByZXR1cm4gcHVtcCgpOyAvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9uIGhhbmRsZXMgZWFjaCBkYXRhIGNodW5rCgogICAgICAgICAgICBmdW5jdGlvbiBwdW1wKCkgewogICAgICAgICAgICAgIC8vICJkb25lIiBpcyBhIEJvb2xlYW4gYW5kIHZhbHVlIGEgIlVpbnQ4QXJyYXkiCiAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlciA9PT0gbnVsbCB8fCByZWFkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlYWRlci5yZWFkKCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgICAgICAgdmFyIGRvbmUgPSBfcmVmLmRvbmUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmLnZhbHVlOwoKICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIG1vcmUgZGF0YSB0byByZWFkCiAgICAgICAgICAgICAgICBpZiAoZG9uZSkgewogICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ2RvbmUnKTsKICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpOwogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IC8vIEdldCB0aGUgZGF0YSBhbmQgc2VuZCBpdCB0byB0aGUgYnJvd3NlciB2aWEgdGhlIGNvbnRyb2xsZXIKCgogICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTsKCiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHZhbHVlLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIGZvdW5kIHN0YXJ0IG9mIHRoZSBmcmFtZS4gRXZlcnl0aGluZyB3ZSd2ZSByZWFkIHRpbGwgbm93IGlzIHRoZSBoZWFkZXIuCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlW2luZGV4XSA9PT0gU09JWzBdICYmIHZhbHVlW2luZGV4ICsgMV0gPT09IFNPSVsxXSkgewogICAgICAgICAgICAgICAgICAgICAgY29udGVudExlbmd0aCA9IGdldExlbmd0aChoZWFkZXJzKTsKICAgICAgICAgICAgICAgICAgICAgIGltYWdlQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkobmV3IEFycmF5QnVmZmVyKGNvbnRlbnRMZW5ndGgpKTsKICAgICAgICAgICAgICAgICAgICB9IC8vIHdlJ3JlIHN0aWxsIHJlYWRpbmcgdGhlIGhlYWRlci4KCgogICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50TGVuZ3RoIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh2YWx1ZVtpbmRleF0pOwogICAgICAgICAgICAgICAgICAgIH0gLy8gd2UncmUgbm93IHJlYWRpbmcgdGhlIGpwZWcuCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYnl0ZXNSZWFkIDwgY29udGVudExlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgaW1hZ2VCdWZmZXJbYnl0ZXNSZWFkKytdID0gdmFsdWVbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIH0gLy8gd2UncmUgZG9uZSByZWFkaW5nIHRoZSBqcGVnLiBUaW1lIHRvIHJlbmRlciBpdC4KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtpbWFnZUJ1ZmZlcl0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVFlQRV9KUEVHCiAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICBmcmFtZXMrKzsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMZW5ndGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgYnl0ZXNSZWFkID0gMDsKICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInZpc2liaWxpdHlDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlZChpc1Zpc2libGUpIHsKICAgICAgdGhpcy5pc1Zpc2libGUgPSBpc1Zpc2libGU7CgogICAgICBpZiAoaXNWaXNpYmxlKSB7CiAgICAgICAgdGhpcy5zdGFydFN0cmVhbSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RvcFN0cmVhbSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYmVmb3JlRGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgICAgdGhpcy5zdG9wU3RyZWFtKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RvcFN0cmVhbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcFN0cmVhbSgpIHsKICAgICAgdmFyIF90aGlzJGNvbnRyb2xsZXIsIF90aGlzJHN0cmVhbTsKCiAgICAgIGlmICh0aGlzLnRpbWVyRlBTKSBjbGVhclRpbWVvdXQodGhpcy50aW1lckZQUyk7CiAgICAgIGlmICh0aGlzLnRpbWVyUmVzdGFydCkgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJSZXN0YXJ0KTsKICAgICAgKF90aGlzJGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXIpID09PSBudWxsIHx8IF90aGlzJGNvbnRyb2xsZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbnRyb2xsZXIuYWJvcnQoKTsKICAgICAgKF90aGlzJHN0cmVhbSA9IHRoaXMuc3RyZWFtKSA9PT0gbnVsbCB8fCBfdGhpcyRzdHJlYW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0cmVhbS5jYW5jZWwoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXN0YXJ0U3RyZWFtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVzdGFydFN0cmVhbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLnN0b3BTdHJlYW0oKTsKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRTdHJlYW0oKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlc3RhcnRTdHJlYW0oKSB7CiAgICAgICAgcmV0dXJuIF9yZXN0YXJ0U3RyZWFtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN0YXJ0U3RyZWFtOwogICAgfSgpCiAgfSwgewogICAga2V5OiAidXJsQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXJsQ2hhbmdlZCgpIHsKICAgICAgdGhpcy5yZXN0YXJ0U3RyZWFtKCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWpwZWdzdHJlYW1lcjsKfShNaXhpbnMoQmFzZU1peGluKSk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICByZXF1aXJlZDogdHJ1ZQp9KV0sIE1qcGVnc3RyZWFtZXIucHJvdG90eXBlLCAiY2FtU2V0dGluZ3MiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgTWpwZWdzdHJlYW1lci5wcm90b3R5cGUsICJwcmludGVyVXJsIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoewogIGRlZmF1bHQ6IHRydWUKfSldLCBNanBlZ3N0cmVhbWVyLnByb3RvdHlwZSwgInNob3dGcHMiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3VybCcpXSwgTWpwZWdzdHJlYW1lci5wcm90b3R5cGUsICJ1cmxDaGFuZ2VkIiwgbnVsbCk7CgpNanBlZ3N0cmVhbWVyID0gX19kZWNvcmF0ZShbQ29tcG9uZW50XSwgTWpwZWdzdHJlYW1lcik7CmV4cG9ydCBkZWZhdWx0IE1qcGVnc3RyZWFtZXI7"},null]}