{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/timelapse/actions.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/timelapse/actions.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIGNvbW1pdCgncmVzZXQnKTsKICB9LAogIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICBWdWUuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnRpbWVsYXBzZS5nZXRfc2V0dGluZ3MnLCB7fSwgewogICAgICBhY3Rpb246ICdzZXJ2ZXIvdGltZWxhcHNlL2luaXRTZXR0aW5ncycKICAgIH0pOwogICAgVnVlLiRzb2NrZXQuZW1pdCgnbWFjaGluZS50aW1lbGFwc2UubGFzdGZyYW1laW5mbycsIHt9LCB7CiAgICAgIGFjdGlvbjogJ3NlcnZlci90aW1lbGFwc2UvaW5pdExhc3RGcmFtZWluZm8nCiAgICB9KTsKICB9LAogIGluaXRTZXR0aW5nczogZnVuY3Rpb24gaW5pdFNldHRpbmdzKF9yZWYyLCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgaWYgKCdyZXF1ZXN0UGFyYW1zJyBpbiBwYXlsb2FkKSBkZWxldGUgcGF5bG9hZC5yZXF1ZXN0UGFyYW1zOwogICAgY29tbWl0KCdzZXRTZXR0aW5ncycsIHBheWxvYWQpOwogIH0sCiAgaW5pdExhc3RGcmFtZWluZm86IGZ1bmN0aW9uIGluaXRMYXN0RnJhbWVpbmZvKF9yZWYzLCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgY29tbWl0KCdzZXRMYXN0RnJhbWUnLCB7CiAgICAgIGNvdW50OiBwYXlsb2FkLmZyYW1lY291bnQsCiAgICAgIGZpbGU6IHBheWxvYWQubGFzdGZyYW1lZmlsZQogICAgfSk7CiAgfSwKICBnZXRFdmVudDogZnVuY3Rpb24gZ2V0RXZlbnQoX3JlZjQsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CgogICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvbikgewogICAgICBjYXNlICduZXdmcmFtZSc6CiAgICAgICAgY29tbWl0KCdzZXRMYXN0RnJhbWUnLCB7CiAgICAgICAgICBjb3VudDogcGFyc2VJbnQocGF5bG9hZC5mcmFtZSksCiAgICAgICAgICBmaWxlOiBwYXlsb2FkLmZyYW1lZmlsZQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAncmVuZGVyJzoKICAgICAgICBpZiAocGF5bG9hZC5zdGF0dXMgPT09ICdlcnJvcicpIHsKICAgICAgICAgIFZ1ZS4kdG9hc3QuZXJyb3IocGF5bG9hZC5tc2cpOwogICAgICAgICAgY29tbWl0KCdyZXNldFNuYWNrYmFyJyk7CiAgICAgICAgfSBlbHNlIGNvbW1pdCgnc2V0UmVuZGVyU3RhdHVzJywgcGF5bG9hZCk7CgogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ3Vua25vd24gdGltZWxhcHNlIGV2ZW50JywgcGF5bG9hZCk7CiAgICB9CiAgfSwKICBzYXZlU2V0dGluZzogZnVuY3Rpb24gc2F2ZVNldHRpbmcoX3JlZjUsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICBWdWUuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnRpbWVsYXBzZS5wb3N0X3NldHRpbmdzJywgcGF5bG9hZCwgewogICAgICBhY3Rpb246ICdzZXJ2ZXIvdGltZWxhcHNlL2luaXRTZXR0aW5ncycKICAgIH0pOwogIH0sCiAgcmVzZXRTbmFja2JhcjogZnVuY3Rpb24gcmVzZXRTbmFja2JhcihfcmVmNikgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIGNvbW1pdCgncmVzZXRTbmFja2JhcicpOwogIH0KfTs="},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/timelapse/actions.ts"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAAgB,KAAhB;AAKA,OAAO,IAAM,OAAO,GAAgD;AAChE,EAAA,KADgE,uBAChD;AAAA,QAAR,MAAQ,QAAR,MAAQ;AACZ,IAAA,MAAM,CAAC,OAAD,CAAN;AACH,GAH+D;AAKhE,EAAA,IALgE,kBAK5D;AACA,IAAA,GAAG,CAAC,OAAJ,CAAY,IAAZ,CAAiB,gCAAjB,EAAmD,EAAnD,EAAuD;AAAE,MAAA,MAAM,EAAE;AAAV,KAAvD;AACA,IAAA,GAAG,CAAC,OAAJ,CAAY,IAAZ,CAAiB,iCAAjB,EAAoD,EAApD,EAAwD;AAAE,MAAA,MAAM,EAAE;AAAV,KAAxD;AACH,GAR+D;AAUhE,EAAA,YAVgE,+BAUvC,OAVuC,EAUhC;AAAA,QAAjB,MAAiB,SAAjB,MAAiB;AAC5B,QAAI,mBAAmB,OAAvB,EAAgC,OAAO,OAAO,CAAC,aAAf;AAEhC,IAAA,MAAM,CAAC,aAAD,EAAgB,OAAhB,CAAN;AACH,GAd+D;AAgBhE,EAAA,iBAhBgE,oCAgBlC,OAhBkC,EAgB3B;AAAA,QAAjB,MAAiB,SAAjB,MAAiB;AACjC,IAAA,MAAM,CAAC,cAAD,EAAiB;AACnB,MAAA,KAAK,EAAE,OAAO,CAAC,UADI;AAEnB,MAAA,IAAI,EAAE,OAAO,CAAC;AAFK,KAAjB,CAAN;AAIH,GArB+D;AAuBhE,EAAA,QAvBgE,2BAuB3C,OAvB2C,EAuBpC;AAAA,QAAjB,MAAiB,SAAjB,MAAiB;;AACxB,YAAO,OAAO,CAAC,MAAf;AACA,WAAK,UAAL;AACI,QAAA,MAAM,CAAC,cAAD,EAAiB;AACnB,UAAA,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,KAAT,CADI;AAEnB,UAAA,IAAI,EAAE,OAAO,CAAC;AAFK,SAAjB,CAAN;AAIA;;AAEJ,WAAK,QAAL;AACI,YAAI,OAAO,CAAC,MAAR,KAAmB,OAAvB,EAAgC;AAC5B,UAAA,GAAG,CAAC,MAAJ,CAAW,KAAX,CAAiB,OAAO,CAAC,GAAzB;AACA,UAAA,MAAM,CAAC,eAAD,CAAN;AACH,SAHD,MAGO,MAAM,CAAC,iBAAD,EAAoB,OAApB,CAAN;;AACP;;AAEJ;AACI,QAAA,MAAM,CAAC,OAAP,CAAe,GAAf,CAAmB,yBAAnB,EAA8C,OAA9C;AAhBJ;AAkBH,GA1C+D;AA4ChE,EAAA,WA5CgE,8BA4CxC,OA5CwC,EA4CjC;AAAA,QAAjB,MAAiB,SAAjB,MAAiB;AAC3B,IAAA,GAAG,CAAC,OAAJ,CAAY,IAAZ,CAAiB,iCAAjB,EAAoD,OAApD,EAA6D;AAAE,MAAA,MAAM,EAAE;AAAV,KAA7D;AACH,GA9C+D;AAgDhE,EAAA,aAhDgE,gCAgDxC;AAAA,QAAR,MAAQ,SAAR,MAAQ;AACpB,IAAA,MAAM,CAAC,eAAD,CAAN;AACH;AAlD+D,CAA7D","sourcesContent":["import Vue from 'vue'\nimport { ActionTree } from 'vuex'\nimport { ServerTimelapseState } from '@/store/server/timelapse/types'\nimport {RootState} from '@/store/types'\n\nexport const actions: ActionTree<ServerTimelapseState, RootState> = {\n    reset({ commit }) {\n        commit('reset')\n    },\n\n    init() {\n        Vue.$socket.emit('machine.timelapse.get_settings', {}, { action: 'server/timelapse/initSettings'})\n        Vue.$socket.emit('machine.timelapse.lastframeinfo', {}, { action: 'server/timelapse/initLastFrameinfo'})\n    },\n\n    initSettings({ commit }, payload) {\n        if ('requestParams' in payload) delete payload.requestParams\n\n        commit('setSettings', payload)\n    },\n\n    initLastFrameinfo({ commit }, payload) {\n        commit('setLastFrame', {\n            count: payload.framecount,\n            file: payload.lastframefile\n        })\n    },\n\n    getEvent({ commit }, payload) {\n        switch(payload.action) {\n        case 'newframe':\n            commit('setLastFrame', {\n                count: parseInt(payload.frame),\n                file: payload.framefile\n            })\n            break\n\n        case 'render':\n            if (payload.status === 'error') {\n                Vue.$toast.error(payload.msg)\n                commit('resetSnackbar')\n            } else commit('setRenderStatus', payload)\n            break\n\n        default:\n            window.console.log('unknown timelapse event', payload)\n        }\n    },\n\n    saveSetting({ commit }, payload) {\n        Vue.$socket.emit('machine.timelapse.post_settings', payload, { action: 'server/timelapse/initSettings' })\n    },\n\n    resetSnackbar({ commit }) {\n        commit('resetSnackbar')\n    }\n}"],"sourceRoot":""}]}