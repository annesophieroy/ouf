{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-3!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/GcodefilesPanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/GcodefilesPanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBNaXhpbnMsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnQC9jb21wb25lbnRzL21peGlucy9iYXNlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdGh1bWJuYWlsU21hbGxNaW4sIHRodW1ibmFpbFNtYWxsTWF4LCB0aHVtYm5haWxCaWdNaW4sIHZhbGlkR2NvZGVFeHRlbnNpb25zIH0gZnJvbSAnQC9zdG9yZS92YXJpYWJsZXMnOwppbXBvcnQgeyBmb3JtYXRGaWxlc2l6ZSwgZm9ybWF0RGF0ZSwgc29ydEZpbGVzLCBmb3JtYXRQcmludFRpbWUgfSBmcm9tICdAL3BsdWdpbnMvaGVscGVycyc7CmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJzsKaW1wb3J0IFNldHRpbmdzUm93IGZyb20gJ0AvY29tcG9uZW50cy9zZXR0aW5ncy9TZXR0aW5nc1Jvdy52dWUnOwoKdmFyIEdjb2RlZmlsZXNQYW5lbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX01peGlucykgewogIF9pbmhlcml0cyhHY29kZWZpbGVzUGFuZWwsIF9NaXhpbnMpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEdjb2RlZmlsZXNQYW5lbCk7CgogIGZ1bmN0aW9uIEdjb2RlZmlsZXNQYW5lbCgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2NvZGVmaWxlc1BhbmVsKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChhcmdzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidmFsaWRHY29kZUV4dGVuc2lvbnMiLCB2YWxpZEdjb2RlRXh0ZW5zaW9ucyk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZm9ybWF0RGF0ZSIsIGZvcm1hdERhdGUpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImZvcm1hdEZpbGVzaXplIiwgZm9ybWF0RmlsZXNpemUpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImZvcm1hdFByaW50VGltZSIsIGZvcm1hdFByaW50VGltZSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic29ydEZpbGVzIiwgc29ydEZpbGVzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICIkcmVmcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiVGltZWxhcHNlTW9kZU9wdGlvbnMiLCBbewogICAgICB0ZXh0OiAnbGF5ZXJtYWNybycsCiAgICAgIHZhbHVlOiAnbGF5ZXJtYWNybycKICAgIH0sIHsKICAgICAgdGV4dDogJ2h5cGVybGFwc2UnLAogICAgICB2YWx1ZTogJ2h5cGVybGFwc2UnCiAgICB9XSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2VhcmNoIiwgJycpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNlbGVjdGVkIiwgW10pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhpZGVIZWFkZXJDb2x1bXMiLCBbXSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZHJvcHpvbmUiLCB7CiAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLAogICAgICBvcGFjaXR5OiAwCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkcmFnZ2luZ0ZpbGUiLCB7CiAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ1cGxvYWRTbmFja2JhciIsIHsKICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgZmlsZW5hbWU6ICcnLAogICAgICBwZXJjZW50OiAwLAogICAgICBzcGVlZDogMCwKICAgICAgdG90YWw6IDAsCiAgICAgIG51bWJlcjogMCwKICAgICAgbWF4OiAwLAogICAgICBjYW5jZWxUb2tlblNvdXJjZToge30sCiAgICAgIGxhc3RQcm9ncmVzczogewogICAgICAgIHRpbWU6IDAsCiAgICAgICAgbG9hZGVkOiAwCiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRpYWxvZ0NyZWF0ZURpcmVjdG9yeSIsIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIG5hbWU6ICcnCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjb250ZXh0TWVudSIsIHsKICAgICAgc2hvd246IGZhbHNlLAogICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgIHRvdWNoVGltZXI6IHVuZGVmaW5lZCwKICAgICAgeDogMCwKICAgICAgeTogMCwKICAgICAgaXRlbTogewogICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICBmaWxlbmFtZTogJycsCiAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRpYWxvZ1ByaW50RmlsZSIsIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkaWFsb2dSZW5hbWVGaWxlIiwgewogICAgICBzaG93OiBmYWxzZSwKICAgICAgbmV3TmFtZTogJycsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkaWFsb2dSZW5hbWVEaXJlY3RvcnkiLCB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBuZXdOYW1lOiAnJywKICAgICAgaXRlbTogewogICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICBmaWxlbmFtZTogJycsCiAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImRpYWxvZ0RlbGV0ZURpcmVjdG9yeSIsIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIG5ld05hbWU6ICcnLAogICAgICBpdGVtOiB7CiAgICAgICAgaXNEaXJlY3Rvcnk6IGZhbHNlLAogICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgbW9kaWZpZWQ6IG5ldyBEYXRlKCkKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaW5wdXRfcnVsZXMiLCBbZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKCcgJykgPT09IC0xIHx8ICdOYW1lIGNvbnRhaW5zIHNwYWNlcyEnOwogICAgfV0pOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhHY29kZWZpbGVzUGFuZWwsIFt7CiAgICBrZXk6ICJjdXJyZW50UGF0aCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3Lmdjb2RlZmlsZXMuY3VycmVudFBhdGg7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmdXaXRob3V0VXBsb2FkJywgewogICAgICAgIG5hbWU6ICd2aWV3Lmdjb2RlZmlsZXMuY3VycmVudFBhdGgnLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGVhZGVycyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaGVhZGVycyA9IFt7CiAgICAgICAgdGV4dDogJycsCiAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIGFsaWduOiAnbGVmdCcsCiAgICAgICAgY29uZmlnYWJsZTogZmFsc2UsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBmaWx0ZXJhYmxlOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnRmlsZXMuTmFtZScpLAogICAgICAgIHZhbHVlOiAnZmlsZW5hbWUnLAogICAgICAgIGFsaWduOiAnbGVmdCcsCiAgICAgICAgY29uZmlnYWJsZTogZmFsc2UsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJycsCiAgICAgICAgdmFsdWU6ICdzdGF0dXMnLAogICAgICAgIGFsaWduOiAnbGVmdCcsCiAgICAgICAgY29uZmlnYWJsZTogZmFsc2UsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnRmlsZXMuRmlsZXNpemUnKSwKICAgICAgICB2YWx1ZTogJ3NpemUnLAogICAgICAgIGFsaWduOiAncmlnaHQnLAogICAgICAgIGNvbmZpZ2FibGU6IHRydWUsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnRmlsZXMuTGFzdE1vZGlmaWVkJyksCiAgICAgICAgdmFsdWU6ICdtb2RpZmllZCcsCiAgICAgICAgYWxpZ246ICdyaWdodCcsCiAgICAgICAgY29uZmlnYWJsZTogdHJ1ZSwKICAgICAgICB2aXNpYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdGaWxlcy5PYmplY3RIZWlnaHQnKSwKICAgICAgICB2YWx1ZTogJ29iamVjdF9oZWlnaHQnLAogICAgICAgIGFsaWduOiAncmlnaHQnLAogICAgICAgIGNvbmZpZ2FibGU6IHRydWUsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnRmlsZXMuTGF5ZXJIZWlnaHQnKSwKICAgICAgICB2YWx1ZTogJ2xheWVyX2hlaWdodCcsCiAgICAgICAgYWxpZ246ICdyaWdodCcsCiAgICAgICAgY29uZmlnYWJsZTogdHJ1ZSwKICAgICAgICB2aXNpYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdGaWxlcy5Ob3p6bGVEaWFtZXRlcicpLAogICAgICAgIHZhbHVlOiAnbm96emxlX2RpYW1ldGVyJywKICAgICAgICBhbGlnbjogJ3JpZ2h0JywKICAgICAgICBjb25maWdhYmxlOiB0cnVlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMuJHQoJ0ZpbGVzLkZpbGFtZW50TmFtZScpLAogICAgICAgIHZhbHVlOiAnZmlsYW1lbnRfbmFtZScsCiAgICAgICAgYWxpZ246ICdyaWdodCcsCiAgICAgICAgY29uZmlnYWJsZTogdHJ1ZSwKICAgICAgICB2aXNpYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdGaWxlcy5GaWxhbWVudFR5cGUnKSwKICAgICAgICB2YWx1ZTogJ2ZpbGFtZW50X3R5cGUnLAogICAgICAgIGFsaWduOiAncmlnaHQnLAogICAgICAgIGNvbmZpZ2FibGU6IHRydWUsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnRmlsZXMuRmlsYW1lbnRVc2FnZScpLAogICAgICAgIHZhbHVlOiAnZmlsYW1lbnRfdG90YWwnLAogICAgICAgIGFsaWduOiAncmlnaHQnLAogICAgICAgIGNvbmZpZ2FibGU6IHRydWUsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnRmlsZXMuRmlsYW1lbnRXZWlnaHQnKSwKICAgICAgICB2YWx1ZTogJ2ZpbGFtZW50X3dlaWdodF90b3RhbCcsCiAgICAgICAgYWxpZ246ICdyaWdodCcsCiAgICAgICAgY29uZmlnYWJsZTogdHJ1ZSwKICAgICAgICB2aXNpYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdGaWxlcy5QcmludFRpbWUnKSwKICAgICAgICB2YWx1ZTogJ2VzdGltYXRlZF90aW1lJywKICAgICAgICBhbGlnbjogJ3JpZ2h0JywKICAgICAgICBjb25maWdhYmxlOiB0cnVlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMuJHQoJ0ZpbGVzLlNsaWNlcicpLAogICAgICAgIHZhbHVlOiAnc2xpY2VyJywKICAgICAgICBhbGlnbjogJ3JpZ2h0JywKICAgICAgICBjb25maWdhYmxlOiB0cnVlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfV07CiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICAgICAgaWYgKGhlYWRlci52aXNpYmxlICYmIF90aGlzMi5oaWRlTWV0YWRhdGFDb2x1bXMuaW5jbHVkZXMoaGVhZGVyLnZhbHVlKSkgewogICAgICAgICAgaGVhZGVyLnZpc2libGUgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKCFoZWFkZXIudmlzaWJsZSAmJiAhX3RoaXMyLmhpZGVNZXRhZGF0YUNvbHVtcy5pbmNsdWRlcyhoZWFkZXIudmFsdWUpKSB7CiAgICAgICAgICBoZWFkZXIudmlzaWJsZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGhlYWRlcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlyZWN0b3J5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snZmlsZXMvZ2V0RGlyZWN0b3J5J10odGhpcy5jdXJyZW50UGF0aCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlza191c2FnZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJGRpcmVjdG9yeSRkaXNrXywgX3RoaXMkZGlyZWN0b3J5OwoKICAgICAgcmV0dXJuIChfdGhpcyRkaXJlY3RvcnkkZGlza18gPSAoX3RoaXMkZGlyZWN0b3J5ID0gdGhpcy5kaXJlY3RvcnkpID09PSBudWxsIHx8IF90aGlzJGRpcmVjdG9yeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZGlyZWN0b3J5LmRpc2tfdXNhZ2UpICE9PSBudWxsICYmIF90aGlzJGRpcmVjdG9yeSRkaXNrXyAhPT0gdm9pZCAwID8gX3RoaXMkZGlyZWN0b3J5JGRpc2tfIDogewogICAgICAgIHVzZWQ6IDAsCiAgICAgICAgZnJlZTogMCwKICAgICAgICB0b3RhbDogMAogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImZpbGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkZGlyZWN0b3J5JGNoaWxkLAogICAgICAgICAgX3RoaXMkZGlyZWN0b3J5MiwKICAgICAgICAgIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZmlsZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkoKF90aGlzJGRpcmVjdG9yeSRjaGlsZCA9IChfdGhpcyRkaXJlY3RvcnkyID0gdGhpcy5kaXJlY3RvcnkpID09PSBudWxsIHx8IF90aGlzJGRpcmVjdG9yeTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRpcmVjdG9yeTIuY2hpbGRyZW5zKSAhPT0gbnVsbCAmJiBfdGhpcyRkaXJlY3RvcnkkY2hpbGQgIT09IHZvaWQgMCA/IF90aGlzJGRpcmVjdG9yeSRjaGlsZCA6IFtdKTsKCiAgICAgIGlmICghdGhpcy5zaG93SGlkZGVuRmlsZXMpIHsKICAgICAgICBmaWxlcyA9IGZpbGVzLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkgewogICAgICAgICAgcmV0dXJuIGZpbGUuZmlsZW5hbWUgIT09ICd0aHVtYnMnICYmIGZpbGUuZmlsZW5hbWUuc3Vic3RyKDAsIDEpICE9PSAnLic7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5zaG93UHJpbnRlZEZpbGVzKSB7CiAgICAgICAgZmlsZXMgPSBmaWxlcy5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5KSByZXR1cm4gdHJ1ZTtlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMy4kc3RvcmUuZ2V0dGVyc1snc2VydmVyL2hpc3RvcnkvZ2V0UHJpbnRTdGF0dXNCeUZpbGVuYW1lJ10oKF90aGlzMy5jdXJyZW50UGF0aCArICcvJyArIGZpbGUuZmlsZW5hbWUpLnN1YnN0cig3KSwgZmlsZS5tb2RpZmllZC5nZXRUaW1lKCkpICE9PSAnY29tcGxldGVkJzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZpbGVzOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbmZpZ0hlYWRlcnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmhlYWRlcnMuZmlsdGVyKGZ1bmN0aW9uIChoZWFkZXIpIHsKICAgICAgICByZXR1cm4gaGVhZGVyLmNvbmZpZ2FibGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZpbHRlcmVkSGVhZGVycyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiBoZWFkZXIudmlzaWJsZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGlkZU1ldGFkYXRhQ29sdW1zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuZ2NvZGVmaWxlcy5oaWRlTWV0YWRhdGFDb2x1bXM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ3ZpZXcuZ2NvZGVmaWxlcy5oaWRlTWV0YWRhdGFDb2x1bXMnLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd0hpZGRlbkZpbGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuZ2NvZGVmaWxlcy5zaG93SGlkZGVuRmlsZXM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ3ZpZXcuZ2NvZGVmaWxlcy5zaG93SGlkZGVuRmlsZXMnLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd1ByaW50ZWRGaWxlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3Lmdjb2RlZmlsZXMuc2hvd1ByaW50ZWRGaWxlczsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAndmlldy5nY29kZWZpbGVzLnNob3dQcmludGVkRmlsZXMnLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic29ydEJ5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuZ2NvZGVmaWxlcy5zb3J0Qnk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkgbmV3VmFsID0gJ21vZGlmaWVkJzsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAndmlldy5nY29kZWZpbGVzLnNvcnRCeScsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzb3J0RGVzYyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3Lmdjb2RlZmlsZXMuc29ydERlc2M7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkgbmV3VmFsID0gZmFsc2U7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ3ZpZXcuZ2NvZGVmaWxlcy5zb3J0RGVzYycsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb3VudFBlclBhZ2UiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudmlldy5nY29kZWZpbGVzLmNvdW50UGVyUGFnZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAndmlldy5nY29kZWZpbGVzLmNvdW50UGVyUGFnZScsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0aW1lbGFwc2VFbmFibGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJHNlLCBfdGhpcyQkc3RvcmUkc3RhdGUkc2UyLCBfdGhpcyQkc3RvcmUkc3RhdGUkc2UzOwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkc2UgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJHNlMiA9IHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlci50aW1lbGFwc2UpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRzZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyQkc3RvcmUkc3RhdGUkc2UzID0gX3RoaXMkJHN0b3JlJHN0YXRlJHNlMi5zZXR0aW5ncykgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHNlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJHNlMy5lbmFibGVkKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkc2UgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRzZSA6IGZhbHNlOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnbWFjaGluZS50aW1lbGFwc2UucG9zdF9zZXR0aW5ncycsIHsKICAgICAgICBlbmFibGVkOiBuZXdWYWwKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ3NlcnZlci90aW1lbGFwc2UvaW5pdFNldHRpbmdzJwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRKb2JTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEpvYlN0YXR1cyhpdGVtKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydzZXJ2ZXIvaGlzdG9yeS9nZXRQcmludFN0YXR1cyddKGl0ZW0uam9iX2lkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTdGF0dXNJY29uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdGF0dXNJY29uKHN0YXR1cykgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snc2VydmVyL2hpc3RvcnkvZ2V0UHJpbnRTdGF0dXNDaGlwSWNvbiddKHN0YXR1cyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U3RhdHVzQ29sb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0YXR1c0NvbG9yKHN0YXR1cykgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snc2VydmVyL2hpc3RvcnkvZ2V0UHJpbnRTdGF0dXNDaGlwQ29sb3InXShzdGF0dXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImRyYWdPdmVyVXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnT3ZlclVwbG9hZChlKSB7CiAgICAgIGlmICghdGhpcy5kcmFnZ2luZ0ZpbGUuc3RhdHVzKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy5kcm9wem9uZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOwogICAgICAgIHRoaXMuZHJvcHpvbmUub3BhY2l0eSA9IDE7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmFnTGVhdmVVcGxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYWdMZWF2ZVVwbG9hZChlKSB7CiAgICAgIGlmICghdGhpcy5kcmFnZ2luZ0ZpbGUuc3RhdHVzKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy5kcm9wem9uZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7CiAgICAgICAgdGhpcy5kcm9wem9uZS5vcGFjaXR5ID0gMDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRyYWdEcm9wVXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZHJhZ0Ryb3BVcGxvYWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZSkgewogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICB2YXIgZmlsZXMsIHN1Y2Nlc3NGaWxlcywgX2l0ZXJhdG9yLCBfc3RlcCwgX2ZpbGUsIHJlc3VsdCwgX2ksIF9zdWNjZXNzRmlsZXMsIGZpbGU7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB0aGlzLmRyb3B6b25lLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgIHRoaXMuZHJvcHpvbmUub3BhY2l0eSA9IDA7CgogICAgICAgICAgICAgICAgaWYgKCFlLmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmaWxlcyA9IF90b0NvbnN1bWFibGVBcnJheShlLmRhdGFUcmFuc2Zlci5maWxlcykuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXQgPSBmaWxlLm5hbWUuc2xpY2UoZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykpOwoKICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZEdjb2RlRXh0ZW5zaW9ucy5pbmNsdWRlcyhmb3JtYXQpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LiR0b2FzdC5lcnJvcihfdGhpczQuJHQoJ0ZpbGVzLldyb25nRmlsZVVwbG9hZGVkJywgewogICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGUubmFtZQogICAgICAgICAgICAgICAgICAgIH0pLnRvU3RyaW5nKCkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc29ja2V0L2FkZExvYWRpbmcnLCB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdnY29kZVVwbG9hZCcKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc3VjY2Vzc0ZpbGVzID0gW107CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLm51bWJlciA9IDA7CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLm1heCA9IGZpbGVzLmxlbmd0aDsKICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGZpbGVzKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IucygpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfZmlsZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5udW1iZXIrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvVXBsb2FkRmlsZShfZmlsZSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgc3VjY2Vzc0ZpbGVzLnB1c2gocmVzdWx0KTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDExKTsKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjc7CgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDI3KTsKCiAgICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvcmVtb3ZlTG9hZGluZycsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2djb2RlVXBsb2FkJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9zdWNjZXNzRmlsZXMgPSBzdWNjZXNzRmlsZXM7IF9pIDwgX3N1Y2Nlc3NGaWxlcy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAgZmlsZSA9IF9zdWNjZXNzRmlsZXNbX2ldOwogICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdC5zdWNjZXNzKHRoaXMuJHQoJ0ZpbGVzLlN1Y2Nlc3NmdWxseVVwbG9hZGVkJywgewogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlCiAgICAgICAgICAgICAgICAgIH0pLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1sxMSwgMjQsIDI3LCAzMF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZHJhZ0Ryb3BVcGxvYWQoX3gpIHsKICAgICAgICByZXR1cm4gX2RyYWdEcm9wVXBsb2FkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkcmFnRHJvcFVwbG9hZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRvVXBsb2FkRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG9VcGxvYWRGaWxlKGZpbGUpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lOwogICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLmZpbGVuYW1lID0gZmlsZW5hbWU7CiAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIuc3RhdHVzID0gdHJ1ZTsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5wZXJjZW50ID0gMDsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5zcGVlZCA9IDA7CiAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLmxvYWRlZCA9IDA7CiAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLnRpbWUgPSAwOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlLCAodGhpcy5jdXJyZW50UGF0aCArICcvJyArIGZpbGVuYW1lKS5zdWJzdHJpbmcoNykpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBfdGhpczUudXBsb2FkU25hY2tiYXIuY2FuY2VsVG9rZW5Tb3VyY2UgPSBheGlvcy5DYW5jZWxUb2tlbi5zb3VyY2UoKTsKICAgICAgICBheGlvcy5wb3N0KF90aGlzNS5hcGlVcmwgKyAnL3NlcnZlci9maWxlcy91cGxvYWQnLCBmb3JtRGF0YSwgewogICAgICAgICAgY2FuY2VsVG9rZW46IF90aGlzNS51cGxvYWRTbmFja2Jhci5jYW5jZWxUb2tlblNvdXJjZS50b2tlbiwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfSwKICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uIG9uVXBsb2FkUHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCkgewogICAgICAgICAgICBfdGhpczUudXBsb2FkU25hY2tiYXIucGVyY2VudCA9IHByb2dyZXNzRXZlbnQubG9hZGVkICogMTAwIC8gcHJvZ3Jlc3NFdmVudC50b3RhbDsKCiAgICAgICAgICAgIGlmIChfdGhpczUudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLnRpbWUpIHsKICAgICAgICAgICAgICB2YXIgdGltZSA9IHByb2dyZXNzRXZlbnQudGltZVN0YW1wIC0gX3RoaXM1LnVwbG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy50aW1lOwogICAgICAgICAgICAgIHZhciBkYXRhID0gcHJvZ3Jlc3NFdmVudC5sb2FkZWQgLSBfdGhpczUudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLmxvYWRlZDsKICAgICAgICAgICAgICBpZiAodGltZSkgX3RoaXM1LnVwbG9hZFNuYWNrYmFyLnNwZWVkID0gZGF0YSAvICh0aW1lIC8gMTAwMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzNS51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MudGltZSA9IHByb2dyZXNzRXZlbnQudGltZVN0YW1wOwogICAgICAgICAgICBfdGhpczUudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLmxvYWRlZCA9IHByb2dyZXNzRXZlbnQubG9hZGVkOwogICAgICAgICAgICBfdGhpczUudXBsb2FkU25hY2tiYXIudG90YWwgPSBwcm9ncmVzc0V2ZW50LnRvdGFsOwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgdmFyIGZpbGVuYW1lID0gcmVzdWx0LmRhdGEuaXRlbS5wYXRoLnN1YnN0cihyZXN1bHQuZGF0YS5pdGVtLnBhdGguaW5kZXhPZignLycpICsgMSk7CiAgICAgICAgICBfdGhpczUudXBsb2FkU25hY2tiYXIuc3RhdHVzID0gZmFsc2U7CiAgICAgICAgICByZXNvbHZlKGZpbGVuYW1lKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczUudXBsb2FkU25hY2tiYXIuc3RhdHVzID0gZmFsc2U7CgogICAgICAgICAgX3RoaXM1LiRzdG9yZS5kaXNwYXRjaCgnc29ja2V0L3JlbW92ZUxvYWRpbmcnLCB7CiAgICAgICAgICAgIG5hbWU6ICdnY29kZVVwbG9hZCcKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzNS4kdG9hc3QuZXJyb3IoJ0Nhbm5vdCB1cGxvYWQgdGhlIGZpbGUhJyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImRyYWdPdmVyRmlsZWxpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYWdPdmVyRmlsZWxpc3QoZSwgcm93KSB7CiAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vZS5zdG9wUHJvcGFnYXRpb24oKQoKICAgICAgICBpZiAocm93LmlzRGlyZWN0b3J5KSB7CiAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNDNBMDQ3MjAnOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRyYWdMZWF2ZUZpbGVsaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnTGVhdmVGaWxlbGlzdChlKSB7CiAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmFnRHJvcEZpbGVsaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZHJhZ0Ryb3BGaWxlbGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZSwgcm93KSB7CiAgICAgICAgdmFyIGRlc3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7CiAgICAgICAgICAgICAgICAgIGRlc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgIGlmIChyb3cuZmlsZW5hbWUgPT09ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBkZXN0ID0gdGhpcy5jdXJyZW50UGF0aC5zdWJzdHJpbmcoMCwgdGhpcy5jdXJyZW50UGF0aC5sYXN0SW5kZXhPZignLycpICsgMSkgKyB0aGlzLmRyYWdnaW5nRmlsZS5pdGVtLmZpbGVuYW1lOwogICAgICAgICAgICAgICAgICB9IGVsc2UgZGVzdCA9IHRoaXMuY3VycmVudFBhdGggKyAnLycgKyByb3cuZmlsZW5hbWUgKyAnLycgKyB0aGlzLmRyYWdnaW5nRmlsZS5pdGVtLmZpbGVuYW1lOwoKICAgICAgICAgICAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5tb3ZlJywgewogICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5jdXJyZW50UGF0aCArICcvJyArIHRoaXMuZHJhZ2dpbmdGaWxlLml0ZW0uZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgZGVzdDogZGVzdAogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0TW92ZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRyYWdEcm9wRmlsZWxpc3QoX3gyLCBfeDMpIHsKICAgICAgICByZXR1cm4gX2RyYWdEcm9wRmlsZWxpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRyYWdEcm9wRmlsZWxpc3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ1cGxvYWRGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBsb2FkRmlsZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIF90aGlzJCRyZWZzJGZpbGVVcGxvYTsKCiAgICAgICAgdmFyIHN1Y2Nlc3NGaWxlcywgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfZmlsZTIsIHJlc3VsdCwgX2kyLCBfc3VjY2Vzc0ZpbGVzMiwgZmlsZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKChfdGhpcyQkcmVmcyRmaWxlVXBsb2EgPSB0aGlzLiRyZWZzLmZpbGVVcGxvYWQuZmlsZXMpICE9PSBudWxsICYmIF90aGlzJCRyZWZzJGZpbGVVcGxvYSAhPT0gdm9pZCAwICYmIF90aGlzJCRyZWZzJGZpbGVVcGxvYS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvYWRkTG9hZGluZycsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2djb2RlVXBsb2FkJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzdWNjZXNzRmlsZXMgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubnVtYmVyID0gMDsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubWF4ID0gdGhpcy4kcmVmcy5maWxlVXBsb2FkLmZpbGVzLmxlbmd0aDsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLiRyZWZzLmZpbGVVcGxvYWQuZmlsZXMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA2OwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIucygpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBpZiAoKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9maWxlMiA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubnVtYmVyKys7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9VcGxvYWRGaWxlKF9maWxlMik7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NGaWxlcy5wdXNoKHJlc3VsdCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oNik7CgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKF9jb250ZXh0My50MCk7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDIyOwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuZmluaXNoKDIyKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvcmVtb3ZlTG9hZGluZycsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2djb2RlVXBsb2FkJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZm9yIChfaTIgPSAwLCBfc3VjY2Vzc0ZpbGVzMiA9IHN1Y2Nlc3NGaWxlczsgX2kyIDwgX3N1Y2Nlc3NGaWxlczIubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICAgICAgICBmaWxlID0gX3N1Y2Nlc3NGaWxlczJbX2kyXTsKICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcyh0aGlzLiR0KCdGaWxlcy5TdWNjZXNzZnVsbHlVcGxvYWRlZCcsIHsKICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZQogICAgICAgICAgICAgICAgICB9KS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZpbGVVcGxvYWQudmFsdWUgPSAnJzsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcywgW1s2LCAxOSwgMjIsIDI1XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGxvYWRGaWxlKCkgewogICAgICAgIHJldHVybiBfdXBsb2FkRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBsb2FkRmlsZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNsaWNrVXBsb2FkQnV0dG9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGlja1VwbG9hZEJ1dHRvbigpIHsKICAgICAgdGhpcy4kcmVmcy5maWxlVXBsb2FkLmNsaWNrKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlRGlyZWN0b3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEaXJlY3RvcnkoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZSA9ICcnOwogICAgICB0aGlzLmRpYWxvZ0NyZWF0ZURpcmVjdG9yeS5zaG93ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzNiQkcmVmcyRpbnB1dEZpZTsKCiAgICAgICAgKF90aGlzNiQkcmVmcyRpbnB1dEZpZSA9IF90aGlzNi4kcmVmcy5pbnB1dEZpZWxkQ3JlYXRlRGlyZWN0b3J5KSA9PT0gbnVsbCB8fCBfdGhpczYkJHJlZnMkaW5wdXRGaWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzNiQkcmVmcyRpbnB1dEZpZS5mb2N1cygpOwogICAgICB9LCAyMDApOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZURpcmVjdG9yeUFjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRGlyZWN0b3J5QWN0aW9uKCkgewogICAgICBpZiAodGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZS5sZW5ndGggJiYgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZS5pbmRleE9mKCcgJykgPT09IC0xKSB7CiAgICAgICAgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3Rvcnkuc2hvdyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMucG9zdF9kaXJlY3RvcnknLCB7CiAgICAgICAgICBwYXRoOiB0aGlzLmN1cnJlbnRQYXRoICsgJy8nICsgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZQogICAgICAgIH0sIHsKICAgICAgICAgIGFjdGlvbjogJ2ZpbGVzL2dldENyZWF0ZURpcicKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlZnJlc2hGaWxlTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaEZpbGVMaXN0KCkgewogICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLmdldF9kaXJlY3RvcnknLCB7CiAgICAgICAgcGF0aDogdGhpcy5jdXJyZW50UGF0aAogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0RGlyZWN0b3J5JwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZHZhbmNlZFNlYXJjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWR2YW5jZWRTZWFyY2godmFsdWUsIHNlYXJjaCkgewogICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBzZWFyY2ggIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaC50b0xvd2VyQ2FzZSgpKSAhPT0gLTE7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVmcmVzaE1ldGFkYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoTWV0YWRhdGEoZGF0YSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBpdGVtcyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgcmV0dXJuICFmaWxlLmlzRGlyZWN0b3J5ICYmICFmaWxlLm1ldGFkYXRhUmVxdWVzdGVkICYmICFmaWxlLm1ldGFkYXRhUHVsbGVkOwogICAgICB9KTsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIF90aGlzNy4kc3RvcmUuZGlzcGF0Y2goJ2ZpbGVzL3JlcXVlc3RNZXRhZGF0YScsIHsKICAgICAgICAgIGZpbGVuYW1lOiBfdGhpczcuY3VycmVudFBhdGggKyAnLycgKyBmaWxlLmZpbGVuYW1lCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMuZ2V0X2RpcmVjdG9yeScsIHsKICAgICAgICBwYXRoOiB0aGlzLmN1cnJlbnRQYXRoCiAgICAgIH0sIHsKICAgICAgICBhY3Rpb246ICdmaWxlcy9nZXREaXJlY3RvcnknCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNtYWxsVGh1bWJuYWlsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTbWFsbFRodW1ibmFpbChpdGVtKSB7CiAgICAgIHZhciBfaXRlbSR0aHVtYm5haWxzOwoKICAgICAgaWYgKChfaXRlbSR0aHVtYm5haWxzID0gaXRlbS50aHVtYm5haWxzKSAhPT0gbnVsbCAmJiBfaXRlbSR0aHVtYm5haWxzICE9PSB2b2lkIDAgJiYgX2l0ZW0kdGh1bWJuYWlscy5sZW5ndGgpIHsKICAgICAgICB2YXIgdGh1bWJuYWlsID0gaXRlbS50aHVtYm5haWxzLmZpbmQoZnVuY3Rpb24gKHRodW1iKSB7CiAgICAgICAgICByZXR1cm4gdGh1bWIud2lkdGggPj0gdGh1bWJuYWlsU21hbGxNaW4gJiYgdGh1bWIud2lkdGggPD0gdGh1bWJuYWlsU21hbGxNYXggJiYgdGh1bWIuaGVpZ2h0ID49IHRodW1ibmFpbFNtYWxsTWluICYmIHRodW1iLmhlaWdodCA8PSB0aHVtYm5haWxTbWFsbE1heDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHRodW1ibmFpbCAmJiAncmVsYXRpdmVfcGF0aCcgaW4gdGh1bWJuYWlsKSB7CiAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KHRoaXMuYXBpVXJsLCAiL3NlcnZlci9maWxlcy8iKS5jb25jYXQoZW5jb2RlVVJJKHRoaXMuY3VycmVudFBhdGgpLCAiLyIpLmNvbmNhdChlbmNvZGVVUkkodGh1bWJuYWlsLnJlbGF0aXZlX3BhdGgpLCAiP3RpbWVzdGFtcD0iKS5jb25jYXQoaXRlbS5tb2RpZmllZC5nZXRUaW1lKCkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJpZ1RodW1ibmFpbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QmlnVGh1bWJuYWlsKGl0ZW0pIHsKICAgICAgdmFyIF9pdGVtJHRodW1ibmFpbHMyOwoKICAgICAgaWYgKChfaXRlbSR0aHVtYm5haWxzMiA9IGl0ZW0udGh1bWJuYWlscykgIT09IG51bGwgJiYgX2l0ZW0kdGh1bWJuYWlsczIgIT09IHZvaWQgMCAmJiBfaXRlbSR0aHVtYm5haWxzMi5sZW5ndGgpIHsKICAgICAgICB2YXIgdGh1bWJuYWlsID0gaXRlbS50aHVtYm5haWxzLmZpbmQoZnVuY3Rpb24gKHRodW1iKSB7CiAgICAgICAgICByZXR1cm4gdGh1bWIud2lkdGggPj0gdGh1bWJuYWlsQmlnTWluOwogICAgICAgIH0pOwoKICAgICAgICBpZiAodGh1bWJuYWlsICYmICdyZWxhdGl2ZV9wYXRoJyBpbiB0aHVtYm5haWwpIHsKICAgICAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy5hcGlVcmwsICIvc2VydmVyL2ZpbGVzLyIpLmNvbmNhdChlbmNvZGVVUkkodGhpcy5jdXJyZW50UGF0aCksICIvIikuY29uY2F0KGVuY29kZVVSSSh0aHVtYm5haWwucmVsYXRpdmVfcGF0aCksICI/dGltZXN0YW1wPSIpLmNvbmNhdChpdGVtLm1vZGlmaWVkLmdldFRpbWUoKSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VGh1bWJuYWlsV2lkdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRodW1ibmFpbFdpZHRoKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuZ2V0QmlnVGh1bWJuYWlsKGl0ZW0pKSB7CiAgICAgICAgdmFyIF9pdGVtJHRodW1ibmFpbHMzOwoKICAgICAgICB2YXIgdGh1bWJuYWlsID0gaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kdGh1bWJuYWlsczMgPSBpdGVtLnRodW1ibmFpbHMpID09PSBudWxsIHx8IF9pdGVtJHRodW1ibmFpbHMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSR0aHVtYm5haWxzMy5maW5kKGZ1bmN0aW9uICh0aHVtYikgewogICAgICAgICAgcmV0dXJuIHRodW1iLndpZHRoID49IHRodW1ibmFpbEJpZ01pbjsKICAgICAgICB9KTsKICAgICAgICBpZiAodGh1bWJuYWlsKSByZXR1cm4gdGh1bWJuYWlsLndpZHRoOwogICAgICB9CgogICAgICByZXR1cm4gNDAwOwogICAgfQogIH0sIHsKICAgIGtleTogImNsaWNrUm93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGlja1JvdyhpdGVtKSB7CiAgICAgIHZhciBmb3JjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CgogICAgICBpZiAoIXRoaXMuY29udGV4dE1lbnUuc2hvd24gfHwgZm9yY2UpIHsKICAgICAgICBpZiAoZm9yY2UpIHRoaXMuY29udGV4dE1lbnUuc2hvd24gPSBmYWxzZTsKCiAgICAgICAgaWYgKGl0ZW0uaXNEaXJlY3RvcnkpIHsKICAgICAgICAgIHRoaXMuY3VycmVudFBhdGggKz0gJy8nICsgaXRlbS5maWxlbmFtZTsKICAgICAgICB9IGVsc2UgaWYgKCFbJ2Vycm9yJywgJ3ByaW50aW5nJywgJ3BhdXNlZCddLmluY2x1ZGVzKHRoaXMucHJpbnRlcl9zdGF0ZSkgJiYgdGhpcy5pc0djb2RlRmlsZShpdGVtKSkgewogICAgICAgICAgdGhpcy5kaWFsb2dQcmludEZpbGUuc2hvdyA9IHRydWU7CiAgICAgICAgICB0aGlzLmRpYWxvZ1ByaW50RmlsZS5pdGVtID0gaXRlbTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGlja1Jvd0dvQmFjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xpY2tSb3dHb0JhY2soKSB7CiAgICAgIHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmN1cnJlbnRQYXRoLnN1YnN0cigwLCB0aGlzLmN1cnJlbnRQYXRoLmxhc3RJbmRleE9mKCcvJykpOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZFRvUXVldWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvUXVldWUoaXRlbSkgewogICAgICB2YXIgcGF0aCA9IHRoaXMuY3VycmVudFBhdGguc2xpY2UoNyk7CiAgICAgIGlmIChwYXRoICE9ICcnKSBwYXRoICs9ICcvJzsKICAgICAgdmFyIGZpbGVuYW1lID0gcGF0aCArIGl0ZW0uZmlsZW5hbWU7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvam9iUXVldWUvYWRkVG9RdWV1ZScsIFtmaWxlbmFtZV0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNoYW5nZU1ldGFkYXRhVmlzaWJsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlTWV0YWRhdGFWaXNpYmxlKG5hbWUpIHsKICAgICAgaWYgKHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiBoZWFkZXIudmFsdWUgPT09IG5hbWU7CiAgICAgIH0pLmxlbmd0aCkgewogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgICAgcmV0dXJuIGhlYWRlci52YWx1ZSA9PT0gbmFtZTsKICAgICAgICB9KVswXS52aXNpYmxlOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2V0R2NvZGVmaWxlc01ldGFkYXRhJywgewogICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsVXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxVcGxvYWQoKSB7CiAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIuY2FuY2VsVG9rZW5Tb3VyY2UuY2FuY2VsKCk7CiAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIuc3RhdHVzID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnMuZmlsZVVwbG9hZC52YWx1ZSA9ICcnOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dDb250ZXh0TWVudSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0NvbnRleHRNZW51KGUsIGl0ZW0pIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuY29udGV4dE1lbnUuc2hvd24pIHsKICAgICAgICBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB0aGlzLmNvbnRleHRNZW51LnNob3duID0gdHJ1ZTsKICAgICAgICB0aGlzLmNvbnRleHRNZW51LnggPSAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNsaWVudFgpIHx8IChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUucGFnZVgpIHx8IHdpbmRvdy5zY3JlZW5YIC8gMjsKICAgICAgICB0aGlzLmNvbnRleHRNZW51LnkgPSAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNsaWVudFkpIHx8IChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUucGFnZVkpIHx8IHdpbmRvdy5zY3JlZW5ZIC8gMjsKICAgICAgICB0aGlzLmNvbnRleHRNZW51Lml0ZW0gPSBpdGVtOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzOC5jb250ZXh0TWVudS5zaG93biA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcmVoZWF0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVoZWF0KCkgewogICAgICB2YXIgZmlsZSA9IHRoaXMuY29udGV4dE1lbnUuaXRlbTsKCiAgICAgIGlmICgnZmlyc3RfbGF5ZXJfZXh0cl90ZW1wJyBpbiBmaWxlICYmICdmaXJzdF9sYXllcl9iZWRfdGVtcCcgaW4gZmlsZSAmJiAhWydlcnJvcicsICdwcmludGluZycsICdwYXVzZWQnXS5pbmNsdWRlcyh0aGlzLnByaW50ZXJfc3RhdGUpKSB7CiAgICAgICAgdmFyIGdjb2RlID0gJyc7CgogICAgICAgIGlmIChmaWxlLmZpcnN0X2xheWVyX2V4dHJfdGVtcCA+IDApIHsKICAgICAgICAgIGdjb2RlID0gJ00xMDQgUycgKyBmaWxlLmZpcnN0X2xheWVyX2V4dHJfdGVtcDsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7CiAgICAgICAgICAgIG1lc3NhZ2U6IGdjb2RlLAogICAgICAgICAgICB0eXBlOiAnY29tbWFuZCcKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgewogICAgICAgICAgICBzY3JpcHQ6IGdjb2RlCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChmaWxlLmZpcnN0X2xheWVyX2JlZF90ZW1wID4gMCkgewogICAgICAgICAgZ2NvZGUgPSAnTTE0MCBTJyArIGZpbGUuZmlyc3RfbGF5ZXJfYmVkX3RlbXA7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VydmVyL2FkZEV2ZW50JywgewogICAgICAgICAgICBtZXNzYWdlOiBnY29kZSwKICAgICAgICAgICAgdHlwZTogJ2NvbW1hbmQnCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsKICAgICAgICAgICAgc2NyaXB0OiBnY29kZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZWRpdEZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVkaXRGaWxlKGl0ZW0pIHsKICAgICAgdmFyIHBhdGggPSB0aGlzLmN1cnJlbnRQYXRoID09PSAnZ2NvZGVzJyA/ICcnIDogdGhpcy5jdXJyZW50UGF0aC5zbGljZSg3KTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2VkaXRvci9vcGVuRmlsZScsIHsKICAgICAgICByb290OiAnZ2NvZGVzJywKICAgICAgICBwYXRoOiBwYXRoICE9PSAnJyA/ICcvJyArIHBhdGggOiAnJywKICAgICAgICBmaWxlbmFtZTogaXRlbS5maWxlbmFtZSwKICAgICAgICBzaXplOiBpdGVtLnNpemUsCiAgICAgICAgcGVybWlzc2lvbnM6IGl0ZW0ucGVybWlzc2lvbnMKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZG93bmxvYWRGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb3dubG9hZEZpbGUoKSB7CiAgICAgIHZhciBmaWxlbmFtZSA9IHRoaXMuY3VycmVudFBhdGggKyAnLycgKyB0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWU7CiAgICAgIHZhciBocmVmID0gdGhpcy5hcGlVcmwgKyAnL3NlcnZlci9maWxlcy8nICsgZW5jb2RlVVJJKGZpbGVuYW1lKTsKICAgICAgd2luZG93Lm9wZW4oaHJlZik7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuYW1lRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuYW1lRmlsZShpdGVtKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy5kaWFsb2dSZW5hbWVGaWxlLml0ZW0gPSBpdGVtOwogICAgICB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUubmV3TmFtZSA9IGl0ZW0uZmlsZW5hbWU7CiAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5zaG93ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzOSQkcmVmcyRpbnB1dEZpZTsKCiAgICAgICAgKF90aGlzOSQkcmVmcyRpbnB1dEZpZSA9IF90aGlzOS4kcmVmcy5pbnB1dEZpZWxkUmVuYW1lRmlsZSkgPT09IG51bGwgfHwgX3RoaXM5JCRyZWZzJGlucHV0RmllID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczkkJHJlZnMkaW5wdXRGaWUuZm9jdXMoKTsKICAgICAgfSwgMjAwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5hbWVGaWxlQWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5hbWVGaWxlQWN0aW9uKCkgewogICAgICB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUuc2hvdyA9IGZhbHNlOwogICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLm1vdmUnLCB7CiAgICAgICAgc291cmNlOiB0aGlzLmN1cnJlbnRQYXRoICsgJy8nICsgdGhpcy5kaWFsb2dSZW5hbWVGaWxlLml0ZW0uZmlsZW5hbWUsCiAgICAgICAgZGVzdDogdGhpcy5jdXJyZW50UGF0aCArICcvJyArIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5uZXdOYW1lCiAgICAgIH0sIHsKICAgICAgICBhY3Rpb246ICdmaWxlcy9nZXRNb3ZlJwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5hbWVEaXJlY3RvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmFtZURpcmVjdG9yeShpdGVtKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5Lml0ZW0gPSBpdGVtOwogICAgICB0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5uZXdOYW1lID0gaXRlbS5maWxlbmFtZTsKICAgICAgdGhpcy5kaWFsb2dSZW5hbWVEaXJlY3Rvcnkuc2hvdyA9IHRydWU7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpczEwJCRyZWZzJGlucHV0Rmk7CgogICAgICAgIChfdGhpczEwJCRyZWZzJGlucHV0RmkgPSBfdGhpczEwLiRyZWZzLmlucHV0RmllbGRSZW5hbWVEaXJlY3RvcnkpID09PSBudWxsIHx8IF90aGlzMTAkJHJlZnMkaW5wdXRGaSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMxMCQkcmVmcyRpbnB1dEZpLmZvY3VzKCk7CiAgICAgIH0sIDIwMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuYW1lRGlyZWN0b3J5QWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5hbWVEaXJlY3RvcnlBY3Rpb24oKSB7CiAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5LnNob3cgPSBmYWxzZTsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5tb3ZlJywgewogICAgICAgIHNvdXJjZTogdGhpcy5jdXJyZW50UGF0aCArICcvJyArIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5Lml0ZW0uZmlsZW5hbWUsCiAgICAgICAgZGVzdDogdGhpcy5jdXJyZW50UGF0aCArICcvJyArIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5Lm5ld05hbWUKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ2ZpbGVzL2dldE1vdmUnCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZpbGUoKSB7CiAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMuZGVsZXRlX2ZpbGUnLCB7CiAgICAgICAgcGF0aDogdGhpcy5jdXJyZW50UGF0aCArICcvJyArIHRoaXMuY29udGV4dE1lbnUuaXRlbS5maWxlbmFtZQogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0RGVsZXRlRmlsZScKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZXRlRGlyZWN0b3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVEaXJlY3RvcnkoaXRlbSkgewogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZURpcmVjdG9yeS5pdGVtID0gaXRlbTsKICAgICAgdGhpcy5kaWFsb2dEZWxldGVEaXJlY3Rvcnkuc2hvdyA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZXRlRGlyZWN0b3J5QWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVEaXJlY3RvcnlBY3Rpb24oKSB7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlRGlyZWN0b3J5LnNob3cgPSBmYWxzZTsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5kZWxldGVfZGlyZWN0b3J5JywgewogICAgICAgIHBhdGg6IHRoaXMuY3VycmVudFBhdGggKyAnLycgKyB0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWUsCiAgICAgICAgZm9yY2U6IHRydWUKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ2ZpbGVzL2dldERlbGV0ZURpcicKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RhcnRQcmludCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRQcmludCgpIHsKICAgICAgdmFyIGZpbGVuYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgICAgZmlsZW5hbWUgPSAodGhpcy5jdXJyZW50UGF0aCArICcvJyArIGZpbGVuYW1lKS5zdWJzdHJpbmcoNyk7CiAgICAgIHRoaXMuZGlhbG9nUHJpbnRGaWxlLnNob3cgPSBmYWxzZTsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIucHJpbnQuc3RhcnQnLCB7CiAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lCiAgICAgIH0sIHsKICAgICAgICBhY3Rpb246ICdzd2l0Y2hUb0Rhc2hib2FyZCcKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJhZ0ZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYWdGaWxlKGUsIGl0ZW0pIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMgPSB0cnVlOwogICAgICB0aGlzLmRyYWdnaW5nRmlsZS5pdGVtID0gaXRlbTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmFnZW5kRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhZ2VuZEZpbGUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZHJhZ2dpbmdGaWxlLnN0YXR1cyA9IGZhbHNlOwogICAgICB0aGlzLmRyYWdnaW5nRmlsZS5pdGVtID0gewogICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICBmaWxlbmFtZTogJycsCiAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiaGlkZU1ldGFkYXRhQ29sdW1zQ2FuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlTWV0YWRhdGFDb2x1bXNDYW5nZWQobmV3VmFsKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIG5ld1ZhbC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgaGVhZGVyRWxlbWVudCA9IF90aGlzMTEuaGVhZGVycy5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gZWxlbWVudC52YWx1ZSA9PT0ga2V5OwogICAgICAgIH0pOwoKICAgICAgICBpZiAoaGVhZGVyRWxlbWVudCkgaGVhZGVyRWxlbWVudC52aXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImlzR2NvZGVGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0djb2RlRmlsZShmaWxlKSB7CiAgICAgIHZhciBmb3JtYXQgPSBmaWxlLmZpbGVuYW1lLnNsaWNlKGZpbGUuZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSk7CiAgICAgIHJldHVybiB2YWxpZEdjb2RlRXh0ZW5zaW9ucy5pbmNsdWRlcyhmb3JtYXQpOwogICAgfQogIH0sIHsKICAgIGtleTogInZpZXczRCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmlldzNEKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvdmlld2VyJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgZmlsZW5hbWU6IHRoaXMuY3VycmVudFBhdGggKyAnLycgKyBpdGVtLmZpbGVuYW1lCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBHY29kZWZpbGVzUGFuZWw7Cn0oTWl4aW5zKEJhc2VNaXhpbikpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ2hpZGVNZXRhZGF0YUNvbHVtcycpXSwgR2NvZGVmaWxlc1BhbmVsLnByb3RvdHlwZSwgImhpZGVNZXRhZGF0YUNvbHVtc0NhbmdlZCIsIG51bGwpOwoKR2NvZGVmaWxlc1BhbmVsID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBQYW5lbDogUGFuZWwsCiAgICBTZXR0aW5nc1JvdzogU2V0dGluZ3NSb3cKICB9Cn0pXSwgR2NvZGVmaWxlc1BhbmVsKTsKZXhwb3J0IGRlZmF1bHQgR2NvZGVmaWxlc1BhbmVsOw=="},null]}