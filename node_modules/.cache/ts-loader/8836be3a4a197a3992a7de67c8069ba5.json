{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/history/actions.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/history/actions.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIGNvbW1pdCgncmVzZXQnKTsKICB9LAogIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICBWdWUuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuaGlzdG9yeS5saXN0JywgewogICAgICBzdGFydDogMCwKICAgICAgbGltaXQ6IDUwCiAgICB9LCB7CiAgICAgIGFjdGlvbjogJ3NlcnZlci9oaXN0b3J5L2dldEhpc3RvcnknCiAgICB9KTsKICAgIFZ1ZS4kc29ja2V0LmVtaXQoJ3NlcnZlci5oaXN0b3J5LnRvdGFscycsIHt9LCB7CiAgICAgIGFjdGlvbjogJ3NlcnZlci9oaXN0b3J5L2dldFRvdGFscycKICAgIH0pOwogIH0sCiAgZ2V0VG90YWxzOiBmdW5jdGlvbiBnZXRUb3RhbHMoX3JlZjIsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICBjb21taXQoJ3NldFRvdGFscycsIHBheWxvYWQuam9iX3RvdGFscyk7CiAgfSwKICBnZXRIaXN0b3J5OiBmdW5jdGlvbiBnZXRIaXN0b3J5KF9yZWYzLCBwYXlsb2FkKSB7CiAgICB2YXIgX3BheWxvYWQkam9icywgX3BheWxvYWQkcmVxdWVzdFBhcmFtLCBfcGF5bG9hZCRqb2JzMjsKCiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICBpZiAoJ3JlcXVlc3RQYXJhbXMnIGluIHBheWxvYWQgJiYgJ3N0YXJ0JyBpbiBwYXlsb2FkLnJlcXVlc3RQYXJhbXMgJiYgcGF5bG9hZC5yZXF1ZXN0UGFyYW1zLnN0YXJ0ID09PSAwKSBjb21taXQoJ3Jlc2V0Sm9icycpOwogICAgKF9wYXlsb2FkJGpvYnMgPSBwYXlsb2FkLmpvYnMpID09PSBudWxsIHx8IF9wYXlsb2FkJGpvYnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wYXlsb2FkJGpvYnMuZm9yRWFjaChmdW5jdGlvbiAoam9iKSB7CiAgICAgIGlmIChzdGF0ZS5qb2JzLmZpbmRJbmRleChmdW5jdGlvbiAoc3RhdGVKb2IpIHsKICAgICAgICByZXR1cm4gc3RhdGVKb2Iuam9iX2lkID09PSBqb2Iuam9iX2lkOwogICAgICB9KSA9PT0gLTEpIGNvbW1pdCgnYWRkSm9iJywgam9iKTsKICAgIH0pOwogICAgaWYgKCgoX3BheWxvYWQkcmVxdWVzdFBhcmFtID0gcGF5bG9hZC5yZXF1ZXN0UGFyYW1zKSA9PT0gbnVsbCB8fCBfcGF5bG9hZCRyZXF1ZXN0UGFyYW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wYXlsb2FkJHJlcXVlc3RQYXJhbS5saW1pdCkgPiAwICYmICgoX3BheWxvYWQkam9iczIgPSBwYXlsb2FkLmpvYnMpID09PSBudWxsIHx8IF9wYXlsb2FkJGpvYnMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGF5bG9hZCRqb2JzMi5sZW5ndGgpID09PSBwYXlsb2FkLnJlcXVlc3RQYXJhbXMubGltaXQpIFZ1ZS4kc29ja2V0LmVtaXQoJ3NlcnZlci5oaXN0b3J5Lmxpc3QnLCB7CiAgICAgIHN0YXJ0OiBwYXlsb2FkLnJlcXVlc3RQYXJhbXMuc3RhcnQgKyBwYXlsb2FkLnJlcXVlc3RQYXJhbXMubGltaXQsCiAgICAgIGxpbWl0OiBwYXlsb2FkLnJlcXVlc3RQYXJhbXMubGltaXQKICAgIH0sIHsKICAgICAgYWN0aW9uOiAnc2VydmVyL2hpc3RvcnkvZ2V0SGlzdG9yeScKICAgIH0pOwogIH0sCiAgZ2V0Q2hhbmdlZDogZnVuY3Rpb24gZ2V0Q2hhbmdlZChfcmVmNCwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgIGlmIChwYXlsb2FkLmFjdGlvbiA9PT0gJ2FkZGVkJykgY29tbWl0KCdhZGRKb2InLCBwYXlsb2FkLmpvYik7ZWxzZSBpZiAocGF5bG9hZC5hY3Rpb24gPT09ICdmaW5pc2hlZCcpIGNvbW1pdCgndXBkYXRlSm9iJywgcGF5bG9hZC5qb2IpOwogICAgVnVlLiRzb2NrZXQuZW1pdCgnc2VydmVyLmhpc3RvcnkudG90YWxzJywge30sIHsKICAgICAgYWN0aW9uOiAnc2VydmVyL2hpc3RvcnkvZ2V0VG90YWxzJwogICAgfSk7CiAgfSwKICBnZXREZWxldGVkSm9iczogZnVuY3Rpb24gZ2V0RGVsZXRlZEpvYnMoX3JlZjUsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CgogICAgaWYgKCdkZWxldGVkX2pvYnMnIGluIHBheWxvYWQgJiYgQXJyYXkuaXNBcnJheShwYXlsb2FkLmRlbGV0ZWRfam9icykpIHsKICAgICAgcGF5bG9hZC5kZWxldGVkX2pvYnMuZm9yRWFjaChmdW5jdGlvbiAoam9iSWQpIHsKICAgICAgICBjb21taXQoJ2Rlc3Ryb3lKb2InLCBqb2JJZCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/history/actions.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport { ActionTree } from 'vuex'\nimport { ServerHistoryState, ServerHistoryStateJob } from '@/store/server/history/types'\nimport {RootState} from '@/store/types'\n\nexport const actions: ActionTree<ServerHistoryState, RootState> = {\n    reset({ commit }) {\n        commit('reset')\n    },\n\n    init() {\n        Vue.$socket.emit('server.history.list', { start: 0, limit: 50 }, { action: 'server/history/getHistory' })\n        Vue.$socket.emit('server.history.totals', {}, { action: 'server/history/getTotals' })\n    },\n\n    getTotals({ commit }, payload) {\n        commit('setTotals', payload.job_totals)\n    },\n\n    getHistory({ commit, state }, payload) {\n        if (\n            'requestParams' in payload &&\n            'start' in payload.requestParams &&\n            payload.requestParams.start === 0\n        ) commit('resetJobs')\n\n        payload.jobs?.forEach((job: ServerHistoryStateJob) => {\n            if (state.jobs.findIndex(stateJob => stateJob.job_id === job.job_id) === -1) commit('addJob', job)\n        })\n\n        if (\n            payload.requestParams?.limit > 0 &&\n            payload.jobs?.length === payload.requestParams.limit\n        ) Vue.$socket.emit('server.history.list', { start: payload.requestParams.start + payload.requestParams.limit, limit: payload.requestParams.limit }, { action: 'server/history/getHistory' })\n    },\n\n    getChanged({ commit }, payload) {\n        if (payload.action === 'added') commit('addJob', payload.job)\n        else if (payload.action === 'finished') commit('updateJob', payload.job)\n\n        Vue.$socket.emit('server.history.totals', {}, { action: 'server/history/getTotals' })\n    },\n\n    getDeletedJobs({ commit }, payload) {\n        if ('deleted_jobs' in payload && Array.isArray(payload.deleted_jobs)) {\n            payload.deleted_jobs.forEach((jobId: ServerHistoryStateJob) => {\n                commit('destroyJob', jobId)\n            })\n        }\n    }\n\n}"],"sourceRoot":""}]}