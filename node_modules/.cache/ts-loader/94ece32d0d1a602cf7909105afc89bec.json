{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-3!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Machine/ConfigFilesPanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Machine/ConfigFilesPanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBNaXhpbnMgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IEJhc2VNaXhpbiBmcm9tICdAL2NvbXBvbmVudHMvbWl4aW5zL2Jhc2UnOwppbXBvcnQgeyBmb3JtYXREYXRlLCBmb3JtYXRGaWxlc2l6ZSwgc29ydEZpbGVzIH0gZnJvbSAnQC9wbHVnaW5zL2hlbHBlcnMnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgUGFuZWwgZnJvbSAnQC9jb21wb25lbnRzL3VpL1BhbmVsLnZ1ZSc7CmltcG9ydCB7IGhpZGRlblJvb3REaXJlY3RvcmllcyB9IGZyb20gJ0Avc3RvcmUvdmFyaWFibGVzJzsKCnZhciBDb25maWdGaWxlc1BhbmVsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTWl4aW5zKSB7CiAgX2luaGVyaXRzKENvbmZpZ0ZpbGVzUGFuZWwsIF9NaXhpbnMpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKENvbmZpZ0ZpbGVzUGFuZWwpOwoKICBmdW5jdGlvbiBDb25maWdGaWxlc1BhbmVsKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25maWdGaWxlc1BhbmVsKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChhcmdzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic29ydEZpbGVzIiwgc29ydEZpbGVzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmb3JtYXRGaWxlc2l6ZSIsIGZvcm1hdEZpbGVzaXplKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmb3JtYXREYXRlIiwgZm9ybWF0RGF0ZSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiJHJlZnMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNlbGVjdGVkIiwgW10pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9wdGlvbnMiLCB7fSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY3VycmVudFBhZ2UiLCAxKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjb250ZXh0TWVudSIsIHsKICAgICAgc2hvd246IGZhbHNlLAogICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgIHRvdWNoVGltZXI6IG51bGwsCiAgICAgIHg6IDAsCiAgICAgIHk6IDAsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkaWFsb2dJbWFnZSIsIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGl0ZW06IHsKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIHVybDogbnVsbCwKICAgICAgICBzdmc6IG51bGwKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZGlhbG9nQ3JlYXRlRmlsZSIsIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIG5hbWU6ICcnCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkaWFsb2dSZW5hbWVGaWxlIiwgewogICAgICBzaG93OiBmYWxzZSwKICAgICAgbmV3TmFtZTogJycsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkaWFsb2dDcmVhdGVEaXJlY3RvcnkiLCB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBuYW1lOiAnJwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZGlhbG9nUmVuYW1lRGlyZWN0b3J5IiwgewogICAgICBzaG93OiBmYWxzZSwKICAgICAgbmV3TmFtZTogJycsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkaWFsb2dEZWxldGVEaXJlY3RvcnkiLCB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBpdGVtOiB7CiAgICAgICAgaXNEaXJlY3Rvcnk6IGZhbHNlLAogICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgbW9kaWZpZWQ6IG5ldyBEYXRlKCkKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidXBsb2FkU25hY2tiYXIiLCB7CiAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgcGVyY2VudDogMCwKICAgICAgc3BlZWQ6IDAsCiAgICAgIHRvdGFsOiAwLAogICAgICBudW1iZXI6IDAsCiAgICAgIG1heDogMCwKICAgICAgY2FuY2VsVG9rZW5Tb3VyY2U6IHt9LAogICAgICBsYXN0UHJvZ3Jlc3M6IHsKICAgICAgICB0aW1lOiAwLAogICAgICAgIGxvYWRlZDogMAogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkcmFnZ2luZ0ZpbGUiLCB7CiAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgIGl0ZW06IHsKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ29uZmlnRmlsZXNQYW5lbCwgW3sKICAgIGtleTogInRvb2xiYXJCdXR0b25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gW3sKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuVXBsb2FkRmlsZScpLAogICAgICAgIGNvbG9yOiAnZ3JleSBkYXJrZW4tMycsCiAgICAgICAgaWNvbjogJ21kaS1maWxlLXVwbG9hZCcsCiAgICAgICAgbG9hZGluZ05hbWU6IG51bGwsCiAgICAgICAgb25seVdyaXRlYWJsZTogdHJ1ZSwKICAgICAgICBjbGljazogdGhpcy51cGxvYWRGaWxlQnV0dG9uCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuQ3JlYXRlRmlsZScpLAogICAgICAgIGNvbG9yOiAnZ3JleSBkYXJrZW4tMycsCiAgICAgICAgaWNvbjogJ21kaS1maWxlLXBsdXMnLAogICAgICAgIGxvYWRpbmdOYW1lOiBudWxsLAogICAgICAgIG9ubHlXcml0ZWFibGU6IHRydWUsCiAgICAgICAgY2xpY2s6IHRoaXMuY3JlYXRlRmlsZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnTWFjaGluZS5Db25maWdGaWxlc1BhbmVsLkNyZWF0ZURpcmVjdG9yeScpLAogICAgICAgIGNvbG9yOiAnZ3JleSBkYXJrZW4tMycsCiAgICAgICAgaWNvbjogJ21kaS1mb2xkZXItcGx1cycsCiAgICAgICAgbG9hZGluZ05hbWU6IG51bGwsCiAgICAgICAgb25seVdyaXRlYWJsZTogdHJ1ZSwKICAgICAgICBjbGljazogdGhpcy5jcmVhdGVEaXJlY290cnkKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMuJHQoJ01hY2hpbmUuQ29uZmlnRmlsZXNQYW5lbC5SZWZyZXNoRGlyZWN0b3J5JyksCiAgICAgICAgY29sb3I6ICdncmV5IGRhcmtlbi0zJywKICAgICAgICBpY29uOiAnbWRpLXJlZnJlc2gnLAogICAgICAgIGxvYWRpbmdOYW1lOiBudWxsLAogICAgICAgIG9ubHlXcml0ZWFibGU6IGZhbHNlLAogICAgICAgIGNsaWNrOiB0aGlzLnJlZnJlc2hGaWxlTGlzdAogICAgICB9XTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXJlZFRvb2xiYXJCdXR0b25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLnRvb2xiYXJCdXR0b25zLmZpbHRlcihmdW5jdGlvbiAoYnV0dG9uKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5kaXJlY3RvcnlQZXJtaXNzaW9ucy5pbmNsdWRlcygndycpICYmIGJ1dHRvbi5vbmx5V3JpdGVhYmxlIHx8ICFidXR0b24ub25seVdyaXRlYWJsZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWJzb2x1dGVQYXRoIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgcGF0aCA9ICcvJyArIHRoaXMucm9vdDsKICAgICAgaWYgKHRoaXMuY3VycmVudFBhdGgpIHBhdGggKz0gdGhpcy5jdXJyZW50UGF0aDsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlyZWN0b3J5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snZmlsZXMvZ2V0RGlyZWN0b3J5J10odGhpcy5hYnNvbHV0ZVBhdGgpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc2tfdXNhZ2UiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRkaXJlY3RvcnkkZGlza18sIF90aGlzJGRpcmVjdG9yeTsKCiAgICAgIHJldHVybiAoX3RoaXMkZGlyZWN0b3J5JGRpc2tfID0gKF90aGlzJGRpcmVjdG9yeSA9IHRoaXMuZGlyZWN0b3J5KSA9PT0gbnVsbCB8fCBfdGhpcyRkaXJlY3RvcnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRpcmVjdG9yeS5kaXNrX3VzYWdlKSAhPT0gbnVsbCAmJiBfdGhpcyRkaXJlY3RvcnkkZGlza18gIT09IHZvaWQgMCA/IF90aGlzJGRpcmVjdG9yeSRkaXNrXyA6IHsKICAgICAgICB1c2VkOiAwLAogICAgICAgIGZyZWU6IDAsCiAgICAgICAgdG90YWw6IDAKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXJlY3RvcnlQZXJtaXNzaW9ucyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJGRpcmVjdG9yeSRwZXJtaSwgX3RoaXMkZGlyZWN0b3J5MjsKCiAgICAgIHJldHVybiAoX3RoaXMkZGlyZWN0b3J5JHBlcm1pID0gKF90aGlzJGRpcmVjdG9yeTIgPSB0aGlzLmRpcmVjdG9yeSkgPT09IG51bGwgfHwgX3RoaXMkZGlyZWN0b3J5MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZGlyZWN0b3J5Mi5wZXJtaXNzaW9ucykgIT09IG51bGwgJiYgX3RoaXMkZGlyZWN0b3J5JHBlcm1pICE9PSB2b2lkIDAgPyBfdGhpcyRkaXJlY3RvcnkkcGVybWkgOiAncic7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRkaXJlY3RvcnkkY2hpbGQsIF90aGlzJGRpcmVjdG9yeTM7CgogICAgICB2YXIgZmlsZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkoKF90aGlzJGRpcmVjdG9yeSRjaGlsZCA9IChfdGhpcyRkaXJlY3RvcnkzID0gdGhpcy5kaXJlY3RvcnkpID09PSBudWxsIHx8IF90aGlzJGRpcmVjdG9yeTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRpcmVjdG9yeTMuY2hpbGRyZW5zKSAhPT0gbnVsbCAmJiBfdGhpcyRkaXJlY3RvcnkkY2hpbGQgIT09IHZvaWQgMCA/IF90aGlzJGRpcmVjdG9yeSRjaGlsZCA6IFtdKTsKCiAgICAgIGlmICghdGhpcy5zaG93SGlkZGVuRmlsZXMpIHsKICAgICAgICBmaWxlcyA9IGZpbGVzLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkgewogICAgICAgICAgcmV0dXJuIGZpbGUuZmlsZW5hbWUuc3Vic3RyKDAsIDEpICE9PSAnLic7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmhpZGVCYWNrdXBGaWxlcykgewogICAgICAgIHZhciBiYWNrdXBGaWxlTWF0Y2hlciA9IC8uKlwvP3ByaW50ZXItXGR7OH1fXGR7Nn1cLmNmZyQvOwogICAgICAgIGZpbGVzID0gZmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICByZXR1cm4gIWZpbGUuZmlsZW5hbWUubWF0Y2goYmFja3VwRmlsZU1hdGNoZXIpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZmlsZXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGVhZGVycyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgdGV4dDogJycsCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuTmFtZScpLAogICAgICAgIHZhbHVlOiAnZmlsZW5hbWUnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuRmlsZXNpemUnKSwKICAgICAgICB2YWx1ZTogJ3NpemUnLAogICAgICAgIGFsaWduOiAncmlnaHQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuTGFzdE1vZGlmaWVkJyksCiAgICAgICAgdmFsdWU6ICdtb2RpZmllZCcsCiAgICAgICAgYWxpZ246ICdyaWdodCcKICAgICAgfV07CiAgICB9CiAgfSwgewogICAga2V5OiAiY291bnRQZXJQYWdlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuY291bnRQZXJQYWdlOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgewogICAgICAgIG5hbWU6ICd2aWV3LmNvbmZpZ2ZpbGVzLmNvdW50UGVyUGFnZScsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93SGlkZGVuRmlsZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudmlldy5jb25maWdmaWxlcy5zaG93SGlkZGVuRmlsZXM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ3ZpZXcuY29uZmlnZmlsZXMuc2hvd0hpZGRlbkZpbGVzJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImhpZGVCYWNrdXBGaWxlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3LmNvbmZpZ2ZpbGVzLmhpZGVCYWNrdXBGaWxlczsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAndmlldy5jb25maWdmaWxlcy5oaWRlQmFja3VwRmlsZXMnLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic29ydEJ5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuc29ydEJ5OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICBpZiAobmV3VmFsID09PSB1bmRlZmluZWQpIG5ld1ZhbCA9ICdmaWxlbmFtZSc7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ3ZpZXcuY29uZmlnZmlsZXMuc29ydEJ5JywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNvcnREZXNjIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuc29ydERlc2M7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkgbmV3VmFsID0gZmFsc2U7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ3ZpZXcuY29uZmlnZmlsZXMuc29ydERlc2MnLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXJlZERpcmVjdG9yaWVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2VydmVyLnJlZ2lzdGVyZWRfZGlyZWN0b3JpZXMuZmlsdGVyKGZ1bmN0aW9uIChkaXIpIHsKICAgICAgICByZXR1cm4gIWhpZGRlblJvb3REaXJlY3Rvcmllcy5pbmNsdWRlcyhkaXIpOwogICAgICB9KS5zb3J0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm9vdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3LmNvbmZpZ2ZpbGVzLnJvb3RQYXRoOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nV2l0aG91dFVwbG9hZCcsIHsKICAgICAgICBuYW1lOiAndmlldy5jb25maWdmaWxlcy5yb290UGF0aCcsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXJyZW50UGF0aCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3LmNvbmZpZ2ZpbGVzLmN1cnJlbnRQYXRoOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nV2l0aG91dFVwbG9hZCcsIHsKICAgICAgICBuYW1lOiAndmlldy5jb25maWdmaWxlcy5jdXJyZW50UGF0aCcsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoRmlsZUxpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hGaWxlTGlzdCgpIHsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5nZXRfZGlyZWN0b3J5JywgewogICAgICAgIHBhdGg6IHRoaXMuYWJzb2x1dGVQYXRoLnN1YnN0cmluZygxKQogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0RGlyZWN0b3J5JwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGFuZ2VSb290IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VSb290KCkgewogICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xpY2tSb3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsaWNrUm93KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZm9yY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwoKICAgICAgaWYgKCF0aGlzLmNvbnRleHRNZW51LnNob3duIHx8IGZvcmNlKSB7CiAgICAgICAgaWYgKGZvcmNlKSB0aGlzLmNvbnRleHRNZW51LnNob3duID0gZmFsc2U7CgogICAgICAgIGlmICghaXRlbS5pc0RpcmVjdG9yeSkgewogICAgICAgICAgdmFyIF9pdGVtJGZpbGVuYW1lJHNwbGl0JCwgX2l0ZW0kZmlsZW5hbWUkc3BsaXQkMjsKCiAgICAgICAgICBpZiAoWydwbmcnLCAnanBlZycsICdqcGcnLCAnZ2lmJywgJ2JtcCcsICd0aWYnLCAnc3ZnJ10uaW5jbHVkZXMoKF9pdGVtJGZpbGVuYW1lJHNwbGl0JCA9IChfaXRlbSRmaWxlbmFtZSRzcGxpdCQyID0gaXRlbS5maWxlbmFtZS5zcGxpdCgnLicpLnBvcCgpKSA9PT0gbnVsbCB8fCBfaXRlbSRmaWxlbmFtZSRzcGxpdCQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRmaWxlbmFtZSRzcGxpdCQyLnRvTG93ZXJDYXNlKCkpICE9PSBudWxsICYmIF9pdGVtJGZpbGVuYW1lJHNwbGl0JCAhPT0gdm9pZCAwID8gX2l0ZW0kZmlsZW5hbWUkc3BsaXQkIDogJycpKSB7CiAgICAgICAgICAgIHZhciBfaXRlbSRmaWxlbmFtZSRzcGxpdCQzLCBfaXRlbSRmaWxlbmFtZSRzcGxpdCQ0OwoKICAgICAgICAgICAgdmFyIHVybCA9ICIiLmNvbmNhdCh0aGlzLmFwaVVybCwgIi9zZXJ2ZXIvZmlsZXMiKS5jb25jYXQodGhpcy5hYnNvbHV0ZVBhdGgsICIvIikuY29uY2F0KGl0ZW0uZmlsZW5hbWUsICI/dD0iKS5jb25jYXQoRGF0ZS5ub3coKSk7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nSW1hZ2UuaXRlbS5uYW1lID0gaXRlbS5maWxlbmFtZTsKCiAgICAgICAgICAgIGlmIChbJ3N2ZyddLmluY2x1ZGVzKChfaXRlbSRmaWxlbmFtZSRzcGxpdCQzID0gKF9pdGVtJGZpbGVuYW1lJHNwbGl0JDQgPSBpdGVtLmZpbGVuYW1lLnNwbGl0KCcuJykucG9wKCkpID09PSBudWxsIHx8IF9pdGVtJGZpbGVuYW1lJHNwbGl0JDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGZpbGVuYW1lJHNwbGl0JDQudG9Mb3dlckNhc2UoKSkgIT09IG51bGwgJiYgX2l0ZW0kZmlsZW5hbWUkc3BsaXQkMyAhPT0gdm9pZCAwID8gX2l0ZW0kZmlsZW5hbWUkc3BsaXQkMyA6ICcnKSkgewogICAgICAgICAgICAgIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnRleHQoKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdmcpIHsKICAgICAgICAgICAgICAgIF90aGlzMy5kaWFsb2dJbWFnZS5zaG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF90aGlzMy5kaWFsb2dJbWFnZS5pdGVtLnN2ZyA9IHN2ZzsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0ltYWdlLnNob3cgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMuZGlhbG9nSW1hZ2UuaXRlbS51cmwgPSB1cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdlZGl0b3Ivb3BlbkZpbGUnLCB7CiAgICAgICAgICAgICAgcm9vdDogdGhpcy5yb290LAogICAgICAgICAgICAgIHBhdGg6IHRoaXMuY3VycmVudFBhdGgsCiAgICAgICAgICAgICAgZmlsZW5hbWU6IGl0ZW0uZmlsZW5hbWUsCiAgICAgICAgICAgICAgc2l6ZTogaXRlbS5zaXplLAogICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBpdGVtLnBlcm1pc3Npb25zCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQYXRoICs9ICcvJyArIGl0ZW0uZmlsZW5hbWU7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGlja1Jvd0dvQmFjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xpY2tSb3dHb0JhY2soKSB7CiAgICAgIHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmN1cnJlbnRQYXRoLnN1YnN0cigwLCB0aGlzLmN1cnJlbnRQYXRoLmxhc3RJbmRleE9mKCcvJykpOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dDb250ZXh0TWVudSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0NvbnRleHRNZW51KGUsIGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuY29udGV4dE1lbnUuc2hvd24pIHsKICAgICAgICBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB0aGlzLmNvbnRleHRNZW51LnNob3duID0gdHJ1ZTsKICAgICAgICB0aGlzLmNvbnRleHRNZW51LnggPSAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNsaWVudFgpIHx8IChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUucGFnZVgpIHx8IHdpbmRvdy5zY3JlZW5YIC8gMjsKICAgICAgICB0aGlzLmNvbnRleHRNZW51LnkgPSAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNsaWVudFkpIHx8IChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUucGFnZVkpIHx8IHdpbmRvdy5zY3JlZW5ZIC8gMjsKICAgICAgICB0aGlzLmNvbnRleHRNZW51Lml0ZW0gPSBpdGVtOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNC5jb250ZXh0TWVudS5zaG93biA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkb3dubG9hZEZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvd25sb2FkRmlsZSgpIHsKICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5hYnNvbHV0ZVBhdGggKyAnLycgKyB0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWU7CiAgICAgIHZhciBocmVmID0gIiIuY29uY2F0KHRoaXMuYXBpVXJsLCAiL3NlcnZlci9maWxlcyIpLmNvbmNhdChlbmNvZGVVUkkoZmlsZW5hbWUpKTsKICAgICAgd2luZG93Lm9wZW4oaHJlZik7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlRGlyZWNvdHJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEaXJlY290cnkoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZSA9ICcnOwogICAgICB0aGlzLmRpYWxvZ0NyZWF0ZURpcmVjdG9yeS5zaG93ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzNSQkcmVmcyRpbnB1dERpYTsKCiAgICAgICAgKF90aGlzNSQkcmVmcyRpbnB1dERpYSA9IF90aGlzNS4kcmVmcy5pbnB1dERpYWxvZ0NyZWF0ZURpcmVjdG9yeU5hbWUpID09PSBudWxsIHx8IF90aGlzNSQkcmVmcyRpbnB1dERpYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXM1JCRyZWZzJGlucHV0RGlhLmZvY3VzKCk7CiAgICAgIH0sIDIwMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlRGlyZWN0b3J5QWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEaXJlY3RvcnlBY3Rpb24oKSB7CiAgICAgIHRoaXMuZGlhbG9nQ3JlYXRlRGlyZWN0b3J5LnNob3cgPSBmYWxzZTsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5wb3N0X2RpcmVjdG9yeScsIHsKICAgICAgICBwYXRoOiB0aGlzLmFic29sdXRlUGF0aC5zdWJzdHJpbmcoMSkgKyAnLycgKyB0aGlzLmRpYWxvZ0NyZWF0ZURpcmVjdG9yeS5uYW1lCiAgICAgIH0sIHsKICAgICAgICBhY3Rpb246ICdmaWxlcy9nZXRDcmVhdGVEaXInCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmFtZURpcmVjdG9yeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuYW1lRGlyZWN0b3J5KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5pdGVtID0gaXRlbTsKICAgICAgdGhpcy5kaWFsb2dSZW5hbWVEaXJlY3RvcnkubmV3TmFtZSA9IGl0ZW0uZmlsZW5hbWU7CiAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5LnNob3cgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXM2JCRyZWZzJGlucHV0RGlhOwoKICAgICAgICAoX3RoaXM2JCRyZWZzJGlucHV0RGlhID0gX3RoaXM2LiRyZWZzLmlucHV0RGlhbG9nUmVuYW1lRGlyZWN0b3J5TmFtZSkgPT09IG51bGwgfHwgX3RoaXM2JCRyZWZzJGlucHV0RGlhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczYkJHJlZnMkaW5wdXREaWEuZm9jdXMoKTsKICAgICAgfSwgMjAwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5hbWVEaXJlY3RvcnlBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmFtZURpcmVjdG9yeUFjdGlvbigpIHsKICAgICAgdGhpcy5kaWFsb2dSZW5hbWVEaXJlY3Rvcnkuc2hvdyA9IGZhbHNlOwogICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLm1vdmUnLCB7CiAgICAgICAgc291cmNlOiAodGhpcy5hYnNvbHV0ZVBhdGggKyAnLycgKyB0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5pdGVtLmZpbGVuYW1lKS5zbGljZSgxKSwKICAgICAgICBkZXN0OiAodGhpcy5hYnNvbHV0ZVBhdGggKyAnLycgKyB0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5uZXdOYW1lKS5zbGljZSgxKQogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0TW92ZScKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZXRlRGlyZWN0b3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVEaXJlY3RvcnkoaXRlbSkgewogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZURpcmVjdG9yeS5pdGVtID0gaXRlbTsKICAgICAgdGhpcy5kaWFsb2dEZWxldGVEaXJlY3Rvcnkuc2hvdyA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZXRlRGlyZWN0b3J5QWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVEaXJlY3RvcnlBY3Rpb24oKSB7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlRGlyZWN0b3J5LnNob3cgPSBmYWxzZTsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5kZWxldGVfZGlyZWN0b3J5JywgewogICAgICAgIHBhdGg6IHRoaXMuYWJzb2x1dGVQYXRoICsgJy8nICsgdGhpcy5kaWFsb2dEZWxldGVEaXJlY3RvcnkuaXRlbS5maWxlbmFtZSwKICAgICAgICBmb3JjZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0RGVsZXRlRGlyJwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVGaWxlKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRoaXMuZGlhbG9nQ3JlYXRlRmlsZS5uYW1lID0gJyc7CiAgICAgIHRoaXMuZGlhbG9nQ3JlYXRlRmlsZS5zaG93ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzNyQkcmVmcyRpbnB1dERpYTsKCiAgICAgICAgKF90aGlzNyQkcmVmcyRpbnB1dERpYSA9IF90aGlzNy4kcmVmcy5pbnB1dERpYWxvZ0NyZWF0ZUZpbGVOYW1lKSA9PT0gbnVsbCB8fCBfdGhpczckJHJlZnMkaW5wdXREaWEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzNyQkcmVmcyRpbnB1dERpYS5mb2N1cygpOwogICAgICB9LCAyMDApOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUZpbGVBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUZpbGVBY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbJyddLCB0aGlzLmRpYWxvZ0NyZWF0ZUZpbGUubmFtZSk7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdyb290JywgdGhpcy5yb290KTsKICAgICAgaWYgKHRoaXMuY3VycmVudFBhdGgubGVuZ3RoKSBmb3JtRGF0YS5hcHBlbmQoJ3BhdGgnLCB0aGlzLmN1cnJlbnRQYXRoLnNsaWNlKDEpKTsKICAgICAgYXhpb3MucG9zdCh0aGlzLmFwaVVybCArICcvc2VydmVyL2ZpbGVzL3VwbG9hZCcsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM4LiR0b2FzdC5zdWNjZXNzKF90aGlzOC4kdCgnRmlsZXMuU3VjY2Vzc2Z1bGx5Q3JlYXRlZCcsIHsKICAgICAgICAgIGZpbGVuYW1lOiBfdGhpczguZGlhbG9nQ3JlYXRlRmlsZS5uYW1lCiAgICAgICAgfSkudG9TdHJpbmcoKSk7CgogICAgICAgIF90aGlzOC5kaWFsb2dDcmVhdGVGaWxlLnNob3cgPSBmYWxzZTsKICAgICAgICBfdGhpczguZGlhbG9nQ3JlYXRlRmlsZS5uYW1lID0gJyc7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRlIGZpbGU6ICcgKyBfdGhpczguZGlhbG9nQ3JlYXRlRmlsZS5uYW1lKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuYW1lRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuYW1lRmlsZShpdGVtKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy5kaWFsb2dSZW5hbWVGaWxlLml0ZW0gPSBpdGVtOwogICAgICB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUubmV3TmFtZSA9IGl0ZW0uZmlsZW5hbWU7CiAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5zaG93ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzOSQkcmVmcyRpbnB1dERpYTsKCiAgICAgICAgKF90aGlzOSQkcmVmcyRpbnB1dERpYSA9IF90aGlzOS4kcmVmcy5pbnB1dERpYWxvZ1JlbmFtZUZpbGVOYW1lKSA9PT0gbnVsbCB8fCBfdGhpczkkJHJlZnMkaW5wdXREaWEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzOSQkcmVmcyRpbnB1dERpYS5mb2N1cygpOwogICAgICB9LCAyMDApOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmFtZUZpbGVBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmFtZUZpbGVBY3Rpb24oKSB7CiAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5zaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMubW92ZScsIHsKICAgICAgICBzb3VyY2U6ICh0aGlzLmFic29sdXRlUGF0aCArICcvJyArIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5pdGVtLmZpbGVuYW1lKS5zbGljZSgxKSwKICAgICAgICBkZXN0OiAodGhpcy5hYnNvbHV0ZVBhdGggKyAnLycgKyB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUubmV3TmFtZSkuc2xpY2UoMSkKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ2ZpbGVzL2dldE1vdmUnCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZpbGUoKSB7CiAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMuZGVsZXRlX2ZpbGUnLCB7CiAgICAgICAgcGF0aDogdGhpcy5hYnNvbHV0ZVBhdGggKyAnLycgKyB0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWUKICAgICAgfSwgewogICAgICAgIGFjdGlvbjogJ2ZpbGVzL2dldERlbGV0ZUZpbGUnCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwbG9hZEZpbGVCdXR0b24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwbG9hZEZpbGVCdXR0b24oKSB7CiAgICAgIHRoaXMuJHJlZnMuZmlsZVVwbG9hZC5jbGljaygpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwbG9hZEZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGxvYWRGaWxlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyQkcmVmcyRmaWxlVXBsb2E7CgogICAgICAgIHZhciBzdWNjZXNzRmlsZXMsIF9pdGVyYXRvciwgX3N0ZXAsIF9maWxlLCByZXN1bHQsIF9pLCBfc3VjY2Vzc0ZpbGVzLCBmaWxlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoISgoX3RoaXMkJHJlZnMkZmlsZVVwbG9hID0gdGhpcy4kcmVmcy5maWxlVXBsb2FkLmZpbGVzKSAhPT0gbnVsbCAmJiBfdGhpcyQkcmVmcyRmaWxlVXBsb2EgIT09IHZvaWQgMCAmJiBfdGhpcyQkcmVmcyRmaWxlVXBsb2EubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvYWRkTG9hZGluZycsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2NvbmZpZ0ZpbGVVcGxvYWQnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NGaWxlcyA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5udW1iZXIgPSAwOwogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5tYXggPSB0aGlzLiRyZWZzLmZpbGVVcGxvYWQuZmlsZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy4kcmVmcy5maWxlVXBsb2FkLmZpbGVzKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5zKCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2ZpbGUgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubnVtYmVyKys7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb1VwbG9hZEZpbGUoX2ZpbGUpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NGaWxlcy5wdXNoKHJlc3VsdCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDYpOwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMjsKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjIpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9yZW1vdmVMb2FkaW5nJywgewogICAgICAgICAgICAgICAgICBuYW1lOiAnY29uZmlnRmlsZVVwbG9hZCcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfc3VjY2Vzc0ZpbGVzID0gc3VjY2Vzc0ZpbGVzOyBfaSA8IF9zdWNjZXNzRmlsZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgICAgIGZpbGUgPSBfc3VjY2Vzc0ZpbGVzW19pXTsKICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2VzcygnVXBsb2FkIG9mICcgKyBmaWxlICsgJyBzdWNjZXNzZnVsIScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZmlsZVVwbG9hZC52YWx1ZSA9ICcnOwoKICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1s2LCAxOSwgMjIsIDI1XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGxvYWRGaWxlKCkgewogICAgICAgIHJldHVybiBfdXBsb2FkRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBsb2FkRmlsZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRvVXBsb2FkRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG9VcGxvYWRGaWxlKGZpbGUpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIHRvYXN0ID0gdGhpcy4kdG9hc3Q7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICB2YXIgZmlsZW5hbWUgPSBmaWxlLm5hbWUucmVwbGFjZSgnICcsICdfJyk7CiAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIuZmlsZW5hbWUgPSBmaWxlbmFtZTsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5zdGF0dXMgPSB0cnVlOwogICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLnBlcmNlbnQgPSAwOwogICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLnNwZWVkID0gMDsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MubG9hZGVkID0gMDsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MudGltZSA9IDA7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncm9vdCcsIHRoaXMucm9vdCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUsIHRoaXMuY3VycmVudFBhdGggKyAnLycgKyBmaWxlbmFtZSk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvYWRkTG9hZGluZycsIHsKICAgICAgICBuYW1lOiAnY29uZmlnRmlsZVVwbG9hZCcKICAgICAgfSk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIF90aGlzMTAudXBsb2FkU25hY2tiYXIuY2FuY2VsVG9rZW5Tb3VyY2UgPSBheGlvcy5DYW5jZWxUb2tlbi5zb3VyY2UoKTsKICAgICAgICBheGlvcy5wb3N0KF90aGlzMTAuYXBpVXJsICsgJy9zZXJ2ZXIvZmlsZXMvdXBsb2FkJywgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfSwKICAgICAgICAgIGNhbmNlbFRva2VuOiBfdGhpczEwLnVwbG9hZFNuYWNrYmFyLmNhbmNlbFRva2VuU291cmNlLnRva2VuLAogICAgICAgICAgb25VcGxvYWRQcm9ncmVzczogZnVuY3Rpb24gb25VcGxvYWRQcm9ncmVzcyhwcm9ncmVzc0V2ZW50KSB7CiAgICAgICAgICAgIF90aGlzMTAudXBsb2FkU25hY2tiYXIucGVyY2VudCA9IHByb2dyZXNzRXZlbnQubG9hZGVkICogMTAwIC8gcHJvZ3Jlc3NFdmVudC50b3RhbDsKCiAgICAgICAgICAgIGlmIChfdGhpczEwLnVwbG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy50aW1lKSB7CiAgICAgICAgICAgICAgdmFyIHRpbWUgPSBwcm9ncmVzc0V2ZW50LnRpbWVTdGFtcCAtIF90aGlzMTAudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLnRpbWU7CiAgICAgICAgICAgICAgdmFyIGRhdGEgPSBwcm9ncmVzc0V2ZW50LmxvYWRlZCAtIF90aGlzMTAudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLmxvYWRlZDsKICAgICAgICAgICAgICBpZiAodGltZSkgX3RoaXMxMC51cGxvYWRTbmFja2Jhci5zcGVlZCA9IGRhdGEgLyAodGltZSAvIDEwMDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczEwLnVwbG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy50aW1lID0gcHJvZ3Jlc3NFdmVudC50aW1lU3RhbXA7CiAgICAgICAgICAgIF90aGlzMTAudXBsb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLmxvYWRlZCA9IHByb2dyZXNzRXZlbnQubG9hZGVkOwogICAgICAgICAgICBfdGhpczEwLnVwbG9hZFNuYWNrYmFyLnRvdGFsID0gcHJvZ3Jlc3NFdmVudC50b3RhbDsKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIHZhciBmaWxlbmFtZSA9IHJlc3VsdC5kYXRhLml0ZW0ucGF0aC5zdWJzdHIocmVzdWx0LmRhdGEuaXRlbS5wYXRoLmluZGV4T2YoJy8nKSArIDEpOwogICAgICAgICAgX3RoaXMxMC51cGxvYWRTbmFja2Jhci5zdGF0dXMgPSBmYWxzZTsKICAgICAgICAgIHJlc29sdmUoZmlsZW5hbWUpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTAudXBsb2FkU25hY2tiYXIuc3RhdHVzID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMxMC4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9yZW1vdmVMb2FkaW5nJywgewogICAgICAgICAgICBuYW1lOiAnY29uZmlnRmlsZVVwbG9hZCcKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRvYXN0LmVycm9yKCdDYW5ub3QgdXBsb2FkIHRoZSBmaWxlIScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5jZWxVcGxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbFVwbG9hZCgpIHsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5jYW5jZWxUb2tlblNvdXJjZS5jYW5jZWwoKTsKICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5zdGF0dXMgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmFnRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhZ0ZpbGUoZSwgaXRlbSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZHJhZ2dpbmdGaWxlLnN0YXR1cyA9IHRydWU7CiAgICAgIHRoaXMuZHJhZ2dpbmdGaWxlLml0ZW0gPSBpdGVtOwogICAgfQogIH0sIHsKICAgIGtleTogImRyYWdlbmRGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnZW5kRmlsZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5kcmFnZ2luZ0ZpbGUuc3RhdHVzID0gZmFsc2U7CiAgICAgIHRoaXMuZHJhZ2dpbmdGaWxlLml0ZW0gPSB7CiAgICAgICAgaXNEaXJlY3Rvcnk6IGZhbHNlLAogICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgbW9kaWZpZWQ6IG5ldyBEYXRlKCkKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmFnT3ZlckZpbGVsaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnT3ZlckZpbGVsaXN0KGUsIHJvdykgewogICAgICBpZiAodGhpcy5kcmFnZ2luZ0ZpbGUuc3RhdHVzKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvL2Uuc3RvcFByb3BhZ2F0aW9uKCkKCiAgICAgICAgaWYgKHJvdy5pc0RpcmVjdG9yeSkgZS50YXJnZXQucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzQzQTA0NzIwJzsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRyYWdMZWF2ZUZpbGVsaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnTGVhdmVGaWxlbGlzdChlKSB7CiAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmFnRHJvcEZpbGVsaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZHJhZ0Ryb3BGaWxlbGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZSwgcm93KSB7CiAgICAgICAgdmFyIGRlc3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7CiAgICAgICAgICAgICAgICAgIGRlc3QgPSAnJzsKCiAgICAgICAgICAgICAgICAgIGlmIChyb3cuZmlsZW5hbWUgPT09ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBkZXN0ID0gdGhpcy5hYnNvbHV0ZVBhdGguc2xpY2UoMSwgdGhpcy5hYnNvbHV0ZVBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpICsgdGhpcy5kcmFnZ2luZ0ZpbGUuaXRlbS5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGRlc3QgPSB0aGlzLmFic29sdXRlUGF0aCArICcvJyArIHJvdy5maWxlbmFtZSArICcvJyArIHRoaXMuZHJhZ2dpbmdGaWxlLml0ZW0uZmlsZW5hbWU7CgogICAgICAgICAgICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLm1vdmUnLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLmFic29sdXRlUGF0aC5zbGljZSgxKSArICcvJyArIHRoaXMuZHJhZ2dpbmdGaWxlLml0ZW0uZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgZGVzdDogZGVzdAogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZmlsZXMvZ2V0TW92ZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRyYWdEcm9wRmlsZWxpc3QoX3gsIF94MikgewogICAgICAgIHJldHVybiBfZHJhZ0Ryb3BGaWxlbGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZHJhZ0Ryb3BGaWxlbGlzdDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIENvbmZpZ0ZpbGVzUGFuZWw7Cn0oTWl4aW5zKEJhc2VNaXhpbikpOwoKQ29uZmlnRmlsZXNQYW5lbCA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgUGFuZWw6IFBhbmVsCiAgfQp9KV0sIENvbmZpZ0ZpbGVzUGFuZWwpOwpleHBvcnQgZGVmYXVsdCBDb25maWdGaWxlc1BhbmVsOw=="},null]}