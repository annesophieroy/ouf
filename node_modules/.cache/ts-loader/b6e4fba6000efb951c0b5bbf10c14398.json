{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-3!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/gcodeviewer/Viewer.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/gcodeviewer/Viewer.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBNaXhpbnMsIFByb3AsIFJlZiwgV2F0Y2ggfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IEJhc2VNaXhpbiBmcm9tICcuLi9taXhpbnMvYmFzZSc7IC8vIEB0cy1pZ25vcmUKCmltcG9ydCBHQ29kZVZpZXdlciBmcm9tICdAc2luZGFyaXVzL2djb2Rldmlld2VyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgZm9ybWF0RmlsZXNpemUgfSBmcm9tICdAL3BsdWdpbnMvaGVscGVycyc7CmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJzsKdmFyIHZpZXdlciA9IG51bGw7Cgp2YXIgVmlld2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTWl4aW5zKSB7CiAgX2luaGVyaXRzKFZpZXdlciwgX01peGlucyk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoVmlld2VyKTsKCiAgZnVuY3Rpb24gVmlld2VyKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWaWV3ZXIpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwuYXBwbHkoX3N1cGVyLCBbdGhpc10uY29uY2F0KGFyZ3MpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmb3JtYXRGaWxlc2l6ZSIsIGZvcm1hdEZpbGVzaXplKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc0J1c3kiLCBmYWxzZSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibG9hZGluZyIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJsb2FkaW5nUGVyY2VudCIsIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInRyYWNraW5nIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImxvYWRlZEZpbGUiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZWxvYWRSZXF1aXJlZCIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmaWxlU2l6ZSIsIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm1heFpTbGlkZXIiLCAxMDAwMDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInpTbGlkZXIiLCBfdGhpcy5tYXhaU2xpZGVyKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ6U2xpY2VySGVpZ2h0IiwgMTAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJRdWFsaXR5IiwgX3RoaXMucmVuZGVyUXVhbGl0aWVzWzJdKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkb3dubG9hZFNuYWNrYmFyIiwgewogICAgICBzdGF0dXM6IGZhbHNlLAogICAgICBmaWxlbmFtZTogJycsCiAgICAgIHBlcmNlbnQ6IDAsCiAgICAgIHNwZWVkOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgY2FuY2VsVG9rZW5Tb3VyY2U6IHt9LAogICAgICBsYXN0UHJvZ3Jlc3M6IHsKICAgICAgICB0aW1lOiAwLAogICAgICAgIGxvYWRlZDogMAogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmaWxlbmFtZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZmlsZUlucHV0Iiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICIkcmVmcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY29sb3JNb2RlcyIsIFt7CiAgICAgIHRleHQ6ICdFeHRydWRlcicsCiAgICAgIHZhbHVlOiAwCiAgICB9LCB7CiAgICAgIHRleHQ6ICdGZWVkIFJhdGUnLAogICAgICB2YWx1ZTogMQogICAgfSwgewogICAgICB0ZXh0OiAnRmVhdHVyZScsCiAgICAgIHZhbHVlOiAyCiAgICB9XSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZpZXdlciwgW3sKICAgIGtleTogInJlbmRlclF1YWxpdGllcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ0dDb2RlVmlld2VyLkxvdycpLAogICAgICAgIHZhbHVlOiAyCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnR0NvZGVWaWV3ZXIuTWVkaXVtJyksCiAgICAgICAgdmFsdWU6IDMKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdHQ29kZVZpZXdlci5IaWdoJyksCiAgICAgICAgdmFsdWU6IDQKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdHQ29kZVZpZXdlci5VbHRyYScpLAogICAgICAgIHZhbHVlOiA1CiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnR0NvZGVWaWV3ZXIuTWF4JyksCiAgICAgICAgdmFsdWU6IDYKICAgICAgfV07CiAgICB9CiAgfSwgewogICAga2V5OiAibW91bnRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX21vdW50ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRnYywgX3RoaXMkJHN0b3JlJHN0YXRlJGdjMiwgX3RoaXMkJHN0b3JlJHN0YXRlJGdjMywgX3RoaXMkJHN0b3JlJHN0YXRlJGdjNDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRGaWxlID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRnYyA9IChfdGhpcyQkc3RvcmUkc3RhdGUkZ2MyID0gdGhpcy4kc3RvcmUuc3RhdGUuZ2NvZGV2aWV3ZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRnYzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRnYzIubG9hZGVkRmlsZUJhY2t1cCkgIT09IG51bGwgJiYgX3RoaXMkJHN0b3JlJHN0YXRlJGdjICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ2MgOiBudWxsOwogICAgICAgICAgICAgICAgdmlld2VyID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRnYzMgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJGdjNCA9IHRoaXMuJHN0b3JlLnN0YXRlLmdjb2Rldmlld2VyKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkZ2M0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkZ2M0LnZpZXdlckJhY2t1cCkgIT09IG51bGwgJiYgX3RoaXMkJHN0b3JlJHN0YXRlJGdjMyAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGdjMyA6IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXQoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuZXZlbnRMaXN0ZW5lclJlc2l6ZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICAgIHJldHVybiBfbW91bnRlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbW91bnRlZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImJlZm9yZURlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgIGlmICh2aWV3ZXIpIHsKICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IubG9hZGluZ1Byb2dyZXNzQ2FsbGJhY2sgPSBudWxsOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnY29kZXZpZXdlci9zZXRMb2FkZWRGaWxlQmFja3VwJywgdGhpcy5sb2FkZWRGaWxlKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2NvZGV2aWV3ZXIvc2V0Vmlld2VyQmFja3VwJywgdmlld2VyKTsKICAgICAgfQoKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuZXZlbnRMaXN0ZW5lclJlc2l6ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZXZlbnRMaXN0ZW5lclJlc2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRMaXN0ZW5lclJlc2l6ZSgpIHsKICAgICAgdmFyIF92aWV3ZXI7CgogICAgICAoX3ZpZXdlciA9IHZpZXdlcikgPT09IG51bGwgfHwgX3ZpZXdlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZpZXdlci5yZXNpemUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWxlUG9zaXRpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnByaW50ZXJJc1ByaW50aW5nID8gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci52aXJ0dWFsX3NkY2FyZC5maWxlX3Bvc2l0aW9uIDogMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZENhcmRGaWxlUGF0aCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRwciwgX3RoaXMkJHN0b3JlJHN0YXRlJHByMjsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJHByID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRwcjIgPSB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLnByaW50X3N0YXRzKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkcHIyLmZpbGVuYW1lKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkcHIgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRwciA6ICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImN1cnJlbnRQb3NpdGlvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjMsIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjQ7CgogICAgICByZXR1cm4gKF90aGlzJCRzdG9yZSRzdGF0ZSRwcjMgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJHByNCA9IHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIubW90aW9uX3JlcG9ydCkgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHByNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJHByNC5saXZlX3Bvc2l0aW9uKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkcHIzICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkcHIzIDogWzAsIDAsIDAsIDBdOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dUcmFja2luZ0J1dHRvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJpbnRlcklzUHJpbnRpbmcgJiYgdGhpcy5zZENhcmRGaWxlUGF0aCA9PT0gdGhpcy5sb2FkZWRGaWxlOwogICAgfQogIH0sIHsKICAgIGtleTogInByaW50aW5nX29iamVjdHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkcHI1LCBfdGhpcyQkc3RvcmUkc3RhdGUkcHI2OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkcHI1ID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRwcjYgPSB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLmV4Y2x1ZGVfb2JqZWN0KSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkcHI2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkcHI2Lm9iamVjdHMpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjUgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjUgOiBbXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleGNsdWRlZF9vYmplY3RzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJHByNywgX3RoaXMkJHN0b3JlJHN0YXRlJHByODsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJHByNyA9IChfdGhpcyQkc3RvcmUkc3RhdGUkcHI4ID0gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci5leGNsdWRlX29iamVjdCkgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHByOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJHByOC5leGNsdWRlZF9vYmplY3RzKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkcHI3ICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkcHI3IDogW107CiAgICB9CiAgfSwgewogICAga2V5OiAibm96emxlX2RpYW1ldGVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJHByOSwgX3RoaXMkJHN0b3JlJHN0YXRlJHByMTAsIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjExLCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMjsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJHByOSA9IChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMCA9IHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuY29uZmlnZmlsZSkgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHByMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMSA9IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjEwLnNldHRpbmdzKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJCRzdG9yZSRzdGF0ZSRwcjEyID0gX3RoaXMkJHN0b3JlJHN0YXRlJHByMTEuZXh0cnVkZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMi5ub3p6bGVfZGlhbWV0ZXIpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjkgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjkgOiAwLjQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkZ2M1LCBfdGhpcyQkc3RvcmUkc3RhdGUkZ2M2LCBfdGhpcyQkcm91dGUkcXVlcnksIF90aGlzJCRyb3V0ZSRxdWVyeTIsIF90aGlzJCRyb3V0ZSRxdWVyeTIkZjsKCiAgICAgICAgdmFyIGNhbnZhc0VsZW1lbnQsIF92aWV3ZXIyLCBfdmlld2VyMzsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNhbnZhc0VsZW1lbnQgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJGdjNSA9IChfdGhpcyQkc3RvcmUkc3RhdGUkZ2M2ID0gdGhpcy4kc3RvcmUuc3RhdGUuZ2NvZGV2aWV3ZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRnYzYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRnYzYuY2FudmFzQmFja3VwKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ2M1ICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ2M1IDogbnVsbDsKCiAgICAgICAgICAgICAgICBpZiAoIShjYW52YXNFbGVtZW50ID09PSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICAgICAgICAgIGNhbnZhc0VsZW1lbnQuY2xhc3NOYW1lID0gJ3ZpZXdlcic7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZXdlckNhbnZhc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXNFbGVtZW50KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2NvZGV2aWV3ZXIvc2V0Q2FudmFzQmFja3VwJywgY2FudmFzRWxlbWVudCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy52aWV3ZXJDYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzRWxlbWVudCk7CgogICAgICAgICAgICAgICAgaWYgKChfdmlld2VyMiA9IHZpZXdlcikgIT09IG51bGwgJiYgX3ZpZXdlcjIgIT09IHZvaWQgMCAmJiBfdmlld2VyMi5nY29kZVByb2Nlc3NvcikgewogICAgICAgICAgICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IudXBkYXRlRmlsZVBvc2l0aW9uKChfdmlld2VyMyA9IHZpZXdlcikgPT09IG51bGwgfHwgX3ZpZXdlcjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92aWV3ZXIzLmZpbGVTaXplKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGlmICghKHZpZXdlciA9PT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdlckluaXQoY2FudmFzRWxlbWVudCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyUHJvZ3Jlc3NDYWxsYmFjaygpOwoKICAgICAgICAgICAgICAgIGlmICghKChfdGhpcyQkcm91dGUkcXVlcnkgPSB0aGlzLiRyb3V0ZS5xdWVyeSkgIT09IG51bGwgJiYgX3RoaXMkJHJvdXRlJHF1ZXJ5ICE9PSB2b2lkIDAgJiYgX3RoaXMkJHJvdXRlJHF1ZXJ5LmZpbGVuYW1lICYmIHRoaXMubG9hZGVkRmlsZSAhPT0gKChfdGhpcyQkcm91dGUkcXVlcnkyID0gdGhpcy4kcm91dGUucXVlcnkpID09PSBudWxsIHx8IF90aGlzJCRyb3V0ZSRxdWVyeTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyQkcm91dGUkcXVlcnkyJGYgPSBfdGhpcyQkcm91dGUkcXVlcnkyLmZpbGVuYW1lKSA9PT0gbnVsbCB8fCBfdGhpcyQkcm91dGUkcXVlcnkyJGYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRyb3V0ZSRxdWVyeTIkZi50b1N0cmluZygpKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNsZWVwKDEwMDApOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRGaWxlKHRoaXMuJHJvdXRlLnF1ZXJ5LmZpbGVuYW1lLnRvU3RyaW5nKCkpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICByZXR1cm4gX2luaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluaXQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ2aWV3ZXJJbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2aWV3ZXJJbml0KGVsZW1lbnQpIHsKICAgICAgdmlld2VyID0gbmV3IEdDb2RlVmlld2VyKGVsZW1lbnQpOwogICAgICB2aWV3ZXIuaW5pdCgpOwogICAgICB2aWV3ZXIuc2V0QmFja2dyb3VuZENvbG9yKHRoaXMuYmFja2dyb3VuZENvbG9yKTsKICAgICAgdmlld2VyLmJlZC5zZXRCZWRDb2xvcih0aGlzLmdyaWRDb2xvcik7CiAgICAgIHZpZXdlci5zZXRDdXJzb3JWaXNpYmxpdHkodGhpcy5zaG93Q3Vyc29yKTsKICAgICAgdmlld2VyLnNldFpDbGlwUGxhbmUoMTAwMDAwMCwgLTEwMDAwMDApOwogICAgICB2aWV3ZXIuYXhlcy5zaG93KHRoaXMuc2hvd0F4ZXMpOwogICAgICB2aWV3ZXIuYmVkLnNldERlbHRhKHRoaXMua2luZW1hdGljcy5pbmNsdWRlcygnZGVsdGEnKSk7CgogICAgICBpZiAodGhpcy5iZWRNYXhTaXplICE9PSBudWxsKSB7CiAgICAgICAgdmlld2VyLmJlZC5idWlsZFZvbHVtZVsneCddLm1heCA9IHRoaXMuYmVkTWF4U2l6ZVswXTsKICAgICAgICB2aWV3ZXIuYmVkLmJ1aWxkVm9sdW1lWyd5J10ubWF4ID0gdGhpcy5iZWRNYXhTaXplWzFdOwogICAgICAgIHZpZXdlci5iZWQuYnVpbGRWb2x1bWVbJ3onXS5tYXggPSB0aGlzLmJlZE1heFNpemVbMl07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmJlZE1pblNpemUgIT09IG51bGwpIHsKICAgICAgICB2aWV3ZXIuYmVkLmJ1aWxkVm9sdW1lWyd4J10ubWluID0gdGhpcy5iZWRNaW5TaXplWzBdOwogICAgICAgIHZpZXdlci5iZWQuYnVpbGRWb2x1bWVbJ3knXS5taW4gPSB0aGlzLmJlZE1pblNpemVbMV07CiAgICAgICAgdmlld2VyLmJlZC5idWlsZFZvbHVtZVsneiddLm1pbiA9IHRoaXMuYmVkTWluU2l6ZVsyXTsKICAgICAgfQoKICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnVzZUhpZ2hRdWFsaXR5RXh0cnVzaW9uKHRoaXMuaGRSZW5kZXJpbmcpOwogICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IudXBkYXRlRm9yY2VXaXJlTW9kZSh0aGlzLmZvcmNlTGluZVJlbmRlcmluZyk7CiAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5zZXRBbHBoYSh0aGlzLnRyYW5zcGFyZW5jeSk7CiAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5zZXRWb3hlbE1vZGUodGhpcy52b3hlbE1vZGUpOwogICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3Iudm94ZWxXaWR0aCA9IHRoaXMudm94ZWxXaWR0aDsKICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnZveGVsSGVpZ2h0ID0gdGhpcy52b3hlbEhlaWdodDsKICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnVzZVNwZWN1bGFyQ29sb3IodGhpcy5zcGVjdWxhckxpZ2h0aW5nKTsKICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnNldExpdmVUcmFja2luZyhmYWxzZSk7CiAgICAgIHRoaXMubG9hZFRvb2xDb2xvcnModGhpcy5leHRydWRlckNvbG9ycyk7CgogICAgICBpZiAodmlld2VyLmxhc3RMb2FkRmFpbGVkKCkpIHsKICAgICAgICB0aGlzLnJlbmRlclF1YWxpdHkgPSB0aGlzLnJlbmRlclF1YWxpdGllc1swXTsKICAgICAgICB2aWV3ZXIudXBkYXRlUmVuZGVyUXVhbGl0eSgxKTsKICAgICAgICB2aWV3ZXIuY2xlYXJMb2FkRmxhZygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXJQcm9ncmVzc0NhbGxiYWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlclByb2dyZXNzQ2FsbGJhY2soKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHZpZXdlcikgewogICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5sb2FkaW5nUHJvZ3Jlc3NDYWxsYmFjayA9IGZ1bmN0aW9uIChwcm9ncmVzcykgewogICAgICAgICAgX3RoaXMyLmxvYWRpbmdQZXJjZW50ID0gTWF0aC5jZWlsKHByb2dyZXNzICogMTAwKTsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gX3RoaXMyLmxvYWRpbmdQZXJjZW50IDw9IDk5OwogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5jZWxSZW5kZXJpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jYW5jZWxSZW5kZXJpbmcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXZpZXdlcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5jYW5jZWxMb2FkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNsZWVwKDEwMDApOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjYW5jZWxSZW5kZXJpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9jYW5jZWxSZW5kZXJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNhbmNlbFJlbmRlcmluZzsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNsZWFyTG9hZGVkRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJMb2FkZWRGaWxlKCkgewogICAgICBpZiAodmlld2VyKSB7CiAgICAgICAgdmlld2VyLmNsZWFyU2NlbmUodHJ1ZSk7CiAgICAgICAgdGhpcy5sb2FkZWRGaWxlID0gbnVsbDsKICAgICAgICB0aGlzLnRyYWNraW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaG9vc2VGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjaG9vc2VGaWxlKCkgewogICAgICBpZiAoIXRoaXMuaXNCdXN5KSB7CiAgICAgICAgdGhpcy5maWxlSW5wdXQuY2xpY2soKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZpbmlzaExvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmlzaExvYWQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5tYXhaU2xpZGVyID0gdmlld2VyLmdldE1heEhlaWdodCgpICsgMTsKICAgICAgdGhpcy56U2xpZGVyID0gdGhpcy5tYXhaU2xpZGVyOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgdmlld2VyLnNldEN1cnNvclZpc2libGl0eSh0aGlzLnNob3dDdXJzb3IpOwoKICAgICAgaWYgKHRoaXMubG9hZGVkRmlsZSA9PT0gdGhpcy5zZENhcmRGaWxlUGF0aCAmJiB0aGlzLnByaW50aW5nX29iamVjdHMubGVuZ3RoKSB7CiAgICAgICAgdmFyIG9iamVjdHMgPSBbXTsKICAgICAgICB0aGlzLnByaW50aW5nX29iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAob2JqZWN0KSB7CiAgICAgICAgICB2YXIgeFZhbHVlcyA9IG9iamVjdC5wb2x5Z29uLm1hcChmdW5jdGlvbiAocG9pbnQpIHsKICAgICAgICAgICAgcmV0dXJuIHBvaW50WzBdOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgeVZhbHVlcyA9IG9iamVjdC5wb2x5Z29uLm1hcChmdW5jdGlvbiAocG9pbnQpIHsKICAgICAgICAgICAgcmV0dXJuIHBvaW50WzFdOwogICAgICAgICAgfSk7CiAgICAgICAgICBvYmplY3RzLnB1c2goewogICAgICAgICAgICBjYW5jZWxsZWQ6IF90aGlzMy5leGNsdWRlZF9vYmplY3RzLmluY2x1ZGVzKG9iamVjdC5uYW1lKSwKICAgICAgICAgICAgbmFtZTogb2JqZWN0Lm5hbWUsCiAgICAgICAgICAgIHg6IFtNYXRoLm1pbi5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoeFZhbHVlcykpLCBNYXRoLm1heC5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoeFZhbHVlcykpXSwKICAgICAgICAgICAgeTogW01hdGgubWluLmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheSh5VmFsdWVzKSksIE1hdGgubWF4LmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheSh5VmFsdWVzKSldCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB2aWV3ZXIuYnVpbGRPYmplY3RzLmxvYWRPYmplY3RCb3VuZGFyaWVzKG9iamVjdHMpOwogICAgICAgIHZpZXdlci5idWlsZE9iamVjdHMuc2hvd09iamVjdFNlbGVjdGlvbih0aGlzLnNob3dPYmplY3RTZWxlY3Rpb24pOwogICAgICB9CgogICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IudXBkYXRlRmlsZVBvc2l0aW9uKHZpZXdlci5maWxlU2l6ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsZVNlbGVjdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmlsZVNlbGVjdGVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShlKSB7CiAgICAgICAgdmFyIF90aGlzNCA9IHRoaXMsCiAgICAgICAgICAgIF9lJHRhcmdldCRmaWxlczsKCiAgICAgICAgdmFyIHJlYWRlciwgX2UkdGFyZ2V0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2I7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFldmVudCB8fCAhZXZlbnQudGFyZ2V0KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5maWxlU2l6ZSA9IGJsb2IubGVuZ3RoOyAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXN1bHQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlld2VyLnByb2Nlc3NGaWxlKGJsb2IpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmluaXNoTG9hZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgdGhpcy50cmFja2luZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmICgoX2UkdGFyZ2V0JGZpbGVzID0gZS50YXJnZXQuZmlsZXMpICE9PSBudWxsICYmIF9lJHRhcmdldCRmaWxlcyAhPT0gdm9pZCAwICYmIF9lJHRhcmdldCRmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRGaWxlID0gZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2UkdGFyZ2V0ID0gZS50YXJnZXQpID09PSBudWxsIHx8IF9lJHRhcmdldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UkdGFyZ2V0LmZpbGVzWzBdLm5hbWU7CiAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGUudGFyZ2V0LmZpbGVzWzBdKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9ICcnOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBmaWxlU2VsZWN0ZWQoX3gpIHsKICAgICAgICByZXR1cm4gX2ZpbGVTZWxlY3RlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmlsZVNlbGVjdGVkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAibG9hZEZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2FkRmlsZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoZmlsZW5hbWUpIHsKICAgICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgICAgdmFyIENhbmNlbFRva2VuLCB0ZXh0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkU25hY2tiYXIuc3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRTbmFja2Jhci5zcGVlZCA9IDA7CiAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLnRpbWUgPSAwOwogICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZFNuYWNrYmFyLmZpbGVuYW1lID0gZmlsZW5hbWUuc3RhcnRzV2l0aCgnZ2NvZGVzLycpID8gZmlsZW5hbWUuc2xpY2UoNykgOiBmaWxlbmFtZTsKICAgICAgICAgICAgICAgIENhbmNlbFRva2VuID0gYXhpb3MuQ2FuY2VsVG9rZW47CiAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkU25hY2tiYXIuY2FuY2VsVG9rZW5Tb3VyY2UgPSBDYW5jZWxUb2tlbi5zb3VyY2UoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQodGhpcy5hcGlVcmwgKyAnL3NlcnZlci9maWxlcy8nICsgZW5jb2RlVVJJKGZpbGVuYW1lKSwgewogICAgICAgICAgICAgICAgICBjYW5jZWxUb2tlbjogdGhpcy5kb3dubG9hZFNuYWNrYmFyLmNhbmNlbFRva2VuU291cmNlLnRva2VuLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgICAgICAgICAgICAgb25Eb3dubG9hZFByb2dyZXNzOiBmdW5jdGlvbiBvbkRvd25sb2FkUHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLnBlcmNlbnQgPSBwcm9ncmVzc0V2ZW50LmxvYWRlZCAqIDEwMCAvIHByb2dyZXNzRXZlbnQudG90YWw7CgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczUuZG93bmxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MudGltZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBwcm9ncmVzc0V2ZW50LnRpbWVTdGFtcCAtIF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy50aW1lOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBwcm9ncmVzc0V2ZW50LmxvYWRlZCAtIF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy5sb2FkZWQ7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPiAxMDAwIHx8IF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLnNwZWVkID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLnNwZWVkID0gZGF0YSAvICh0aW1lIC8gMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy50aW1lID0gcHJvZ3Jlc3NFdmVudC50aW1lU3RhbXA7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5kb3dubG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy5sb2FkZWQgPSBwcm9ncmVzc0V2ZW50LmxvYWRlZDsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgX3RoaXM1LmRvd25sb2FkU25hY2tiYXIubGFzdFByb2dyZXNzLnRpbWUgPSBwcm9ncmVzc0V2ZW50LnRpbWVTdGFtcDsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmRvd25sb2FkU25hY2tiYXIudG90YWwgPSBwcm9ncmVzc0V2ZW50LnRvdGFsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhLnRleHQoKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKGUubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgdGV4dCA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZFNuYWNrYmFyLnN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRGaWxlID0gdGhpcy5kb3dubG9hZFNuYWNrYmFyLmZpbGVuYW1lOwogICAgICAgICAgICAgICAgdmlld2VyLnVwZGF0ZVJlbmRlclF1YWxpdHkodGhpcy5yZW5kZXJRdWFsaXR5LnZhbHVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdmlld2VyLnByb2Nlc3NGaWxlKHRleHQpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nUGVyY2VudCA9IDEwMDsKICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoTG9hZCgpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9hZEZpbGUoX3gzKSB7CiAgICAgICAgcmV0dXJuIF9sb2FkRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbG9hZEZpbGU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjYW5jZWxEb3dubG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsRG93bmxvYWQoKSB7CiAgICAgIHRoaXMuZG93bmxvYWRTbmFja2Jhci5jYW5jZWxUb2tlblNvdXJjZS5jYW5jZWwoJ1VzZXIgY2FuY2VsZWQgZG93bmxvYWQgZ2NvZGUgZmlsZScpOwogICAgfQogIH0sIHsKICAgIGtleTogInNsZWVwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2xlZXAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KG1zKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCBtcyk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2xlZXAoX3g0KSB7CiAgICAgICAgcmV0dXJuIF9zbGVlcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2xlZXA7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2FkQ3VycmVudEZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2FkQ3VycmVudEZpbGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkRmlsZSgnZ2NvZGVzLycgKyB0aGlzLnNkQ2FyZEZpbGVQYXRoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRGaWxlID0gdGhpcy5zZENhcmRGaWxlUGF0aDsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9hZEN1cnJlbnRGaWxlKCkgewogICAgICAgIHJldHVybiBfbG9hZEN1cnJlbnRGaWxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2FkQ3VycmVudEZpbGU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJyZWxvYWRWaWV3ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWxvYWRWaWV3ZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9hZGluZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vaWYgd2UgYXJlIGFjdGl2ZWx5IGxvYWRpbmcgc2lnbmFsIGEgY2FuY2VsIGFuZCB3YWl0IGEgc2Vjb25kCiAgICAgICAgICAgICAgICAvL1RoaXMgcHJldmVudHMgYSB0aW1pbmcgaXNzdWUgdGhhdCBjYW4gaGFwcGVuIGlmIGEgdXNlciBjaGFuZ2VzIHNldHRpbmdzIGFuZCB0aGVuCiAgICAgICAgICAgICAgICAvL2hpdHMgdGhlIHJlbG9hZCB2aWV3ZXIgYnV0dG9uLiBXaWxsIGV2ZW50dWFsbHkgbW92ZSB0aGlzIHRvIGFwaQogICAgICAgICAgICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLmNhbmNlbExvYWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2xlZXAoMTAwMCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRoaXMucmVsb2FkUmVxdWlyZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdQZXJjZW50ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiB2aWV3ZXIucmVsb2FkKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ1BlcmNlbnQgPSAxMDA7CiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaExvYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlbG9hZFZpZXdlcigpIHsKICAgICAgICByZXR1cm4gX3JlbG9hZFZpZXdlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVsb2FkVmlld2VyOwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVzZXRDYW1lcmEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0Q2FtZXJhKCkgewogICAgICB2aWV3ZXIucmVzZXRDYW1lcmEoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRSZWxvYWRSZXF1aXJlZEZsYWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFJlbG9hZFJlcXVpcmVkRmxhZygpIHsKICAgICAgaWYgKHRoaXMubG9hZGVkRmlsZSAmJiB0aGlzLmxvYWRlZEZpbGUgIT0gJycpIHsKICAgICAgICB0aGlzLnJlbG9hZFJlcXVpcmVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlclF1YWxpdHlDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVuZGVyUXVhbGl0eUNoYW5nZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMChuZXdWYWwpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKHZpZXdlciAmJiB2aWV3ZXIucmVuZGVyUXVhbGl0eSAhPT0gbmV3VmFsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2aWV3ZXIudXBkYXRlUmVuZGVyUXVhbGl0eShuZXdWYWwpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZFZpZXdlcigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlbmRlclF1YWxpdHlDaGFuZ2VkKF94NSkgewogICAgICAgIHJldHVybiBfcmVuZGVyUXVhbGl0eUNoYW5nZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlbmRlclF1YWxpdHlDaGFuZ2VkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY3VycmVudFBvc2l0aW9uQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3VycmVudFBvc2l0aW9uQ2hhbmdlZChuZXdWYWwpIHsKICAgICAgaWYgKHZpZXdlcikgewogICAgICAgIHZhciBwb3NpdGlvbiA9IFt7CiAgICAgICAgICBheGVzOiAnWCcsCiAgICAgICAgICBwb3NpdGlvbjogbmV3VmFsWzBdCiAgICAgICAgfSwgewogICAgICAgICAgYXhlczogJ1knLAogICAgICAgICAgcG9zaXRpb246IG5ld1ZhbFsxXQogICAgICAgIH0sIHsKICAgICAgICAgIGF4ZXM6ICdaJywKICAgICAgICAgIHBvc2l0aW9uOiBuZXdWYWxbMl0KICAgICAgICB9XTsKICAgICAgICB2aWV3ZXIudXBkYXRlVG9vbFBvc2l0aW9uKHBvc2l0aW9uKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZpbGVQb3NpdGlvbkNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGVQb3NpdGlvbkNoYW5nZWQobmV3VmFsKSB7CiAgICAgIGlmICghdmlld2VyKSByZXR1cm47CiAgICAgIHZhciBvZmZzZXQgPSAzNTA7CgogICAgICBpZiAobmV3VmFsID4gMCAmJiB0aGlzLnByaW50ZXJJc1ByaW50aW5nICYmIHRoaXMudHJhY2tpbmcgJiYgbmV3VmFsID4gb2Zmc2V0KSB7CiAgICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnVwZGF0ZUZpbGVQb3NpdGlvbihuZXdWYWwgLSBvZmZzZXQpOwogICAgICB9IGVsc2UgewogICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci51cGRhdGVGaWxlUG9zaXRpb24odmlld2VyLmZpbGVTaXplKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInRyYWNraW5nQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RyYWNraW5nQ2hhbmdlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKG5ld1ZhbCkgewogICAgICAgIHZhciBfdmlld2VyNDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAodmlld2VyKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGlmICghbmV3VmFsKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vU2V0IHpTbGlkZXIgdG8gbWF4IHZhbHVlCiAgICAgICAgICAgICAgICB0aGlzLnpTbGlkZXIgPSB0aGlzLm1heFpTbGlkZXI7IC8vRm9yY2UgcmVuZGVyZXJzIHJlbG9hZC4KCiAgICAgICAgICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IudXBkYXRlRmlsZVBvc2l0aW9uKDApOwogICAgICAgICAgICAgICAgKF92aWV3ZXI0ID0gdmlld2VyKSA9PT0gbnVsbCB8fCBfdmlld2VyNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZpZXdlcjQuZm9yY2VSZW5kZXIoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5zZXRMaXZlVHJhY2tpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRWaWV3ZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdHJhY2tpbmdDaGFuZ2VkKF94NikgewogICAgICAgIHJldHVybiBfdHJhY2tpbmdDaGFuZ2VkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cmFja2luZ0NoYW5nZWQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJwcmludGVySXNQcmludGluZ0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByaW50ZXJJc1ByaW50aW5nQ2hhbmdlZCgpIHsKICAgICAgdGhpcy50cmFja2luZyA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dDdXJzb3IiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U7CgogICAgICByZXR1cm4gKF90aGlzJCRzdG9yZSRzdGF0ZSRndSA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlci5zaG93Q3Vyc29yKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRndSA6IGZhbHNlOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgewogICAgICAgIG5hbWU6ICdnY29kZVZpZXdlci5zaG93Q3Vyc29yJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dDdXJzb3JDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93Q3Vyc29yQ2hhbmdlZChuZXdWYWwpIHsKICAgICAgdmFyIF92aWV3ZXI1OwoKICAgICAgKF92aWV3ZXI1ID0gdmlld2VyKSA9PT0gbnVsbCB8fCBfdmlld2VyNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZpZXdlcjUuc2V0Q3Vyc29yVmlzaWJsaXR5KG5ld1ZhbCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd1RyYXZlbE1vdmVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MiA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlci5zaG93VHJhdmVsTW92ZXMpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRndTIgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRndTIgOiBmYWxzZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAnZ2NvZGVWaWV3ZXIuc2hvd1RyYXZlbE1vdmVzJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dUcmF2ZWxNb3Zlc0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dUcmF2ZWxNb3Zlc0NoYW5nZWQobmV3VmFsKSB7CiAgICAgIHZhciBfdmlld2VyNjsKCiAgICAgIChfdmlld2VyNiA9IHZpZXdlcikgPT09IG51bGwgfHwgX3ZpZXdlcjYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92aWV3ZXI2LnRvZ2dsZVRyYXZlbHMobmV3VmFsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93T2JqZWN0U2VsZWN0aW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MzsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MyA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlci5zaG93T2JqZWN0U2VsZWN0aW9uKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UzICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UzIDogZmFsc2U7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ2djb2RlVmlld2VyLnNob3dPYmplY3RTZWxlY3Rpb24nLAogICAgICAgIHZhbHVlOiBuZXdWYWwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd09iamVjdFNlbGVjdGlvbkNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dPYmplY3RTZWxlY3Rpb25DaGFuZ2VkKG5ld1ZhbCkgewogICAgICB2YXIgX3ZpZXdlcjc7CgogICAgICAoX3ZpZXdlcjcgPSB2aWV3ZXIpID09PSBudWxsIHx8IF92aWV3ZXI3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmlld2VyNy5idWlsZE9iamVjdHMuc2hvd09iamVjdFNlbGVjdGlvbihuZXdWYWwpOwogICAgfQogIH0sIHsKICAgIGtleTogImhkUmVuZGVyaW5nIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyLmhkUmVuZGVyaW5nOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgewogICAgICAgIG5hbWU6ICdnY29kZVZpZXdlci5oZFJlbmRlcmluZycsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoZFJlbmRlcmluZ0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oZFJlbmRlcmluZ0NoYW5nZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMihuZXdWYWwpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghdmlld2VyKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci51c2VIaWdoUXVhbGl0eUV4dHJ1c2lvbihuZXdWYWwpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZFZpZXdlcigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhkUmVuZGVyaW5nQ2hhbmdlZChfeDcpIHsKICAgICAgICByZXR1cm4gX2hkUmVuZGVyaW5nQ2hhbmdlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGRSZW5kZXJpbmdDaGFuZ2VkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZm9yY2VMaW5lUmVuZGVyaW5nIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyLmZvcmNlTGluZVJlbmRlcmluZzsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAnZ2NvZGVWaWV3ZXIuZm9yY2VMaW5lUmVuZGVyaW5nJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZvcmNlTGluZVJlbmRlcmluZ0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9mb3JjZUxpbmVSZW5kZXJpbmdDaGFuZ2VkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMobmV3VmFsKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXZpZXdlcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IudXBkYXRlRm9yY2VXaXJlTW9kZShuZXdWYWwpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZFZpZXdlcigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZvcmNlTGluZVJlbmRlcmluZ0NoYW5nZWQoX3g4KSB7CiAgICAgICAgcmV0dXJuIF9mb3JjZUxpbmVSZW5kZXJpbmdDaGFuZ2VkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmb3JjZUxpbmVSZW5kZXJpbmdDaGFuZ2VkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAidHJhbnNwYXJlbmN5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyLnRyYW5zcGFyZW5jeTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAnZ2NvZGVWaWV3ZXIudHJhbnNwYXJlbmN5JywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInRyYW5zcGFyZW5jeUNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90cmFuc3BhcmVuY3lDaGFuZ2VkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQobmV3VmFsKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXZpZXdlcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3Iuc2V0QWxwaGEobmV3VmFsKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRWaWV3ZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB0cmFuc3BhcmVuY3lDaGFuZ2VkKF94OSkgewogICAgICAgIHJldHVybiBfdHJhbnNwYXJlbmN5Q2hhbmdlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdHJhbnNwYXJlbmN5Q2hhbmdlZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInZveGVsTW9kZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlci52b3hlbE1vZGU7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ2djb2RlVmlld2VyLnZveGVsTW9kZScsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2b3hlbE1vZGVDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdm94ZWxNb2RlQ2hhbmdlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KG5ld1ZhbCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCF2aWV3ZXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnNldFZveGVsTW9kZShuZXdWYWwpOwogICAgICAgICAgICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnZveGVsV2lkdGggPSB0aGlzLnZveGVsV2lkdGg7CiAgICAgICAgICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3Iudm94ZWxIZWlnaHQgPSB0aGlzLnZveGVsSGVpZ2h0OwogICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZFZpZXdlcigpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHZveGVsTW9kZUNoYW5nZWQoX3gxMCkgewogICAgICAgIHJldHVybiBfdm94ZWxNb2RlQ2hhbmdlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdm94ZWxNb2RlQ2hhbmdlZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInZveGVsV2lkdGgiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U0OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkZ3U0ID0gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyLnZveGVsV2lkdGgpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRndTQgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRndTQgOiAxOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld1ZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgewogICAgICAgIG5hbWU6ICdnY29kZVZpZXdlci52b3hlbFdpZHRoJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInZveGVsSGVpZ2h0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1NTsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1NSA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlci52b3hlbEhlaWdodCkgIT09IG51bGwgJiYgX3RoaXMkJHN0b3JlJHN0YXRlJGd1NSAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGd1NSA6IDE7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3VmFsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7CiAgICAgICAgbmFtZTogJ2djb2RlVmlld2VyLnZveGVsSGVpZ2h0JywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNwZWN1bGFyTGlnaHRpbmciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2NvZGVWaWV3ZXIuc3BlY3VsYXJMaWdodGluZzsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAnZ2NvZGVWaWV3ZXIuc3BlY3VsYXJMaWdodGluZycsCiAgICAgICAgdmFsdWU6IG5ld1ZhbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzcGVjdWxhckxpZ2h0aW5nQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NwZWN1bGFyTGlnaHRpbmdDaGFuZ2VkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYobmV3VmFsKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAodmlld2VyKSB7CiAgICAgICAgICAgICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci51c2VTcGVjdWxhckNvbG9yKG5ld1ZhbCk7IC8vYXdhaXQgdGhpcy5yZWxvYWRWaWV3ZXIoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNwZWN1bGFyTGlnaHRpbmdDaGFuZ2VkKF94MTEpIHsKICAgICAgICByZXR1cm4gX3NwZWN1bGFyTGlnaHRpbmdDaGFuZ2VkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzcGVjdWxhckxpZ2h0aW5nQ2hhbmdlZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImV4dHJ1ZGVyQ29sb3JzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1NiwgX3RoaXMkJHN0b3JlJHN0YXRlJGd1NzsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1NiA9IChfdGhpcyQkc3RvcmUkc3RhdGUkZ3U3ID0gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U3LmV4dHJ1ZGVyQ29sb3JzKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U2ICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U2IDogZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZFRvb2xDb2xvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRUb29sQ29sb3JzKGNvbG9ycykgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmICh2aWV3ZXIgJiYgY29sb3JzLmxlbmd0aCkgewogICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5yZXNldFRvb2xzKCk7CiAgICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IuYWRkVG9vbChjb2xvciwgX3RoaXM2Lm5venpsZV9kaWFtZXRlcik7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZXRSZWxvYWRSZXF1aXJlZEZsYWcoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImV4dHJ1ZGVyQ29sb3JzQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cnVkZXJDb2xvcnNDaGFuZ2VkKG5ld1ZhbCkgewogICAgICBpZiAodmlld2VyICYmIG5ld1ZhbCAmJiBuZXdWYWwubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5sb2FkVG9vbENvbG9ycyhuZXdWYWwpOwogICAgICAgIHRoaXMuc2V0UmVsb2FkUmVxdWlyZWRGbGFnKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb2xvck1vZGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U4LCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U5OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkZ3U4ID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRndTkgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2NvZGVWaWV3ZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRndTkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRndTkuY29sb3JNb2RlKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U4ICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ3U4IDogMjsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdWYWwpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsKICAgICAgICBuYW1lOiAnZ2NvZGVWaWV3ZXIuY29sb3JNb2RlJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwoKICAgICAgaWYgKHZpZXdlcikgewogICAgICAgIGlmICh2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IuY29sb3JNb2RlICE9PSBuZXdWYWwpIHsKICAgICAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci5zZXRDb2xvck1vZGUobmV3VmFsKTsKICAgICAgICAgIHRoaXMucmVsb2FkVmlld2VyKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYmFja2dyb3VuZENvbG9yIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTAsIF90aGlzJCRzdG9yZSRzdGF0ZSRndTExOwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxMCA9IChfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxMSA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlcikgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRndTExLmJhY2tncm91bmRDb2xvcikgIT09IG51bGwgJiYgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTAgIT09IHZvaWQgMCA/IF90aGlzJCRzdG9yZSRzdGF0ZSRndTEwIDogJyMxMjEyMTInOwogICAgfQogIH0sIHsKICAgIGtleTogImJhY2tncm91bmRDb2xvckNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJhY2tncm91bmRDb2xvckNoYW5nZWQobmV3VmFsKSB7CiAgICAgIGlmICghdmlld2VyKSByZXR1cm47CiAgICAgIHZpZXdlci5zZXRCYWNrZ3JvdW5kQ29sb3IobmV3VmFsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJncmlkQ29sb3IiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxMiwgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTM7CgogICAgICByZXR1cm4gKF90aGlzJCRzdG9yZSRzdGF0ZSRndTEyID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRndTEzID0gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTMuZ3JpZENvbG9yKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxMiAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTIgOiAnI0IzQjNCMyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ3JpZENvbG9yQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JpZENvbG9yQ2hhbmdlZChuZXdWYWwpIHsKICAgICAgaWYgKCF2aWV3ZXIpIHJldHVybjsKICAgICAgdmlld2VyLmJlZC5zZXRCZWRDb2xvcihuZXdWYWwpOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dBeGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTQsIF90aGlzJCRzdG9yZSRzdGF0ZSRndTE1OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxNCA9IChfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxNSA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlcikgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRndTE1LnNob3dBeGVzKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxNCAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTQgOiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dBeGVzQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0F4ZXNDaGFuZ2VkKG5ld1ZhbCkgewogICAgICBpZiAoIXZpZXdlcikgcmV0dXJuOwogICAgICB2aWV3ZXIuYXhlcy5zaG93KG5ld1ZhbCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibWluRmVlZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRndTE2LCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxNzsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTYgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTcgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2NvZGVWaWV3ZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRndTE3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxNy5taW5GZWVkKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxNiAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTYgOiAyMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtaW5GZWVkQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWluRmVlZENoYW5nZWQobmV3VmFsKSB7CiAgICAgIGlmICghdmlld2VyKSByZXR1cm47CiAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci51cGRhdGVDb2xvclJhdGUobmV3VmFsICogNjAsIHRoaXMubWF4RmVlZCAqIDYwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXhGZWVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTgsIF90aGlzJCRzdG9yZSRzdGF0ZSRndTE5OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxOCA9IChfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxOSA9IHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nY29kZVZpZXdlcikgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MTkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRndTE5Lm1heEZlZWQpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRndTE4ICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UxOCA6IDEwMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXhGZWVkQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWF4RmVlZENoYW5nZWQobmV3VmFsKSB7CiAgICAgIGlmICghdmlld2VyKSByZXR1cm47CiAgICAgIHZpZXdlci5nY29kZVByb2Nlc3Nvci51cGRhdGVDb2xvclJhdGUodGhpcy5taW5GZWVkICogNjAsIG5ld1ZhbCAqIDYwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtaW5GZWVkQ29sb3IiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyMCwgX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjE7CgogICAgICByZXR1cm4gKF90aGlzJCRzdG9yZSRzdGF0ZSRndTIwID0gKF90aGlzJCRzdG9yZSRzdGF0ZSRndTIxID0gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdjb2RlVmlld2VyKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjEubWluRmVlZENvbG9yKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyMCAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjAgOiAnIzAwMDBGRic7CiAgICB9CiAgfSwgewogICAga2V5OiAibWluRmVlZENvbG9yVXBkYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWluRmVlZENvbG9yVXBkYXRlZChuZXdWYWwpIHsKICAgICAgaWYgKCF2aWV3ZXIpIHJldHVybjsKICAgICAgdmlld2VyLmdjb2RlUHJvY2Vzc29yLnVwZGF0ZU1pbkZlZWRDb2xvcihuZXdWYWwpOwogICAgICB0aGlzLnNldFJlbG9hZFJlcXVpcmVkRmxhZygpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1heEZlZWRDb2xvciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRndTIyLCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyMzsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjIgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2NvZGVWaWV3ZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRndTIzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyMy5tYXhGZWVkQ29sb3IpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRndTIyICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyMiA6ICcjRkYwMDAwJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXhGZWVkQ29sb3JVcGRhdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtYXhGZWVkQ29sb3JVcGRhdGVkKG5ld1ZhbCkgewogICAgICBpZiAoIXZpZXdlcikgcmV0dXJuOwogICAgICB2aWV3ZXIuZ2NvZGVQcm9jZXNzb3IudXBkYXRlTWF4RmVlZENvbG9yKG5ld1ZhbCk7CiAgICAgIHRoaXMuc2V0UmVsb2FkUmVxdWlyZWRGbGFnKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAia2luZW1hdGljcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjEzLCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxNCwgX3RoaXMkJHN0b3JlJHN0YXRlJHByMTUsIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE2OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMyA9IChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxNCA9IHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuY29uZmlnZmlsZSkgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHByMTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxNSA9IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE0LnNldHRpbmdzKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE2ID0gX3RoaXMkJHN0b3JlJHN0YXRlJHByMTUucHJpbnRlcikgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJHN0YXRlJHByMTYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE2LmtpbmVtYXRpY3MpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjEzICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxMyA6ICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImtpbmVtYXRpY3NDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBraW5lbWF0aWNzQ2hhbmdlZChuZXdWYWwpIHsKICAgICAgaWYgKHZpZXdlciAmJiBuZXdWYWwpIHsKICAgICAgICB2aWV3ZXIuYmVkLnNldERlbHRhKG5ld1ZhbC5pbmNsdWRlcygnZGVsdGEnKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJiZWRNaW5TaXplIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJHN0YXRlJHByMTcsIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE4OwoKICAgICAgcmV0dXJuIChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxNyA9IChfdGhpcyQkc3RvcmUkc3RhdGUkcHIxOCA9IHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIudG9vbGhlYWQpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxOC5heGlzX21pbmltdW0pICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE3ICE9PSB2b2lkIDAgPyBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxNyA6IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiYmVkTWluU2l6ZUNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJlZE1pblNpemVDaGFuZ2VkKG5ld1ZhbCkgewogICAgICBpZiAodmlld2VyICYmIG5ld1ZhbCkgewogICAgICAgIHZpZXdlci5iZWQuYnVpbGRWb2x1bWVbJ3gnXS5taW4gPSBuZXdWYWxbMF07CiAgICAgICAgdmlld2VyLmJlZC5idWlsZFZvbHVtZVsneSddLm1pbiA9IG5ld1ZhbFsxXTsKICAgICAgICB2aWV3ZXIuYmVkLmJ1aWxkVm9sdW1lWyd6J10ubWluID0gbmV3VmFsWzJdOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYmVkTWF4U2l6ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRwcjE5LCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIyMDsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJHByMTkgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJHByMjAgPSB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLnRvb2xoZWFkKSA9PT0gbnVsbCB8fCBfdGhpcyQkc3RvcmUkc3RhdGUkcHIyMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHN0b3JlJHN0YXRlJHByMjAuYXhpc19tYXhpbXVtKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkcHIxOSAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJHByMTkgOiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImJlZE1heFNpemVDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBiZWRNYXhTaXplQ2hhbmdlZChuZXdWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCAmJiB2aWV3ZXIpIHsKICAgICAgICB2aWV3ZXIuYmVkLmJ1aWxkVm9sdW1lWyd4J10ubWF4ID0gbmV3VmFsWzBdOwogICAgICAgIHZpZXdlci5iZWQuYnVpbGRWb2x1bWVbJ3knXS5tYXggPSBuZXdWYWxbMV07CiAgICAgICAgdmlld2VyLmJlZC5idWlsZFZvbHVtZVsneiddLm1heCA9IG5ld1ZhbFsyXTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInpTbGlkZXJDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB6U2xpZGVyQ2hhbmdlZChuZXdWYWwpIHsKICAgICAgdmFyIF92aWV3ZXI4LCBfdmlld2VyOTsKCiAgICAgIChfdmlld2VyOCA9IHZpZXdlcikgPT09IG51bGwgfHwgX3ZpZXdlcjggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92aWV3ZXI4LnNldFpDbGlwUGxhbmUobmV3VmFsLCAtMSk7CiAgICAgIChfdmlld2VyOSA9IHZpZXdlcikgPT09IG51bGwgfHwgX3ZpZXdlcjkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92aWV3ZXI5LmZvcmNlUmVuZGVyKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJvZ3Jlc3NDb2xvciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJCRzdG9yZSRzdGF0ZSRndTI0LCBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyNTsKCiAgICAgIHJldHVybiAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjQgPSAoX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2NvZGVWaWV3ZXIpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRzdGF0ZSRndTI1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyNS5wcm9ncmVzc0NvbG9yKSAhPT0gbnVsbCAmJiBfdGhpcyQkc3RvcmUkc3RhdGUkZ3UyNCAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJHN0YXRlJGd1MjQgOiAnI0ZGRkZGRic7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJvZ3Jlc3NDb2xvckNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2dyZXNzQ29sb3JDaGFuZ2VkKG5ld1ZhbCkgewogICAgICB2YXIgX3ZpZXdlcjEwOwoKICAgICAgKF92aWV3ZXIxMCA9IHZpZXdlcikgPT09IG51bGwgfHwgX3ZpZXdlcjEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmlld2VyMTAuc2V0UHJvZ3Jlc3NDb2xvcihuZXdWYWwpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVpTbGlkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVpTbGlkZXIobmV3VmFsKSB7CiAgICAgIHRoaXMuelNsaWRlciA9IG5ld1ZhbDsKICAgIH0KICB9XSk7CgogIHJldHVybiBWaWV3ZXI7Cn0oTWl4aW5zKEJhc2VNaXhpbikpOwoKX19kZWNvcmF0ZShbUHJvcCh7CiAgdHlwZTogU3RyaW5nLAogIGRlZmF1bHQ6ICcnLAogIHJlcXVpcmVkOiBmYWxzZQp9KV0sIFZpZXdlci5wcm90b3R5cGUsICJmaWxlbmFtZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtSZWYoJ2ZpbGVJbnB1dCcpXSwgVmlld2VyLnByb3RvdHlwZSwgImZpbGVJbnB1dCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtXYXRjaCgncmVuZGVyUXVhbGl0eScpXSwgVmlld2VyLnByb3RvdHlwZSwgInJlbmRlclF1YWxpdHlDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnY3VycmVudFBvc2l0aW9uJyldLCBWaWV3ZXIucHJvdG90eXBlLCAiY3VycmVudFBvc2l0aW9uQ2hhbmdlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ2ZpbGVQb3NpdGlvbicpXSwgVmlld2VyLnByb3RvdHlwZSwgImZpbGVQb3NpdGlvbkNoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCd0cmFja2luZycpXSwgVmlld2VyLnByb3RvdHlwZSwgInRyYWNraW5nQ2hhbmdlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3ByaW50ZXJJc1ByaW50aW5nJyldLCBWaWV3ZXIucHJvdG90eXBlLCAicHJpbnRlcklzUHJpbnRpbmdDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnc2hvd0N1cnNvcicpXSwgVmlld2VyLnByb3RvdHlwZSwgInNob3dDdXJzb3JDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnc2hvd1RyYXZlbE1vdmVzJyldLCBWaWV3ZXIucHJvdG90eXBlLCAic2hvd1RyYXZlbE1vdmVzQ2hhbmdlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3Nob3dPYmplY3RTZWxlY3Rpb24nKV0sIFZpZXdlci5wcm90b3R5cGUsICJzaG93T2JqZWN0U2VsZWN0aW9uQ2hhbmdlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ2hkUmVuZGVyaW5nJyldLCBWaWV3ZXIucHJvdG90eXBlLCAiaGRSZW5kZXJpbmdDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnZm9yY2VMaW5lUmVuZGVyaW5nJyldLCBWaWV3ZXIucHJvdG90eXBlLCAiZm9yY2VMaW5lUmVuZGVyaW5nQ2hhbmdlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3RyYW5zcGFyZW5jeScpXSwgVmlld2VyLnByb3RvdHlwZSwgInRyYW5zcGFyZW5jeUNoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCd2b3hlbE1vZGUnKV0sIFZpZXdlci5wcm90b3R5cGUsICJ2b3hlbE1vZGVDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnc3BlY3VsYXJMaWdodGluZycpXSwgVmlld2VyLnByb3RvdHlwZSwgInNwZWN1bGFyTGlnaHRpbmdDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnZXh0cnVkZXJDb2xvcnMnKV0sIFZpZXdlci5wcm90b3R5cGUsICJleHRydWRlckNvbG9yc0NoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdiYWNrZ3JvdW5kQ29sb3InKV0sIFZpZXdlci5wcm90b3R5cGUsICJiYWNrZ3JvdW5kQ29sb3JDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnZ3JpZENvbG9yJyldLCBWaWV3ZXIucHJvdG90eXBlLCAiZ3JpZENvbG9yQ2hhbmdlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3Nob3dBeGVzJyldLCBWaWV3ZXIucHJvdG90eXBlLCAic2hvd0F4ZXNDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnbWluRmVlZCcpXSwgVmlld2VyLnByb3RvdHlwZSwgIm1pbkZlZWRDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnbWF4RmVlZCcpXSwgVmlld2VyLnByb3RvdHlwZSwgIm1heEZlZWRDaGFuZ2VkIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnbWluRmVlZENvbG9yJyldLCBWaWV3ZXIucHJvdG90eXBlLCAibWluRmVlZENvbG9yVXBkYXRlZCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ21heEZlZWRDb2xvcicpXSwgVmlld2VyLnByb3RvdHlwZSwgIm1heEZlZWRDb2xvclVwZGF0ZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdraW5lbWF0aWNzJyldLCBWaWV3ZXIucHJvdG90eXBlLCAia2luZW1hdGljc0NoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdiZWRNaW5TaXplJywgewogIGRlZXA6IHRydWUKfSldLCBWaWV3ZXIucHJvdG90eXBlLCAiYmVkTWluU2l6ZUNoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdiZWRNYXhTaXplJywgewogIGRlZXA6IHRydWUKfSldLCBWaWV3ZXIucHJvdG90eXBlLCAiYmVkTWF4U2l6ZUNoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCd6U2xpZGVyJyldLCBWaWV3ZXIucHJvdG90eXBlLCAielNsaWRlckNoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdwcm9ncmVzc0NvbG9yJyldLCBWaWV3ZXIucHJvdG90eXBlLCAicHJvZ3Jlc3NDb2xvckNoYW5nZWQiLCBudWxsKTsKClZpZXdlciA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgUGFuZWw6IFBhbmVsCiAgfQp9KV0sIFZpZXdlcik7CmV4cG9ydCBkZWZhdWx0IFZpZXdlcjs="},null]}