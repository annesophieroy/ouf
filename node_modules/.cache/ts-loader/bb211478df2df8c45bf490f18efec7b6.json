{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-3!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/webSocketClient.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/webSocketClient.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKZXhwb3J0IHZhciBXZWJTb2NrZXRDbGllbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFdlYlNvY2tldENsaWVudChvcHRpb25zKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2ViU29ja2V0Q2xpZW50KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInVybCIsICcnKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImluc3RhbmNlIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtYXhSZWNvbm5lY3RzIiwgNSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWNvbm5lY3RJbnRlcnZhbCIsIDEwMDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVjb25uZWN0cyIsIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAia2VlcEFsaXZlVGltZW91dCIsIDEwMDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidGltZXJJZCIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RvcmUiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndhaXRzIiwgW10pOwoKICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmw7CiAgICB0aGlzLm1heFJlY29ubmVjdHMgPSBvcHRpb25zLm1heFJlY29ubmVjdHMgfHwgNTsKICAgIHRoaXMucmVjb25uZWN0SW50ZXJ2YWwgPSBvcHRpb25zLnJlY29ubmVjdEludGVydmFsIHx8IDEwMDA7CiAgICB0aGlzLnN0b3JlID0gb3B0aW9ucy5zdG9yZTsKICB9CgogIF9jcmVhdGVDbGFzcyhXZWJTb2NrZXRDbGllbnQsIFt7CiAgICBrZXk6ICJzZXRVcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFVybCh1cmwpIHsKICAgICAgdGhpcy51cmwgPSB1cmw7CiAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQoKICB9LCB7CiAgICBrZXk6ICJwYXNzVG9TdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGFzc1RvU3RvcmUoZXZlbnROYW1lLCBldmVudCkgewogICAgICB2YXIgX3RoaXMkc3RvcmU7CgogICAgICBpZiAoIWV2ZW50TmFtZS5zdGFydHNXaXRoKCdzb2NrZXQvJykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIChfdGhpcyRzdG9yZSA9IHRoaXMuc3RvcmUpID09PSBudWxsIHx8IF90aGlzJHN0b3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdG9yZS5kaXNwYXRjaChldmVudE5hbWUsIGV2ZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb25uZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY29ubmVjdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzJHN0b3JlMiwKICAgICAgICAgICAgX3RoaXMgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgKF90aGlzJHN0b3JlMiA9IHRoaXMuc3RvcmUpID09PSBudWxsIHx8IF90aGlzJHN0b3JlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RvcmUyLmRpc3BhdGNoKCdzb2NrZXQvc2V0RGF0YScsIHsKICAgICAgICAgICAgICAgICAgaXNDb25uZWN0aW5nOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZSkgewogICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBXZWJTb2NrZXQodGhpcy51cmwpOwoKICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3RoaXMkc3RvcmUzOwoKICAgICAgICAgICAgICAgICAgX3RoaXMucmVjb25uZWN0cyA9IDA7CiAgICAgICAgICAgICAgICAgIChfdGhpcyRzdG9yZTMgPSBfdGhpcy5zdG9yZSkgPT09IG51bGwgfHwgX3RoaXMkc3RvcmUzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdG9yZTMuZGlzcGF0Y2goJ3NvY2tldC9vbk9wZW4nLCBldmVudCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uub25jbG9zZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMkc3RvcmU0OwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghZS53YXNDbGVhbiAmJiBfdGhpcy5yZWNvbm5lY3RzIDwgX3RoaXMubWF4UmVjb25uZWN0cykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlY29ubmVjdHMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfdGhpcy5yZWNvbm5lY3RJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX3RoaXMkc3RvcmU0ID0gX3RoaXMuc3RvcmUpID09PSBudWxsIHx8IF90aGlzJHN0b3JlNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RvcmU0LmRpc3BhdGNoKCdzb2NrZXQvb25DbG9zZScsIGUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaW5zdGFuY2UpIF90aGlzLmluc3RhbmNlLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uub25tZXNzYWdlID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UobXNnLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnN0b3JlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzJHN0b3JlNjsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHdhaXQgPSBfdGhpcy5nZXRXYWl0QnlJZChkYXRhLmlkKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHdhaXQgJiYgd2FpdC5hY3Rpb24gIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2RhdGEkZXJyb3I7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKChfZGF0YSRlcnJvciA9IGRhdGEuZXJyb3IpICE9PSBudWxsICYmIF9kYXRhJGVycm9yICE9PSB2b2lkIDAgJiYgX2RhdGEkZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2RhdGEkZXJyb3IyOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoX2RhdGEkZXJyb3IyID0gZGF0YS5lcnJvcikgPT09IG51bGwgfHwgX2RhdGEkZXJyb3IyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YSRlcnJvcjIubWVzc2FnZSkgIT09ICdLbGlwcHkgRGlzY29ubmVjdGVkJykgd2luZG93LmNvbnNvbGUuZXJyb3IoJ1Jlc3BvbnNlIEVycm9yOiAnICsgd2FpdC5hY3Rpb24gKyAnID4gJyArIGRhdGEuZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdhaXQuYWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyRzdG9yZTU7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZGF0YS5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdvaycpIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJlbG9hZCA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2FpdC5hY3Rpb25QYXlsb2FkKSBPYmplY3QuYXNzaWduKHByZWxvYWQsIHdhaXQuYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJlbG9hZCwgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQYXJhbXM6IHdhaXQucGFyYW1zCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHByZWxvYWQsIHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIChfdGhpcyRzdG9yZTUgPSBfdGhpcy5zdG9yZSkgPT09IG51bGwgfHwgX3RoaXMkc3RvcmU1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdG9yZTUuZGlzcGF0Y2god2FpdC5hY3Rpb24sIHByZWxvYWQpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSAoX3RoaXMkc3RvcmU2ID0gX3RoaXMuc3RvcmUpID09PSBudWxsIHx8IF90aGlzJHN0b3JlNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RvcmU2LmRpc3BhdGNoKCdzb2NrZXQvb25NZXNzYWdlJywgZGF0YSk7CgogICAgICAgICAgICAgICAgICAgIGlmICh3YWl0KSBfdGhpcy5yZW1vdmVXYWl0QnlJZCh3YWl0LmlkKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgICByZXR1cm4gX2Nvbm5lY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbm5lY3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjbG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Nsb3NlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuY2xvc2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgICAgcmV0dXJuIF9jbG9zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY2xvc2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRXYWl0QnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2FpdEJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzJHdhaXRzJGZpbmQ7CgogICAgICByZXR1cm4gKF90aGlzJHdhaXRzJGZpbmQgPSB0aGlzLndhaXRzLmZpbmQoZnVuY3Rpb24gKHdhaXQpIHsKICAgICAgICByZXR1cm4gd2FpdC5pZCA9PT0gaWQ7CiAgICAgIH0pKSAhPT0gbnVsbCAmJiBfdGhpcyR3YWl0cyRmaW5kICE9PSB2b2lkIDAgPyBfdGhpcyR3YWl0cyRmaW5kIDogbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVXYWl0QnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlV2FpdEJ5SWQoaWQpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy53YWl0cy5maW5kSW5kZXgoZnVuY3Rpb24gKHdhaXQpIHsKICAgICAgICByZXR1cm4gd2FpdC5pZCA9PT0gaWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgdmFyIHdhaXQgPSB0aGlzLndhaXRzW2luZGV4XTsKCiAgICAgICAgaWYgKHdhaXQubG9hZGluZyAmJiB0aGlzLnN0b3JlKSB7CiAgICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvcmVtb3ZlTG9hZGluZycsIHsKICAgICAgICAgICAgbmFtZTogd2FpdC5sb2FkaW5nCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRoaXMud2FpdHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImVtaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXQobWV0aG9kLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzJGluc3RhbmNlOwoKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwoKICAgICAgaWYgKCgoX3RoaXMkaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfdGhpcyRpbnN0YW5jZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkaW5zdGFuY2UucmVhZHlTdGF0ZSkgPT09IFdlYlNvY2tldC5PUEVOKSB7CiAgICAgICAgdmFyIF9vcHRpb25zJGFjdGlvbiwgX29wdGlvbnMkYWN0aW9uUGF5bG9hLCBfb3B0aW9ucyRsb2FkaW5nOwoKICAgICAgICB2YXIgaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkgKyAxOwogICAgICAgIHRoaXMud2FpdHMucHVzaCh7CiAgICAgICAgICBpZDogaWQsCiAgICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgIGFjdGlvbjogKF9vcHRpb25zJGFjdGlvbiA9IG9wdGlvbnMuYWN0aW9uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRhY3Rpb24gIT09IHZvaWQgMCA/IF9vcHRpb25zJGFjdGlvbiA6IG51bGwsCiAgICAgICAgICBhY3Rpb25QYXlsb2FkOiAoX29wdGlvbnMkYWN0aW9uUGF5bG9hID0gb3B0aW9ucy5hY3Rpb25QYXlsb2FkKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRhY3Rpb25QYXlsb2EgIT09IHZvaWQgMCA/IF9vcHRpb25zJGFjdGlvblBheWxvYSA6IHt9LAogICAgICAgICAgbG9hZGluZzogKF9vcHRpb25zJGxvYWRpbmcgPSBvcHRpb25zLmxvYWRpbmcpICE9PSBudWxsICYmIF9vcHRpb25zJGxvYWRpbmcgIT09IHZvaWQgMCA/IF9vcHRpb25zJGxvYWRpbmcgOiBudWxsCiAgICAgICAgfSk7CgogICAgICAgIGlmIChvcHRpb25zLmxvYWRpbmcgJiYgdGhpcy5zdG9yZSkgewogICAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaCgnc29ja2V0L2FkZExvYWRpbmcnLCB7CiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMubG9hZGluZwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbXNnID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAganNvbnJwYzogJzIuMCcsCiAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgIHBhcmFtczogcGFyYW1zLAogICAgICAgICAgaWQ6IGlkCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5pbnN0YW5jZS5zZW5kKG1zZyk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBXZWJTb2NrZXRDbGllbnQ7Cn0oKTsKZXhwb3J0IGZ1bmN0aW9uIFdlYlNvY2tldFBsdWdpbihWdWUsIG9wdGlvbnMpIHsKICB2YXIgc29ja2V0ID0gbmV3IFdlYlNvY2tldENsaWVudChvcHRpb25zKTsKICBWdWUucHJvdG90eXBlLiRzb2NrZXQgPSBzb2NrZXQ7CiAgVnVlLiRzb2NrZXQgPSBzb2NrZXQ7Cn0="},null]}