{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/editor/actions.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/editor/actions.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBzaGEyNTYgfSBmcm9tICdqcy1zaGEyNTYnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBpMThuIGZyb20gJ0AvcGx1Z2lucy9pMThuJzsKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIHJlc2V0OiBmdW5jdGlvbiByZXNldChfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBjb21taXQoJ3Jlc2V0Jyk7CiAgfSwKICBvcGVuRmlsZTogZnVuY3Rpb24gb3BlbkZpbGUoX3JlZjIsIHBheWxvYWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaCwKICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmMi5yb290R2V0dGVyczsKICAgIHZhciBmdWxsRmlsZXBhdGggPSBwYXlsb2FkLnJvb3QgKyBwYXlsb2FkLnBhdGggKyAnLycgKyBwYXlsb2FkLmZpbGVuYW1lOwogICAgdmFyIHVybCA9IHJvb3RHZXR0ZXJzWydzb2NrZXQvZ2V0VXJsJ10gKyAnL3NlcnZlci9maWxlcy8nICsgZW5jb2RlVVJJKGZ1bGxGaWxlcGF0aCkgKyAiPyIuY29uY2F0KERhdGUubm93KCkpOwogICAgaWYgKHN0YXRlLmNhbmNlbFRva2VuKSBkaXNwYXRjaCgnY2FuY2VsTG9hZCcpOwogICAgdmFyIENhbmNlbFRva2VuID0gYXhpb3MuQ2FuY2VsVG9rZW47CiAgICB2YXIgc291cmNlID0gQ2FuY2VsVG9rZW4uc291cmNlKCk7CiAgICBjb21taXQoJ3VwZGF0ZUNhbmNlbFRva2VuU291cmNlJywgc291cmNlKTsKICAgIGNvbW1pdCgndXBkYXRlTG9hZGVyU3RhdGUnLCB0cnVlKTsKICAgIGNvbW1pdCgnc2V0RmlsZW5hbWUnLCBwYXlsb2FkLmZpbGVuYW1lKTsKICAgIGNvbW1pdCgnc2V0UGVybWlzc2lvbnMnLCBwYXlsb2FkLnBlcm1pc3Npb25zKTsKICAgIGF4aW9zLmdldCh1cmwsIHsKICAgICAgY2FuY2VsVG9rZW46IHNvdXJjZS50b2tlbiwKICAgICAgb25Eb3dubG9hZFByb2dyZXNzOiBmdW5jdGlvbiBvbkRvd25sb2FkUHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCkgewogICAgICAgIHZhciBfcGF5bG9hZCRzaXplOwoKICAgICAgICB2YXIgdG90YWwgPSBwcm9ncmVzc0V2ZW50LnRvdGFsID4gMCA/IHByb2dyZXNzRXZlbnQudG90YWwgOiAoX3BheWxvYWQkc2l6ZSA9IHBheWxvYWQuc2l6ZSkgIT09IG51bGwgJiYgX3BheWxvYWQkc2l6ZSAhPT0gdm9pZCAwID8gX3BheWxvYWQkc2l6ZSA6IDA7CiAgICAgICAgdmFyIHNwZWVkT3V0cHV0ID0gc3RhdGUubG9hZGVyUHJvZ3Jlc3Muc3BlZWQ7CiAgICAgICAgdmFyIGxhc3RUaW1lc3RhbXAgPSBzdGF0ZS5sb2FkZXJQcm9ncmVzcy5sYXN0VGltZXN0YW1wOwogICAgICAgIHZhciBsYXN0TG9hZGVkID0gc3RhdGUubG9hZGVyUHJvZ3Jlc3MubGFzdExvYWRlZDsKICAgICAgICB2YXIgZGlmZlRpbWUgPSBwcm9ncmVzc0V2ZW50LnRpbWVTdGFtcCAtIHN0YXRlLmxvYWRlclByb2dyZXNzLmxhc3RUaW1lc3RhbXA7CgogICAgICAgIGlmIChkaWZmVGltZSA+IDUwMCkgewogICAgICAgICAgdmFyIGRpZmZEYXRhID0gcHJvZ3Jlc3NFdmVudC5sb2FkZWQgLSBsYXN0TG9hZGVkOwogICAgICAgICAgdmFyIHNwZWVkID0gZGlmZkRhdGEgLyBkaWZmVGltZTsKICAgICAgICAgIHZhciB1bml0ID0gWydrQicsICdNQicsICdHQiddOwogICAgICAgICAgdmFyIHVuaXRTZWxlY3QgPSAwOwoKICAgICAgICAgIHdoaWxlIChzcGVlZCA+IDEwMjQpIHsKICAgICAgICAgICAgc3BlZWQgLz0gMTAyNC4wOwogICAgICAgICAgICB1bml0U2VsZWN0ID0gTWF0aC5taW4oMiwgdW5pdFNlbGVjdCArIDEpOwogICAgICAgICAgfQoKICAgICAgICAgIHNwZWVkT3V0cHV0ID0gc3BlZWQudG9GaXhlZCgyKSArIHVuaXRbdW5pdFNlbGVjdF07CiAgICAgICAgICBsYXN0VGltZXN0YW1wID0gcHJvZ3Jlc3NFdmVudC50aW1lU3RhbXA7CiAgICAgICAgICBsYXN0TG9hZGVkID0gcHJvZ3Jlc3NFdmVudC5sb2FkZWQ7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5jb21taXQoJ2VkaXRvci91cGRhdGVMb2FkZXInLCB7CiAgICAgICAgICBkaXJlY3Rpb246ICdkb3dubG9hZGluZycsCiAgICAgICAgICBzcGVlZDogc3BlZWRPdXRwdXQsCiAgICAgICAgICBsb2FkZWQ6IHByb2dyZXNzRXZlbnQubG9hZGVkLAogICAgICAgICAgdG90YWw6IHRvdGFsLAogICAgICAgICAgbGFzdExvYWRlZDogbGFzdExvYWRlZCwKICAgICAgICAgIGxhc3RUaW1lc3RhbXA6IGxhc3RUaW1lc3RhbXAKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICByZXR1cm4gcmVzLmRhdGEudGV4dCgpOwogICAgfSkudGhlbihmdW5jdGlvbiAoZmlsZSkgewogICAgICBjb21taXQoJ29wZW5GaWxlJywgewogICAgICAgIGZpbGVuYW1lOiBwYXlsb2FkLmZpbGVuYW1lLAogICAgICAgIGZpbGVyb290OiBwYXlsb2FkLnJvb3QsCiAgICAgICAgZmlsZXBhdGg6IHBheWxvYWQucGF0aCwKICAgICAgICBmaWxlOiBmaWxlCiAgICAgIH0pOwogICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGRpc3BhdGNoKCdjbGVhckxvYWRlcicpOwogICAgICB9LCAxMDApOwogICAgfSk7CiAgfSwKICBzYXZlRmlsZTogZnVuY3Rpb24gc2F2ZUZpbGUoX3JlZjMsIHBheWxvYWQpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCByb290R2V0dGVycywgZGlzcGF0Y2gsIGNvbnRlbnQsIGZvcm1EYXRhLCB1cmwsIENhbmNlbFRva2VuLCBzb3VyY2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlLCBjb21taXQgPSBfcmVmMy5jb21taXQsIHJvb3RHZXR0ZXJzID0gX3JlZjMucm9vdEdldHRlcnMsIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgY29udGVudCA9IG5ldyBCbG9iKFtwYXlsb2FkLmNvbnRlbnRdLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbicKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGNvbnRlbnQsIHN0YXRlLmZpbGVuYW1lKTsKICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Jvb3QnLCBzdGF0ZS5maWxlcm9vdCk7CiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXRoJywgc3RhdGUuZmlsZXBhdGguc2xpY2UoMSkpOwogICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY2hlY2tzdW0nLCBzaGEyNTYocGF5bG9hZC5jb250ZW50KSk7CiAgICAgICAgICAgICAgdXJsID0gcm9vdEdldHRlcnNbJ3NvY2tldC9nZXRVcmwnXSArICcvc2VydmVyL2ZpbGVzL3VwbG9hZCc7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLmNhbmNlbFRva2VuKSBkaXNwYXRjaCgnY2FuY2VsTG9hZCcpOwogICAgICAgICAgICAgIENhbmNlbFRva2VuID0gYXhpb3MuQ2FuY2VsVG9rZW47CiAgICAgICAgICAgICAgc291cmNlID0gQ2FuY2VsVG9rZW4uc291cmNlKCk7CiAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVDYW5jZWxUb2tlblNvdXJjZScsIHNvdXJjZSk7CiAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVMb2FkZXJTdGF0ZScsIHRydWUpOwogICAgICAgICAgICAgIGF4aW9zLnBvc3QodXJsLCBmb3JtRGF0YSwgewogICAgICAgICAgICAgICAgY2FuY2VsVG9rZW46IHNvdXJjZS50b2tlbiwKICAgICAgICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uIG9uVXBsb2FkUHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCkgewogICAgICAgICAgICAgICAgICB2YXIgc3BlZWRPdXRwdXQgPSBzdGF0ZS5sb2FkZXJQcm9ncmVzcy5zcGVlZDsKICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUaW1lc3RhbXAgPSBzdGF0ZS5sb2FkZXJQcm9ncmVzcy5sYXN0VGltZXN0YW1wOwogICAgICAgICAgICAgICAgICB2YXIgbGFzdExvYWRlZCA9IHN0YXRlLmxvYWRlclByb2dyZXNzLmxhc3RMb2FkZWQ7CiAgICAgICAgICAgICAgICAgIHZhciBkaWZmVGltZSA9IHByb2dyZXNzRXZlbnQudGltZVN0YW1wIC0gc3RhdGUubG9hZGVyUHJvZ3Jlc3MubGFzdFRpbWVzdGFtcDsKCiAgICAgICAgICAgICAgICAgIGlmIChkaWZmVGltZSA+IDUwMCkgewogICAgICAgICAgICAgICAgICAgIHZhciBkaWZmRGF0YSA9IHByb2dyZXNzRXZlbnQubG9hZGVkIC0gbGFzdExvYWRlZDsKICAgICAgICAgICAgICAgICAgICB2YXIgc3BlZWQgPSBkaWZmRGF0YSAvIGRpZmZUaW1lOwogICAgICAgICAgICAgICAgICAgIHZhciB1bml0ID0gWydrQicsICdNQicsICdHQiddOwogICAgICAgICAgICAgICAgICAgIHZhciB1bml0U2VsZWN0ID0gMDsKCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNwZWVkID4gMTAyNCkgewogICAgICAgICAgICAgICAgICAgICAgc3BlZWQgLz0gMTAyNC4wOwogICAgICAgICAgICAgICAgICAgICAgdW5pdFNlbGVjdCA9IE1hdGgubWluKDIsIHVuaXRTZWxlY3QgKyAxKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNwZWVkT3V0cHV0ID0gc3BlZWQudG9GaXhlZCgyKSArIHVuaXRbdW5pdFNlbGVjdF07CiAgICAgICAgICAgICAgICAgICAgbGFzdFRpbWVzdGFtcCA9IHByb2dyZXNzRXZlbnQudGltZVN0YW1wOwogICAgICAgICAgICAgICAgICAgIGxhc3RMb2FkZWQgPSBwcm9ncmVzc0V2ZW50LmxvYWRlZDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMyLmNvbW1pdCgnZWRpdG9yL3VwZGF0ZUxvYWRlcicsIHsKICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICd1cGxvYWRpbmcnLAogICAgICAgICAgICAgICAgICAgIHNwZWVkOiBzcGVlZE91dHB1dCwKICAgICAgICAgICAgICAgICAgICBsb2FkZWQ6IHByb2dyZXNzRXZlbnQubG9hZGVkLAogICAgICAgICAgICAgICAgICAgIHRvdGFsOiBwcm9ncmVzc0V2ZW50LnRvdGFsLAogICAgICAgICAgICAgICAgICAgIGxhc3RMb2FkZWQ6IGxhc3RMb2FkZWQsCiAgICAgICAgICAgICAgICAgICAgbGFzdFRpbWVzdGFtcDogbGFzdFRpbWVzdGFtcAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2NsZWFyTG9hZGVyJyk7CiAgICAgICAgICAgICAgICBWdWUuJHRvYXN0LnN1Y2Nlc3MoaTE4bi50KCdFZGl0b3IuU3VjY2Vzc2Z1bGx5U2F2ZWQnLCB7CiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBkYXRhLml0ZW0ucGF0aAogICAgICAgICAgICAgICAgfSkudG9TdHJpbmcoKSk7CgogICAgICAgICAgICAgICAgaWYgKHBheWxvYWQucmVzdGFydFNlcnZpY2VOYW1lID09PSAna2xpcHBlcicpIHsKICAgICAgICAgICAgICAgICAgLy9kaXNwYXRjaCgnc2VydmVyL2FkZEV2ZW50JywgeyBtZXNzYWdlOiAnRklSTVdBUkVfUkVTVEFSVCcsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgICAgICAgICAgICBWdWUuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsKICAgICAgICAgICAgICAgICAgICBzY3JpcHQ6ICdGSVJNV0FSRV9SRVNUQVJUJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5yZXN0YXJ0U2VydmljZU5hbWUgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgVnVlLiRzb2NrZXQuZW1pdCgnbWFjaGluZS5zZXJ2aWNlcy5yZXN0YXJ0JywgewogICAgICAgICAgICAgICAgICAgIHNlcnZpY2U6IHBheWxvYWQucmVzdGFydFNlcnZpY2VOYW1lCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdjbG9zZScpOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTsKCiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdjbGVhckxvYWRlcicpOwogICAgICAgICAgICAgICAgVnVlLiR0b2FzdC5lcnJvcihpMThuLnQoJ0VkaXRvci5GYWlsZWRTYXZlJywgewogICAgICAgICAgICAgICAgICBmaWxlbmFtZTogc3RhdGUuZmlsZW5hbWUKICAgICAgICAgICAgICAgIH0pLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGNhbmNlbExvYWQ6IGZ1bmN0aW9uIGNhbmNlbExvYWQoX3JlZjQpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWY0LnN0YXRlLAogICAgICAgIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwoKICAgIGlmIChzdGF0ZS5jYW5jZWxUb2tlbikgewogICAgICBzdGF0ZS5jYW5jZWxUb2tlbi5jYW5jZWwoJ1VzZXIgY2FuY2VsZWQgdXBsb2FkL2Rvd25sb2FkJyk7CiAgICAgIGNvbW1pdCgndXBkYXRlQ2FuY2VsVG9rZW5Tb3VyY2UnLCBudWxsKTsKICAgICAgZGlzcGF0Y2goJ2NsZWFyTG9hZGVyJyk7CiAgICB9CiAgfSwKICBjbGVhckxvYWRlcjogZnVuY3Rpb24gY2xlYXJMb2FkZXIoX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICBjb21taXQoJ3VwZGF0ZUxvYWRlclN0YXRlJywgZmFsc2UpOwogICAgY29tbWl0KCd1cGRhdGVMb2FkZXInLCB7CiAgICAgIGRpcmVjdGlvbjogJ2Rvd25sb2FkaW5nJywKICAgICAgbGFzdExvYWRlZDogMCwKICAgICAgbGFzdFRpbWVzdGFtcDogMCwKICAgICAgbG9hZGVkOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgc3BlZWQ6ICcnCiAgICB9KTsKICB9LAogIGNsb3NlOiBmdW5jdGlvbiBjbG9zZShfcmVmNikgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIGNvbW1pdCgncmVzZXQnKTsKICB9LAogIHVwZGF0ZVNvdXJjZWNvZGU6IGZ1bmN0aW9uIHVwZGF0ZVNvdXJjZWNvZGUoX3JlZjcsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQ7CiAgICBjb21taXQoJ3VwZGF0ZVNvdXJjZWNvZGUnLCBwYXlsb2FkKTsKICB9Cn07"},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/editor/actions.ts"],"names":[],"mappings":"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","sourcesContent":["import {ActionTree} from 'vuex'\nimport {EditorState} from '@/store/editor/types'\nimport {RootState} from '@/store/types'\nimport axios from 'axios'\nimport { sha256 } from 'js-sha256'\nimport Vue from 'vue'\nimport i18n from '@/plugins/i18n'\n\nexport const actions: ActionTree<EditorState, RootState> = {\n    reset({ commit }) {\n        commit('reset')\n    },\n\n    openFile({ state, dispatch, commit, rootGetters }, payload) {\n        const fullFilepath = payload.root+payload.path+'/'+payload.filename\n        const url = rootGetters['socket/getUrl'] + '/server/files/' + encodeURI(fullFilepath) + `?${Date.now()}`\n\n        if (state.cancelToken) dispatch('cancelLoad')\n\n        const CancelToken = axios.CancelToken\n        const source = CancelToken.source()\n        commit('updateCancelTokenSource', source)\n        commit('updateLoaderState', true)\n\n        commit('setFilename', payload.filename)\n        commit('setPermissions', payload.permissions)\n\n        axios.get(url, {\n            cancelToken: source.token,\n            onDownloadProgress: (progressEvent) => {\n                const total = progressEvent.total > 0 ? progressEvent.total : (payload.size ?? 0)\n\n                let speedOutput: string = state.loaderProgress.speed\n                let lastTimestamp = state.loaderProgress.lastTimestamp\n                let lastLoaded = state.loaderProgress.lastLoaded\n                const diffTime = progressEvent.timeStamp - state.loaderProgress.lastTimestamp\n                if (diffTime > 500) {\n                    const diffData = progressEvent.loaded - lastLoaded\n                    let speed = (diffData / diffTime)\n                    const unit = ['kB', 'MB', 'GB']\n                    let unitSelect = 0\n                    while (speed > 1024) {\n                        speed /= 1024.0\n                        unitSelect = Math.min(2, unitSelect + 1)\n                    }\n                    speedOutput = speed.toFixed(2) + unit[unitSelect]\n                    lastTimestamp = progressEvent.timeStamp\n                    lastLoaded = progressEvent.loaded\n                }\n\n                this.commit('editor/updateLoader', {\n                    direction: 'downloading',\n                    speed: speedOutput,\n                    loaded: progressEvent.loaded,\n                    total,\n                    lastLoaded,\n                    lastTimestamp\n                })\n            },\n            responseType: 'blob'\n        }).then(res => res.data.text())\n            .then(file => {\n                commit('openFile', {\n                    filename: payload.filename,\n                    fileroot: payload.root,\n                    filepath: payload.path,\n                    file\n                })\n            })\n            .finally(() => {\n                setTimeout(() => {\n                    dispatch('clearLoader')\n                }, 100)\n            })\n    },\n\n    async saveFile({ state, commit, rootGetters, dispatch }, payload: { content: string, restartServiceName: string | null }) {\n        const content = new Blob([payload.content], { type: 'text/plain' })\n        const formData = new FormData()\n        formData.append('file', content, state.filename)\n        formData.append('root', state.fileroot)\n        formData.append('path', state.filepath.slice(1))\n        formData.append('checksum', sha256(payload.content))\n\n        const url = rootGetters['socket/getUrl'] + '/server/files/upload'\n        if (state.cancelToken) dispatch('cancelLoad')\n        const CancelToken = axios.CancelToken\n        const source = CancelToken.source()\n        commit('updateCancelTokenSource', source)\n        commit('updateLoaderState', true)\n\n        axios.post(url, formData, {\n            cancelToken: source.token,\n            onUploadProgress: (progressEvent) => {\n                let speedOutput: string = state.loaderProgress.speed\n                let lastTimestamp = state.loaderProgress.lastTimestamp\n                let lastLoaded = state.loaderProgress.lastLoaded\n                const diffTime = progressEvent.timeStamp - state.loaderProgress.lastTimestamp\n                if (diffTime > 500) {\n                    const diffData = progressEvent.loaded - lastLoaded\n                    let speed = (diffData / diffTime)\n                    const unit = ['kB', 'MB', 'GB']\n                    let unitSelect = 0\n                    while (speed > 1024) {\n                        speed /= 1024.0\n                        unitSelect = Math.min(2, unitSelect + 1)\n                    }\n                    speedOutput = speed.toFixed(2) + unit[unitSelect]\n                    lastTimestamp = progressEvent.timeStamp\n                    lastLoaded = progressEvent.loaded\n                }\n\n                this.commit('editor/updateLoader', {\n                    direction: 'uploading',\n                    speed: speedOutput,\n                    loaded: progressEvent.loaded,\n                    total: progressEvent.total,\n                    lastLoaded: lastLoaded,\n                    lastTimestamp: lastTimestamp\n                })\n            }\n        }).then(response => {\n            return response.data\n        }).then(data => {\n            dispatch('clearLoader')\n            Vue.$toast.success(i18n.t('Editor.SuccessfullySaved', { filename: data.item.path }).toString())\n            if (payload.restartServiceName === 'klipper') {\n                //dispatch('server/addEvent', { message: 'FIRMWARE_RESTART', type: 'command' })\n                Vue.$socket.emit('printer.gcode.script', { script: 'FIRMWARE_RESTART' })\n            } else if (payload.restartServiceName !== null) {\n                Vue.$socket.emit('machine.services.restart', { service: payload.restartServiceName })\n            }\n            dispatch('close')\n        }).catch(error => {\n            window.console.log(error.response?.data.error)\n            dispatch('clearLoader')\n            Vue.$toast.error(i18n.t('Editor.FailedSave', { filename: state.filename }).toString())\n        })\n    },\n\n    cancelLoad({ state, commit, dispatch }) {\n        if (state.cancelToken) {\n            state.cancelToken.cancel('User canceled upload/download')\n            commit('updateCancelTokenSource', null)\n            dispatch('clearLoader')\n        }\n    },\n\n    clearLoader({ commit }) {\n        commit('updateLoaderState', false)\n        commit('updateLoader', {\n            direction: 'downloading',\n            lastLoaded: 0,\n            lastTimestamp: 0,\n            loaded: 0,\n            total: 0,\n            speed: '',\n        })\n    },\n\n    close({ commit }) {\n        commit('reset')\n    },\n\n    updateSourcecode({ commit }, payload) {\n        commit('updateSourcecode', payload)\n    },\n}"],"sourceRoot":""}]}