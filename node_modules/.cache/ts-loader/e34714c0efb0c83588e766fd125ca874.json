{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/webcams/MjpegstreamerAdaptive.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/webcams/MjpegstreamerAdaptive.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0tc3RhcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IENvbXBvbmVudCBmcm9tICd2dWUtY2xhc3MtY29tcG9uZW50JzsKaW1wb3J0IHsgTWl4aW5zLCBQcm9wIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnQC9jb21wb25lbnRzL21peGlucy9iYXNlJzsKCnZhciBNanBlZ3N0cmVhbWVyQWRhcHRpdmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9NaXhpbnMpIHsKICBfaW5oZXJpdHMoTWpwZWdzdHJlYW1lckFkYXB0aXZlLCBfTWl4aW5zKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihNanBlZ3N0cmVhbWVyQWRhcHRpdmUpOwoKICBmdW5jdGlvbiBNanBlZ3N0cmVhbWVyQWRhcHRpdmUoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1qcGVnc3RyZWFtZXJBZGFwdGl2ZSk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlZnJlc2giLCBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIE1hdGgucG93KDEwLCAxMikpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc1Zpc2libGUiLCB0cnVlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc0xvYWRlZCIsIHRydWUpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInRpbWVyIiwgdW5kZWZpbmVkKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZXF1ZXN0X3N0YXJ0X3RpbWUiLCBwZXJmb3JtYW5jZS5ub3coKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhcnRfdGltZSIsIHBlcmZvcm1hbmNlLm5vdygpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0aW1lIiwgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVxdWVzdF90aW1lIiwgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidGltZV9zbW9vdGhpbmciLCAwLjYpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlcXVlc3RfdGltZV9zbW9vdGhpbmciLCAwLjEpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImN1cnJlbnRGUFMiLCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICIkcmVmcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2FtU2V0dGluZ3MiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInByaW50ZXJVcmwiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNob3dGcHMiLCB2b2lkIDApOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhNanBlZ3N0cmVhbWVyQWRhcHRpdmUsIFt7CiAgICBrZXk6ICJ3ZWJjYW1TdHlsZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHRyYW5zZm9ybXMgPSAnJzsKICAgICAgaWYgKCdmbGlwWCcgaW4gdGhpcy5jYW1TZXR0aW5ncyAmJiB0aGlzLmNhbVNldHRpbmdzLmZsaXBYKSB0cmFuc2Zvcm1zICs9ICcgc2NhbGVYKC0xKSc7CiAgICAgIGlmICgnZmxpcFgnIGluIHRoaXMuY2FtU2V0dGluZ3MgJiYgdGhpcy5jYW1TZXR0aW5ncy5mbGlwWSkgdHJhbnNmb3JtcyArPSAnIHNjYWxlWSgtMSknOwogICAgICBpZiAodHJhbnNmb3Jtcy50cmltTGVmdCgpLmxlbmd0aCkgcmV0dXJuIHsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybXMudHJpbUxlZnQoKQogICAgICB9OwogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZnBzT3V0cHV0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50RlBTIDwgMTAgPyAnMCcgKyB0aGlzLmN1cnJlbnRGUFMudG9TdHJpbmcoKSA6IHRoaXMuY3VycmVudEZQUzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2aXNpYmlsaXR5Q2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmlzaWJpbGl0eUNoYW5nZWQoaXNWaXNpYmxlKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlID0gaXNWaXNpYmxlOwogICAgICBpZiAoaXNWaXNpYmxlKSB0aGlzLnJlZnJlc2hGcmFtZSgpO2Vsc2UgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgICB0aGlzLnRpbWVyID0gdW5kZWZpbmVkOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVmcmVzaEZyYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoRnJhbWUoKSB7CiAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkgewogICAgICAgIHRoaXMucmVmcmVzaCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIHRoaXMuc2V0RnJhbWUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIm9uTG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlOwogICAgICB2YXIgdGFyZ2V0RnBzID0gdGhpcy5jYW1TZXR0aW5ncy50YXJnZXRGcHMgfHwgMTA7CiAgICAgIHZhciBlbmRfdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB2YXIgY3VycmVudF90aW1lID0gZW5kX3RpbWUgLSB0aGlzLnN0YXJ0X3RpbWU7CiAgICAgIHRoaXMudGltZSA9IHRoaXMudGltZSAqIHRoaXMudGltZV9zbW9vdGhpbmcgKyBjdXJyZW50X3RpbWUgKiAoMS4wIC0gdGhpcy50aW1lX3Ntb290aGluZyk7CiAgICAgIHRoaXMuc3RhcnRfdGltZSA9IGVuZF90aW1lOwogICAgICB2YXIgdGFyZ2V0X3RpbWUgPSAxMDAwIC8gdGFyZ2V0RnBzOwogICAgICB2YXIgY3VycmVudF9yZXF1ZXN0X3RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMucmVxdWVzdF9zdGFydF90aW1lOwogICAgICB0aGlzLnJlcXVlc3RfdGltZSA9IHRoaXMucmVxdWVzdF90aW1lICogdGhpcy5yZXF1ZXN0X3RpbWVfc21vb3RoaW5nICsgY3VycmVudF9yZXF1ZXN0X3RpbWUgKiAoMS4wIC0gdGhpcy5yZXF1ZXN0X3RpbWVfc21vb3RoaW5nKTsKICAgICAgdmFyIHRpbWVvdXQgPSBNYXRoLm1heCgwLCB0YXJnZXRfdGltZSAtIHRoaXMucmVxdWVzdF90aW1lKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi50aW1lciA9IHNldFRpbWVvdXQoX3RoaXMyLnJlZnJlc2hGcmFtZSwgdGltZW91dCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEZyYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2V0RnJhbWUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgIHZhciBiYXNlVXJsLCB1cmwsIGNhbnZhcywgY3R4LCBmcmFtZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBiYXNlVXJsID0gdGhpcy5jYW1TZXR0aW5ncy51cmxTbmFwc2hvdDsKICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVybCwgdGhpcy5wcmludGVyVXJsID09PSB1bmRlZmluZWQgPyB0aGlzLmhvc3RVcmwudG9TdHJpbmcoKSA6IHRoaXMucHJpbnRlclVybCk7CiAgICAgICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnYnlwYXNzQ2FjaGUnLCB0aGlzLnJlZnJlc2gudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3Rfc3RhcnRfdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RlBTID0gdGhpcy50aW1lID4gMCA/IE1hdGgucm91bmQoMTAwMCAvIHRoaXMudGltZSkgOiAwOwogICAgICAgICAgICAgICAgY2FudmFzID0gdGhpcy4kcmVmcy5tanBlZ3N0cmVhbWVyQWRhcHRpdmU7CgogICAgICAgICAgICAgICAgaWYgKCFjYW52YXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRJbWFnZSh1cmwudG9TdHJpbmcoKSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBmcmFtZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7CiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudFdpZHRoICogKGZyYW1lLmhlaWdodCAvIGZyYW1lLndpZHRoKTsKICAgICAgICAgICAgICAgIGN0eCA9PT0gbnVsbCB8fCBjdHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN0eC5kcmF3SW1hZ2UoZnJhbWUsIDAsIDAsIGZyYW1lLndpZHRoLCBmcmFtZS5oZWlnaHQsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLm9uTG9hZCgpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2V0RnJhbWUoKSB7CiAgICAgICAgcmV0dXJuIF9zZXRGcmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2V0RnJhbWU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2FkSW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRJbWFnZSh1cmwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHIpIHsKICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKCiAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHIoaW1hZ2UpOwogICAgICAgIH07CgogICAgICAgIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChfdGhpczQucmVmcmVzaEZyYW1lLCAxMDAwKTsKICAgICAgICB9OwoKICAgICAgICBpbWFnZS5zcmMgPSB1cmw7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1qcGVnc3RyZWFtZXJBZGFwdGl2ZTsKfShNaXhpbnMoQmFzZU1peGluKSk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICByZXF1aXJlZDogdHJ1ZQp9KV0sIE1qcGVnc3RyZWFtZXJBZGFwdGl2ZS5wcm90b3R5cGUsICJjYW1TZXR0aW5ncyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBNanBlZ3N0cmVhbWVyQWRhcHRpdmUucHJvdG90eXBlLCAicHJpbnRlclVybCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiB0cnVlCn0pXSwgTWpwZWdzdHJlYW1lckFkYXB0aXZlLnByb3RvdHlwZSwgInNob3dGcHMiLCB2b2lkIDApOwoKTWpwZWdzdHJlYW1lckFkYXB0aXZlID0gX19kZWNvcmF0ZShbQ29tcG9uZW50XSwgTWpwZWdzdHJlYW1lckFkYXB0aXZlKTsKZXhwb3J0IGRlZmF1bHQgTWpwZWdzdHJlYW1lckFkYXB0aXZlOw=="},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/webcams/MjpegstreamerAdaptive.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAuBA,OAAO,SAAP,MAAsB,qBAAtB;AACA,SAAQ,MAAR,EAAgB,IAAhB,QAA2B,wBAA3B;AACA,OAAO,SAAP,MAAsB,0BAAtB;;AAGA,IAAqB,qBAArB;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,8DACsB,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,MAAL,KAAgB,IAAI,CAAC,GAAL,CAAS,EAAT,EAAa,EAAb,CAA1B,CADtB;;AAAA,gEAEwB,IAFxB;;AAAA,+DAGuB,IAHvB;;AAAA,4DAIwC,SAJxC;;AAAA,yEAMiC,WAAW,CAAC,GAAZ,EANjC;;AAAA,iEAOyB,WAAW,CAAC,GAAZ,EAPzB;;AAAA,2DAQmB,CARnB;;AAAA,mEAS2B,CAT3B;;AAAA,qEAU6B,GAV7B;;AAAA,6EAWqC,GAXrC;;AAAA,iEAYyB,CAZzB;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,SAsBI,eAAe;AACX,UAAI,UAAU,GAAG,EAAjB;AACA,UAAI,WAAW,KAAK,WAAhB,IAA+B,KAAK,WAAL,CAAiB,KAApD,EAA2D,UAAU,IAAI,aAAd;AAC3D,UAAI,WAAW,KAAK,WAAhB,IAA+B,KAAK,WAAL,CAAiB,KAApD,EAA2D,UAAU,IAAI,aAAd;AAC3D,UAAI,UAAU,CAAC,QAAX,GAAsB,MAA1B,EAAkC,OAAO;AAAE,QAAA,SAAS,EAAE,UAAU,CAAC,QAAX;AAAb,OAAP;AAElC,aAAO,EAAP;AACH;AA7BL;AAAA;AAAA,SA+BI,eAAa;AACT,aAAQ,KAAK,UAAL,GAAkB,EAAnB,GAAyB,MAAI,KAAK,UAAL,CAAgB,QAAhB,EAA7B,GAA0D,KAAK,UAAtE;AACH;AAjCL;AAAA;AAAA,WAmCI,2BAAkB,SAAlB,EAAoC;AAChC,WAAK,SAAL,GAAiB,SAAjB;AACA,UAAI,SAAJ,EAAe,KAAK,YAAL,GAAf,KACK;AACD,QAAA,YAAY,CAAC,KAAK,KAAN,CAAZ;AACA,aAAK,KAAL,GAAa,SAAb;AACH;AACJ;AA1CL;AAAA;AAAA,WA4CI,wBAAY;AACR,UAAI,KAAK,SAAT,EAAoB;AAChB,aAAK,OAAL,GAAe,IAAI,IAAJ,GAAW,OAAX,EAAf;AACA,aAAK,QAAL;AACH;AACJ;AAjDL;AAAA;AAAA,WAmDI,kBAAM;AAAA;;AACF,WAAK,QAAL,GAAgB,IAAhB;AAEA,UAAM,SAAS,GAAG,KAAK,WAAL,CAAiB,SAAjB,IAA8B,EAAhD;AACA,UAAM,QAAQ,GAAG,WAAW,CAAC,GAAZ,EAAjB;AACA,UAAM,YAAY,GAAG,QAAQ,GAAG,KAAK,UAArC;AACA,WAAK,IAAL,GAAa,KAAK,IAAL,GAAY,KAAK,cAAlB,GAAqC,YAAY,IAAI,MAAM,KAAK,cAAf,CAA7D;AACA,WAAK,UAAL,GAAkB,QAAlB;AAEA,UAAM,WAAW,GAAG,OAAO,SAA3B;AAEA,UAAM,oBAAoB,GAAG,WAAW,CAAC,GAAZ,KAAoB,KAAK,kBAAtD;AACA,WAAK,YAAL,GAAqB,KAAK,YAAL,GAAoB,KAAK,sBAA1B,GAAqD,oBAAoB,IAAI,MAAM,KAAK,sBAAf,CAA7F;AACA,UAAM,OAAO,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,WAAW,GAAG,KAAK,YAA/B,CAAhB;AAEA,WAAK,SAAL,CAAe,YAAK;AAChB,QAAA,MAAI,CAAC,KAAL,GAAa,UAAU,CAAC,MAAI,CAAC,YAAN,EAAoB,OAApB,CAAvB;AACH,OAFD;AAGH;AArEL;AAAA;AAAA;AAAA,8EAuEI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACU,gBAAA,OADV,GACoB,KAAK,WAAL,CAAiB,WADrC;AAEU,gBAAA,GAFV,GAEgB,IAAI,GAAJ,CAAQ,OAAR,EAAiB,KAAK,UAAL,KAAoB,SAApB,GAAgC,KAAK,OAAL,CAAa,QAAb,EAAhC,GAA0D,KAAK,UAAhF,CAFhB;AAII,gBAAA,GAAG,CAAC,YAAJ,CAAiB,MAAjB,CAAwB,aAAxB,EAAuC,KAAK,OAAL,CAAa,QAAb,EAAvC;AAEA,qBAAK,kBAAL,GAA0B,WAAW,CAAC,GAAZ,EAA1B;AACA,qBAAK,UAAL,GAAmB,KAAK,IAAL,GAAY,CAAb,GAAkB,IAAI,CAAC,KAAL,CAAW,OAAO,KAAK,IAAvB,CAAlB,GAAiD,CAAnE;AAEI,gBAAA,MATR,GASiB,KAAK,KAAL,CAAW,qBAT5B;;AAAA,qBAUQ,MAVR;AAAA;AAAA;AAAA;;AAWc,gBAAA,GAXd,GAWoB,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAXpB;AAAA;AAAA,uBAYiC,KAAK,SAAL,CAAe,GAAG,CAAC,QAAJ,EAAf,CAZjC;;AAAA;AAYc,gBAAA,KAZd;AAcQ,gBAAA,MAAM,CAAC,KAAP,GAAe,MAAM,CAAC,WAAtB;AACA,gBAAA,MAAM,CAAC,MAAP,GAAgB,MAAM,CAAC,WAAP,IAAsB,KAAK,CAAC,MAAN,GAAe,KAAK,CAAC,KAA3C,CAAhB;AAEA,gBAAA,GAAG,SAAH,IAAA,GAAG,WAAH,YAAA,GAAG,CAAE,SAAL,CAAe,KAAf,EACI,CADJ,EACO,CADP,EACU,KAAK,CAAC,KADhB,EACuB,KAAK,CAAC,MAD7B,EAEI,CAFJ,EAEO,CAFP,EAEU,MAAM,CAAC,KAFjB,EAEwB,MAAM,CAAC,MAF/B;AAGA,qBAAK,QAAL,GAAgB,IAAhB;;AApBR;AAuBI,qBAAK,SAAL,CAAe,YAAK;AAChB,kBAAA,MAAI,CAAC,MAAL;AACH,iBAFD;;AAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAvEJ;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,WAmGI,mBAAU,GAAV,EAAqB;AAAA;;AACjB,aAAO,IAAI,OAAJ,CAAY,UAAA,CAAC,EAAG;AACnB,YAAI,KAAK,GAAG,IAAI,KAAJ,EAAZ;;AACA,QAAA,KAAK,CAAC,MAAN,GAAgB;AAAA,iBAAM,CAAC,CAAC,KAAD,CAAP;AAAA,SAAhB;;AACA,QAAA,KAAK,CAAC,OAAN,GAAiB;AAAA,iBAAM,UAAU,CAAC,MAAI,CAAC,YAAN,EAAoB,IAApB,CAAhB;AAAA,SAAjB;;AACA,QAAA,KAAK,CAAC,GAAN,GAAY,GAAZ;AACH,OALM,CAAP;AAMH;AA1GL;;AAAA;AAAA,EAAmD,MAAM,CAAC,SAAD,CAAzD,CAAA;;AAkB8B,UAAA,CAAA,CAAzB,IAAI,CAAC;AAAE,EAAA,QAAQ,EAAE;AAAZ,CAAD,CAAqB,CAAA,E,+BAAA,E,aAAA,E,KAAgB,CAAhB,CAAA;;AAClB,UAAA,CAAA,CAAP,IAAI,EAAG,CAAA,E,+BAAA,E,YAAA,E,KAA8B,CAA9B,CAAA;;AACiB,UAAA,CAAA,CAAxB,IAAI,CAAC;AAAE,EAAA,OAAO,EAAE;AAAX,CAAD,CAAoB,CAAA,E,+BAAA,E,SAAA,E,KAAiB,CAAjB,CAAA;;AApBR,qBAAqB,GAAA,UAAA,CAAA,CADzC,SACyC,CAAA,EAArB,qBAAqB,CAArB;eAAA,qB","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from 'vue-class-component'\nimport {Mixins, Prop} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\n\n@Component\nexport default class MjpegstreamerAdaptive extends Mixins(BaseMixin) {\n    private refresh = Math.ceil(Math.random() * Math.pow(10, 12))\n    private isVisible = true\n    private isLoaded = true\n    private timer: number | undefined = undefined\n\n    private request_start_time = performance.now()\n    private start_time = performance.now()\n    private time = 0\n    private request_time = 0\n    private time_smoothing = 0.6\n    private request_time_smoothing = 0.1\n    private currentFPS = 0\n\n    $refs!: {\n        mjpegstreamerAdaptive: any\n    }\n\n    @Prop({ required: true }) camSettings: any\n    @Prop() printerUrl: string | undefined\n    @Prop({ default: true }) showFps!: boolean\n\n    get webcamStyle() {\n        let transforms = ''\n        if ('flipX' in this.camSettings && this.camSettings.flipX) transforms += ' scaleX(-1)'\n        if ('flipX' in this.camSettings && this.camSettings.flipY) transforms += ' scaleY(-1)'\n        if (transforms.trimLeft().length) return { transform: transforms.trimLeft() }\n\n        return ''\n    }\n\n    get fpsOutput() {\n        return (this.currentFPS < 10) ? '0'+this.currentFPS.toString() : this.currentFPS\n    }\n\n    visibilityChanged(isVisible: boolean) {\n        this.isVisible = isVisible\n        if (isVisible) this.refreshFrame()\n        else {\n            clearTimeout(this.timer)\n            this.timer = undefined\n        }\n    }\n\n    refreshFrame() {\n        if (this.isVisible) {\n            this.refresh = new Date().getTime()\n            this.setFrame()\n        }\n    }\n\n    onLoad() {\n        this.isLoaded = true\n\n        const targetFps = this.camSettings.targetFps || 10\n        const end_time = performance.now()\n        const current_time = end_time - this.start_time\n        this.time = (this.time * this.time_smoothing) + (current_time * (1.0 - this.time_smoothing))\n        this.start_time = end_time\n\n        const target_time = 1000 / targetFps\n\n        const current_request_time = performance.now() - this.request_start_time\n        this.request_time = (this.request_time * this.request_time_smoothing) + (current_request_time * (1.0 - this.request_time_smoothing))\n        const timeout = Math.max(0, target_time - this.request_time)\n\n        this.$nextTick(() => {\n            this.timer = setTimeout(this.refreshFrame, timeout)\n        })\n    }\n\n    async setFrame() {\n        const baseUrl = this.camSettings.urlSnapshot\n        const url = new URL(baseUrl, this.printerUrl === undefined ? this.hostUrl.toString() : this.printerUrl)\n\n        url.searchParams.append('bypassCache', this.refresh.toString())\n\n        this.request_start_time = performance.now()\n        this.currentFPS = (this.time > 0) ? Math.round(1000 / this.time) : 0\n\n        let canvas = this.$refs.mjpegstreamerAdaptive\n        if (canvas) {\n            const ctx = canvas.getContext('2d')\n            const frame: any = await this.loadImage(url.toString())\n\n            canvas.width = canvas.clientWidth\n            canvas.height = canvas.clientWidth * (frame.height / frame.width)\n\n            ctx?.drawImage(frame,\n                0, 0, frame.width, frame.height,\n                0, 0, canvas.width, canvas.height)\n            this.isLoaded = true\n        }\n\n        this.$nextTick(() => {\n            this.onLoad()\n        })\n    }\n\n    loadImage(url: string) {\n        return new Promise(r => {\n            let image = new Image()\n            image.onload = (() => r(image))\n            image.onerror = (() => setTimeout(this.refreshFrame, 1000))\n            image.src = url\n        })\n    }\n}\n"],"sourceRoot":""}]}