{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/updateManager/mutations.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/updateManager/mutations.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0IHsgZ2V0RGVmYXVsdFN0YXRlIH0gZnJvbSAnLi9pbmRleCc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKZXhwb3J0IHZhciBtdXRhdGlvbnMgPSB7CiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBzZXRTdGF0dXM6IGZ1bmN0aW9uIHNldFN0YXR1cyhzdGF0ZSwgcGF5bG9hZCkgewogICAgaWYgKCd2ZXJzaW9uX2luZm8nIGluIHBheWxvYWQpIHsKICAgICAgT2JqZWN0LmVudHJpZXMocGF5bG9hZC52ZXJzaW9uX2luZm8pLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAga2V5ID0gX3JlZjJbMF0sCiAgICAgICAgICAgIHZhbHVlID0gX3JlZjJbMV07CgogICAgICAgIFZ1ZS5zZXQoc3RhdGUudmVyc2lvbl9pbmZvLCBrZXksIHZhbHVlKTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKCFwYXlsb2FkLmJ1c3kpIFZ1ZS5zZXQoc3RhdGUudXBkYXRlUmVzcG9uc2UsICdjb21wbGV0ZScsIHRydWUpOwogIH0sCiAgYWRkVXBkYXRlUmVzcG9uc2U6IGZ1bmN0aW9uIGFkZFVwZGF0ZVJlc3BvbnNlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICBpZiAoc3RhdGUudXBkYXRlUmVzcG9uc2UuYXBwbGljYXRpb24gIT09IHBheWxvYWQuYXBwbGljYXRpb24pIFZ1ZS5zZXQoc3RhdGUudXBkYXRlUmVzcG9uc2UsICdhcHBsaWNhdGlvbicsIHBheWxvYWQuYXBwbGljYXRpb24pOwogICAgaWYgKHN0YXRlLnVwZGF0ZVJlc3BvbnNlLmNvbXBsZXRlICE9PSBwYXlsb2FkLmNvbXBsZXRlKSBWdWUuc2V0KHN0YXRlLnVwZGF0ZVJlc3BvbnNlLCAnY29tcGxldGUnLCBwYXlsb2FkLmNvbXBsZXRlKTsKICAgIGlmICgnY29tcGxldGUnIGluIHBheWxvYWQgJiYgcGF5bG9hZC5jb21wbGV0ZSkgVnVlLiRzb2NrZXQuZW1pdCgnbWFjaGluZS51cGRhdGUuc3RhdHVzJywgewogICAgICByZWZyZXNoOiBmYWxzZQogICAgfSwgewogICAgICBhY3Rpb246ICdzZXJ2ZXIvdXBkYXRlTWFuYWdlci9nZXRTdGF0dXMnCiAgICB9KTsKICAgIHN0YXRlLnVwZGF0ZVJlc3BvbnNlLm1lc3NhZ2VzLnB1c2goewogICAgICBkYXRlOiBuZXcgRGF0ZSgpLAogICAgICBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UKICAgIH0pOwogIH0sCiAgcmVzZXRVcGRhdGVSZXNwb25zZTogZnVuY3Rpb24gcmVzZXRVcGRhdGVSZXNwb25zZShzdGF0ZSkgewogICAgVnVlLnNldChzdGF0ZSwgJ3VwZGF0ZVJlc3BvbnNlJywgewogICAgICBhcHBsaWNhdGlvbjogJycsCiAgICAgIGNvbXBsZXRlOiB0cnVlLAogICAgICBtZXNzYWdlczogW10KICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/server/updateManager/mutations.ts"],"names":[],"mappings":";;;;AAAA,SAAS,eAAT,QAAgC,SAAhC;AACA,OAAO,GAAP,MAAgB,KAAhB;AAIA,OAAO,IAAM,SAAS,GAA0C;AAC5D,EAAA,KAD4D,iBACtD,KADsD,EACjD;AACP,IAAA,MAAM,CAAC,MAAP,CAAc,KAAd,EAAqB,eAAe,EAApC;AACH,GAH2D;AAK5D,EAAA,SAL4D,qBAKlD,KALkD,EAK3C,OAL2C,EAKpC;AACpB,QAAI,kBAAkB,OAAtB,EAA+B;AAC3B,MAAA,MAAM,CAAC,OAAP,CAAe,OAAO,CAAC,YAAvB,EAAqC,OAArC,CAA6C,gBAAiB;AAAA;AAAA,YAAf,GAAe;AAAA,YAAV,KAAU;;AAC1D,QAAA,GAAG,CAAC,GAAJ,CAAQ,KAAK,CAAC,YAAd,EAA4B,GAA5B,EAAiC,KAAjC;AACH,OAFD;AAGH;;AAED,QAAI,CAAC,OAAO,CAAC,IAAb,EAAmB,GAAG,CAAC,GAAJ,CAAQ,KAAK,CAAC,cAAd,EAA8B,UAA9B,EAA0C,IAA1C;AACtB,GAb2D;AAe5D,EAAA,iBAf4D,6BAe1C,KAf0C,EAenC,OAfmC,EAe5B;AAC5B,QAAI,KAAK,CAAC,cAAN,CAAqB,WAArB,KAAqC,OAAO,CAAC,WAAjD,EACI,GAAG,CAAC,GAAJ,CAAQ,KAAK,CAAC,cAAd,EAA8B,aAA9B,EAA6C,OAAO,CAAC,WAArD;AAEJ,QAAI,KAAK,CAAC,cAAN,CAAqB,QAArB,KAAkC,OAAO,CAAC,QAA9C,EACI,GAAG,CAAC,GAAJ,CAAQ,KAAK,CAAC,cAAd,EAA8B,UAA9B,EAA0C,OAAO,CAAC,QAAlD;AAEJ,QAAI,cAAc,OAAd,IAAyB,OAAO,CAAC,QAArC,EACI,GAAG,CAAC,OAAJ,CAAY,IAAZ,CAAiB,uBAAjB,EAA0C;AAAE,MAAA,OAAO,EAAE;AAAX,KAA1C,EAA8D;AAAE,MAAA,MAAM,EAAE;AAAV,KAA9D;AAEJ,IAAA,KAAK,CAAC,cAAN,CAAqB,QAArB,CAA8B,IAA9B,CAAmC;AAC/B,MAAA,IAAI,EAAE,IAAI,IAAJ,EADyB;AAE/B,MAAA,OAAO,EAAE,OAAO,CAAC;AAFc,KAAnC;AAIH,GA7B2D;AA+B5D,EAAA,mBA/B4D,+BA+BxC,KA/BwC,EA+BnC;AACrB,IAAA,GAAG,CAAC,GAAJ,CAAQ,KAAR,EAAe,gBAAf,EAAiC;AAC7B,MAAA,WAAW,EAAE,EADgB;AAE7B,MAAA,QAAQ,EAAE,IAFmB;AAG7B,MAAA,QAAQ,EAAE;AAHmB,KAAjC;AAKH;AArC2D,CAAzD","sourcesContent":["import { getDefaultState } from './index'\nimport Vue from 'vue'\nimport { MutationTree } from 'vuex'\nimport { ServerUpdateMangerState } from '@/store/server/updateManager/types'\n\nexport const mutations: MutationTree<ServerUpdateMangerState> = {\n    reset(state) {\n        Object.assign(state, getDefaultState())\n    },\n\n    setStatus(state, payload) {\n        if ('version_info' in payload) {\n            Object.entries(payload.version_info).forEach(([key, value]) => {\n                Vue.set(state.version_info, key, value)\n            })\n        }\n\n        if (!payload.busy) Vue.set(state.updateResponse, 'complete', true)\n    },\n\n    addUpdateResponse(state, payload) {\n        if (state.updateResponse.application !== payload.application)\n            Vue.set(state.updateResponse, 'application', payload.application)\n\n        if (state.updateResponse.complete !== payload.complete)\n            Vue.set(state.updateResponse, 'complete', payload.complete)\n\n        if ('complete' in payload && payload.complete)\n            Vue.$socket.emit('machine.update.status', { refresh: false }, { action: 'server/updateManager/getStatus'})\n\n        state.updateResponse.messages.push({\n            date: new Date(),\n            message: payload.message\n        })\n    },\n\n    resetUpdateResponse(state) {\n        Vue.set(state, 'updateResponse', {\n            application: '',\n            complete: true,\n            messages: []\n        })\n    }\n}"],"sourceRoot":""}]}