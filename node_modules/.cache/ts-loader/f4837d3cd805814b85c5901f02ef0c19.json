{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/StreamParserGcode.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/StreamParserGcode.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmV4cG9ydCB2YXIgZ2NvZGUgPSB7CiAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0cmVhbSwgc3RhdGUpIHsKICAgIHZhciB6ZXJvUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwOwogICAgdmFyIGNoID0gc3RyZWFtLnBlZWsoKTsKICAgIGlmIChzdHJlYW0ucG9zID09PSB6ZXJvUG9zICYmIHN0YXRlLmtsaXBwZXJNYWNybykgc3RhdGUua2xpcHBlck1hY3JvID0gZmFsc2U7CiAgICAvKiBLbGlwcGVyIG1hY3JvIGF0dHJpYnV0ZXMgKi8KCiAgICBpZiAoc3RyZWFtLnBvcyA+IHplcm9Qb3MgJiYgc3RhdGUua2xpcHBlck1hY3JvKSB7CiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL15ccypbQS1aX10rLykpIHJldHVybiAncHJvcGVydHlOYW1lJztlbHNlIGlmIChzdHJlYW0ubWF0Y2goL15ccypbQS1aYS16MC05X10rLykpIHJldHVybiAnbnVtYmVyJztlbHNlIGlmIChzdHJlYW0ubWF0Y2goL157Lip9LykpIHJldHVybiAndmFyaWFibGUnOwogICAgfQogICAgLyogY29tbWVudHMgKi8KCgogICAgaWYgKFsnOycsICcjJ10uaW5jbHVkZXMoY2ggIT09IG51bGwgJiYgY2ggIT09IHZvaWQgMCA/IGNoIDogJycpKSB7CiAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTsKICAgICAgcmV0dXJuICdjb21tZW50JzsKICAgIH0KICAgIC8qIE14eHggR3h4eCBjb21tYW5kcyAqLwoKCiAgICBpZiAoc3RyZWFtLnBvcyA9PSB6ZXJvUG9zICYmIHN0cmVhbS5tYXRjaCgvW0dNZ21dW1xkXSsvKSkgewogICAgICByZXR1cm4gJ25hbWVzcGFjZSc7CiAgICB9CiAgICAvKiBHMC8xIG1vdmVtZW50cyAqLwoKCiAgICBpZiAoc3RyZWFtLnBvcyA+IHplcm9Qb3MgJiYgc3RyZWFtLm1hdGNoKC9bWFlaSUp4eXppal0tPyhbXGRdKlwuW1xkXSt8W1xkXSspPy8pKSB7CiAgICAgIHJldHVybiAnY2xhc3NOYW1lJzsKICAgIH0KICAgIC8qIEcwLzEgc3BlZWRzICovCgoKICAgIGlmIChzdHJlYW0ucG9zID4gemVyb1BvcyAmJiBzdHJlYW0ubWF0Y2goL1tGZl0tPyhbXGRdKlwuW1xkXSt8W1xkXSspLykpIHsKICAgICAgcmV0dXJuICdzdHJpbmcnOwogICAgfQogICAgLyogRzAvMSBleHRydXNpb25zICovCgoKICAgIGlmIChzdHJlYW0ucG9zID4gemVyb1BvcyAmJiBzdHJlYW0ubWF0Y2goL1tUdFNzRWVdLT8oW1xkXSpcLltcZF0rfFtcZF0rKS8pKSB7CiAgICAgIHJldHVybiAnYXRvbSc7CiAgICB9CgogICAgaWYgKHN0cmVhbS5wb3MgPiB6ZXJvUG9zICYmIHN0cmVhbS5tYXRjaCgvXnsuKn0vKSkgcmV0dXJuICdwcm9wZXJ0eU5hbWUnOwogICAgLyogS2xpcHBlciBtYWNybyBuYW1lcyAqLwoKICAgIGlmIChzdHJlYW0ucG9zID09IHplcm9Qb3MgJiYgc3RyZWFtLm1hdGNoKC9eW0EtWl9dKy8pKSB7CiAgICAgIHN0YXRlLmtsaXBwZXJNYWNybyA9IHRydWU7CiAgICAgIHJldHVybiAnbmFtZSc7CiAgICB9CgogICAgc3RyZWFtLm5leHQoKTsKICAgIHJldHVybiBudWxsOwogIH0sCiAgc3RhcnRTdGF0ZTogZnVuY3Rpb24gc3RhcnRTdGF0ZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtsaXBwZXJNYWNybzogZmFsc2UKICAgIH07CiAgfSwKICBsYW5ndWFnZURhdGE6IHsKICAgIGNvbW1lbnRUb2tlbnM6IHsKICAgICAgbGluZTogJzsnCiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/StreamParserGcode.ts"],"names":[],"mappings":";;;AAEA,OAAO,IAAM,KAAK,GAAG;AACjB,EAAA,KAAK,EAAE,eAAS,MAAT,EAA+B,KAA/B,EAAyE;AAAA,QAAX,OAAW,uEAAD,CAAC;AAC5E,QAAM,EAAE,GAAG,MAAM,CAAC,IAAP,EAAX;AAEA,QAAI,MAAM,CAAC,GAAP,KAAe,OAAf,IAA0B,KAAK,CAAC,YAApC,EAAkD,KAAK,CAAC,YAAN,GAAqB,KAArB;AAElD;;AACA,QAAI,MAAM,CAAC,GAAP,GAAa,OAAb,IAAwB,KAAK,CAAC,YAAlC,EAAgD;AAC5C,UAAI,MAAM,CAAC,KAAP,CAAa,aAAb,CAAJ,EACI,OAAO,cAAP,CADJ,KAEK,IAAI,MAAM,CAAC,KAAP,CAAa,mBAAb,CAAJ,EACD,OAAO,QAAP,CADC,KAEA,IAAI,MAAM,CAAC,KAAP,CAAa,OAAb,CAAJ,EACD,OAAO,UAAP;AACP;AAED;;;AACA,QAAI,CAAC,GAAD,EAAM,GAAN,EAAW,QAAX,CAAoB,EAApB,aAAoB,EAApB,cAAoB,EAApB,GAA0B,EAA1B,CAAJ,EAAmC;AAC/B,MAAA,MAAM,CAAC,SAAP;AACA,aAAO,SAAP;AACH;AAED;;;AACA,QAAI,MAAM,CAAC,GAAP,IAAc,OAAd,IAAyB,MAAM,CAAC,KAAP,CAAa,aAAb,CAA7B,EAA0D;AACtD,aAAO,WAAP;AACH;AAED;;;AACA,QAAI,MAAM,CAAC,GAAP,GAAa,OAAb,IAAwB,MAAM,CAAC,KAAP,CAAa,qCAAb,CAA5B,EAAiF;AAC7E,aAAO,WAAP;AACH;AAED;;;AACA,QAAI,MAAM,CAAC,GAAP,GAAa,OAAb,IAAwB,MAAM,CAAC,KAAP,CAAa,4BAAb,CAA5B,EAAwE;AACpE,aAAO,QAAP;AACH;AAED;;;AACA,QAAI,MAAM,CAAC,GAAP,GAAa,OAAb,IAAwB,MAAM,CAAC,KAAP,CAAa,gCAAb,CAA5B,EAA4E;AACxE,aAAO,MAAP;AACH;;AAED,QAAI,MAAM,CAAC,GAAP,GAAa,OAAb,IAAwB,MAAM,CAAC,KAAP,CAAa,OAAb,CAA5B,EACI,OAAO,cAAP;AAEJ;;AACA,QAAI,MAAM,CAAC,GAAP,IAAc,OAAd,IAAyB,MAAM,CAAC,KAAP,CAAa,UAAb,CAA7B,EAAuD;AACnD,MAAA,KAAK,CAAC,YAAN,GAAqB,IAArB;AACA,aAAO,MAAP;AACH;;AAED,IAAA,MAAM,CAAC,IAAP;AACA,WAAO,IAAP;AACH,GArDgB;AAsDjB,EAAA,UAAU,EAAE,sBAAA;AACR,WAAO;AACH,MAAA,YAAY,EAAE;AADX,KAAP;AAGH,GA1DgB;AA2DjB,EAAA,YAAY,EAAE;AACV,IAAA,aAAa,EAAE;AAAC,MAAA,IAAI,EAAE;AAAP;AADL;AA3DG,CAAd","sourcesContent":["import {StringStream} from '@codemirror/stream-parser'\n\nexport const gcode = {\n    token: function(stream: StringStream, state: StreamParserGcodeState, zeroPos = 0): string | null {\n        const ch = stream.peek()\n\n        if (stream.pos === zeroPos && state.klipperMacro) state.klipperMacro = false\n\n        /* Klipper macro attributes */\n        if (stream.pos > zeroPos && state.klipperMacro) {\n            if (stream.match(/^\\s*[A-Z_]+/))\n                return 'propertyName'\n            else if (stream.match(/^\\s*[A-Za-z0-9_]+/))\n                return 'number'\n            else if (stream.match(/^{.*}/))\n                return 'variable'\n        }\n\n        /* comments */\n        if ([';', '#'].includes(ch ?? '')) {\n            stream.skipToEnd()\n            return 'comment'\n        }\n\n        /* Mxxx Gxxx commands */\n        if (stream.pos == zeroPos && stream.match(/[GMgm][\\d]+/)) {\n            return 'namespace'\n        }\n\n        /* G0/1 movements */\n        if (stream.pos > zeroPos && stream.match(/[XYZIJxyzij]-?([\\d]*\\.[\\d]+|[\\d]+)?/)) {\n            return 'className'\n        }\n\n        /* G0/1 speeds */\n        if (stream.pos > zeroPos && stream.match(/[Ff]-?([\\d]*\\.[\\d]+|[\\d]+)/)) {\n            return 'string'\n        }\n\n        /* G0/1 extrusions */\n        if (stream.pos > zeroPos && stream.match(/[TtSsEe]-?([\\d]*\\.[\\d]+|[\\d]+)/)) {\n            return 'atom'\n        }\n\n        if (stream.pos > zeroPos && stream.match(/^{.*}/))\n            return 'propertyName'\n\n        /* Klipper macro names */\n        if (stream.pos == zeroPos && stream.match(/^[A-Z_]+/)) {\n            state.klipperMacro = true\n            return 'name'\n        }\n\n        stream.next()\n        return null\n    },\n    startState: function(): StreamParserGcodeState {\n        return {\n            klipperMacro: false,\n        }\n    },\n    languageData: {\n        commentTokens: {line: ';'}\n    }\n}\n\ninterface StreamParserGcodeState {\n    klipperMacro: boolean\n}\n"],"sourceRoot":""}]}