{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/StreamParserKlipperConfig.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/StreamParserKlipperConfig.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCB7IGdjb2RlIH0gZnJvbSAnQC9wbHVnaW5zL1N0cmVhbVBhcnNlckdjb2RlJzsKZXhwb3J0IHZhciBrbGlwcGVyX2NvbmZpZyA9IHsKICB0b2tlbjogZnVuY3Rpb24gdG9rZW4oc3RyZWFtLCBzdGF0ZSkgewogICAgdmFyIGNoID0gc3RyZWFtLnBlZWsoKTsKICAgIC8qIGNvbW1lbnRzICovCgogICAgaWYgKHN0cmVhbS5tYXRjaCgvXlxzKyMvKSB8fCBjaCA9PT0gJyMnICYmIChzdHJlYW0ucG9zID09PSAwIHx8IC9ccy8udGVzdChzdHJlYW0uc3RyaW5nLmNoYXJBdChzdHJlYW0ucG9zIC0gMSkpKSkgewogICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7CiAgICAgIHN0YXRlLnBhaXIgPSBmYWxzZTsKICAgICAgcmV0dXJuICdjb21tZW50JzsKICAgIH0KCiAgICBpZiAoc3RhdGUuZ2NvZGUgJiYgIXN0YXRlLmtsaXBwZXJNYWNyb0ppbmphICYmIGNoID09PSAnWycpIHsKICAgICAgc3RhdGUuZ2NvZGUgPSBmYWxzZTsKICAgICAgc3RhdGUuZ2NvZGVaZXJvUG9zID0gbnVsbDsKICAgIH0KCiAgICBpZiAoc3RhdGUuZ2NvZGUpIHsKICAgICAgc3RyZWFtLmVhdFNwYWNlKCk7CgogICAgICBpZiAoc3RhdGUuZ2NvZGVaZXJvUG9zID09PSBudWxsKSB7CiAgICAgICAgc3RhdGUuZ2NvZGVaZXJvUG9zID0gc3RyZWFtLnBvczsKICAgICAgfQoKICAgICAgaWYgKHN0YXRlLmtsaXBwZXJNYWNyb0ppbmphKSB7CiAgICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXiU/fS8pKSB7CiAgICAgICAgICBzdGF0ZS5rbGlwcGVyTWFjcm9KaW5qYSA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RyZWFtLmVhdCgvLig/ISV9KS8pKSB7CiAgICAgICAgICByZXR1cm4gJ3N0cmluZyc7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RyZWFtLmVhdCgvLig/IX0pLykpIHsKICAgICAgICAgIHJldHVybiAnc3RyaW5nJzsKICAgICAgICB9CgogICAgICAgIHN0cmVhbS5tYXRjaCgvXi4qJC8pOwogICAgICAgIHJldHVybiAnc3RyaW5nJzsKICAgICAgfQoKICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXnslPy8pKSB7CiAgICAgICAgc3RhdGUua2xpcHBlck1hY3JvSmluamEgPSB0cnVlOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gZ2NvZGUudG9rZW4oc3RyZWFtLCBzdGF0ZSwgc3RhdGUuZ2NvZGVaZXJvUG9zKTsKICAgIH0KCiAgICBpZiAoc3RyZWFtLm1hdGNoKC9eZ2NvZGU6XHMqLykpIHsKICAgICAgc3RyZWFtLnNraXBUb0VuZCgpOwogICAgICBzdGF0ZS5nY29kZSA9IHRydWU7CiAgICAgIHJldHVybiAnYXRvbSc7CiAgICB9CgogICAgaWYgKHN0YXRlLnBhaXIpIHsKICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXltcXiFdKlthLXpfXStbMC05XSo/Oi9pKSkgewogICAgICAgIHN0cmVhbS5iYWNrVXAoMSk7CiAgICAgICAgcmV0dXJuICdtYWNyb05hbWUnOwogICAgICB9IGVsc2UgaWYgKHN0cmVhbS5tYXRjaCgvXltcXiFdKig/Oig/OlBbQS1aXT98QVtBLVpdP3xFWFB8R1BJT0NISVB8R1BJTykrWzAtOS5dK3x6X3ZpcnR1YWxfZW5kc3RvcCkoX1swLTldKyk/L2kpIHx8IHN0cmVhbS5tYXRjaCgvXlwvZ3Bpb1swLTldKy9pKSkgewogICAgICAgIGlmIChzdHJlYW0uZW9sKCkpIHsKICAgICAgICAgIHN0YXRlLnBhaXIgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAnbWFjcm9OYW1lJzsKICAgICAgfSBlbHNlIGlmIChzdHJlYW0ubWF0Y2goL15ccypcWz8oLT9bMC05LC46XSspXT8vKSkgewogICAgICAgIGlmIChzdHJlYW0uZW9sKCkpIHsKICAgICAgICAgIHN0YXRlLnBhaXIgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAnbnVtYmVyJzsKICAgICAgfSBlbHNlIGlmIChzdHJlYW0ubWF0Y2goL14oW2EtekEtWjAtOX4iJy4sOl8vXC1cc10rKS8pKSB7CiAgICAgICAgaWYgKHN0cmVhbS5lb2woKSkgewogICAgICAgICAgc3RhdGUucGFpciA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICdzdHJpbmcnOwogICAgICB9IGVsc2UgaWYgKHN0cmVhbS5tYXRjaCgvXlxzKiMuKiQvKSkgewogICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTsKICAgICAgICBzdGF0ZS5wYWlyID0gZmFsc2U7CiAgICAgICAgcmV0dXJuICdjb21tZW50JzsKICAgICAgfQoKICAgICAgc3RyZWFtLm5leHQoKTsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgaWYgKHN0cmVhbS5tYXRjaCgvXlthLXpBLVowLTlfXStccz9bOj1dXHM/LykpIHsKICAgICAgc3RhdGUucGFpciA9IHRydWU7CiAgICAgIHJldHVybiAnYXRvbSc7CiAgICB9CiAgICAvKmlmIChzdHJlYW0ubWF0Y2goL15cW2luY2x1ZGUuKl0kLykpIHsKICAgICAgICBjb25zb2xlLmxvZyhzdHJlYW0sIHN0YXRlKTsKICAgICAgICByZXR1cm4gIm1hY3JvTmFtZSI7CiAgICB9Ki8KCgogICAgaWYgKHN0YXRlLmJsb2NrKSB7CiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL15bYS16MC05LV9dKy9pKSkgewogICAgICAgIHJldHVybiAnbmFtZXNwYWNlJzsKICAgICAgfQoKICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXlxzW2EtejAtOS1fLi8qXHNdKy9pKSkgewogICAgICAgIHJldHVybiAnY2xhc3NOYW1lJzsKICAgICAgfQoKICAgICAgc3RyZWFtLnNraXBUb0VuZCgpOwogICAgICBzdGF0ZS5ibG9jayA9IGZhbHNlOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBpZiAoc3RyZWFtLm5leHQoKSA9PT0gJ1snKSB7CiAgICAgIHN0YXRlLmJsb2NrID0gdHJ1ZTsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgaWYgKHN0cmVhbS5tYXRjaCgvXignKFteJ118XFwuKSonP3wiKFteIl18XFwuKSoiPykvKSkgcmV0dXJuICdzdHJpbmcnOwogICAgc3RyZWFtLm5leHQoKTsKICAgIHJldHVybiAnc3RyaW5nJzsKICB9LAogIHN0YXJ0U3RhdGU6IGZ1bmN0aW9uIHN0YXJ0U3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICBibG9jazogZmFsc2UsCiAgICAgIHBhaXI6IGZhbHNlLAogICAgICBnY29kZTogZmFsc2UsCiAgICAgIGtsaXBwZXJNYWNybzogZmFsc2UsCiAgICAgIGdjb2RlWmVyb1BvczogbnVsbCwKICAgICAga2xpcHBlck1hY3JvSmluamE6IGZhbHNlCiAgICB9OwogIH0sCiAgbGFuZ3VhZ2VEYXRhOiB7CiAgICBjb21tZW50VG9rZW5zOiB7CiAgICAgIGxpbmU6ICcjJwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/plugins/StreamParserKlipperConfig.ts"],"names":[],"mappings":"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","sourcesContent":["import {StringStream} from '@codemirror/stream-parser'\nimport {gcode} from '@/plugins/StreamParserGcode'\n\nexport const klipper_config = {\n    token: function (stream: StringStream, state: StreamParserKlipperConfigState): string | null {\n        const ch = stream.peek()\n\n\n        /* comments */\n        if (stream.match(/^\\s+#/) || (\n            ch === '#' && (stream.pos === 0 || /\\s/.test(stream.string.charAt(stream.pos - 1)))\n        )) {\n            stream.skipToEnd()\n            state.pair = false\n            return 'comment'\n        }\n\n        if (state.gcode &&\n            !state.klipperMacroJinja &&\n            (ch === '[')\n        ) {\n            state.gcode = false\n            state.gcodeZeroPos = null\n        }\n\n        if (state.gcode) {\n            stream.eatSpace()\n            if (state.gcodeZeroPos === null) {\n                state.gcodeZeroPos = stream.pos\n            }\n            if (state.klipperMacroJinja) {\n                if (stream.match(/^%?}/)) {\n                    state.klipperMacroJinja = false\n                    return null\n                }\n                if (stream.eat(/.(?!%})/)) {\n                    return 'string'\n                }\n                if (stream.eat(/.(?!})/)) {\n                    return 'string'\n                }\n                stream.match(/^.*$/)\n                return 'string'\n            }\n\n            if (stream.match(/^{%?/)) {\n                state.klipperMacroJinja = true\n                return null\n            }\n\n            return gcode.token(stream, state, state.gcodeZeroPos)\n        }\n\n        if (stream.match(/^gcode:\\s*/)) {\n            stream.skipToEnd()\n            state.gcode = true\n            return 'atom'\n        }\n\n        if (state.pair) {\n            if (stream.match(/^[\\^!]*[a-z_]+[0-9]*?:/i)) {\n                stream.backUp(1)\n                return 'macroName'\n            } else if (\n                stream.match(/^[\\^!]*(?:(?:P[A-Z]?|A[A-Z]?|EXP|GPIOCHIP|GPIO)+[0-9.]+|z_virtual_endstop)(_[0-9]+)?/i) ||\n                stream.match(/^\\/gpio[0-9]+/i)) {\n                if (stream.eol()) {\n                    state.pair = false\n                }\n                return 'macroName'\n            } else if (stream.match(/^\\s*\\[?(-?[0-9,.:]+)]?/)) {\n                if (stream.eol()) {\n                    state.pair = false\n                }\n                return 'number'\n            } else if (stream.match(/^([a-zA-Z0-9~\"'.,:_/\\-\\s]+)/)) {\n                if (stream.eol()) {\n                    state.pair = false\n                }\n                return 'string'\n            } else if (stream.match(/^\\s*#.*$/)) {\n                stream.skipToEnd()\n                state.pair = false\n                return 'comment'\n            }\n            stream.next()\n            return null\n        }\n\n        if (stream.match(/^[a-zA-Z0-9_]+\\s?[:=]\\s?/)) {\n            state.pair = true\n            return 'atom'\n        }\n\n        /*if (stream.match(/^\\[include.*]$/)) {\n            console.log(stream, state);\n            return \"macroName\";\n        }*/\n\n        if (state.block) {\n            if (stream.match(/^[a-z0-9-_]+/i)) {\n                return 'namespace'\n            }\n            if (stream.match(/^\\s[a-z0-9-_./*\\s]+/i)) {\n                return 'className'\n            }\n            stream.skipToEnd()\n            state.block = false\n            return null\n        }\n\n        if (stream.next() === '[') {\n            state.block = true\n            return null\n        }\n\n        if (stream.match(/^('([^']|\\\\.)*'?|\"([^\"]|\\\\.)*\"?)/))\n            return 'string'\n\n        stream.next()\n        return 'string'\n    },\n    startState: function (): StreamParserKlipperConfigState {\n        return {\n            block: false,\n            pair: false,\n            gcode: false,\n            klipperMacro: false,\n            gcodeZeroPos: null,\n            klipperMacroJinja: false,\n        }\n    },\n    languageData: {\n        commentTokens: {line: '#'}\n    }\n}\n\n\ninterface StreamParserKlipperConfigState {\n    block: boolean,\n    pair: boolean,\n    gcode: boolean,\n    gcodeZeroPos: number | null,\n    klipperMacro: boolean,\n    klipperMacroJinja: boolean\n}\n"],"sourceRoot":""}]}