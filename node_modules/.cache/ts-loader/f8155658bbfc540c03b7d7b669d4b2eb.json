{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-3!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--14-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/gui/actions.ts","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/store/gui/actions.ts","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1645990065243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBnZXREZWZhdWx0U3RhdGUgfSBmcm9tICcuL2luZGV4JzsKaW1wb3J0IHsgdGhlbWVEaXIgfSBmcm9tICdAL3N0b3JlL3ZhcmlhYmxlcyc7CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICByZXNldDogZnVuY3Rpb24gcmVzZXQoX3JlZikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgIGNvbW1pdCgncmVzZXQnKTsKICAgIGRpc3BhdGNoKCdjb25zb2xlL3Jlc2V0Jyk7CiAgICBkaXNwYXRjaCgnZ2NvZGVoaXN0b3J5L3Jlc2V0Jyk7CiAgICBkaXNwYXRjaCgnbWFjcm9zL3Jlc2V0Jyk7CiAgICBkaXNwYXRjaCgncHJlc2V0cy9yZXNldCcpOwogIH0sCiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgIHdpbmRvdy5jb25zb2xlLmRlYnVnKCdpbml0IGd1aScpOwogICAgVnVlLiRzb2NrZXQuZW1pdCgnc2VydmVyLmRhdGFiYXNlLmdldF9pdGVtJywgewogICAgICBuYW1lc3BhY2U6ICdtYWluc2FpbCcKICAgIH0sIHsKICAgICAgYWN0aW9uOiAnZ3VpL2luaXRTdG9yZScKICAgIH0pOwogIH0sCiAgaW5pdFN0b3JlOiBmdW5jdGlvbiBpbml0U3RvcmUoX3JlZjIsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCByb290R2V0dGVycywgcm9vdFN0YXRlLCBiYXNlVXJsLCBtYWluc2FpbFVybCwgX3Jvb3RTdGF0ZSRzb2NrZXQ7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoLCByb290R2V0dGVycyA9IF9yZWYyLnJvb3RHZXR0ZXJzLCByb290U3RhdGUgPSBfcmVmMi5yb290U3RhdGU7CiAgICAgICAgICAgICAgYmFzZVVybCA9IHJvb3RHZXR0ZXJzWydzb2NrZXQvZ2V0VXJsJ10gKyAnL3NlcnZlci9kYXRhYmFzZS9pdGVtJzsKICAgICAgICAgICAgICBtYWluc2FpbFVybCA9IGJhc2VVcmwgKyAnP25hbWVzcGFjZT1tYWluc2FpbCc7CgogICAgICAgICAgICAgIGlmICgncmVtb3RlcHJpbnRlcnMnIGluIHBheWxvYWQudmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmICghKChfcm9vdFN0YXRlJHNvY2tldCA9IHJvb3RTdGF0ZS5zb2NrZXQpICE9PSBudWxsICYmIF9yb290U3RhdGUkc29ja2V0ICE9PSB2b2lkIDAgJiYgX3Jvb3RTdGF0ZSRzb2NrZXQucmVtb3RlTW9kZSkpIGRpc3BhdGNoKCdyZW1vdGVwcmludGVycy9pbml0U3RvcmUnLCBwYXlsb2FkLnZhbHVlLnJlbW90ZXByaW50ZXJzLnByaW50ZXJzKTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwYXlsb2FkLnZhbHVlLnJlbW90ZXByaW50ZXJzOwogICAgICAgICAgICAgIH0gLy91cGRhdGUgY29vbGRvd25HY29kZSBmcm9tIFYyLjAuMSB0byBWMi4xLjAKCgogICAgICAgICAgICAgIGlmICghKCdjb29sZG93bkdjb2RlJyBpbiBwYXlsb2FkLnZhbHVlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5kZWJ1ZygndXBkYXRlIGNvb2xkb3duR2NvZGUgdG8gbmV3IG5hbWVzcGFjZScpOwogICAgICAgICAgICAgIGRpc3BhdGNoKCdzYXZlU2V0dGluZycsIHsKICAgICAgICAgICAgICAgIG5hbWU6ICdwcmVzZXRzLmNvb2xkb3duR2NvZGUnLAogICAgICAgICAgICAgICAgdmFsdWU6IHBheWxvYWQudmFsdWUuY29vbGRvd25HY29kZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChtYWluc2FpbFVybCArICcma2V5PWNvb2xkb3duR2NvZGUnLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgZGVsZXRlIHBheWxvYWQudmFsdWUuY29vbGRvd25HY29kZTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgLy91cGRhdGUgcHJlc2V0cyBmcm9tIFYyLjAuMSB0byBWMi4xLjAKICAgICAgICAgICAgICBpZiAoJ3ByZXNldHMnIGluIHBheWxvYWQudmFsdWUgJiYgQXJyYXkuaXNBcnJheShwYXlsb2FkLnZhbHVlLnByZXNldHMpKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5kZWJ1ZygndXBkYXRlIHByZXNldHMgdG8gbmV3IG5hbWVzcGFjZScpOwogICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZS5wcmVzZXRzLmZvckVhY2goZnVuY3Rpb24gKHByZXNldCkgewogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgncHJlc2V0cy9zdG9yZScsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHByZXNldAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGVsZXRlIHBheWxvYWQudmFsdWUucHJlc2V0czsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbW1pdCgnc2V0RGF0YScsIHBheWxvYWQudmFsdWUpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAoKICAvKgogICAqIENyZWF0ZSBtYWluc2FpbCBuYW1lc3BhY2UgaW4gbW9vbnJha2VyIERCIGFuZCBmaWxsIGluIGRlZmF1bHQgdmFsdWVzCiAgICovCiAgaW5pdERiOiBmdW5jdGlvbiBpbml0RGIoX3JlZjMpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCBiYXNlVXJsLCB1cmxEZWZhdWx0LCByZXNwb25zZURlZmF1bHQsIGRlZmF1bHRzLCBfZGVmYXVsdHMkZXJyb3IsIGtleSwgX2l0ZXJhdG9yLCBfc3RlcCwga2V5MjsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaCwgcm9vdEdldHRlcnMgPSBfcmVmMy5yb290R2V0dGVyczsKICAgICAgICAgICAgICBiYXNlVXJsID0gcm9vdEdldHRlcnNbJ3NvY2tldC9nZXRVcmwnXSArICcvc2VydmVyL2RhdGFiYXNlL2l0ZW0nOwogICAgICAgICAgICAgIHVybERlZmF1bHQgPSByb290R2V0dGVyc1snc29ja2V0L2dldFVybCddICsgJy9zZXJ2ZXIvZmlsZXMvY29uZmlnLycgKyB0aGVtZURpciArICcvZGVmYXVsdC5qc29uP3RpbWU9JyArIERhdGUubm93KCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmxEZWZhdWx0KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXNwb25zZURlZmF1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBkZWZhdWx0cyA9IHt9OwoKICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlRGVmYXVsdCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VEZWZhdWx0Lmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgZGVmYXVsdHMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBpZiAoKChfZGVmYXVsdHMkZXJyb3IgPSBkZWZhdWx0cy5lcnJvcikgPT09IG51bGwgfHwgX2RlZmF1bHRzJGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVmYXVsdHMkZXJyb3IuY29kZSkgPT09IDQwNCkgZGVmYXVsdHMgPSB7fTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gcmVnZW5lcmF0b3JSdW50aW1lLmtleXMoZGVmYXVsdHMpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBpZiAoKF9jb250ZXh0Mi50MSA9IF9jb250ZXh0Mi50MCgpKS5kb25lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBrZXkgPSBfY29udGV4dDIudDEudmFsdWU7CgogICAgICAgICAgICAgIGlmICghWyd3ZWJjYW1zJywgJ3RpbWVsYXBzZSddLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRlZmF1bHRzW2tleV0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTc7CgogICAgICAgICAgICAgIF9pdGVyYXRvci5zKCk7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBrZXkyID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMzsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goYmFzZVVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZToga2V5LAogICAgICAgICAgICAgICAgICBrZXk6IGtleTIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0c1trZXldW2tleTJdCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI3OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MiA9IF9jb250ZXh0MlsiY2F0Y2giXSgxNyk7CgogICAgICAgICAgICAgIF9pdGVyYXRvci5lKF9jb250ZXh0Mi50Mik7CgogICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzA7CgogICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDMwKTsKCiAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNzsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goYmFzZVVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogJ21haW5zYWlsJywKICAgICAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0c1trZXldCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQxOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChiYXNlVXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiAnbWFpbnNhaWwnLAogICAgICAgICAgICAgICAgICBrZXk6ICdpbml0VmVyc2lvbicsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiByb290R2V0dGVyc1snZ2V0VmVyc2lvbiddCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICBkaXNwYXRjaCgnaW5pdCcpOwoKICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzE3LCAyNywgMzAsIDMzXV0pOwogICAgfSkpKCk7CiAgfSwKICBzYXZlU2V0dGluZzogZnVuY3Rpb24gc2F2ZVNldHRpbmcoX3JlZjQsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICBjb21taXQoJ3NhdmVTZXR0aW5nJywgcGF5bG9hZCk7CiAgICBWdWUuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZGF0YWJhc2UucG9zdF9pdGVtJywgewogICAgICBuYW1lc3BhY2U6ICdtYWluc2FpbCcsCiAgICAgIGtleTogcGF5bG9hZC5uYW1lLAogICAgICB2YWx1ZTogcGF5bG9hZC52YWx1ZQogICAgfSk7CiAgfSwKICBzYXZlU2V0dGluZ1dpdGhvdXRVcGxvYWQ6IGZ1bmN0aW9uIHNhdmVTZXR0aW5nV2l0aG91dFVwbG9hZChfcmVmNSwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIGNvbW1pdCgnc2F2ZVNldHRpbmcnLCBwYXlsb2FkKTsKICB9LAogIHVwZGF0ZVNldHRpbmdzOiBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncyhfLCBwYXlsb2FkKSB7CiAgICB2YXIga2V5TmFtZSA9IHBheWxvYWQua2V5TmFtZTsKICAgIHZhciBuZXdTdGF0ZSA9IHBheWxvYWQubmV3VmFsOwogICAgaWYgKCd2YWx1ZScgaW4gcGF5bG9hZCAmJiBrZXlOYW1lIGluIHBheWxvYWQudmFsdWUgJiYgdHlwZW9mIHBheWxvYWQudmFsdWVba2V5TmFtZV0gIT09ICdzdHJpbmcnICYmICFBcnJheS5pc0FycmF5KHBheWxvYWQudmFsdWVba2V5TmFtZV0pKSBuZXdTdGF0ZSA9IE9iamVjdC5hc3NpZ24ocGF5bG9hZC52YWx1ZVtrZXlOYW1lXSwgX29iamVjdFNwcmVhZCh7fSwgbmV3U3RhdGUpKTsKICAgIFZ1ZS4kc29ja2V0LmVtaXQoJ3NlcnZlci5kYXRhYmFzZS5wb3N0X2l0ZW0nLCB7CiAgICAgIG5hbWVzcGFjZTogJ21haW5zYWlsJywKICAgICAga2V5OiBrZXlOYW1lLAogICAgICB2YWx1ZTogbmV3U3RhdGUKICAgIH0pOwogIH0sCiAgc2V0R2NvZGVmaWxlc01ldGFkYXRhOiBmdW5jdGlvbiBzZXRHY29kZWZpbGVzTWV0YWRhdGEoX3JlZjYsIGRhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaCwKICAgICAgICBzdGF0ZSA9IF9yZWY2LnN0YXRlOwogICAgY29tbWl0KCdzZXRHY29kZWZpbGVzTWV0YWRhdGEnLCBkYXRhKTsKICAgIGRpc3BhdGNoKCd1cGRhdGVTZXR0aW5ncycsIHsKICAgICAga2V5TmFtZTogJ3ZpZXcuZ2NvZGVmaWxlcycsCiAgICAgIG5ld1ZhbDogc3RhdGUudmlldy5nY29kZWZpbGVzCiAgICB9KTsKICB9LAogIHNldEdjb2RlZmlsZXNTaG93SGlkZGVuRmlsZXM6IGZ1bmN0aW9uIHNldEdjb2RlZmlsZXNTaG93SGlkZGVuRmlsZXMoX3JlZjcsIGRhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNy5kaXNwYXRjaCwKICAgICAgICBzdGF0ZSA9IF9yZWY3LnN0YXRlOwogICAgY29tbWl0KCdzZXRHY29kZWZpbGVzU2hvd0hpZGRlbkZpbGVzJywgZGF0YSk7CiAgICBkaXNwYXRjaCgndXBkYXRlU2V0dGluZ3MnLCB7CiAgICAgIGtleU5hbWU6ICd2aWV3Lmdjb2RlZmlsZXMnLAogICAgICBuZXdWYWw6IHN0YXRlLnZpZXcuZ2NvZGVmaWxlcwogICAgfSk7CiAgfSwKICBzZXRDdXJyZW50V2ViY2FtOiBmdW5jdGlvbiBzZXRDdXJyZW50V2ViY2FtKF9yZWY4LCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjguY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZjguZGlzcGF0Y2gsCiAgICAgICAgc3RhdGUgPSBfcmVmOC5zdGF0ZTsKICAgIGNvbW1pdCgnc2V0Q3VycmVudFdlYmNhbScsIHBheWxvYWQpOwogICAgZGlzcGF0Y2goJ3VwZGF0ZVNldHRpbmdzJywgewogICAgICBrZXlOYW1lOiAndmlldy53ZWJjYW0uY3VycmVudENhbScsCiAgICAgIG5ld1ZhbDogc3RhdGUudmlldy53ZWJjYW0uY3VycmVudENhbQogICAgfSk7CiAgfSwKICBzZXRUZW1wY2hhcnREYXRhc2V0QWRkaXRpb25hbFNlbnNvclNldHRpbmc6IGZ1bmN0aW9uIHNldFRlbXBjaGFydERhdGFzZXRBZGRpdGlvbmFsU2Vuc29yU2V0dGluZyhfcmVmOSwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY5LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY5LmRpc3BhdGNoLAogICAgICAgIHN0YXRlID0gX3JlZjkuc3RhdGU7CiAgICBjb21taXQoJ3NldFRlbXBjaGFydERhdGFzZXRBZGRpdGlvbmFsU2Vuc29yU2V0dGluZycsIHBheWxvYWQpOwogICAgZGlzcGF0Y2goJ3VwZGF0ZVNldHRpbmdzJywgewogICAgICBrZXlOYW1lOiAndmlldy50ZW1wY2hhcnQnLAogICAgICBuZXdWYWw6IHN0YXRlLnZpZXcudGVtcGNoYXJ0CiAgICB9KTsKICB9LAogIHJlc2V0TW9vbnJha2VyREI6IGZ1bmN0aW9uIHJlc2V0TW9vbnJha2VyREIoX3JlZjEwLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCBiYXNlVXJsLCB1cmxEZWZhdWx0LCByZXNwb25zZURlZmF1bHQsIGRlZmF1bHRzLCBfZGVmYXVsdHMkZXJyb3IyLCBfaXRlcmF0b3IyLCBfc3RlcDIsIGtleSwgX29iamVjdHMkcmVzdWx0LCB1cmwsIHJlc3BvbnNlLCBvYmplY3RzLCBfaSwgX09iamVjdCRrZXlzLCBfb2JqZWN0cyRyZXN1bHQyLCBpdGVtLCBfaXRlcmF0b3IzLCBfc3RlcDMsIGtleTI7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYxMC5jb21taXQsIGRpc3BhdGNoID0gX3JlZjEwLmRpc3BhdGNoLCByb290R2V0dGVycyA9IF9yZWYxMC5yb290R2V0dGVyczsKICAgICAgICAgICAgICBiYXNlVXJsID0gcm9vdEdldHRlcnNbJ3NvY2tldC9nZXRVcmwnXSArICcvc2VydmVyL2RhdGFiYXNlL2l0ZW0nOwogICAgICAgICAgICAgIHVybERlZmF1bHQgPSByb290R2V0dGVyc1snc29ja2V0L2dldFVybCddICsgJy9zZXJ2ZXIvZmlsZXMvY29uZmlnLycgKyB0aGVtZURpciArICcvZGVmYXVsdC5qc29uP3RpbWU9JyArIERhdGUubm93KCk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmxEZWZhdWx0KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXNwb25zZURlZmF1bHQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBkZWZhdWx0cyA9IHt9OwoKICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlRGVmYXVsdCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VEZWZhdWx0Lmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgZGVmYXVsdHMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBpZiAoKChfZGVmYXVsdHMkZXJyb3IyID0gZGVmYXVsdHMuZXJyb3IpID09PSBudWxsIHx8IF9kZWZhdWx0cyRlcnJvcjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWZhdWx0cyRlcnJvcjIuY29kZSkgPT09IDQwNCkgZGVmYXVsdHMgPSB7fTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBheWxvYWQpOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTM7CgogICAgICAgICAgICAgIF9pdGVyYXRvcjIucygpOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBpZiAoKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDcxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBrZXkgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgICAgIGlmICghWyd3ZWJjYW1zJywgJ3RpbWVsYXBzZSddLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVybCA9IGJhc2VVcmwgKyAnP25hbWVzcGFjZT0nICsga2V5OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCk7CgogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNDsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBvYmplY3RzID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghKG9iamVjdHMgIT09IG51bGwgJiYgb2JqZWN0cyAhPT0gdm9pZCAwICYmIChfb2JqZWN0cyRyZXN1bHQgPSBvYmplY3RzLnJlc3VsdCkgIT09IG51bGwgJiYgX29iamVjdHMkcmVzdWx0ICE9PSB2b2lkIDAgJiYgX29iamVjdHMkcmVzdWx0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3RzID09PSBudWxsIHx8IG9iamVjdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2JqZWN0cyRyZXN1bHQyID0gb2JqZWN0cy5yZXN1bHQpID09PSBudWxsIHx8IF9vYmplY3RzJHJlc3VsdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vYmplY3RzJHJlc3VsdDIudmFsdWUpOwoKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICBpZiAoIShfaSA8IF9PYmplY3Qka2V5cy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpdGVtID0gX09iamVjdCRrZXlzW19pXTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMxOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwgKyAnJmtleT0nICsgaXRlbSwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICBfaSsrOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgIGlmICghKGtleSBpbiBkZWZhdWx0cykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkZWZhdWx0c1trZXldKTsKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDM2OwoKICAgICAgICAgICAgICBfaXRlcmF0b3IzLnMoKTsKCiAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgaWYgKChfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0NDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAga2V5MiA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQyOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChiYXNlVXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBrZXksCiAgICAgICAgICAgICAgICAgIGtleToga2V5MiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlZmF1bHRzW2tleV1ba2V5Ml0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDY7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDM2KTsKCiAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKF9jb250ZXh0My50MCk7CgogICAgICAgICAgICBjYXNlIDQ5OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDk7CgogICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCg0OSk7CgogICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDU0OgogICAgICAgICAgICAgIGlmICghKGtleSA9PT0gJ2hpc3Rvcnlfam9icycpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU3OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChyb290R2V0dGVyc1snc29ja2V0L2dldFVybCddICsgJy9zZXJ2ZXIvaGlzdG9yeS9qb2I/YWxsPXRydWUnLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDU3OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDU5OgogICAgICAgICAgICAgIGlmICghKGtleSA9PT0gJ2hpc3RvcnlfdG90YWxzJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjI7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHJvb3RHZXR0ZXJzWydzb2NrZXQvZ2V0VXJsJ10gKyAnL3NlcnZlci9oaXN0b3J5L3Jlc2V0X3RvdGFscycsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjY7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHJvb3RHZXR0ZXJzWydzb2NrZXQvZ2V0VXJsJ10gKyAnL3NlcnZlci9kYXRhYmFzZS9pdGVtP25hbWVzcGFjZT1tYWluc2FpbCZrZXk9JyArIGtleSwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gZGVmYXVsdHMpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY5OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChiYXNlVXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiAnbWFpbnNhaWwnLAogICAgICAgICAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlZmF1bHRzW2tleV0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDcxOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzY7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNzM7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzWyJjYXRjaCJdKDEzKTsKCiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKF9jb250ZXh0My50MSk7CgogICAgICAgICAgICBjYXNlIDc2OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNzY7CgogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCg3Nik7CgogICAgICAgICAgICBjYXNlIDc5OgogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgIGNhc2UgODA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1sxMywgNzMsIDc2LCA3OV0sIFszNiwgNDYsIDQ5LCA1Ml1dKTsKICAgIH0pKSgpOwogIH0sCiAgYmFja3VwTW9vbnJha2VyREI6IGZ1bmN0aW9uIGJhY2t1cE1vb25yYWtlckRCKF9yZWYxMSwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBfb2JqZWN0c01haW5zYWlsJHJlc3UsIF9vYmplY3RzTWFpbnNhaWwkcmVzdTI7CgogICAgICB2YXIgY29tbWl0LCBkaXNwYXRjaCwgcm9vdEdldHRlcnMsIGJhY2t1cCwgcmVzcG9uc2VNYWluc2FpbCwgb2JqZWN0c01haW5zYWlsLCBtYWluc2FpbERiLCBfaXRlcmF0b3I0LCBfc3RlcDQsIGtleSwgX29iamVjdHMkcmVzdWx0MywgX29iamVjdHMkcmVzdWx0NCwgdXJsLCByZXNwb25zZSwgb2JqZWN0cywgZWxlbWVudDsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjExLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMTEuZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzID0gX3JlZjExLnJvb3RHZXR0ZXJzOwogICAgICAgICAgICAgIGJhY2t1cCA9IHt9OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2gocm9vdEdldHRlcnNbJ3NvY2tldC9nZXRVcmwnXSArICcvc2VydmVyL2RhdGFiYXNlL2l0ZW0/bmFtZXNwYWNlPW1haW5zYWlsJyk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzcG9uc2VNYWluc2FpbCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VNYWluc2FpbC5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgb2JqZWN0c01haW5zYWlsID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgbWFpbnNhaWxEYiA9IChfb2JqZWN0c01haW5zYWlsJHJlc3UgPSBvYmplY3RzTWFpbnNhaWwgPT09IG51bGwgfHwgb2JqZWN0c01haW5zYWlsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29iamVjdHNNYWluc2FpbCRyZXN1MiA9IG9iamVjdHNNYWluc2FpbC5yZXN1bHQpID09PSBudWxsIHx8IF9vYmplY3RzTWFpbnNhaWwkcmVzdTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vYmplY3RzTWFpbnNhaWwkcmVzdTIudmFsdWUpICE9PSBudWxsICYmIF9vYmplY3RzTWFpbnNhaWwkcmVzdSAhPT0gdm9pZCAwID8gX29iamVjdHNNYWluc2FpbCRyZXN1IDoge307CiAgICAgICAgICAgICAgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBheWxvYWQpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTA7CgogICAgICAgICAgICAgIF9pdGVyYXRvcjQucygpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBpZiAoKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBrZXkgPSBfc3RlcDQudmFsdWU7CgogICAgICAgICAgICAgIGlmICghWyd0aW1lbGFwc2UnLCAnd2ViY2FtcyddLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVybCA9IHJvb3RHZXR0ZXJzWydzb2NrZXQvZ2V0VXJsJ10gKyAnL3NlcnZlci9kYXRhYmFzZS9pdGVtP25hbWVzcGFjZT0nICsga2V5OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBvYmplY3RzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKG9iamVjdHMgIT09IG51bGwgJiYgb2JqZWN0cyAhPT0gdm9pZCAwICYmIChfb2JqZWN0cyRyZXN1bHQzID0gb2JqZWN0cy5yZXN1bHQpICE9PSBudWxsICYmIF9vYmplY3RzJHJlc3VsdDMgIT09IHZvaWQgMCAmJiBfb2JqZWN0cyRyZXN1bHQzLnZhbHVlKSBiYWNrdXBba2V5XSA9IF9vYmplY3RTcHJlYWQoe30sIG9iamVjdHMgPT09IG51bGwgfHwgb2JqZWN0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vYmplY3RzJHJlc3VsdDQgPSBvYmplY3RzLnJlc3VsdCkgPT09IG51bGwgfHwgX29iamVjdHMkcmVzdWx0NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29iamVjdHMkcmVzdWx0NC52YWx1ZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgaWYgKGtleSBpbiBtYWluc2FpbERiKSB7CiAgICAgICAgICAgICAgICBiYWNrdXBba2V5XSA9IF9vYmplY3RTcHJlYWQoe30sIG1haW5zYWlsRGJba2V5XSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDMwOwogICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgxMCk7CgogICAgICAgICAgICAgIF9pdGVyYXRvcjQuZShfY29udGV4dDQudDApOwoKICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDMzOwoKICAgICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goMzMpOwoKICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgJ2RhdGE6dGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoYmFja3VwKSkpOwogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsICdiYWNrdXAtbWFpbnNhaWwuanNvbicpOwogICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgIGVsZW1lbnQuY2xpY2soKTsKICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpOwoKICAgICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzEwLCAzMCwgMzMsIDM2XV0pOwogICAgfSkpKCk7CiAgfSwKICByZXN0b3JlTW9vbnJha2VyREI6IGZ1bmN0aW9uIHJlc3RvcmVNb29ucmFrZXJEQihfcmVmMTIsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICB2YXIgX29iamVjdHNOYW1lc3BhY2VzJHJlLCBfb2JqZWN0c05hbWVzcGFjZXMkcmUyOwoKICAgICAgdmFyIHJvb3RHZXR0ZXJzLCBiYXNlVXJsLCBtYWluc2FpbFVybCwgcmVzcG9uc2VOYW1lc3BhY2VzLCBvYmplY3RzTmFtZXNwYWNlcywgbmFtZXNwYWNlc0FycmF5LCBtYWluc2FpbEFycmF5LCBfb2JqZWN0c01haW5zYWlsJHJlc3UzLCBfb2JqZWN0c01haW5zYWlsJHJlc3U0LCByZXNwb25zZU1haW5zYWlsLCBvYmplY3RzTWFpbnNhaWwsIF9pdGVyYXRvcjUsIF9zdGVwNSwga2V5LCBfb2JqZWN0cyRyZXN1bHQ1LCB1cmwsIHJlc3BvbnNlLCBvYmplY3RzLCBfaTIsIF9PYmplY3Qka2V5czIsIF9vYmplY3RzJHJlc3VsdDYsIGl0ZW0sIF9pMywgX09iamVjdCRrZXlzMywga2V5MiwgdmFsdWU7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjEyLnJvb3RHZXR0ZXJzOwogICAgICAgICAgICAgIGJhc2VVcmwgPSByb290R2V0dGVyc1snc29ja2V0L2dldFVybCddICsgJy9zZXJ2ZXIvZGF0YWJhc2UvaXRlbSc7CiAgICAgICAgICAgICAgbWFpbnNhaWxVcmwgPSBiYXNlVXJsICsgJz9uYW1lc3BhY2U9bWFpbnNhaWwnOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2gocm9vdEdldHRlcnNbJ3NvY2tldC9nZXRVcmwnXSArICcvc2VydmVyL2RhdGFiYXNlL2xpc3QnKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXNwb25zZU5hbWVzcGFjZXMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlTmFtZXNwYWNlcy5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgb2JqZWN0c05hbWVzcGFjZXMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICBuYW1lc3BhY2VzQXJyYXkgPSAoX29iamVjdHNOYW1lc3BhY2VzJHJlID0gb2JqZWN0c05hbWVzcGFjZXMgPT09IG51bGwgfHwgb2JqZWN0c05hbWVzcGFjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2JqZWN0c05hbWVzcGFjZXMkcmUyID0gb2JqZWN0c05hbWVzcGFjZXMucmVzdWx0KSA9PT0gbnVsbCB8fCBfb2JqZWN0c05hbWVzcGFjZXMkcmUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb2JqZWN0c05hbWVzcGFjZXMkcmUyLm5hbWVzcGFjZXMpICE9PSBudWxsICYmIF9vYmplY3RzTmFtZXNwYWNlcyRyZSAhPT0gdm9pZCAwID8gX29iamVjdHNOYW1lc3BhY2VzJHJlIDogW107CiAgICAgICAgICAgICAgbWFpbnNhaWxBcnJheSA9IFtdOwoKICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZXNBcnJheS5pbmNsdWRlcygnbWFpbnNhaWwnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2gobWFpbnNhaWxVcmwpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICByZXNwb25zZU1haW5zYWlsID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VNYWluc2FpbC5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIG9iamVjdHNNYWluc2FpbCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIG1haW5zYWlsQXJyYXkgPSBPYmplY3Qua2V5cygoX29iamVjdHNNYWluc2FpbCRyZXN1MyA9IG9iamVjdHNNYWluc2FpbCA9PT0gbnVsbCB8fCBvYmplY3RzTWFpbnNhaWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2JqZWN0c01haW5zYWlsJHJlc3U0ID0gb2JqZWN0c01haW5zYWlsLnJlc3VsdCkgPT09IG51bGwgfHwgX29iamVjdHNNYWluc2FpbCRyZXN1NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29iamVjdHNNYWluc2FpbCRyZXN1NC52YWx1ZSkgIT09IG51bGwgJiYgX29iamVjdHNNYWluc2FpbCRyZXN1MyAhPT0gdm9pZCAwID8gX29iamVjdHNNYWluc2FpbCRyZXN1MyA6IHt9KTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBheWxvYWQuZGJDaGVja2JveGVzKTsKICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDIwOwoKICAgICAgICAgICAgICBfaXRlcmF0b3I1LnMoKTsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgaWYgKChfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2MDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAga2V5ID0gX3N0ZXA1LnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoIVsndGltZWxhcHNlJywgJ3dlYmNhbXMnXS5pbmNsdWRlcyhrZXkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDUzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZXNBcnJheS5pbmNsdWRlcyhrZXkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cmwgPSBiYXNlVXJsICsgJz9uYW1lc3BhY2U9JyArIGtleTsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI5OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwpOwoKICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgb2JqZWN0cyA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICBpZiAoIShvYmplY3RzICE9PSBudWxsICYmIG9iamVjdHMgIT09IHZvaWQgMCAmJiAoX29iamVjdHMkcmVzdWx0NSA9IG9iamVjdHMucmVzdWx0KSAhPT0gbnVsbCAmJiBfb2JqZWN0cyRyZXN1bHQ1ICE9PSB2b2lkIDAgJiYgX29iamVjdHMkcmVzdWx0NS52YWx1ZSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9pMiA9IDAsIF9PYmplY3Qka2V5czIgPSBPYmplY3Qua2V5cyhvYmplY3RzID09PSBudWxsIHx8IG9iamVjdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2JqZWN0cyRyZXN1bHQ2ID0gb2JqZWN0cy5yZXN1bHQpID09PSBudWxsIHx8IF9vYmplY3RzJHJlc3VsdDYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vYmplY3RzJHJlc3VsdDYudmFsdWUpOwoKICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICBpZiAoIShfaTIgPCBfT2JqZWN0JGtleXMyLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGl0ZW0gPSBfT2JqZWN0JGtleXMyW19pMl07CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOTsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2godXJsICsgJyZrZXk9JyArIGl0ZW0sIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgX2kyKys7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzNTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgX2kzID0gMCwgX09iamVjdCRrZXlzMyA9IE9iamVjdC5rZXlzKHBheWxvYWQucmVzdG9yZU9iamVjdHNba2V5XSk7CgogICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgIGlmICghKF9pMyA8IF9PYmplY3Qka2V5czMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1MTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAga2V5MiA9IF9PYmplY3Qka2V5czNbX2kzXTsKICAgICAgICAgICAgICB2YWx1ZSA9IHBheWxvYWQucmVzdG9yZU9iamVjdHNba2V5XVtrZXkyXTsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ4OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChiYXNlVXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBrZXksCiAgICAgICAgICAgICAgICAgIGtleToga2V5MiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgICBfaTMrKzsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA1MToKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA1MzoKICAgICAgICAgICAgICBpZiAoIW1haW5zYWlsQXJyYXkuaW5jbHVkZXMoa2V5KSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1NjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1NjsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2gobWFpbnNhaWxVcmwgKyAnJmtleT0nICsga2V5LCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKG1haW5zYWlsVXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiAnbWFpbnNhaWwnLAogICAgICAgICAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHBheWxvYWQucmVzdG9yZU9iamVjdHNba2V5XQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNTg6CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjA6CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2NTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA2MjsKICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMjApOwoKICAgICAgICAgICAgICBfaXRlcmF0b3I1LmUoX2NvbnRleHQ1LnQwKTsKCiAgICAgICAgICAgIGNhc2UgNjU6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA2NTsKCiAgICAgICAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuZmluaXNoKDY1KTsKCiAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwoKICAgICAgICAgICAgY2FzZSA2OToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU1LCBudWxsLCBbWzIwLCA2MiwgNjUsIDY4XV0pOwogICAgfSkpKCk7CiAgfSwKICBzZXRIaXN0b3J5Q29sdW1uczogZnVuY3Rpb24gc2V0SGlzdG9yeUNvbHVtbnMoX3JlZjEzLCBkYXRhKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjEzLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYxMy5kaXNwYXRjaCwKICAgICAgICBzdGF0ZSA9IF9yZWYxMy5zdGF0ZTsKICAgIGNvbW1pdCgnc2V0SGlzdG9yeUNvbHVtbnMnLCBkYXRhKTsKICAgIGRpc3BhdGNoKCd1cGRhdGVTZXR0aW5ncycsIHsKICAgICAga2V5TmFtZTogJ3ZpZXcuaGlzdG9yeScsCiAgICAgIG5ld1ZhbDogc3RhdGUudmlldy5oaXN0b3J5CiAgICB9KTsKICB9LAogIGhpZGVTdGF0dXNJbkhpc3RvcnlMaXN0OiBmdW5jdGlvbiBoaWRlU3RhdHVzSW5IaXN0b3J5TGlzdChfcmVmMTQsIG5hbWUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTQuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZjE0LmRpc3BhdGNoLAogICAgICAgIHN0YXRlID0gX3JlZjE0LnN0YXRlOwoKICAgIHZhciBhcnJheSA9IF90b0NvbnN1bWFibGVBcnJheShzdGF0ZS52aWV3Lmhpc3RvcnkuaGlkZVByaW50U3RhdHVzKTsKCiAgICBpZiAoIWFycmF5LmluY2x1ZGVzKG5hbWUpKSB7CiAgICAgIGFycmF5LnB1c2gobmFtZSk7CiAgICAgIGNvbW1pdCgnc2V0SGlzdG9yeUhpZGVQcmludFN0YXR1cycsIGFycmF5KTsKICAgICAgZGlzcGF0Y2goJ3VwZGF0ZVNldHRpbmdzJywgewogICAgICAgIGtleU5hbWU6ICd2aWV3Lmhpc3RvcnkuaGlkZVByaW50U3RhdHVzJywKICAgICAgICBuZXdWYWw6IGFycmF5CiAgICAgIH0pOwogICAgfQogIH0sCiAgc2F2ZUV4cGFuZFBhbmVsOiBmdW5jdGlvbiBzYXZlRXhwYW5kUGFuZWwoX3JlZjE1LCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjE1LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYxNS5kaXNwYXRjaCwKICAgICAgICBzdGF0ZSA9IF9yZWYxNS5zdGF0ZTsKICAgIGlmICghcGF5bG9hZC52YWx1ZSkgY29tbWl0KCdhZGRDbG9zZVBhbmVsJywgewogICAgICBuYW1lOiBwYXlsb2FkLm5hbWUKICAgIH0pO2Vsc2UgY29tbWl0KCdyZW1vdmVDbG9zZVBhbmVsJywgewogICAgICBuYW1lOiBwYXlsb2FkLm5hbWUKICAgIH0pOwogICAgZGlzcGF0Y2goJ3VwZGF0ZVNldHRpbmdzJywgewogICAgICBrZXlOYW1lOiAnZGFzaGJvYXJkLm5vbkV4cGFuZFBhbmVscycsCiAgICAgIG5ld1ZhbDogc3RhdGUuZGFzaGJvYXJkLm5vbkV4cGFuZFBhbmVscwogICAgfSk7CiAgfSwKICBzaG93U3RhdHVzSW5IaXN0b3J5TGlzdDogZnVuY3Rpb24gc2hvd1N0YXR1c0luSGlzdG9yeUxpc3QoX3JlZjE2LCBuYW1lKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjE2LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYxNi5kaXNwYXRjaCwKICAgICAgICBzdGF0ZSA9IF9yZWYxNi5zdGF0ZTsKCiAgICB2YXIgYXJyYXkgPSBfdG9Db25zdW1hYmxlQXJyYXkoc3RhdGUudmlldy5oaXN0b3J5LmhpZGVQcmludFN0YXR1cyk7CgogICAgdmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZihuYW1lKTsKCiAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7CiAgICAgIGNvbW1pdCgnc2V0SGlzdG9yeUhpZGVQcmludFN0YXR1cycsIGFycmF5KTsKICAgICAgZGlzcGF0Y2goJ3VwZGF0ZVNldHRpbmdzJywgewogICAgICAgIGtleU5hbWU6ICd2aWV3Lmhpc3RvcnkuaGlkZVByaW50U3RhdHVzJywKICAgICAgICBuZXdWYWw6IGFycmF5CiAgICAgIH0pOwogICAgfQogIH0sCiAgcmVzZXRMYXlvdXQ6IGZ1bmN0aW9uIHJlc2V0TGF5b3V0KF9yZWYxNywgbmFtZSkgewogICAgdmFyIF9kZWZhdWx0U3RhdGUkZGFzaGJvYTsKCiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMTcuZGlzcGF0Y2g7CiAgICB2YXIgZGVmYXVsdFN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7IC8vIEB0cy1pZ25vcmUKCiAgICB2YXIgbmV3VmFsID0gKF9kZWZhdWx0U3RhdGUkZGFzaGJvYSA9IGRlZmF1bHRTdGF0ZS5kYXNoYm9hcmRbbmFtZV0pICE9PSBudWxsICYmIF9kZWZhdWx0U3RhdGUkZGFzaGJvYSAhPT0gdm9pZCAwID8gX2RlZmF1bHRTdGF0ZSRkYXNoYm9hIDogW107CiAgICBkaXNwYXRjaCgnc2F2ZVNldHRpbmcnLCB7CiAgICAgIG5hbWU6ICdkYXNoYm9hcmQuJyArIG5hbWUsCiAgICAgIHZhbHVlOiBuZXdWYWwKICAgIH0pOwogIH0KfTs="},null]}