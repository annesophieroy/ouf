{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js??ref--15-2!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MacroButton.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MacroButton.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9hbm5lLXNvcGhpZXJveS9Eb3dubG9hZHMvTWFpbnNhaWwvbWFpbnNhaWwtbWFpbnRlbmFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvYW5uZS1zb3BoaWVyb3kvRG93bmxvYWRzL01haW5zYWlsL21haW5zYWlsLW1haW50ZW5hbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2FubmUtc29waGllcm95L0Rvd25sb2Fkcy9NYWluc2FpbC9tYWluc2FpbC1tYWludGVuYW5jZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSAidHNsaWIiOwppbXBvcnQgQ29tcG9uZW50IGZyb20gJ3Z1ZS1jbGFzcy1jb21wb25lbnQnOwppbXBvcnQgeyBNaXhpbnMsIFByb3AsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnQC9jb21wb25lbnRzL21peGlucy9iYXNlJzsKCnZhciBNYWNyb0J1dHRvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX01peGlucykgewogIF9pbmhlcml0cyhNYWNyb0J1dHRvbiwgX01peGlucyk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTWFjcm9CdXR0b24pOwoKICBmdW5jdGlvbiBNYWNyb0J1dHRvbigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFjcm9CdXR0b24pOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwuYXBwbHkoX3N1cGVyLCBbdGhpc10uY29uY2F0KGFyZ3MpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwYXJhbUFycmF5IiwgW10pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInBhcmFtcyIsIHt9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJtYWNybyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY29sb3IiLCB2b2lkIDApOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhNYWNyb0J1dHRvbiwgW3sKICAgIGtleTogImtsaXBwZXJNYWNybyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByaW50ZXIvZ2V0TWFjcm8nXSh0aGlzLm1hY3JvLm5hbWUpOwogICAgfQogIH0sIHsKICAgIGtleTogImtsaXBwZXJNYWNyb0NoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24ga2xpcHBlck1hY3JvQ2hhbmdlKCkgewogICAgICB0aGlzLnJlZnJlc2hQYXJhbXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoUGFyYW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoUGFyYW1zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucGFyYW1BcnJheS5zcGxpY2UoMCwgdGhpcy5wYXJhbUFycmF5Lmxlbmd0aCk7CiAgICAgIHRoaXMucGFyYW1zID0ge307CgogICAgICBpZiAodGhpcy5rbGlwcGVyTWFjcm8ucGFyYW1zICE9PSBudWxsKSB7CiAgICAgICAgT2JqZWN0LmtleXModGhpcy5rbGlwcGVyTWFjcm8ucGFyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICBpZiAoIW5hbWUuc3RhcnRzV2l0aCgnXycpKSB7CiAgICAgICAgICAgIF90aGlzMi5wYXJhbUFycmF5LnB1c2gobmFtZSk7CgogICAgICAgICAgICBfdGhpczIucGFyYW1zW25hbWVdID0gewogICAgICAgICAgICAgIHR5cGU6IF90aGlzMi5rbGlwcGVyTWFjcm8ucGFyYW1zW25hbWVdLnR5cGUsCiAgICAgICAgICAgICAgZGVmYXVsdDogX3RoaXMyLmtsaXBwZXJNYWNyby5wYXJhbXNbbmFtZV0uZGVmYXVsdCwKICAgICAgICAgICAgICB2YWx1ZTogJycKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRvU2VuZE1hY3JvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb1NlbmRNYWNybyhnY29kZSkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VydmVyL2FkZEV2ZW50JywgewogICAgICAgIG1lc3NhZ2U6IGdjb2RlLAogICAgICAgIHR5cGU6ICdjb21tYW5kJwogICAgICB9KTsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgewogICAgICAgIHNjcmlwdDogZ2NvZGUKICAgICAgfSwgewogICAgICAgIGxvYWRpbmc6ICdtYWNyb18nICsgZ2NvZGUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VuZFdpdGhQYXJhbXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRXaXRoUGFyYW1zKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbXMgPSBbXTsKICAgICAgdGhpcy5wYXJhbUFycmF5LmZvckVhY2goZnVuY3Rpb24gKHBhcmFtbmFtZSkgewogICAgICAgIGlmIChfdGhpczMucGFyYW1zW3BhcmFtbmFtZV0udmFsdWUgIT09IG51bGwgJiYgX3RoaXMzLnBhcmFtc1twYXJhbW5hbWVdLnZhbHVlICE9PSAnJykgcGFyYW1zLnB1c2gocGFyYW1uYW1lICsgJz0nICsgX3RoaXMzLnBhcmFtc1twYXJhbW5hbWVdLnZhbHVlKTsKICAgICAgfSk7CiAgICAgIHZhciBnY29kZSA9IHRoaXMubWFjcm8ubmFtZSArICcgJyArIHBhcmFtcy5qb2luKCcgJyk7CiAgICAgIHRoaXMuZG9TZW5kTWFjcm8oZ2NvZGUpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdW50ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMucmVmcmVzaFBhcmFtcygpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1hY3JvQnV0dG9uOwp9KE1peGlucyhCYXNlTWl4aW4pKTsKCl9fZGVjb3JhdGUoW1Byb3AoewogIHJlcXVpcmVkOiB0cnVlCn0pXSwgTWFjcm9CdXR0b24ucHJvdG90eXBlLCAibWFjcm8iLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCh7CiAgZGVmYXVsdDogJ3ByaW1hcnknCn0pXSwgTWFjcm9CdXR0b24ucHJvdG90eXBlLCAiY29sb3IiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbV2F0Y2goJ2tsaXBwZXJNYWNybycpXSwgTWFjcm9CdXR0b24ucHJvdG90eXBlLCAia2xpcHBlck1hY3JvQ2hhbmdlIiwgbnVsbCk7CgpNYWNyb0J1dHRvbiA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudF0sIE1hY3JvQnV0dG9uKTsKZXhwb3J0IGRlZmF1bHQgTWFjcm9CdXR0b247"},{"version":3,"sources":["/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MacroButton.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from 'vue-class-component'\nimport {Mixins, Prop, Watch} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {GuiMacrosStateMacrogroupMacro} from '@/store/gui/macros/types'\n\ninterface param {\n    type: 'int' | 'double' | 'string' | null,\n    default: string | number | null\n    value: string | number | null\n}\n\ninterface params {\n    [key: string]: param\n}\n\n@Component\nexport default class MacroButton extends Mixins(BaseMixin) {\n    private paramArray: string[] = []\n    private params: params = {}\n\n    @Prop({ required: true }) readonly macro!: GuiMacrosStateMacrogroupMacro\n    @Prop({ default: 'primary' }) readonly color!: string\n\n    get klipperMacro() {\n        return this.$store.getters['printer/getMacro'](this.macro.name)\n    }\n\n    @Watch('klipperMacro')\n    klipperMacroChange() {\n        this.refreshParams()\n    }\n\n    refreshParams() {\n        this.paramArray.splice(0, this.paramArray.length)\n        this.params = {}\n\n        if (this.klipperMacro.params !== null) {\n            Object.keys(this.klipperMacro.params).forEach((name: string) => {\n                if (!name.startsWith('_')) {\n                    this.paramArray.push(name)\n                    this.params[name] = {\n                        type: this.klipperMacro.params[name].type,\n                        default: this.klipperMacro.params[name].default,\n                        value: ''\n                    }\n                }\n            })\n        }\n    }\n\n    doSendMacro(gcode: string) {\n        this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: gcode }, { loading: 'macro_'+gcode })\n    }\n\n    sendWithParams() {\n        let params: string[] = []\n        this.paramArray.forEach((paramname: string) => {\n            if (this.params[paramname].value !== null && this.params[paramname].value !== '')\n                params.push(paramname+'='+this.params[paramname].value)\n        })\n\n        const gcode = this.macro.name + ' ' +params.join(' ')\n        this.doSendMacro(gcode)\n    }\n\n    mounted(){\n        this.refreshParams()\n    }\n}\n"],"sourceRoot":""}]}