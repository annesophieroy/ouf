{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/TheTopCornerMenu.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/TheTopCornerMenu.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IENvbXBvbmVudCBmcm9tICd2dWUtY2xhc3MtY29tcG9uZW50JwppbXBvcnQgeyBNaXhpbnMgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZU1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvYmFzZScKaW1wb3J0IHtTZXJ2ZXJQb3dlclN0YXRlRGV2aWNlfSBmcm9tICdAL3N0b3JlL3NlcnZlci9wb3dlci90eXBlcycKaW1wb3J0IFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy91aS9QYW5lbC52dWUnCgppbnRlcmZhY2UgZGlhbG9nUG93ZXJEZXZpY2VDaGFuZ2UgewogICAgc2hvdzogYm9vbGVhbgogICAgZGV2aWNlOiBzdHJpbmcKICAgIHZhbHVlOiBzdHJpbmcKfQoKaW50ZXJmYWNlIGRpYWxvZ0NvbmZpcm1hdGlvbiB7CiAgICBzaG93OiBib29sZWFuCiAgICBzZXJ2aWNlTmFtZTogc3RyaW5nIHwgbnVsbAogICAgZXhlY3V0YWJsZUZ1bmN0aW9uOiBhbnkgfCBudWxsCiAgICB0aXRsZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogc3RyaW5nCiAgICBhY3Rpb25CdXR0b25UZXh0OiBzdHJpbmcKfQoKQENvbXBvbmVudCh7CiAgICBjb21wb25lbnRzOiB7UGFuZWx9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRoZVRvcENvcm5lck1lbnUgZXh0ZW5kcyBNaXhpbnMoQmFzZU1peGluKSB7CgogICAgc2hvd01lbnUgPSBmYWxzZQogICAgZGlhbG9nUG93ZXJEZXZpY2VDaGFuZ2UgOiBkaWFsb2dQb3dlckRldmljZUNoYW5nZSA9IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBkZXZpY2U6ICcnLAogICAgICAgIHZhbHVlOiAnJwogICAgfQoKICAgIGRpYWxvZ0NvbmZpcm1hdGlvbjogZGlhbG9nQ29uZmlybWF0aW9uID0gewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIHNlcnZpY2VOYW1lOiBudWxsLAogICAgICAgIGV4ZWN1dGFibGVGdW5jdGlvbjogbnVsbCwKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICcnCiAgICB9CgogICAgZ2V0IHNlcnZpY2VzKCkgewogICAgICAgIGNvbnN0IHNlcnZpY2VzID0gdGhpcy4kc3RvcmUuc3RhdGUuc2VydmVyLnN5c3RlbV9pbmZvPy5hdmFpbGFibGVfc2VydmljZXM/LmZpbHRlcigobmFtZTogc3RyaW5nKSA9PiBuYW1lICE9PSAna2xpcHBlcl9tY3UnKSA/PyBbXQogICAgICAgIHNlcnZpY2VzLnNvcnQoKQogICAgICAgIHJldHVybiBzZXJ2aWNlcwogICAgfQoKICAgIGdldCBwb3dlckRldmljZXMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3NlcnZlci9wb3dlci9nZXREZXZpY2VzJ10KICAgIH0KCiAgICBnZXQgc2VydmljZV9zdGF0ZXMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlci5zeXN0ZW1faW5mbz8uc2VydmljZV9zdGF0ZSA/PyB7fQogICAgfQoKICAgIGdldFNlcnZpY2VTdGF0ZShuYW1lOiBzdHJpbmcpIHsKICAgICAgICBpZiAobmFtZSBpbiB0aGlzLnNlcnZpY2Vfc3RhdGVzKSByZXR1cm4gdGhpcy5zZXJ2aWNlX3N0YXRlc1tuYW1lXS5hY3RpdmVfc3RhdGUKCiAgICAgICAgcmV0dXJuIG51bGwKICAgIH0KCiAgICBnZXRTZXJ2aWNlU3ViU3RhdGUobmFtZTogc3RyaW5nKSB7CiAgICAgICAgaWYgKG5hbWUgaW4gdGhpcy5zZXJ2aWNlX3N0YXRlcykgcmV0dXJuIHRoaXMuc2VydmljZV9zdGF0ZXNbbmFtZV0uc3ViX3N0YXRlCgogICAgICAgIHJldHVybiBudWxsCiAgICB9CgogICAgY2hlY2tEaWFsb2coZXhlY3V0YWJsZUZ1bmN0aW9uOiBhbnksIHNlcnZpY2VOYW1lOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nKSB7CiAgICAgICAgaWYgKHRoaXMucHJpbnRlcklzUHJpbnRpbmcpIHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dDb25maXJtYXRpb24uZXhlY3V0YWJsZUZ1bmN0aW9uID0gZXhlY3V0YWJsZUZ1bmN0aW9uCiAgICAgICAgICAgIHRoaXMuZGlhbG9nQ29uZmlybWF0aW9uLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWUKCiAgICAgICAgICAgIGNvbnN0IGFjdGlvblVwcGVyY2FzZSA9IGFjdGlvbi50cmltKCkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBhY3Rpb24udHJpbSgpLnNsaWNlKDEpCiAgICAgICAgICAgIGxldCB0aXRsZUtleSA9ICdBcHAuVG9wQ29ybmVyTWVudS5Db25maXJtYXRpb25EaWFsb2cuVGl0bGUuU2VydmljZScgKyBhY3Rpb25VcHBlcmNhc2UKICAgICAgICAgICAgbGV0IGRlc2NyaXB0aW9uS2V5ID0gJ0FwcC5Ub3BDb3JuZXJNZW51LkNvbmZpcm1hdGlvbkRpYWxvZy5EZXNjcmlwdGlvbi5TZXJ2aWNlJyArIGFjdGlvblVwcGVyY2FzZQogICAgICAgICAgICBsZXQgYnV0dG9uS2V5ID0gJ0FwcC5Ub3BDb3JuZXJNZW51LicgKyBhY3Rpb25VcHBlcmNhc2UKCiAgICAgICAgICAgIGlmIChzZXJ2aWNlTmFtZSA9PT0gJ2tsaXBwZXInICYmIFsnc3RvcCcsICdyZXN0YXJ0JywgJ2Zpcm13YXJlUmVzdGFydCddLmluY2x1ZGVzKGFjdGlvbikpewogICAgICAgICAgICAgICAgdGl0bGVLZXkgPSAnQXBwLlRvcENvcm5lck1lbnUuQ29uZmlybWF0aW9uRGlhbG9nLlRpdGxlLicgKyAoYWN0aW9uICE9PSAnc3RvcCcgPyAnS2xpcHBlcicgOiAnU2VydmljZScpICsgYWN0aW9uVXBwZXJjYXNlCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbktleSA9ICdBcHAuVG9wQ29ybmVyTWVudS5Db25maXJtYXRpb25EaWFsb2cuRGVzY3JpcHRpb24uS2xpcHBlcicgKyBhY3Rpb25VcHBlcmNhc2UKCiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnZmlybXdhcmVSZXN0YXJ0JykgYnV0dG9uS2V5ID0gJ0FwcC5Ub3BDb3JuZXJNZW51LktsaXBwZXJGaXJtd2FyZVJlc3RhcnQnCiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VydmljZU5hbWUgPT09ICdob3N0JykgewogICAgICAgICAgICAgICAgdGl0bGVLZXkgPSAnQXBwLlRvcENvcm5lck1lbnUuQ29uZmlybWF0aW9uRGlhbG9nLlRpdGxlLkhvc3QnICsgYWN0aW9uVXBwZXJjYXNlCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbktleSA9ICdBcHAuVG9wQ29ybmVyTWVudS5Db25maXJtYXRpb25EaWFsb2cuRGVzY3JpcHRpb24uSG9zdCcgKyBhY3Rpb25VcHBlcmNhc2UKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5kaWFsb2dDb25maXJtYXRpb24udGl0bGUgPSB0aGlzLiR0KHRpdGxlS2V5KS50b1N0cmluZygpCiAgICAgICAgICAgIHRoaXMuZGlhbG9nQ29uZmlybWF0aW9uLmRlc2NyaXB0aW9uID0gdGhpcy4kdChkZXNjcmlwdGlvbktleSkudG9TdHJpbmcoKQogICAgICAgICAgICB0aGlzLmRpYWxvZ0NvbmZpcm1hdGlvbi5hY3Rpb25CdXR0b25UZXh0ID0gdGhpcy4kdChidXR0b25LZXkpLnRvU3RyaW5nKCkKICAgICAgICAgICAgdGhpcy5kaWFsb2dDb25maXJtYXRpb24uc2hvdyA9IHRydWUKICAgICAgICB9IGVsc2UgZXhlY3V0YWJsZUZ1bmN0aW9uKHNlcnZpY2VOYW1lKQogICAgfQoKICAgIGV4ZWN1dGVEaWFsb2coKSB7CiAgICAgICAgdGhpcy5kaWFsb2dDb25maXJtYXRpb24uZXhlY3V0YWJsZUZ1bmN0aW9uKHRoaXMuZGlhbG9nQ29uZmlybWF0aW9uLnNlcnZpY2VOYW1lKQogICAgICAgIHRoaXMuZGlhbG9nQ29uZmlybWF0aW9uLnNob3cgPSBmYWxzZQogICAgfQoKICAgIGtsaXBwZXJSZXN0YXJ0KCkgewogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7IG1lc3NhZ2U6ICdSRVNUQVJUJywgdHlwZTogJ2NvbW1hbmQnIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgeyBzY3JpcHQ6ICdSRVNUQVJUJyB9KQogICAgfQoKICAgIGtsaXBwZXJGaXJtd2FyZVJlc3RhcnQoKSB7CiAgICAgICAgdGhpcy5zaG93TWVudSA9IGZhbHNlCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogJ0ZJUk1XQVJFX1JFU1RBUlQnLCB0eXBlOiAnY29tbWFuZCcgfSkKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgncHJpbnRlci5nY29kZS5zY3JpcHQnLCB7IHNjcmlwdDogJ0ZJUk1XQVJFX1JFU1RBUlQnIH0pCiAgICB9CgogICAgc2VydmljZVN0YXJ0KHNlcnZpY2U6IHN0cmluZykgewogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnNlcnZpY2VzLnN0YXJ0JywgeyBzZXJ2aWNlOiBzZXJ2aWNlIH0pCiAgICB9CgogICAgc2VydmljZVJlc3RhcnQoc2VydmljZTogc3RyaW5nKSB7CiAgICAgICAgdGhpcy5zaG93TWVudSA9IGZhbHNlCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ21hY2hpbmUuc2VydmljZXMucmVzdGFydCcsIHsgc2VydmljZTogc2VydmljZSB9KQogICAgfQoKICAgIHNlcnZpY2VTdG9wKHNlcnZpY2U6IHN0cmluZykgewogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnNlcnZpY2VzLnN0b3AnLCB7IHNlcnZpY2U6IHNlcnZpY2UgfSkKICAgIH0KCiAgICBjaGFuZ2VTd2l0Y2goZGV2aWNlOiBTZXJ2ZXJQb3dlclN0YXRlRGV2aWNlLCB2YWx1ZTogc3RyaW5nKSB7CiAgICAgICAgdGhpcy5kaWFsb2dQb3dlckRldmljZUNoYW5nZS5kZXZpY2UgPSBkZXZpY2UuZGV2aWNlCiAgICAgICAgdGhpcy5kaWFsb2dQb3dlckRldmljZUNoYW5nZS52YWx1ZSA9IHZhbHVlCgogICAgICAgIGNvbnN0IGNvbmZpcm1PblBvd2VyRGV2aWNlQ2hhbmdlID0gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnVpU2V0dGluZ3MuY29uZmlybU9uUG93ZXJEZXZpY2VDaGFuZ2UKICAgICAgICBpZiAoY29uZmlybU9uUG93ZXJEZXZpY2VDaGFuZ2UpIHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dQb3dlckRldmljZUNoYW5nZS5zaG93ID0gdHJ1ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucG93ZXJEZXZpY2VUb2dnbGUoKQogICAgICAgIH0KICAgIH0KCiAgICBwb3dlckRldmljZVRvZ2dsZSgpIHsKICAgICAgICB0aGlzLmRpYWxvZ1Bvd2VyRGV2aWNlQ2hhbmdlLnNob3cgPSBmYWxzZQogICAgICAgIGNvbnN0IHJwYyA9ICh0aGlzLmRpYWxvZ1Bvd2VyRGV2aWNlQ2hhbmdlLnZhbHVlID09PSAnb2ZmJyA/ICdtYWNoaW5lLmRldmljZV9wb3dlci5vbicgOiAnbWFjaGluZS5kZXZpY2VfcG93ZXIub2ZmJykKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdChycGMseyBbdGhpcy5kaWFsb2dQb3dlckRldmljZUNoYW5nZS5kZXZpY2VdOiBudWxsIH0seyBhY3Rpb246ICdzZXJ2ZXIvcG93ZXIvcmVzcG9uc2VUb2dnbGUnIH0pCiAgICB9CgogICAgaG9zdFJlYm9vdCgpIHsKICAgICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2UKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnbWFjaGluZS5yZWJvb3QnLCB7IH0pCiAgICB9CgogICAgaG9zdFNodXRkb3duKCkgewogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnNodXRkb3duJywgeyB9KQogICAgfQp9Cg=="},{"version":3,"sources":["TheTopCornerMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"TheTopCornerMenu.vue","sourceRoot":"src/components","sourcesContent":["<style scoped>\n    .minheight30 {\n        min-height: 30px;\n    }\n</style>\n\n<template>\n    <div>\n        <v-menu bottom left :offset-y=\"true\" :close-on-content-click=\"false\" v-model=\"showMenu\">\n            <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn icon tile v-bind=\"attrs\" v-on=\"on\">\n                    <v-icon>mdi-power-standby</v-icon>\n                </v-btn>\n            </template>\n            <v-list dense>\n                <template v-if=\"klipperState !== 'disconnected'\">\n                    <v-subheader class=\"\" style=\"height: auto;\">{{ $t(\"App.TopCornerMenu.KlipperControl\") }}</v-subheader>\n                    <v-list-item class=\"minheight30 pr-2\" link @click=\"checkDialog(klipperRestart, 'klipper', 'restart')\">\n                        <v-list-item-title>{{ $t(\"App.TopCornerMenu.KlipperRestart\") }}</v-list-item-title>\n                        <v-list-item-action class=\"my-0 d-flex flex-row\" style=\"min-width: auto;\">\n                            <v-icon class=\"mr-2\" small>mdi-restart</v-icon>\n                        </v-list-item-action>\n                    </v-list-item>\n                    <v-list-item class=\"minheight30 pr-2\" link @click=\"checkDialog(klipperFirmwareRestart, 'klipper', 'firmwareRestart')\">\n                        <v-list-item-title>{{ $t(\"App.TopCornerMenu.KlipperFirmwareRestart\") }}</v-list-item-title>\n                        <v-list-item-action class=\"my-0 d-flex flex-row\" style=\"min-width: auto;\">\n                            <v-icon class=\"mr-2\" small>mdi-restart</v-icon>\n                        </v-list-item-action>\n                    </v-list-item>\n                </template>\n                <template v-if=\"services.length\">\n                    <v-divider class=\"mt-0\" v-if=\"klipperState !== 'disconnected'\"></v-divider>\n                    <v-subheader class=\"pt-2\" style=\"height: auto;\">{{ $t(\"App.TopCornerMenu.ServiceControl\") }}</v-subheader>\n                    <v-list-item class=\"minheight30 pr-2\" v-for=\"service in services\" v-bind:key=\"service\">\n                        <v-list-item-title>\n                            <v-tooltip left>\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <span v-bind=\"attrs\" v-on=\"on\">{{ service.charAt(0).toUpperCase() + service.slice(1) }}</span>\n                                </template>\n                                <span>{{ getServiceState(service) }} ({{ getServiceSubState(service) }})</span>\n                            </v-tooltip>\n                        </v-list-item-title>\n                        <v-list-item-action class=\"my-0 d-flex flex-row\" style=\"min-width: auto;\">\n                            <v-btn icon small v-if=\"getServiceState(service) === 'inactive'\" @click=\"checkDialog(serviceStart, service, 'start')\"><v-icon small>mdi-play</v-icon></v-btn>\n                            <v-btn icon small v-else @click=\"checkDialog(serviceRestart, service, 'restart')\"><v-icon small>mdi-restart</v-icon></v-btn>\n                            <v-btn icon small :disabled=\"getServiceState(service) === 'inactive' || service === 'moonraker'\" @click=\"checkDialog(serviceStop, service, 'stop')\" :style=\"service === 'moonraker' ? 'visibility: hidden;' : ''\"><v-icon small>mdi-stop</v-icon></v-btn>\n                        </v-list-item-action>\n                    </v-list-item>\n                </template>\n                <template v-if=\"powerDevices.length\">\n                    <v-divider class=\"mt-0\"></v-divider>\n                    <v-subheader class=\"pt-2\" style=\"height: auto;\">{{ $t(\"App.TopCornerMenu.PowerDevices\") }}</v-subheader>\n                    <v-list-item v-for=\"(device, index) in powerDevices\" v-bind:key=\"index\" class=\"minheight30 pr-2\" @click=\"changeSwitch(device, device.status)\" :disabled=\"(device.status === 'error' || device.locked_while_printing && ['printing', 'paused'].includes(printer_state))\">\n                        <v-list-item-title>{{ device.device }}</v-list-item-title>\n                        <v-list-item-action class=\"my-0 d-flex flex-row\" style=\"min-width: auto;\">\n                            <v-icon class=\"mr-2\" :color=\"device.status === 'on' ? '' : 'grey darken-2'\">mdi-{{ device.status === 'on' ? 'toggle-switch' : 'toggle-switch-off' }}</v-icon>\n                        </v-list-item-action>\n                    </v-list-item>\n                </template>\n                <v-divider class=\"mt-0\"></v-divider>\n                <v-subheader class=\"pt-2\" style=\"height: auto;\">{{ $t(\"App.TopCornerMenu.HostControl\") }}</v-subheader>\n                <v-list-item class=\"minheight30 pr-2\" link @click=\"checkDialog(hostReboot, 'host', 'reboot')\">\n                    <v-list-item-title>{{ $t(\"App.TopCornerMenu.Reboot\") }}</v-list-item-title>\n                    <v-list-item-action class=\"my-0 d-flex flex-row\" style=\"min-width: auto;\">\n                        <v-icon class=\"mr-2\" small>mdi-power</v-icon>\n                    </v-list-item-action>\n                </v-list-item>\n                <v-list-item class=\"minheight30 pr-2\" link @click=\"checkDialog(hostShutdown, 'host', 'shutdown')\">\n                    <v-list-item-title>{{ $t(\"App.TopCornerMenu.Shutdown\") }}</v-list-item-title>\n                    <v-list-item-action class=\"my-0 d-flex flex-row\" style=\"min-width: auto;\">\n                        <v-icon class=\"mr-2\" small>mdi-power</v-icon>\n                    </v-list-item-action>\n                </v-list-item>\n            </v-list>\n        </v-menu>\n        <v-dialog v-model=\"dialogPowerDeviceChange.show\" width=\"400\" :fullscreen=\"isMobile\">\n            <v-card>\n                <v-card-title class=\"headline\">{{ this.dialogPowerDeviceChange.value === 'off' ? $t('PowerDeviceChangeDialog.TurnDeviceOn', {'device': dialogPowerDeviceChange.device}) : $t('PowerDeviceChangeDialog.TurnDeviceOff', {'device': dialogPowerDeviceChange.device}) }}</v-card-title>\n                <v-card-text>{{ $t('PowerDeviceChangeDialog.AreYouSure') }}</v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"red darken-1\" text @click=\"dialogPowerDeviceChange.show = false\">{{ $t('PowerDeviceChangeDialog.No')}}</v-btn>\n                    <v-btn color=\"green darken-1\" text @click=\"powerDeviceToggle\">{{$t('PowerDeviceChangeDialog.Yes')}}</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n        <v-dialog v-model=\"dialogConfirmation.show\" width=\"400\" :fullscreen=\"isMobile\">\n            <panel card-class=\"confirm-top-corner-menu-dialog\" icon=\"mdi-alert\" :title=\"dialogConfirmation.title\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogConfirmation.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text class=\"pt-3\">\n                    <v-row>\n                        <v-col>\n                            <p class=\"body-2\">{{ dialogConfirmation.description }}</p>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn text @click=\"dialogConfirmation.show = false\">\n                        {{ $t('App.TopCornerMenu.Cancel') }}\n                    </v-btn>\n                    <v-btn text color=\"error\" @click=\"executeDialog\">\n                        {{ dialogConfirmation.actionButtonText }}\n                    </v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n    </div>\n</template>\n\n<script lang=\"ts\">\n\nimport Component from 'vue-class-component'\nimport { Mixins } from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {ServerPowerStateDevice} from '@/store/server/power/types'\nimport Panel from '@/components/ui/Panel.vue'\n\ninterface dialogPowerDeviceChange {\n    show: boolean\n    device: string\n    value: string\n}\n\ninterface dialogConfirmation {\n    show: boolean\n    serviceName: string | null\n    executableFunction: any | null\n    title: string\n    description: string\n    actionButtonText: string\n}\n\n@Component({\n    components: {Panel}\n})\nexport default class TheTopCornerMenu extends Mixins(BaseMixin) {\n\n    showMenu = false\n    dialogPowerDeviceChange : dialogPowerDeviceChange = {\n        show: false,\n        device: '',\n        value: ''\n    }\n\n    dialogConfirmation: dialogConfirmation = {\n        show: false,\n        serviceName: null,\n        executableFunction: null,\n        title: '',\n        description: '',\n        actionButtonText: ''\n    }\n\n    get services() {\n        const services = this.$store.state.server.system_info?.available_services?.filter((name: string) => name !== 'klipper_mcu') ?? []\n        services.sort()\n        return services\n    }\n\n    get powerDevices() {\n        return this.$store.getters['server/power/getDevices']\n    }\n\n    get service_states() {\n        return this.$store.state.server.system_info?.service_state ?? {}\n    }\n\n    getServiceState(name: string) {\n        if (name in this.service_states) return this.service_states[name].active_state\n\n        return null\n    }\n\n    getServiceSubState(name: string) {\n        if (name in this.service_states) return this.service_states[name].sub_state\n\n        return null\n    }\n\n    checkDialog(executableFunction: any, serviceName: string, action: string) {\n        if (this.printerIsPrinting) {\n            this.dialogConfirmation.executableFunction = executableFunction\n            this.dialogConfirmation.serviceName = serviceName\n\n            const actionUppercase = action.trim().charAt(0).toUpperCase() + action.trim().slice(1)\n            let titleKey = 'App.TopCornerMenu.ConfirmationDialog.Title.Service' + actionUppercase\n            let descriptionKey = 'App.TopCornerMenu.ConfirmationDialog.Description.Service' + actionUppercase\n            let buttonKey = 'App.TopCornerMenu.' + actionUppercase\n\n            if (serviceName === 'klipper' && ['stop', 'restart', 'firmwareRestart'].includes(action)){\n                titleKey = 'App.TopCornerMenu.ConfirmationDialog.Title.' + (action !== 'stop' ? 'Klipper' : 'Service') + actionUppercase\n                descriptionKey = 'App.TopCornerMenu.ConfirmationDialog.Description.Klipper' + actionUppercase\n\n                if (action === 'firmwareRestart') buttonKey = 'App.TopCornerMenu.KlipperFirmwareRestart'\n            } else if (serviceName === 'host') {\n                titleKey = 'App.TopCornerMenu.ConfirmationDialog.Title.Host' + actionUppercase\n                descriptionKey = 'App.TopCornerMenu.ConfirmationDialog.Description.Host' + actionUppercase\n            }\n\n            this.dialogConfirmation.title = this.$t(titleKey).toString()\n            this.dialogConfirmation.description = this.$t(descriptionKey).toString()\n            this.dialogConfirmation.actionButtonText = this.$t(buttonKey).toString()\n            this.dialogConfirmation.show = true\n        } else executableFunction(serviceName)\n    }\n\n    executeDialog() {\n        this.dialogConfirmation.executableFunction(this.dialogConfirmation.serviceName)\n        this.dialogConfirmation.show = false\n    }\n\n    klipperRestart() {\n        this.showMenu = false\n        this.$store.dispatch('server/addEvent', { message: 'RESTART', type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'RESTART' })\n    }\n\n    klipperFirmwareRestart() {\n        this.showMenu = false\n        this.$store.dispatch('server/addEvent', { message: 'FIRMWARE_RESTART', type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'FIRMWARE_RESTART' })\n    }\n\n    serviceStart(service: string) {\n        this.showMenu = false\n        this.$socket.emit('machine.services.start', { service: service })\n    }\n\n    serviceRestart(service: string) {\n        this.showMenu = false\n        this.$socket.emit('machine.services.restart', { service: service })\n    }\n\n    serviceStop(service: string) {\n        this.showMenu = false\n        this.$socket.emit('machine.services.stop', { service: service })\n    }\n\n    changeSwitch(device: ServerPowerStateDevice, value: string) {\n        this.dialogPowerDeviceChange.device = device.device\n        this.dialogPowerDeviceChange.value = value\n\n        const confirmOnPowerDeviceChange = this.$store.state.gui.uiSettings.confirmOnPowerDeviceChange\n        if (confirmOnPowerDeviceChange) {\n            this.dialogPowerDeviceChange.show = true\n        } else {\n            this.powerDeviceToggle()\n        }\n    }\n\n    powerDeviceToggle() {\n        this.dialogPowerDeviceChange.show = false\n        const rpc = (this.dialogPowerDeviceChange.value === 'off' ? 'machine.device_power.on' : 'machine.device_power.off')\n        this.$socket.emit(rpc,{ [this.dialogPowerDeviceChange.device]: null },{ action: 'server/power/responseToggle' })\n    }\n\n    hostReboot() {\n        this.showMenu = false\n        this.$socket.emit('machine.reboot', { })\n    }\n\n    hostShutdown() {\n        this.showMenu = false\n        this.$socket.emit('machine.shutdown', { })\n    }\n}\n</script>"]}]}