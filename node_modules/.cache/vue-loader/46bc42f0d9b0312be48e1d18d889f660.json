{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/settings/SettingsGeneralTab.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/settings/SettingsGeneralTab.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IENvbXBvbmVudCBmcm9tICd2dWUtY2xhc3MtY29tcG9uZW50JwppbXBvcnQgeyBNaXhpbnMgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZU1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvYmFzZScKaW1wb3J0IFNldHRpbmdzUm93IGZyb20gJ0AvY29tcG9uZW50cy9zZXR0aW5ncy9TZXR0aW5nc1Jvdy52dWUnCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKCkBDb21wb25lbnQoewogICAgY29tcG9uZW50czoge1BhbmVsLCBTZXR0aW5nc1Jvd30KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ3NHZW5lcmFsVGFiIGV4dGVuZHMgTWl4aW5zKEJhc2VNaXhpbikgewogICAgcHJpdmF0ZSBkaWFsb2dCYWNrdXBNYWluc2FpbCA9IGZhbHNlCiAgICBwcml2YXRlIGRpYWxvZ1Jlc2V0TWFpbnNhaWwgPSBmYWxzZQogICAgcHJpdmF0ZSBkaWFsb2dSZXN0b3JlTWFpbnNhaWwgPSBmYWxzZQoKICAgIHByaXZhdGUgZGJDaGVja2JveGVzOiBzdHJpbmdbXSA9IFtdCgogICAgcHJpdmF0ZSByZXN0b3JlYWJsZU5hbWVzcGFjZXM6IHsgbmFtZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nfVtdID0gW10KICAgIHByaXZhdGUgcmVzdG9yZU9iamVjdHM6IGFueSA9IHt9CgogICAgcHJpdmF0ZSBtYWluc2FpbEtleXM6IHsgbmFtZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nfVtdID0gW10KICAgIHByaXZhdGUgYXZhaWxhYmxlTmFtZXNwYWNlczogc3RyaW5nW10gPSBbXQoKICAgICRyZWZzITogewogICAgICAgIHVwbG9hZEJhY2t1cEZpbGU6IEhUTUxJbnB1dEVsZW1lbnQKICAgIH0KCiAgICBnZXQgYXZhaWxhYmxlS2V5cygpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiAnZ2VuZXJhbCcsCiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnU2V0dGluZ3MuR2VuZXJhbFRhYi5HZW5lcmFsJykrJycKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbmFtZTogJ2NvbnNvbGUnLAogICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ1NldHRpbmdzLkNvbnNvbGVUYWIuQ29uc29sZScpKycnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG5hbWU6ICdjb250cm9sJywKICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdTZXR0aW5ncy5Db250cm9sVGFiLkNvbnRyb2wnKSsnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnZGFzaGJvYXJkJywKICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdTZXR0aW5ncy5EYXNoYm9hcmRUYWIuRGFzaGJvYXJkJykrJycKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbmFtZTogJ2VkaXRvcicsCiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnU2V0dGluZ3MuRWRpdG9yVGFiLkVkaXRvcicpKycnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG5hbWU6ICdnY29kZXZpZXdlcicsCiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnU2V0dGluZ3MuR0NvZGVWaWV3ZXJUYWIuR0NvZGVWaWV3ZXInKSsnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnZ2NvZGVoaXN0b3J5JywKICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdTZXR0aW5ncy5HZW5lcmFsVGFiLkRiQ29uc29sZUhpc3RvcnknKSsnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnbWFjcm9zJywKICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdTZXR0aW5ncy5NYWNyb3NUYWIuTWFjcm9zJykrJycKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbmFtZTogJ3ByZXNldHMnLAogICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ1NldHRpbmdzLlByZXNldHNUYWIuUHJlaGVhdFByZXNldHMnKSsnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAncmVtb3RlcHJpbnRlcnMnLAogICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ1NldHRpbmdzLlJlbW90ZVByaW50ZXJzVGFiLlJlbW90ZVByaW50ZXJzJykrJycKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbmFtZTogJ3RpbWVsYXBzZScsCiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnU2V0dGluZ3MuVGltZWxhcHNlVGFiLlRpbWVsYXBzZScpKycnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG5hbWU6ICd1aVNldHRpbmdzJywKICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdTZXR0aW5ncy5VaVNldHRpbmdzVGFiLlVpU2V0dGluZ3MnKSsnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAndmlldycsCiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnU2V0dGluZ3MuR2VuZXJhbFRhYi5EYlZpZXcnKSsnJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnd2ViY2FtcycsCiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnU2V0dGluZ3MuV2ViY2Ftc1RhYi5XZWJjYW1zJykrJycKICAgICAgICAgICAgfQogICAgICAgIF0KICAgIH0KCiAgICBnZXQgcHJpbnRlck5hbWUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5nZW5lcmFsLnByaW50ZXJuYW1lCiAgICB9CgogICAgc2V0IHByaW50ZXJOYW1lKG5ld1ZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7bmFtZTogJ2dlbmVyYWwucHJpbnRlcm5hbWUnLCB2YWx1ZTogbmV3VmFsfSkKICAgIH0KCiAgICBnZXQgY3VycmVudExhbmd1YWdlKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2VuZXJhbC5sYW5ndWFnZQogICAgfQoKICAgIHNldCBjdXJyZW50TGFuZ3VhZ2UobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHtuYW1lOiAnZ2VuZXJhbC5sYW5ndWFnZScsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgYXZhaWxhYmxlTGFuZ3VhZ2VzKCkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogICAgICAgIGNvbnN0IGxvY2FsZXMgPSByZXF1aXJlLmNvbnRleHQoJ0AvbG9jYWxlcycsIHRydWUsIC9bQS1aYS16MC05LV8sXHNdK1wuanNvbiQvaSkKICAgICAgICBjb25zdCBsYW5ndWFnZXM6IGFueSA9IFtdCgogICAgICAgIGxvY2FsZXMua2V5cygpLm1hcCgoa2V5OiBzdHJpbmcpID0+IHsKICAgICAgICAgICAgY29uc3QgbGFuZ0tleSA9IGtleS5zbGljZSgyLCBrZXkubGFzdEluZGV4T2YoJy4nKSkKCiAgICAgICAgICAgIGxhbmd1YWdlcy5wdXNoKHsKICAgICAgICAgICAgICAgIHRleHQ6IGxvY2FsZXMoa2V5KS50aXRsZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBsYW5nS2V5CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIGxhbmd1YWdlcwogICAgfQoKICAgIGdldCBjYWxjRXN0aW1hdGVJdGVtcygpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICB7IHZhbHVlOiAnZmlsZScsIHRleHQ6ICdGaWxlJyB9LAogICAgICAgICAgICB7IHZhbHVlOiAnZmlsYW1lbnQnLCB0ZXh0OiAnRmlsYW1lbnQnIH0sCiAgICAgICAgXQogICAgfQoKICAgIGdldCBjYWxjRXN0aW1hdGVUaW1lKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2VuZXJhbC5jYWxjRXN0aW1hdGVUaW1lCiAgICB9CgogICAgc2V0IGNhbGNFc3RpbWF0ZVRpbWUobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHtuYW1lOiAnZ2VuZXJhbC5jYWxjRXN0aW1hdGVUaW1lJywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBjYWxjRXRhVGltZUl0ZW1zKCkgewogICAgICAgIHJldHVybiBbCiAgICAgICAgICAgIHsgdmFsdWU6ICdmaWxlJywgdGV4dDogJ0ZpbGUnIH0sCiAgICAgICAgICAgIHsgdmFsdWU6ICdmaWxhbWVudCcsIHRleHQ6ICdGaWxhbWVudCcgfSwKICAgICAgICAgICAgeyB2YWx1ZTogJ3NsaWNlcicsIHRleHQ6ICdTbGljZXInIH0sCiAgICAgICAgXQogICAgfQoKICAgIGdldCBjYWxjRXRhVGltZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdlbmVyYWwuY2FsY0V0YVRpbWUKICAgIH0KCiAgICBzZXQgY2FsY0V0YVRpbWUobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHtuYW1lOiAnZ2VuZXJhbC5jYWxjRXRhVGltZScsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgbW9vbnJha2VyRGJOYW1lc3BhY2VzKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXJ2ZXIuZGJOYW1lc3BhY2VzID8/IFtdCiAgICB9CgogICAgZ2V0IG1vb25yYWtlckNvbXBvbmVudHMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlci5jb21wb25lbnRzID8/IFtdCiAgICB9CgogICAgYXN5bmMgcmVmcmVzaE5hbWVzcGFjZXMoKSB7CiAgICAgICAgdGhpcy5hdmFpbGFibGVOYW1lc3BhY2VzID0gW10KCiAgICAgICAgY29uc3QgdXJsID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snc29ja2V0L2dldFVybCddICsgJy9zZXJ2ZXIvZGF0YWJhc2UvbGlzdCcKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCkKICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICB0aGlzLmF2YWlsYWJsZU5hbWVzcGFjZXMgPSBbLi4ub2JqZWN0cy5yZXN1bHQ/Lm5hbWVzcGFjZXNdID8/IFtdCiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIHJlZnJlc2hNYWluc2FpbEtleXMoKSB7CiAgICAgICAgdGhpcy5tYWluc2FpbEtleXMgPSBbXQoKICAgICAgICBjb25zdCB1cmwgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydzb2NrZXQvZ2V0VXJsJ10gKyAnL3NlcnZlci9kYXRhYmFzZS9pdGVtP25hbWVzcGFjZT1tYWluc2FpbCcKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCkKICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICBpZiAob2JqZWN0cz8ucmVzdWx0Py52YWx1ZSkgewogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob2JqZWN0cz8ucmVzdWx0Py52YWx1ZSkuZm9yRWFjaCgodG1wOiBzdHJpbmcpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodG1wICE9PSAnaW5pdFZlcnNpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IHRoaXMuYXZhaWxhYmxlS2V5cy5maW5kKChuYW1lc3BhY2UpID0+IG5hbWVzcGFjZS5uYW1lID09PSB0bXApCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRtcE5hbWVzcGFjZSA9IG5hbWVzcGFjZSA/IG5hbWVzcGFjZSA6IHsgbmFtZTogdG1wLCBsYWJlbDogdG1wIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluc2FpbEtleXMucHVzaCh0bXBOYW1lc3BhY2UpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICB0aGlzLm1haW5zYWlsS2V5cyA9IHRoaXMubWFpbnNhaWxLZXlzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lID09PSAnZ2VuZXJhbCcpIHJldHVybiAtMQogICAgICAgICAgICAgICAgICAgIGlmIChiLm5hbWUgPT09ICdnZW5lcmFsJykgcmV0dXJuIDEKCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nQSA9IGEubGFiZWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nQiA9IGIubGFiZWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpCgogICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmdBIDwgc3RyaW5nQikgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ0EgPiBzdHJpbmdCKSByZXR1cm4gMQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBjaGFuZ2VOYW1lc3BhY2UobmFtZTogc3RyaW5nKSB7CiAgICAgICAgaWYgKHRoaXMuZGJDaGVja2JveGVzLmluY2x1ZGVzKG5hbWUpKSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kYkNoZWNrYm94ZXMuaW5kZXhPZihuYW1lKQogICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgdGhpcy5kYkNoZWNrYm94ZXMuc3BsaWNlKGluZGV4LCAxKQogICAgICAgIH0gZWxzZSB0aGlzLmRiQ2hlY2tib3hlcy5wdXNoKG5hbWUpCiAgICB9CgogICAgYXN5bmMgcmVzZXRNYWluc2FpbCgpIHsKICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hOYW1lc3BhY2VzKCkKICAgICAgICBpZiAodGhpcy5hdmFpbGFibGVOYW1lc3BhY2VzLmluY2x1ZGVzKCdtYWluc2FpbCcpKSBhd2FpdCB0aGlzLnJlZnJlc2hNYWluc2FpbEtleXMoKQogICAgICAgIGVsc2UgdGhpcy5tYWluc2FpbEtleXMgPSBbXQoKICAgICAgICB0aGlzLmRiQ2hlY2tib3hlcyA9IFtdCiAgICAgICAgdGhpcy5kaWFsb2dSZXNldE1haW5zYWlsID0gdHJ1ZQogICAgfQoKICAgIGFzeW5jIHJlc2V0TWFpbnNhaWxBY3Rpb24oKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9hZGRMb2FkaW5nJywgJ3Jlc2V0TWFpbnNhaWwnKQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvcmVzZXRNb29ucmFrZXJEQicsIHRoaXMuZGJDaGVja2JveGVzKQogICAgfQoKICAgIGFzeW5jIGJhY2t1cERiKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvYWRkTG9hZGluZycsICdiYWNrdXBEYkJ1dHRvbicpCiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoTmFtZXNwYWNlcygpCiAgICAgICAgaWYgKHRoaXMuYXZhaWxhYmxlTmFtZXNwYWNlcy5pbmNsdWRlcygnbWFpbnNhaWwnKSkgYXdhaXQgdGhpcy5yZWZyZXNoTWFpbnNhaWxLZXlzKCkKICAgICAgICBlbHNlIHRoaXMubWFpbnNhaWxLZXlzID0gW10KCiAgICAgICAgdGhpcy5kYkNoZWNrYm94ZXMgPSBbXQogICAgICAgIHRoaXMuZGlhbG9nQmFja3VwTWFpbnNhaWwgPSB0cnVlCiAgICB9CgogICAgYXN5bmMgYmFja3VwTWFpbnNhaWwoKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9hZGRMb2FkaW5nJywgJ2JhY2t1cE1haW5zYWlsJykKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL2JhY2t1cE1vb25yYWtlckRCJywgdGhpcy5kYkNoZWNrYm94ZXMpCiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9yZW1vdmVMb2FkaW5nJywgJ2JhY2t1cE1haW5zYWlsJykKICAgICAgICB0aGlzLmRpYWxvZ0JhY2t1cE1haW5zYWlsID0gZmFsc2UKICAgIH0KCiAgICBhc3luYyByZXN0b3JlRGIoKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9hZGRMb2FkaW5nJywgJ3Jlc3RvcmVVcGxvYWRCdXR0b24nKQogICAgICAgIHRoaXMuJHJlZnM/LnVwbG9hZEJhY2t1cEZpbGU/LmNsaWNrKCkKICAgIH0KCiAgICB1cGxvYWRSZXN0b3JlKCkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLnVwbG9hZEJhY2t1cEZpbGUuZmlsZXM/Lmxlbmd0aCkgewogICAgICAgICAgICBjb25zdCBiYWNrdXAgPSB0aGlzLiRyZWZzLnVwbG9hZEJhY2t1cEZpbGUuZmlsZXNbMF0KICAgICAgICAgICAgaWYgKGJhY2t1cCkgewogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoYmFja3VwLCAnVVRGLTgnKQogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChldnQpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVhYmxlTmFtZXNwYWNlcyA9IFtdCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlT2JqZWN0cyA9IEpTT04ucGFyc2UoZXZ0Py50YXJnZXQ/LnJlc3VsdCsnJykKCiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMucmVzdG9yZU9iamVjdHMpLmZvckVhY2goKHRtcDogc3RyaW5nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSB0aGlzLmF2YWlsYWJsZUtleXMuZmluZCgobmFtZXNwYWNlKSA9PiBuYW1lc3BhY2UubmFtZSA9PT0gdG1wKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG1wTmFtZXNwYWNlID0gbmFtZXNwYWNlID8gbmFtZXNwYWNlIDogeyBuYW1lOiB0bXAsIGxhYmVsOiB0bXAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZWFibGVOYW1lc3BhY2VzLnB1c2godG1wTmFtZXNwYWNlKQogICAgICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlYWJsZU5hbWVzcGFjZXMgPSB0aGlzLnJlc3RvcmVhYmxlTmFtZXNwYWNlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lID09PSAnZ2VuZXJhbCcpIHJldHVybiAtMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIubmFtZSA9PT0gJ2dlbmVyYWwnKSByZXR1cm4gMQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ0EgPSBhLmxhYmVsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nQiA9IGIubGFiZWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ0EgPCBzdHJpbmdCKSByZXR1cm4gLTEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmdBID4gc3RyaW5nQikgcmV0dXJuIDEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYkNoZWNrYm94ZXMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Jlc3RvcmVNYWluc2FpbCA9IHRydWUKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS4kdG9hc3QuZXJyb3IodGhpcy4kdCgnU2V0dGluZ3MuR2VuZXJhbFRhYi5DYW5ub3RSZWFkSnNvbicpKycnKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gKGV2dCkgPT4gewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKGV2dCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWRCYWNrdXBGaWxlLnZhbHVlID0gJycKICAgICAgICB9CiAgICB9CgogICAgYXN5bmMgcmVzdG9yZURiQWN0aW9uICgpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc29ja2V0L2FkZExvYWRpbmcnLCAncmVzdG9yZURiQWN0aW9uJykKCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9yZXN0b3JlTW9vbnJha2VyREInLCB7CiAgICAgICAgICAgIGRiQ2hlY2tib3hlczogdGhpcy5kYkNoZWNrYm94ZXMsCiAgICAgICAgICAgIHJlc3RvcmVPYmplY3RzOiB0aGlzLnJlc3RvcmVPYmplY3RzCiAgICAgICAgfSkKICAgIH0KfQo="},{"version":3,"sources":["SettingsGeneralTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SettingsGeneralTab.vue","sourceRoot":"src/components/settings","sourcesContent":["<template>\n    <div>\n        <v-card flat>\n            <v-card-text>\n                <settings-row :title=\"$t('Settings.GeneralTab.PrinterName')\">\n                    <v-text-field v-model=\"printerName\" hide-details outlined dense ></v-text-field>\n                </settings-row>\n                <v-divider class=\"my-2\"></v-divider>\n                <settings-row :title=\"$t('Settings.GeneralTab.Language')\">\n                    <v-select v-model=\"currentLanguage\" :items=\"availableLanguages\" hide-details outlined dense attach></v-select>\n                </settings-row>\n                <v-divider class=\"my-2\"></v-divider>\n                <settings-row :title=\"$t('Settings.GeneralTab.CalcEstimateTime')\" :sub-title=\"$t('Settings.GeneralTab.CalcEstimateTimeDescription')\">\n                    <v-select v-model=\"calcEstimateTime\" :items=\"calcEstimateItems\" multiple hide-details dense outlined attach></v-select>\n                </settings-row>\n                <v-divider class=\"my-2\"></v-divider>\n                <settings-row :title=\"$t('Settings.GeneralTab.CalcEtaTime')\" :sub-title=\"$t('Settings.GeneralTab.CalcEtaTimeDescription')\">\n                    <v-select v-model=\"calcEtaTime\" :items=\"calcEtaTimeItems\" multiple hide-details dense outlined attach></v-select>\n                </settings-row>\n                <v-divider class=\"my-2\"></v-divider>\n                <settings-row :title=\"$t('Settings.GeneralTab.MoonrakerDb')\" :dynamicSlotWidth=\"true\">\n                    <input type=\"file\" :accept=\"['.json']\" ref=\"uploadBackupFile\" class=\"d-none\" @change=\"uploadRestore\" />\n                    <v-btn @click=\"backupDb\" :loading=\"loadings.includes('backupDbButton')\" small>{{ $t('Settings.GeneralTab.Backup') }}</v-btn>\n                    <v-btn @click=\"restoreDb\" small :loading=\"loadings.includes('restoreUploadButton')\" class=\"ml-3\">{{ $t('Settings.GeneralTab.Restore') }}</v-btn>\n                </settings-row>\n                <v-divider class=\"my-2\"></v-divider>\n                <settings-row :title=\"$t('Settings.GeneralTab.FactoryReset')\" :dynamicSlotWidth=\"true\">\n                    <v-btn @click=\"resetMainsail\" color=\"error\" small>{{ $t('Settings.GeneralTab.FactoryReset') }}</v-btn>\n                </settings-row>\n            </v-card-text>\n        </v-card>\n        <v-dialog v-model=\"dialogBackupMainsail\" persistent :width=\"360\">\n            <panel :title=\"$t('Settings.GeneralTab.Backup')\" card-class=\"mainsail-backup-dialog\" :margin-bottom=\"false\" icon=\"mdi-help-circle\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogBackupMainsail = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-row>\n                        <v-col>\n                            <p class=\"mb-0\">{{ $t('Settings.GeneralTab.BackupDialog') }}</p>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"pl-6\">\n                            <template v-for=\"db in mainsailKeys\">\n                                <v-checkbox\n                                    :label=\"db.label\"\n                                    hide-details\n                                    class=\"mt-0\"\n                                    :key=\"db.name\"\n                                    @change=\"changeNamespace(db.name)\"\n                                ></v-checkbox>\n                            </template>\n                            <v-checkbox\n                                :label=\"$t('Settings.GeneralTab.DbTimelapseSettings')\"\n                                v-if=\"availableNamespaces.includes('timelapse')\"\n                                hide-details\n                                class=\"mt-0\"\n                                @change=\"changeNamespace('timelapse')\"\n                            ></v-checkbox>\n                            <v-checkbox\n                                :label=\"$t('Settings.GeneralTab.DbWebcams')\"\n                                v-if=\"availableNamespaces.includes('webcams')\"\n                                hide-details\n                                class=\"mt-0\"\n                                @change=\"changeNamespace('webcams')\"\n                            ></v-checkbox>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"text-center\">\n                            <v-btn\n                                color=\"red\"\n                                @click=\"backupMainsail\"\n                                :loading=\"loadings.includes('backupMainsail')\"\n                            >\n                                {{ $t('Settings.GeneralTab.Backup') }}\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogResetMainsail\" persistent :width=\"360\">\n            <panel :title=\"$t('Settings.GeneralTab.FactoryReset')\" card-class=\"factory-reset-dialog\" :margin-bottom=\"false\" icon=\"mdi-help-circle\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogResetMainsail = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-row>\n                        <v-col>\n                            <p class=\"mb-0\">{{ $t('Settings.GeneralTab.FactoryDialog') }}</p>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"pl-6\">\n                            <template v-for=\"db in mainsailKeys\">\n                                <v-checkbox\n                                    :label=\"db.label\"\n                                    hide-details\n                                    class=\"mt-0\"\n                                    :key=\"db.name\"\n                                    @change=\"changeNamespace(db.name)\"\n                                ></v-checkbox>\n                            </template>\n                            <v-checkbox\n                                :label=\"$t('Settings.GeneralTab.DbTimelapseSettings')\"\n                                v-if=\"availableNamespaces.includes('timelapse')\"\n                                hide-details\n                                class=\"mt-0\"\n                                @change=\"changeNamespace('timelapse')\"\n                            ></v-checkbox>\n                            <v-checkbox\n                                :label=\"$t('Settings.GeneralTab.DbWebcams')\"\n                                v-if=\"availableNamespaces.includes('webcams')\"\n                                hide-details\n                                class=\"mt-0\"\n                                @change=\"changeNamespace('webcams')\"\n                            ></v-checkbox>\n                            <v-checkbox\n                                :label=\"$t('Settings.GeneralTab.DbHistoryJobs')\"\n                                v-if=\"moonrakerComponents.includes('history')\"\n                                hide-details\n                                class=\"mt-0\"\n                                @change=\"changeNamespace('history_jobs')\"\n                            ></v-checkbox>\n                            <v-checkbox\n                                :label=\"$t('Settings.GeneralTab.DbHistoryTotals')\"\n                                v-if=\"moonrakerComponents.includes('history')\"\n                                hide-details\n                                class=\"mt-0\"\n                                @change=\"changeNamespace('history_totals')\"\n                            ></v-checkbox>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"text-center\">\n                            <v-btn\n                                color=\"red\"\n                                @click=\"resetMainsailAction\"\n                                :loading=\"loadings.includes('resetMainsail')\"\n                            >\n                                {{ $t('Settings.GeneralTab.Reset') }}\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogRestoreMainsail\" persistent :width=\"360\">\n            <panel :title=\"$t('Settings.GeneralTab.Restore')\" card-class=\"factory-reset-dialog\" :margin-bottom=\"false\" icon=\"mdi-help-circle\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogRestoreMainsail = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-row>\n                        <v-col>\n                            <p class=\"mb-0\">{{ $t('Settings.GeneralTab.RestoreDialog') }}</p>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"pl-6\">\n                            <template v-for=\"db in restoreableNamespaces\">\n                                <v-checkbox\n                                    :label=\"db.label\"\n                                    hide-details\n                                    class=\"mt-0\"\n                                    :key=\"db.name\"\n                                    @change=\"changeNamespace(db.name)\"\n                                ></v-checkbox>\n                            </template>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"text-center\">\n                            <v-btn\n                                color=\"red\"\n                                @click=\"restoreDbAction\"\n                                :loading=\"loadings.includes('restoreMainsail')\"\n                            >\n                                {{ $t('Settings.GeneralTab.Restore') }}\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n            </panel>\n        </v-dialog>\n    </div>\n</template>\n\n<script lang=\"ts\">\n\nimport Component from 'vue-class-component'\nimport { Mixins } from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport SettingsRow from '@/components/settings/SettingsRow.vue'\nimport Panel from '@/components/ui/Panel.vue'\nimport Vue from 'vue'\n\n@Component({\n    components: {Panel, SettingsRow}\n})\nexport default class SettingsGeneralTab extends Mixins(BaseMixin) {\n    private dialogBackupMainsail = false\n    private dialogResetMainsail = false\n    private dialogRestoreMainsail = false\n\n    private dbCheckboxes: string[] = []\n\n    private restoreableNamespaces: { name: string, label: string}[] = []\n    private restoreObjects: any = {}\n\n    private mainsailKeys: { name: string, label: string}[] = []\n    private availableNamespaces: string[] = []\n\n    $refs!: {\n        uploadBackupFile: HTMLInputElement\n    }\n\n    get availableKeys() {\n        return [\n            {\n                name: 'general',\n                label: this.$t('Settings.GeneralTab.General')+''\n            }, {\n                name: 'console',\n                label: this.$t('Settings.ConsoleTab.Console')+''\n            }, {\n                name: 'control',\n                label: this.$t('Settings.ControlTab.Control')+''\n            }, {\n                name: 'dashboard',\n                label: this.$t('Settings.DashboardTab.Dashboard')+''\n            }, {\n                name: 'editor',\n                label: this.$t('Settings.EditorTab.Editor')+''\n            }, {\n                name: 'gcodeviewer',\n                label: this.$t('Settings.GCodeViewerTab.GCodeViewer')+''\n            }, {\n                name: 'gcodehistory',\n                label: this.$t('Settings.GeneralTab.DbConsoleHistory')+''\n            }, {\n                name: 'macros',\n                label: this.$t('Settings.MacrosTab.Macros')+''\n            }, {\n                name: 'presets',\n                label: this.$t('Settings.PresetsTab.PreheatPresets')+''\n            }, {\n                name: 'remoteprinters',\n                label: this.$t('Settings.RemotePrintersTab.RemotePrinters')+''\n            }, {\n                name: 'timelapse',\n                label: this.$t('Settings.TimelapseTab.Timelapse')+''\n            }, {\n                name: 'uiSettings',\n                label: this.$t('Settings.UiSettingsTab.UiSettings')+''\n            }, {\n                name: 'view',\n                label: this.$t('Settings.GeneralTab.DbView')+''\n            }, {\n                name: 'webcams',\n                label: this.$t('Settings.WebcamsTab.Webcams')+''\n            }\n        ]\n    }\n\n    get printerName() {\n        return this.$store.state.gui.general.printername\n    }\n\n    set printerName(newVal) {\n        this.$store.dispatch('gui/saveSetting', {name: 'general.printername', value: newVal})\n    }\n\n    get currentLanguage() {\n        return this.$store.state.gui.general.language\n    }\n\n    set currentLanguage(newVal) {\n        this.$store.dispatch('gui/saveSetting', {name: 'general.language', value: newVal })\n    }\n\n    get availableLanguages() {\n        // eslint-disable-next-line no-undef\n        const locales = require.context('@/locales', true, /[A-Za-z0-9-_,\\s]+\\.json$/i)\n        const languages: any = []\n\n        locales.keys().map((key: string) => {\n            const langKey = key.slice(2, key.lastIndexOf('.'))\n\n            languages.push({\n                text: locales(key).title,\n                value: langKey\n            })\n        })\n\n        return languages\n    }\n\n    get calcEstimateItems() {\n        return [\n            { value: 'file', text: 'File' },\n            { value: 'filament', text: 'Filament' },\n        ]\n    }\n\n    get calcEstimateTime() {\n        return this.$store.state.gui.general.calcEstimateTime\n    }\n\n    set calcEstimateTime(newVal) {\n        this.$store.dispatch('gui/saveSetting', {name: 'general.calcEstimateTime', value: newVal })\n    }\n\n    get calcEtaTimeItems() {\n        return [\n            { value: 'file', text: 'File' },\n            { value: 'filament', text: 'Filament' },\n            { value: 'slicer', text: 'Slicer' },\n        ]\n    }\n\n    get calcEtaTime() {\n        return this.$store.state.gui.general.calcEtaTime\n    }\n\n    set calcEtaTime(newVal) {\n        this.$store.dispatch('gui/saveSetting', {name: 'general.calcEtaTime', value: newVal })\n    }\n\n    get moonrakerDbNamespaces() {\n        return this.$store.state.server.dbNamespaces ?? []\n    }\n\n    get moonrakerComponents() {\n        return this.$store.state.server.components ?? []\n    }\n\n    async refreshNamespaces() {\n        this.availableNamespaces = []\n\n        const url = this.$store.getters['socket/getUrl'] + '/server/database/list'\n        const response = await fetch(url)\n        if (response) {\n            const objects = await response.json()\n            this.availableNamespaces = [...objects.result?.namespaces] ?? []\n        }\n    }\n\n    async refreshMainsailKeys() {\n        this.mainsailKeys = []\n\n        const url = this.$store.getters['socket/getUrl'] + '/server/database/item?namespace=mainsail'\n        const response = await fetch(url)\n        if (response) {\n            const objects = await response.json()\n            if (objects?.result?.value) {\n                Object.keys(objects?.result?.value).forEach((tmp: string) => {\n                    if (tmp !== 'initVersion') {\n                        const namespace = this.availableKeys.find((namespace) => namespace.name === tmp)\n                        const tmpNamespace = namespace ? namespace : { name: tmp, label: tmp }\n                        this.mainsailKeys.push(tmpNamespace)\n                    }\n                })\n\n                this.mainsailKeys = this.mainsailKeys.sort((a, b) => {\n                    if (a.name === 'general') return -1\n                    if (b.name === 'general') return 1\n\n                    const stringA = a.label.toString().toLowerCase()\n                    const stringB = b.label.toString().toLowerCase()\n\n                    if (stringA < stringB) return -1\n                    if (stringA > stringB) return 1\n\n                    return 0\n                })\n            }\n        }\n    }\n\n    changeNamespace(name: string) {\n        if (this.dbCheckboxes.includes(name)) {\n            const index = this.dbCheckboxes.indexOf(name)\n            if (index >= 0) this.dbCheckboxes.splice(index, 1)\n        } else this.dbCheckboxes.push(name)\n    }\n\n    async resetMainsail() {\n        await this.refreshNamespaces()\n        if (this.availableNamespaces.includes('mainsail')) await this.refreshMainsailKeys()\n        else this.mainsailKeys = []\n\n        this.dbCheckboxes = []\n        this.dialogResetMainsail = true\n    }\n\n    async resetMainsailAction() {\n        await this.$store.dispatch('socket/addLoading', 'resetMainsail')\n        await this.$store.dispatch('gui/resetMoonrakerDB', this.dbCheckboxes)\n    }\n\n    async backupDb() {\n        this.$store.dispatch('socket/addLoading', 'backupDbButton')\n        await this.refreshNamespaces()\n        if (this.availableNamespaces.includes('mainsail')) await this.refreshMainsailKeys()\n        else this.mainsailKeys = []\n\n        this.dbCheckboxes = []\n        this.dialogBackupMainsail = true\n    }\n\n    async backupMainsail() {\n        await this.$store.dispatch('socket/addLoading', 'backupMainsail')\n        await this.$store.dispatch('gui/backupMoonrakerDB', this.dbCheckboxes)\n        await this.$store.dispatch('socket/removeLoading', 'backupMainsail')\n        this.dialogBackupMainsail = false\n    }\n\n    async restoreDb() {\n        this.$store.dispatch('socket/addLoading', 'restoreUploadButton')\n        this.$refs?.uploadBackupFile?.click()\n    }\n\n    uploadRestore() {\n        if (this.$refs.uploadBackupFile.files?.length) {\n            const backup = this.$refs.uploadBackupFile.files[0]\n            if (backup) {\n                const reader = new FileReader()\n                reader.readAsText(backup, 'UTF-8')\n                reader.onload = (evt) => {\n                    this.restoreableNamespaces = []\n                    try {\n                        this.restoreObjects = JSON.parse(evt?.target?.result+'')\n\n                        Object.keys(this.restoreObjects).forEach((tmp: string) => {\n                            const namespace = this.availableKeys.find((namespace) => namespace.name === tmp)\n                            const tmpNamespace = namespace ? namespace : { name: tmp, label: tmp }\n\n                            this.restoreableNamespaces.push(tmpNamespace)\n                        })\n\n                        this.restoreableNamespaces = this.restoreableNamespaces.sort((a, b) => {\n                            if (a.name === 'general') return -1\n                            if (b.name === 'general') return 1\n\n                            const stringA = a.label.toString().toLowerCase()\n                            const stringB = b.label.toString().toLowerCase()\n\n                            if (stringA < stringB) return -1\n                            if (stringA > stringB) return 1\n\n                            return 0\n                        })\n\n                        this.dbCheckboxes = []\n                        this.dialogRestoreMainsail = true\n                    } catch (e) {\n                        Vue.$toast.error(this.$t('Settings.GeneralTab.CannotReadJson')+'')\n                    }\n                }\n                reader.onerror = (evt) => {\n                    window.console.error(evt)\n                }\n            }\n\n            this.$refs.uploadBackupFile.value = ''\n        }\n    }\n\n    async restoreDbAction () {\n        this.$store.dispatch('socket/addLoading', 'restoreDbAction')\n\n        this.$store.dispatch('gui/restoreMoonrakerDB', {\n            dbCheckboxes: this.dbCheckboxes,\n            restoreObjects: this.restoreObjects\n        })\n    }\n}\n</script>"]}]}