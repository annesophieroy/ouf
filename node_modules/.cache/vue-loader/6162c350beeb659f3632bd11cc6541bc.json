{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MiscellaneousSlider.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MiscellaneousSlider.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtjb252ZXJ0TmFtZX0gZnJvbSAnQC9wbHVnaW5zL2hlbHBlcnMnCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnMsIFByb3AsIFdhdGNofSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZU1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvYmFzZScKaW1wb3J0IHtEZWJvdW5jZX0gZnJvbSAndnVlLWRlYm91bmNlLWRlY29yYXRvcicKCkBDb21wb25lbnQKZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzY2VsbGFuZW91c1NsaWRlciBleHRlbmRzIE1peGlucyhCYXNlTWl4aW4pIHsKICAgIGNvbnZlcnROYW1lID0gY29udmVydE5hbWUKICAgIHByaXZhdGUgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkCiAgICBwcml2YXRlIGlzTG9ja2VkID0gZmFsc2UKICAgIHByaXZhdGUgbWluID0gMAogICAgcHJpdmF0ZSB2YWx1ZSA9IDAKCiAgICBAUHJvcCh7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSkgdGFyZ2V0ITogbnVtYmVyCiAgICBAUHJvcCh7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMSB9KSBtYXghOiBudW1iZXIKICAgIEBQcm9wKHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9KSBuYW1lITogc3RyaW5nCiAgICBAUHJvcCh7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSkgdHlwZSE6IHN0cmluZwogICAgQFByb3AoeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9KSBjb250cm9sbGFibGUhOiBib29sZWFuCiAgICBAUHJvcCh7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0pIHB3bSE6IGJvb2xlYW4KICAgIEBQcm9wKHsgdHlwZTogW051bWJlciwgQm9vbGVhbl0sIGRlZmF1bHQ6IGZhbHNlIH0pIHJwbSE6IG51bWJlciB8IGJvb2xlYW4KICAgIEBQcm9wKHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAxIH0pIG11bHRpITogbnVtYmVyCiAgICBAUHJvcCh7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9KSBvZmZfYmVsb3chOiBudW1iZXIKCiAgICBAV2F0Y2goJ2xvY2tTbGlkZXJzJywge2ltbWVkaWF0ZTogdHJ1ZX0pCiAgICBsb2NrU2xpZGVyc0NoYW5nZWQoKXsKICAgICAgICB0aGlzLmlzTG9ja2VkID0gdGhpcy5sb2NrU2xpZGVycyAmJiB0aGlzLmlzVG91Y2hEZXZpY2UKICAgIH0KCiAgICBzdGFydExvY2tUaW1lcigpIHsKICAgICAgICBsZXQgdCA9IHRoaXMubG9ja1NsaWRlcnNEZWxheQogICAgICAgIGlmICghdGhpcy5pc1RvdWNoRGV2aWNlIHx8ICF0aGlzLmxvY2tTbGlkZXJzIHx8ICh0IDw9IDApKSByZXR1cm4KICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaXNMb2NrZWQgPSB0cnVlLCB0ICogMTAwMCkKICAgIH0KCiAgICByZXNldExvY2tUaW1lcigpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KQogICAgfQoKICAgIGdldCBsb2NrU2xpZGVycygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnVpU2V0dGluZ3MubG9ja1NsaWRlcnNPblRvdWNoRGV2aWNlcwogICAgfQoKICAgIGdldCBsb2NrU2xpZGVyc0RlbGF5KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudWlTZXR0aW5ncy5sb2NrU2xpZGVyc0RlbGF5CiAgICB9CgogICAgQERlYm91bmNlKDUwMCkKICAgIGNoYW5nZVNsaWRlcigpIHsKICAgICAgICB0aGlzLnNlbmRDbWQoKQogICAgfQoKICAgIHNlbmRDbWQoKSB7CiAgICAgICAgbGV0IGdjb2RlID0gJycKCiAgICAgICAgaWYgKHRoaXMudmFsdWUgPCB0aGlzLm1pbikgdGhpcy52YWx1ZSA9IDAKICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IHRoaXMudmFsdWUpIHJldHVybgoKICAgICAgICBjb25zdCBsX3ZhbHVlID0gdGhpcy52YWx1ZSAqIHRoaXMubXVsdGkKCiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2ZhbicpICAgICAgICAgICAgZ2NvZGUgPSAnTTEwNiBTJyArIChsX3ZhbHVlKS50b0ZpeGVkKDApCiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2Zhbl9nZW5lcmljJykgICAgZ2NvZGUgPSAnU0VUX0ZBTl9TUEVFRCBGQU49JyArIHRoaXMubmFtZSArICcgU1BFRUQ9JyArIChsX3ZhbHVlKQogICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdvdXRwdXRfcGluJykgICAgIGdjb2RlID0gJ1NFVF9QSU4gUElOPScgKyB0aGlzLm5hbWUgKyAnIFZBTFVFPScgKyAobF92YWx1ZSkudG9GaXhlZCgyKQoKICAgICAgICBpZiAoZ2NvZGUgIT09ICcnKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7bWVzc2FnZTogZ2NvZGUsIHR5cGU6ICdjb21tYW5kJ30pCiAgICAgICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHtzY3JpcHQ6IGdjb2RlfSkKICAgICAgICB9CgogICAgICAgIHRoaXMuc3RhcnRMb2NrVGltZXIoKQogICAgfQoKICAgIHN3aXRjaE91dHB1dFBpbigpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSA/IDAgOiAxCiAgICAgICAgY29uc3QgZ2NvZGUgPSAnU0VUX1BJTiBQSU49Jyt0aGlzLm5hbWUrJyBWQUxVRT0nKyh0aGlzLnZhbHVlKnRoaXMubXVsdGkpLnRvRml4ZWQoMikKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VydmVyL2FkZEV2ZW50JywgeyBtZXNzYWdlOiBnY29kZSwgdHlwZTogJ2NvbW1hbmQnIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgeyBzY3JpcHQ6IGdjb2RlIH0pCiAgICB9CgogICAgZGVjcmVtZW50KCkgewogICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlID4gMCA/IE1hdGgucm91bmQoKHRoaXMudmFsdWUgLSAwLjAxKSAqIDEwMCkgLyAxMDAgOiAwCiAgICAgICAgdGhpcy5zZW5kQ21kKCkKICAgIH0KCiAgICBpbmNyZW1lbnQoKSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgPCAxLjAgPyBNYXRoLnJvdW5kKCh0aGlzLnZhbHVlICsgMC4wMSkgKiAxMDApIC8gMTAwIDogMS4wCiAgICAgICAgaWYgKHRoaXMudmFsdWUgPCB0aGlzLm9mZl9iZWxvdykgdGhpcy52YWx1ZSA9IHRoaXMub2ZmX2JlbG93CiAgICAgICAgdGhpcy5zZW5kQ21kKCkKICAgIH0KCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRhcmdldAogICAgfQoKICAgIEBXYXRjaCgndGFyZ2V0JykKICAgIHRhcmdldENoYW5nZWQobmV3VmFsOiBudW1iZXIpIHsKICAgICAgICB0aGlzLnZhbHVlID0gbmV3VmFsIC8gdGhpcy5tYXgKICAgIH0KfQo="},{"version":3,"sources":["MiscellaneousSlider.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"MiscellaneousSlider.vue","sourceRoot":"src/components/inputs","sourcesContent":["<style scoped>\n    ._fan-slider-subheader {\n        height: auto;\n    }\n</style>\n\n<template>\n    <v-container class=\"px-0 py-2\">\n        <v-row>\n            <v-col :class=\"pwm ? 'pb-1' : 'pb-3'\">\n                <v-subheader class=\"_fan-slider-subheader\">\n                    <v-btn\n                        v-if=\"lockSliders && this.isTouchDevice && pwm\"\n                        @click=\"isLocked = !isLocked\"\n                        plain\n                        small\n                        icon\n                    >\n                        <v-icon small :color=\"(isLocked ? 'red' : '')\">\n                            {{ isLocked ? 'mdi-lock-outline' : 'mdi-lock-open-variant-outline' }}\n                        </v-icon>\n                    </v-btn>\n                    <v-icon\n                        small\n                        :class=\"'mr-2 '+(value >= off_below && value > 0 ? 'icon-rotate' : '')\"\n                        v-if=\"type !== 'output_pin'\"\n                    >\n                        mdi-fan\n                    </v-icon>\n                    <span>{{ convertName(name) }}</span>\n                    <v-spacer></v-spacer>\n                    <small v-if=\"rpm || rpm === 0\" :class=\"'mr-3 ' + (rpm === 0 && value > 0 ? 'red--text' : '')\">\n                        {{ Math.round(rpm) }} RPM\n                    </small>\n                    <span class=\"font-weight-bold\" v-if=\"!controllable || (controllable && pwm)\">\n                        {{ Math.round(parseFloat(value)*100) }} %\n                    </span>\n                    <v-icon v-if=\"controllable && !pwm\" @click=\"switchOutputPin\">\n                        {{ value ? \"mdi-toggle-switch\" : \"mdi-toggle-switch-off-outline\" }}\n                    </v-icon>\n                </v-subheader>\n                <v-card-text class=\"py-0\" v-if=\"controllable && pwm\">\n                    <v-slider\n                        v-model=\"value\"\n                        v-touch=\"{start: resetLockTimer}\"\n                        :disabled=\"isLocked\"\n                        :min=\"0.0\"\n                        :max=\"1.0\"\n                        :step=\"0.01\"\n                        :color=\"value < off_below && value > 0 ? 'red' : undefined\"\n                        @change=\"changeSlider\"\n                        hide-details\n                    >\n                        <template v-slot:prepend>\n                            <v-icon @click=\"decrement\" :disabled=\"isLocked\">mdi-minus</v-icon>\n                        </template>\n\n                        <template v-slot:append>\n                            <v-icon @click=\"increment\" :disabled=\"isLocked\">mdi-plus</v-icon>\n                        </template>\n                    </v-slider>\n                </v-card-text>\n            </v-col>\n        </v-row>\n    </v-container>\n</template>\n\n\n<script lang=\"ts\">\nimport {convertName} from '@/plugins/helpers'\nimport {Component, Mixins, Prop, Watch} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {Debounce} from 'vue-debounce-decorator'\n\n@Component\nexport default class MiscellaneousSlider extends Mixins(BaseMixin) {\n    convertName = convertName\n    private timeout: number | undefined\n    private isLocked = false\n    private min = 0\n    private value = 0\n\n    @Prop({ type: Number, required: true }) target!: number\n    @Prop({ type: Number, default: 1 }) max!: number\n    @Prop({ type: String, default: '' }) name!: string\n    @Prop({ type: String, default: '' }) type!: string\n    @Prop({ type: Boolean, default: false }) controllable!: boolean\n    @Prop({ type: Boolean, default: false }) pwm!: boolean\n    @Prop({ type: [Number, Boolean], default: false }) rpm!: number | boolean\n    @Prop({ type: Number, default: 1 }) multi!: number\n    @Prop({ type: Number, default: 0 }) off_below!: number\n\n    @Watch('lockSliders', {immediate: true})\n    lockSlidersChanged(){\n        this.isLocked = this.lockSliders && this.isTouchDevice\n    }\n\n    startLockTimer() {\n        let t = this.lockSlidersDelay\n        if (!this.isTouchDevice || !this.lockSliders || (t <= 0)) return\n        this.timeout = setTimeout(() => this.isLocked = true, t * 1000)\n    }\n\n    resetLockTimer() {\n        clearTimeout(this.timeout)\n    }\n\n    get lockSliders() {\n        return this.$store.state.gui.uiSettings.lockSlidersOnTouchDevices\n    }\n\n    get lockSlidersDelay() {\n        return this.$store.state.gui.uiSettings.lockSlidersDelay\n    }\n\n    @Debounce(500)\n    changeSlider() {\n        this.sendCmd()\n    }\n\n    sendCmd() {\n        let gcode = ''\n\n        if (this.value < this.min) this.value = 0\n        if (this.target === this.value) return\n\n        const l_value = this.value * this.multi\n\n        if (this.type === 'fan')            gcode = 'M106 S' + (l_value).toFixed(0)\n        if (this.type === 'fan_generic')    gcode = 'SET_FAN_SPEED FAN=' + this.name + ' SPEED=' + (l_value)\n        if (this.type === 'output_pin')     gcode = 'SET_PIN PIN=' + this.name + ' VALUE=' + (l_value).toFixed(2)\n\n        if (gcode !== '') {\n            this.$store.dispatch('server/addEvent', {message: gcode, type: 'command'})\n            this.$socket.emit('printer.gcode.script', {script: gcode})\n        }\n\n        this.startLockTimer()\n    }\n\n    switchOutputPin() {\n        this.value = this.value ? 0 : 1\n        const gcode = 'SET_PIN PIN='+this.name+' VALUE='+(this.value*this.multi).toFixed(2)\n        this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: gcode })\n    }\n\n    decrement() {\n        this.value = this.value > 0 ? Math.round((this.value - 0.01) * 100) / 100 : 0\n        this.sendCmd()\n    }\n\n    increment() {\n        this.value = this.value < 1.0 ? Math.round((this.value + 0.01) * 100) / 100 : 1.0\n        if (this.value < this.off_below) this.value = this.off_below\n        this.sendCmd()\n    }\n\n    mounted() {\n        this.value = this.target\n    }\n\n    @Watch('target')\n    targetChanged(newVal: number) {\n        this.value = newVal / this.max\n    }\n}\n</script>\n"]}]}