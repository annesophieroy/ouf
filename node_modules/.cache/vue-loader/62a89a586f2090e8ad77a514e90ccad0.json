{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/TheSelectPrinterDialog.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/TheSelectPrinterDialog.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnN9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnLi9taXhpbnMvYmFzZScKaW1wb3J0IHtGYXJtUHJpbnRlclN0YXRlfSBmcm9tICdAL3N0b3JlL2Zhcm0vcHJpbnRlci90eXBlcycKaW1wb3J0IFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy91aS9QYW5lbC52dWUnCmltcG9ydCB7IEd1aVJlbW90ZXByaW50ZXJzU3RhdGVQcmludGVyIH0gZnJvbSAnQC9zdG9yZS9ndWkvcmVtb3RlcHJpbnRlcnMvdHlwZXMnCgpAQ29tcG9uZW50KHsKICAgIGNvbXBvbmVudHM6IHtQYW5lbH0KfSkKCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRoZVNlbGVjdFByaW50ZXJEaWFsb2cgZXh0ZW5kcyBNaXhpbnMoQmFzZU1peGluKSB7CiAgICAKICAgIHByaXZhdGUgZGlhbG9nQWRkUHJpbnRlciA9IHsKICAgICAgICBib29sOiBmYWxzZSwKICAgICAgICBob3N0bmFtZTogJycsCiAgICAgICAgcG9ydDogNzEyNQogICAgfQogICAgcHJpdmF0ZSBkaWFsb2dFZGl0UHJpbnRlciA9IHsKICAgICAgICBib29sOiBmYWxzZSwKICAgICAgICBpZDogJycsCiAgICAgICAgaG9zdG5hbWU6ICcnLAogICAgICAgIHBvcnQ6IDAKICAgIH0KCiAgICBnZXQgcHJpbnRlcnMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2d1aS9yZW1vdGVwcmludGVycy9nZXRSZW1vdGVwcmludGVycyddID8/IFtdCiAgICB9CgogICAgZ2V0IHByb3RvY29sKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zb2NrZXQucHJvdG9jb2wKICAgIH0KCiAgICBnZXQgaG9zdG5hbWUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNvY2tldC5ob3N0bmFtZQogICAgfQoKICAgIGdldCBwb3J0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zb2NrZXQucG9ydAogICAgfQoKICAgIGdldCBmb3JtYXRIb3N0bmFtZSgpIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5wb3J0KSAhPT0gODAgJiYgdGhpcy5wb3J0ICE9PSAnJyA/IHRoaXMuaG9zdG5hbWUrJzonK3RoaXMucG9ydCA6IHRoaXMuaG9zdG5hbWUKICAgIH0KCiAgICBnZXQgaXNDb25uZWN0ZWQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNvY2tldC5pc0Nvbm5lY3RlZAogICAgfQoKICAgIGdldCBpc0Nvbm5lY3RpbmcoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNvY2tldC5pc0Nvbm5lY3RpbmcKICAgIH0KCiAgICBnZXQgY29ubmVjdGluZ0ZhaWxlZCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc29ja2V0LmNvbm5lY3RpbmdGYWlsZWQKICAgIH0KCiAgICBnZXQgc2hvd0RpYWxvZygpIHsKICAgICAgICByZXR1cm4gIXRoaXMuaXNDb25uZWN0ZWQKICAgIH0KCiAgICBnZXQgY3VycmVudFVybCgpIHsKICAgICAgICBsZXQgb3V0cHV0ID0gICdodHRwOi8vJyt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUKICAgICAgICBpZiAocGFyc2VJbnQod2luZG93LmxvY2F0aW9uLnBvcnQpICE9PSA4MCAmJiB3aW5kb3cubG9jYXRpb24ucG9ydCAhPT0gJycpIG91dHB1dCArPSAnOicrd2luZG93LmxvY2F0aW9uLnBvcnQKCiAgICAgICAgcmV0dXJuIG91dHB1dAogICAgfQoKICAgIGdldCBzaG93Q29yc0luZm8oKSB7CiAgICAgICAgaWYgKHRoaXMucHJpbnRlcnMubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMucHJpbnRlcnMuZm9yRWFjaCgocHJpbnRlcjogR3VpUmVtb3RlcHJpbnRlcnNTdGF0ZVByaW50ZXIpID0+IHsKICAgICAgICAgICAgICAgIGlmIChwcmludGVyICYmICFwcmludGVyLnNvY2tldD8uaXNDb25uZWN0ZWQpIHJldHVybiB0cnVlCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgZ2V0IHBhbmVsVGl0bGUoKSB7CiAgICAgICAgaWYgKHRoaXMuZGlhbG9nQWRkUHJpbnRlci5ib29sKSByZXR1cm4gdGhpcy4kdCgnU2VsZWN0UHJpbnRlckRpYWxvZy5BZGRQcmludGVyJykKICAgICAgICBlbHNlIGlmICh0aGlzLmRpYWxvZ0VkaXRQcmludGVyLmJvb2wpIHJldHVybiB0aGlzLiR0KCdTZWxlY3RQcmludGVyRGlhbG9nLkVkaXRQcmludGVyJykKICAgICAgICBlbHNlIGlmICh0aGlzLmlzQ29ubmVjdGluZykgcmV0dXJuIHRoaXMuJHQoJ1NlbGVjdFByaW50ZXJEaWFsb2cuQ29ubmVjdGluZycsIHsgaG9zdDogdGhpcy5mb3JtYXRIb3N0bmFtZX0pCiAgICAgICAgZWxzZSBpZiAodGhpcy5jb25uZWN0aW5nRmFpbGVkKSByZXR1cm4gdGhpcy4kdCgnU2VsZWN0UHJpbnRlckRpYWxvZy5Db25uZWN0aW9uRmFpbGVkJywgeyBob3N0OiB0aGlzLmZvcm1hdEhvc3RuYW1lfSkKICAgICAgICBlbHNlIHJldHVybiB0aGlzLiR0KCdTZWxlY3RQcmludGVyRGlhbG9nLlNlbGVjdFByaW50ZXInKQogICAgfQoKICAgIGdldFByaW50ZXJOYW1lKG5hbWVzcGFjZTogc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2Zhcm0vZ2V0UHJpbnRlck5hbWUnXShuYW1lc3BhY2UpCiAgICB9CgogICAgYWRkUHJpbnRlcigpIHsKICAgICAgICBjb25zdCB2YWx1ZXMgPSB7CiAgICAgICAgICAgIGhvc3RuYW1lOiB0aGlzLmRpYWxvZ0FkZFByaW50ZXIuaG9zdG5hbWUsCiAgICAgICAgICAgIHBvcnQ6IHRoaXMuZGlhbG9nQWRkUHJpbnRlci5wb3J0LAogICAgICAgIH0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3JlbW90ZXByaW50ZXJzL3N0b3JlJywgeyB2YWx1ZXMgfSkKCiAgICAgICAgdGhpcy5kaWFsb2dBZGRQcmludGVyLmhvc3RuYW1lID0gJycKICAgICAgICB0aGlzLmRpYWxvZ0FkZFByaW50ZXIuYm9vbCA9IGZhbHNlCiAgICB9CgogICAgZWRpdFByaW50ZXIocHJpbnRlcjogR3VpUmVtb3RlcHJpbnRlcnNTdGF0ZVByaW50ZXIpIHsKICAgICAgICB0aGlzLmRpYWxvZ0VkaXRQcmludGVyLmhvc3RuYW1lID0gcHJpbnRlci5ob3N0bmFtZQogICAgICAgIHRoaXMuZGlhbG9nRWRpdFByaW50ZXIucG9ydCA9IHByaW50ZXIucG9ydAogICAgICAgIHRoaXMuZGlhbG9nRWRpdFByaW50ZXIuaWQgPSBwcmludGVyLmlkID8/ICcnCiAgICAgICAgdGhpcy5kaWFsb2dFZGl0UHJpbnRlci5ib29sID0gdHJ1ZQogICAgfQoKICAgIHVwZGF0ZVByaW50ZXIoKSB7CiAgICAgICAgY29uc3QgdmFsdWVzID0gewogICAgICAgICAgICBob3N0bmFtZTogdGhpcy5kaWFsb2dFZGl0UHJpbnRlci5ob3N0bmFtZSwKICAgICAgICAgICAgcG9ydDogdGhpcy5kaWFsb2dFZGl0UHJpbnRlci5wb3J0LAogICAgICAgIH0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3JlbW90ZXByaW50ZXJzL3VwZGF0ZScsIHsKICAgICAgICAgICAgaWQ6IHRoaXMuZGlhbG9nRWRpdFByaW50ZXIuaWQsCiAgICAgICAgICAgIHZhbHVlcwogICAgICAgIH0pCgogICAgICAgIHRoaXMuZGlhbG9nRWRpdFByaW50ZXIuYm9vbCA9IGZhbHNlCiAgICB9CgogICAgZGVsUHJpbnRlcigpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3JlbW90ZXByaW50ZXJzL2RlbGV0ZScsIHRoaXMuZGlhbG9nRWRpdFByaW50ZXIuaWQpCiAgICAgICAgdGhpcy5kaWFsb2dFZGl0UHJpbnRlci5ib29sID0gZmFsc2UKICAgIH0KCiAgICBjb25uZWN0KHByaW50ZXI6IEZhcm1QcmludGVyU3RhdGUpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc29ja2V0L3NldERhdGEnLCB7CiAgICAgICAgICAgIGhvc3RuYW1lOiBwcmludGVyLnNvY2tldC5ob3N0bmFtZSwKICAgICAgICAgICAgcG9ydDogcHJpbnRlci5zb2NrZXQucG9ydAogICAgICAgIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LnNldFVybCh0aGlzLnByb3RvY29sKyc6Ly8nK3ByaW50ZXIuc29ja2V0Lmhvc3RuYW1lKyc6JytwcmludGVyLnNvY2tldC5wb3J0Kycvd2Vic29ja2V0JykKICAgICAgICB0aGlzLiRzb2NrZXQuY29ubmVjdCgpCiAgICB9CgogICAgcmVjb25uZWN0KCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvc2V0RGF0YScsIHsgY29ubmVjdGluZ0ZhaWxlZDogZmFsc2UgfSkKICAgICAgICB0aGlzLiRzb2NrZXQuY29ubmVjdCgpCiAgICB9CgogICAgc3dpdGNoVG9DaGFuZ2VQcmludGVyKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvc2V0RGF0YScsIHsgY29ubmVjdGluZ0ZhaWxlZDogZmFsc2UgfSkKICAgIH0KCiAgICBjaGVja1ByaW50ZXJzKCkgewogICAgICAgIHRoaXMucHJpbnRlcnMuZm9yRWFjaCgocHJpbnRlcjogR3VpUmVtb3RlcHJpbnRlcnNTdGF0ZVByaW50ZXIpID0+IHsKICAgICAgICAgICAgaWYgKHByaW50ZXIgJiYgIXByaW50ZXIuc29ja2V0Py5pc0Nvbm5lY3RlZCAmJiAhcHJpbnRlci5zb2NrZXQ/LmlzQ29ubmVjdGluZykgewogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2Zhcm0vJytwcmludGVyLmlkKycvY29ubmVjdCcpCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfQoKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9yZW1vdGVwcmludGVycy9pbml0RnJvbUxvY2Fsc3RvcmFnZScpCiAgICB9Cn0K"},{"version":3,"sources":["TheSelectPrinterDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TheSelectPrinterDialog.vue","sourceRoot":"src/components","sourcesContent":["<style scoped>\n\n</style>\n\n<template>\n    <v-dialog v-model=\"showDialog\" persistent :width=\"400\">\n        <panel card-class=\"select-printer-dialog\" icon=\"mdi-connection\" :title=\"panelTitle\" :margin-bottom=\"false\" toolbar-color=\"toolbar\">\n            <template v-slot:buttons>\n                <template v-if=\"!isConnecting && !connectingFailed\">\n                    <template v-if=\"dialogEditPrinter.bool\"><v-btn icon tile class=\"minwidth-0\" @click=\"dialogEditPrinter.bool = false\"><v-icon>mdi-close-thick</v-icon></v-btn></template>\n                    <template v-else-if=\"dialogAddPrinter.bool\"><v-btn icon tile class=\"minwidth-0\" v-if=\"dialogAddPrinter.bool\" @click=\"dialogAddPrinter.bool = false\"><v-icon>mdi-close-thick</v-icon></v-btn></template>\n                    <template v-else-if=\"printers.length > 0\"><v-btn icon tile class=\"minwidth-0\" @click=\"checkPrinters\" color=\"primary\"><v-icon>mdi-sync</v-icon></v-btn></template>\n                </template>\n            </template>\n            <template v-if=\"isConnecting\">\n                <v-card-text>\n                    <v-progress-linear color=\"primary\" indeterminate></v-progress-linear>\n                </v-card-text>\n            </template>\n            <template v-else-if=\"!isConnecting && connectingFailed\">\n                <v-card-text>\n                    <p>{{ $t(\"SelectPrinterDialog.CannotConnectTo\", {'host': parseInt(port) !== 80 ? hostname+\":\"+port : hostname}) }}</p>\n                    <div class=\"text-center\">\n                        <v-btn text @click=\"switchToChangePrinter\" color=\"white\" class=\"mr-3\">{{ $t(\"SelectPrinterDialog.ChangePrinter\") }}</v-btn>\n                        <v-btn text @click=\"reconnect\" color=\"primary\">{{ $t(\"SelectPrinterDialog.TryAgain\") }}</v-btn>\n                    </div>\n                </v-card-text>\n            </template>\n            <template v-else-if=\"!isConnecting && dialogAddPrinter.bool\">\n                <v-card-text>\n                    <v-row>\n                        <v-col class=\"col-8\">\n                            <v-text-field\n                                v-model=\"dialogAddPrinter.hostname\"\n                                :rules=\"[\n                                    v => !!v || $t('SelectPrinterDialog.HostnameRequired'),\n                                    v => !v.startsWith('http:') || $t('SelectPrinterDialog.HostnameInvalid'),\n                                    v => !v.startsWith('https:') || $t('SelectPrinterDialog.HostnameInvalid'),\n                                ]\"\n                                label=\"Hostname/IP\"\n                                required\n                                outlined\n                                hide-details=\"auto\"\n                                dense\n                            ></v-text-field>\n                        </v-col>\n                        <v-col class=\"col-4\">\n                            <v-text-field\n                                v-model=\"dialogAddPrinter.port\"\n                                :rules=\"[v => !!v || $t('SelectPrinterDialog.PortRequired')]\"\n                                label=\"Port\"\n                                hide-details=\"auto\"\n                                required\n                                outlined\n                                dense\n                            ></v-text-field>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                        color=\"primary\"\n                        text\n                        class=\"middle\"\n                        @click=\"addPrinter\"\n                    >\n                        {{ $t(\"SelectPrinterDialog.AddPrinter\") }}\n                    </v-btn>\n                </v-card-actions>\n            </template>\n            <template v-else-if=\"!isConnecting && dialogEditPrinter.bool\">\n                <v-card-text>\n                    <v-row>\n                        <v-col class=\"col-8\">\n                            <v-text-field\n                                v-model=\"dialogEditPrinter.hostname\"\n                                :rules=\"[\n                                    v => !!v || $t('SelectPrinterDialog.HostnameRequired'),\n                                    v => !v.startsWith('http:') || $t('SelectPrinterDialog.HostnameInvalid'),\n                                    v => !v.startsWith('https:') || $t('SelectPrinterDialog.HostnameInvalid'),\n                                ]\"\n                                label=\"Hostname/IP\"\n                                required\n                                outlined\n                                dense\n                                hide-details=\"auto\"\n                            ></v-text-field>\n                        </v-col>\n                        <v-col class=\"col-4\">\n                            <v-text-field\n                                v-model=\"dialogEditPrinter.port\"\n                                :rules=\"[v => !!v || $t('SelectPrinterDialog.PortRequired')]\"\n                                label=\"Port\"\n                                required\n                                outlined\n                                dense\n                                hide-details=\"auto\"\n                            ></v-text-field>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n                <v-card-actions>\n                    <v-btn\n                        color=\"red\"\n                        icon\n                        tile\n                        class=\"minwidth-0 rounded\"\n                        @click=\"delPrinter\"\n                    >\n                        <v-icon small>mdi-delete</v-icon>\n                    </v-btn>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                        color=\"primary\"\n                        text\n                        @click=\"updatePrinter\"\n                    >\n                        {{ $t(\"SelectPrinterDialog.UpdatePrinter\") }}\n                    </v-btn>\n                </v-card-actions>\n            </template>\n            <template v-else>\n                <v-card-text class=\"mt-3\">\n                    <v-row v-if=\"printers.length\">\n                        <v-col class=\"px-6\">\n                            <v-row v-for=\"(printer, index) in printers\" v-bind:key=\"index\">\n                                <v-col class=\"rounded transition-swing toolbar py-2 px-2 mb-2 overflow-hidden\" style=\"cursor: pointer;\" @click=\"connect(printer)\">\n                                    <v-row align=\"center\">\n                                        <v-col class=\"col-auto pr-0\">\n                                            <v-progress-circular\n                                                indeterminate\n                                                color=\"primary\"\n                                                v-if=\"printer.socket.isConnecting\"\n                                                size=\"24\"\n                                                width=\"2.5\"\n                                            ></v-progress-circular>\n                                            <v-icon\n                                                :color=\"printer.socket.isConnected ? 'green' : 'red'\"\n                                                v-if=\"!printer.socket.isConnecting\"\n                                            >mdi-{{ printer.socket.isConnected ? 'checkbox-marked-circle' : 'cancel' }}</v-icon>\n                                        </v-col>\n                                        <v-col>{{ getPrinterName(printer.id) }}</v-col>\n                                        <v-col class=\"col-auto pa-0\"><v-btn tile text icon large class=\"mr-1\" v-on:click.stop.prevent=\"editPrinter(printer)\"><v-icon small>mdi-pencil</v-icon></v-btn></v-col>\n                                    </v-row>\n                                </v-col>\n                            </v-row>\n                        </v-col>\n                    </v-row>\n                    <v-row v-if=\"showCorsInfo\">\n                        <v-col>\n                            <p class=\"text-center\" v-if=\"this.printers.length === 0\">{{ $t(\"SelectPrinterDialog.Hello\") }}</p>\n                            <p class=\"text-center\">{{ $t(\"SelectPrinterDialog.RememberToAdd\", {cors: currentUrl}) }}</p>\n                            <p class=\"text-center mb-0\">{{ $t(\"SelectPrinterDialog.YouCanFindMore\") }} <a href=\"https://docs.mainsail.xyz/remotemode\" target=\"_blank\">https://docs.mainsail.xyz/remotemode</a>.</p>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"text-center mt-0\">\n                            <v-btn text color=\"primary\" @click=\"dialogAddPrinter.bool = true\">{{ $t(\"SelectPrinterDialog.AddPrinter\") }}</v-btn>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n            </template>\n        </panel>\n    </v-dialog>\n</template>\n\n<script lang=\"ts\">\n\nimport {Component, Mixins} from 'vue-property-decorator'\nimport BaseMixin from './mixins/base'\nimport {FarmPrinterState} from '@/store/farm/printer/types'\nimport Panel from '@/components/ui/Panel.vue'\nimport { GuiRemoteprintersStatePrinter } from '@/store/gui/remoteprinters/types'\n\n@Component({\n    components: {Panel}\n})\n\nexport default class TheSelectPrinterDialog extends Mixins(BaseMixin) {\n    \n    private dialogAddPrinter = {\n        bool: false,\n        hostname: '',\n        port: 7125\n    }\n    private dialogEditPrinter = {\n        bool: false,\n        id: '',\n        hostname: '',\n        port: 0\n    }\n\n    get printers() {\n        return this.$store.getters['gui/remoteprinters/getRemoteprinters'] ?? []\n    }\n\n    get protocol() {\n        return this.$store.state.socket.protocol\n    }\n\n    get hostname() {\n        return this.$store.state.socket.hostname\n    }\n\n    get port() {\n        return this.$store.state.socket.port\n    }\n\n    get formatHostname() {\n        return parseInt(this.port) !== 80 && this.port !== '' ? this.hostname+':'+this.port : this.hostname\n    }\n\n    get isConnected() {\n        return this.$store.state.socket.isConnected\n    }\n\n    get isConnecting() {\n        return this.$store.state.socket.isConnecting\n    }\n\n    get connectingFailed() {\n        return this.$store.state.socket.connectingFailed\n    }\n\n    get showDialog() {\n        return !this.isConnected\n    }\n\n    get currentUrl() {\n        let output =  'http://'+window.location.hostname\n        if (parseInt(window.location.port) !== 80 && window.location.port !== '') output += ':'+window.location.port\n\n        return output\n    }\n\n    get showCorsInfo() {\n        if (this.printers.length) {\n            this.printers.forEach((printer: GuiRemoteprintersStatePrinter) => {\n                if (printer && !printer.socket?.isConnected) return true\n            })\n\n            return false\n        }\n\n        return true\n    }\n\n    get panelTitle() {\n        if (this.dialogAddPrinter.bool) return this.$t('SelectPrinterDialog.AddPrinter')\n        else if (this.dialogEditPrinter.bool) return this.$t('SelectPrinterDialog.EditPrinter')\n        else if (this.isConnecting) return this.$t('SelectPrinterDialog.Connecting', { host: this.formatHostname})\n        else if (this.connectingFailed) return this.$t('SelectPrinterDialog.ConnectionFailed', { host: this.formatHostname})\n        else return this.$t('SelectPrinterDialog.SelectPrinter')\n    }\n\n    getPrinterName(namespace: string) {\n        return this.$store.getters['farm/getPrinterName'](namespace)\n    }\n\n    addPrinter() {\n        const values = {\n            hostname: this.dialogAddPrinter.hostname,\n            port: this.dialogAddPrinter.port,\n        }\n        this.$store.dispatch('gui/remoteprinters/store', { values })\n\n        this.dialogAddPrinter.hostname = ''\n        this.dialogAddPrinter.bool = false\n    }\n\n    editPrinter(printer: GuiRemoteprintersStatePrinter) {\n        this.dialogEditPrinter.hostname = printer.hostname\n        this.dialogEditPrinter.port = printer.port\n        this.dialogEditPrinter.id = printer.id ?? ''\n        this.dialogEditPrinter.bool = true\n    }\n\n    updatePrinter() {\n        const values = {\n            hostname: this.dialogEditPrinter.hostname,\n            port: this.dialogEditPrinter.port,\n        }\n        this.$store.dispatch('gui/remoteprinters/update', {\n            id: this.dialogEditPrinter.id,\n            values\n        })\n\n        this.dialogEditPrinter.bool = false\n    }\n\n    delPrinter() {\n        this.$store.dispatch('gui/remoteprinters/delete', this.dialogEditPrinter.id)\n        this.dialogEditPrinter.bool = false\n    }\n\n    connect(printer: FarmPrinterState) {\n        this.$store.dispatch('socket/setData', {\n            hostname: printer.socket.hostname,\n            port: printer.socket.port\n        })\n        this.$socket.setUrl(this.protocol+'://'+printer.socket.hostname+':'+printer.socket.port+'/websocket')\n        this.$socket.connect()\n    }\n\n    reconnect() {\n        this.$store.dispatch('socket/setData', { connectingFailed: false })\n        this.$socket.connect()\n    }\n\n    switchToChangePrinter() {\n        this.$store.dispatch('socket/setData', { connectingFailed: false })\n    }\n\n    checkPrinters() {\n        this.printers.forEach((printer: GuiRemoteprintersStatePrinter) => {\n            if (printer && !printer.socket?.isConnected && !printer.socket?.isConnecting) {\n                this.$store.dispatch('farm/'+printer.id+'/connect')\n            }\n        })\n    }\n\n    mounted() {\n        this.$store.dispatch('gui/remoteprinters/initFromLocalstorage')\n    }\n}\n</script>"]}]}