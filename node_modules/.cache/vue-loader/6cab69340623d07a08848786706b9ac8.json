{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/KlippyStatePanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/KlippyStatePanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgQ29tcG9uZW50IGZyb20gJ3Z1ZS1jbGFzcy1jb21wb25lbnQnCmltcG9ydCB7TWl4aW5zfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZU1peGluIGZyb20gJy4uL21peGlucy9iYXNlJwppbXBvcnQgQ29ubmVjdGlvblN0YXR1cyBmcm9tICcuLi91aS9Db25uZWN0aW9uU3RhdHVzLnZ1ZScKaW1wb3J0IFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy91aS9QYW5lbC52dWUnCgpAQ29tcG9uZW50KHsKICAgIGNvbXBvbmVudHM6IHtQYW5lbCwgQ29ubmVjdGlvblN0YXR1c30KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2xpcHB5U3RhdGVQYW5lbCBleHRlbmRzIE1peGlucyhCYXNlTWl4aW4pIHsKICAgIC8vcHJpdmF0ZSB0aW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGwKCiAgICBnZXQga2xpcHB5X21lc3NhZ2UoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlci5rbGlwcHlfbWVzc2FnZSA/PyBudWxsCiAgICB9CgogICAgcmVzdGFydCgpIHsKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgncHJpbnRlci5yZXN0YXJ0JywgeyB9LCB7IGxvYWRpbmc6ICdyZXN0YXJ0JyB9KQogICAgfQoKICAgIGZpcm13YXJlUmVzdGFydCgpIHsKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgncHJpbnRlci5maXJtd2FyZV9yZXN0YXJ0JywgeyB9LCB7IGxvYWRpbmc6ICdmaXJtd2FyZVJlc3RhcnQnIH0pCiAgICB9CgogICAgLypyZXF1ZXN0S2xpcHB5U3RhdGUoKSB7CiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuaW5mbycsIHt9LCB7IGFjdGlvbjogJ3ByaW50ZXIvZ2V0SW5mbycgfSkKICAgIH0KCiAgICBAV2F0Y2goJ2tsaXBwZXJTdGF0ZScpCiAgICBrbGlwcGVyU3RhdGVDaGFuZ2VkKG5ld1ZhbDogc3RyaW5nKSB7CiAgICAgICAgaWYgKFsncmVhZHknLCAnZGlzY29ubmVjdGVkJ10uaW5jbHVkZXMobmV3VmFsKSkgewogICAgICAgICAgICBpZiAodGhpcy50aW1lcikgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQogICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy50aW1lciA9PT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0S2xpcHB5U3RhdGUoKQogICAgICAgICAgICB9LCAyMDAwKQogICAgICAgIH0KICAgIH0qLwp9Cg=="},{"version":3,"sources":["KlippyStatePanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"KlippyStatePanel.vue","sourceRoot":"src/components/panels","sourcesContent":["<template>\n    <panel\n        v-if=\"klipperState !== 'ready' && socketIsConnected\"\n        icon=\"mdi-alert-circle\"\n        :title=\"$t('Panels.KlippyStatePanel.KlippyState')+': '+klipperState\"\n        card-class=\"klippy-state-panel\"\n    >\n        <template v-if=\"klippyIsConnected\">\n            <v-card-text class=\"py-1 mt-2\" v-if=\"klippy_message !== null\">\n                <pre style=\"white-space: pre-wrap;\">{{ klippy_message }}</pre>\n            </v-card-text>\n            <v-card-text v-else class=\"text-center py-3\">\n                <v-progress-circular\n                    indeterminate\n                    color=\"primary\"\n                ></v-progress-circular>\n            </v-card-text>\n            <v-divider class=\"mt-2\"></v-divider>\n            <v-card-actions class=\"justify-start\">\n                <v-btn small @click=\"restart\" class=\"ml-2 error--text\"><v-icon class=\"mr-sm-2\">mdi-restart</v-icon>{{ $t('Panels.KlippyStatePanel.Restart') }}</v-btn>\n                <v-btn small @click=\"firmwareRestart\" class=\"ml-4 error--text\"><v-icon class=\"mr-sm-2\">mdi-restart</v-icon>{{ $t('Panels.KlippyStatePanel.FirmwareRestart') }}</v-btn>\n            </v-card-actions>\n        </template>\n        <template v-else>\n            <v-card-text class=\"pt-5 pb-1\">\n                <connection-status :moonraker=\"true\" :klipper=\"false\"></connection-status>\n                <p class=\"mt-2 mb-0 text-center\">{{ $t('Panels.KlippyStatePanel.MoonrakerCannotConnect') }}</p>\n                <v-divider class=\"my-2\"></v-divider>\n                <p class=\"mt-2\">{{ $t('Panels.KlippyStatePanel.KlipperCheck') }}</p>\n            </v-card-text>\n        </template>\n    </panel>\n</template>\n\n<script lang=\"ts\">\nimport Component from 'vue-class-component'\nimport {Mixins} from 'vue-property-decorator'\nimport BaseMixin from '../mixins/base'\nimport ConnectionStatus from '../ui/ConnectionStatus.vue'\nimport Panel from '@/components/ui/Panel.vue'\n\n@Component({\n    components: {Panel, ConnectionStatus}\n})\nexport default class KlippyStatePanel extends Mixins(BaseMixin) {\n    //private timer: number | null = null\n\n    get klippy_message() {\n        return this.$store.state.server.klippy_message ?? null\n    }\n\n    restart() {\n        this.$socket.emit('printer.restart', { }, { loading: 'restart' })\n    }\n\n    firmwareRestart() {\n        this.$socket.emit('printer.firmware_restart', { }, { loading: 'firmwareRestart' })\n    }\n\n    /*requestKlippyState() {\n        this.$socket.emit('printer.info', {}, { action: 'printer/getInfo' })\n    }\n\n    @Watch('klipperState')\n    klipperStateChanged(newVal: string) {\n        if (['ready', 'disconnected'].includes(newVal)) {\n            if (this.timer) {\n                clearInterval(this.timer)\n                this.timer = null\n            }\n        } else if (this.timer === null) {\n            this.timer = setInterval(() => {\n                this.requestKlippyState()\n            }, 2000)\n        }\n    }*/\n}\n</script>"]}]}