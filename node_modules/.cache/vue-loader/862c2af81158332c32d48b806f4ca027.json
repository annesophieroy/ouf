{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Machine/ConfigFilesPanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Machine/ConfigFilesPanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQge0NvbXBvbmVudCwgTWl4aW5zfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZU1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvYmFzZScKaW1wb3J0IHtmb3JtYXREYXRlLCBmb3JtYXRGaWxlc2l6ZSwgc29ydEZpbGVzfSBmcm9tICdAL3BsdWdpbnMvaGVscGVycycKaW1wb3J0IHtGaWxlU3RhdGVGaWxlfSBmcm9tICdAL3N0b3JlL2ZpbGVzL3R5cGVzJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJwppbXBvcnQge2hpZGRlblJvb3REaXJlY3Rvcmllc30gZnJvbSAnQC9zdG9yZS92YXJpYWJsZXMnCgppbnRlcmZhY2UgY29udGV4dE1lbnUgewogICAgc2hvd246IGJvb2xlYW4KICAgIGlzRGlyZWN0b3J5OiBib29sZWFuCiAgICB0b3VjaFRpbWVyOiBudW1iZXIgfCBudWxsCiAgICB4OiBudW1iZXIKICAgIHk6IG51bWJlcgogICAgaXRlbTogRmlsZVN0YXRlRmlsZQp9CgoKaW50ZXJmYWNlIGRpYWxvZ0ltYWdlT2JqZWN0IHsKICAgIHNob3c6IGJvb2xlYW4KICAgIGl0ZW06IHsKICAgICAgICBuYW1lOiBzdHJpbmcgfCBudWxsLAogICAgICAgIHVybDogc3RyaW5nIHwgbnVsbCwKICAgICAgICBzdmc6IHN0cmluZyB8IG51bGwKICAgIH0KfQoKaW50ZXJmYWNlIGRpYWxvZ1JlbmFtZU9iamVjdCB7CiAgICBzaG93OiBib29sZWFuCiAgICBuZXdOYW1lOiBzdHJpbmcKICAgIGl0ZW06IEZpbGVTdGF0ZUZpbGUKfQoKaW50ZXJmYWNlIGRpYWxvZ0RlbGV0ZU9iamVjdCB7CiAgICBzaG93OiBib29sZWFuCiAgICBpdGVtOiBGaWxlU3RhdGVGaWxlCn0KCmludGVyZmFjZSB1cGxvYWRTbmFja2JhciB7CiAgICBzdGF0dXM6IGJvb2xlYW4KICAgIGZpbGVuYW1lOiBzdHJpbmcKICAgIHBlcmNlbnQ6IG51bWJlcgogICAgc3BlZWQ6IG51bWJlcgogICAgdG90YWw6IG51bWJlcgogICAgbnVtYmVyOiBudW1iZXIKICAgIG1heDogbnVtYmVyCiAgICBjYW5jZWxUb2tlblNvdXJjZTogYW55CiAgICBsYXN0UHJvZ3Jlc3M6IHsKICAgICAgICB0aW1lOiBudW1iZXIKICAgICAgICBsb2FkZWQ6IG51bWJlcgogICAgfQp9CgppbnRlcmZhY2UgZHJhZ2dpbmdGaWxlIHsKICAgIHN0YXR1czogYm9vbGVhbgogICAgaXRlbTogRmlsZVN0YXRlRmlsZQp9CgpAQ29tcG9uZW50KHsKICAgIGNvbXBvbmVudHM6IHtQYW5lbH0KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uZmlnRmlsZXNQYW5lbCBleHRlbmRzIE1peGlucyhCYXNlTWl4aW4pIHsKICAgIHNvcnRGaWxlcyA9IHNvcnRGaWxlcwogICAgZm9ybWF0RmlsZXNpemUgPSBmb3JtYXRGaWxlc2l6ZQogICAgZm9ybWF0RGF0ZSA9IGZvcm1hdERhdGUKCiAgICAkcmVmcyE6IHsKICAgICAgICBmaWxlVXBsb2FkOiBIVE1MSW5wdXRFbGVtZW50LAogICAgICAgIGlucHV0RGlhbG9nQ3JlYXRlRmlsZU5hbWU6IEhUTUxJbnB1dEVsZW1lbnQsCiAgICAgICAgaW5wdXREaWFsb2dSZW5hbWVGaWxlTmFtZTogSFRNTElucHV0RWxlbWVudCwKICAgICAgICBpbnB1dERpYWxvZ0NyZWF0ZURpcmVjdG9yeU5hbWU6IEhUTUxJbnB1dEVsZW1lbnQsCiAgICAgICAgaW5wdXREaWFsb2dSZW5hbWVEaXJlY3RvcnlOYW1lOiBIVE1MSW5wdXRFbGVtZW50LAogICAgfQoKICAgIHByaXZhdGUgc2VsZWN0ZWQgPSBbXQogICAgcHJpdmF0ZSBvcHRpb25zID0geyB9CiAgICBwcml2YXRlIGN1cnJlbnRQYWdlID0gMQogICAgcHJpdmF0ZSBjb250ZXh0TWVudTogY29udGV4dE1lbnUgPSB7CiAgICAgICAgc2hvd246IGZhbHNlLAogICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICB0b3VjaFRpbWVyOiBudWxsLAogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICBpdGVtOiB7CiAgICAgICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgICAgfQogICAgfQogICAgcHJpdmF0ZSBkaWFsb2dJbWFnZTogZGlhbG9nSW1hZ2VPYmplY3QgPSB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgaXRlbTogewogICAgICAgICAgICBuYW1lOiBudWxsLAogICAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgICAgIHN2ZzogbnVsbAogICAgICAgIH0KICAgIH0KICAgIHByaXZhdGUgZGlhbG9nQ3JlYXRlRmlsZSA9IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBuYW1lOiAnJywKICAgIH0KICAgIHByaXZhdGUgZGlhbG9nUmVuYW1lRmlsZTogZGlhbG9nUmVuYW1lT2JqZWN0ID0gewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIG5ld05hbWU6ICcnLAogICAgICAgIGl0ZW06IHsKICAgICAgICAgICAgaXNEaXJlY3Rvcnk6IGZhbHNlLAogICAgICAgICAgICBmaWxlbmFtZTogJycsCiAgICAgICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICAgICAgbW9kaWZpZWQ6IG5ldyBEYXRlKCkKICAgICAgICB9CiAgICB9CiAgICBwcml2YXRlIGRpYWxvZ0NyZWF0ZURpcmVjdG9yeSA9IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBuYW1lOiAnJywKICAgIH0KICAgIHByaXZhdGUgZGlhbG9nUmVuYW1lRGlyZWN0b3J5OiBkaWFsb2dSZW5hbWVPYmplY3QgPSB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgbmV3TmFtZTogJycsCiAgICAgICAgaXRlbTogewogICAgICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICAgIH0KICAgIH0KICAgIHByaXZhdGUgZGlhbG9nRGVsZXRlRGlyZWN0b3J5OiBkaWFsb2dEZWxldGVPYmplY3QgPSB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgaXRlbTogewogICAgICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICAgIH0KICAgIH0KICAgIHByaXZhdGUgdXBsb2FkU25hY2tiYXI6IHVwbG9hZFNuYWNrYmFyID0gewogICAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgIHBlcmNlbnQ6IDAsCiAgICAgICAgc3BlZWQ6IDAsCiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgbnVtYmVyOiAwLAogICAgICAgIG1heDogMCwKICAgICAgICBjYW5jZWxUb2tlblNvdXJjZToge30sCiAgICAgICAgbGFzdFByb2dyZXNzOiB7CiAgICAgICAgICAgIHRpbWU6IDAsCiAgICAgICAgICAgIGxvYWRlZDogMAogICAgICAgIH0KICAgIH0KICAgIHByaXZhdGUgZHJhZ2dpbmdGaWxlOiBkcmFnZ2luZ0ZpbGUgPSB7CiAgICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgICBpdGVtOiB7CiAgICAgICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgICAgfQogICAgfQoKICAgIGdldCB0b29sYmFyQnV0dG9ucygpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuVXBsb2FkRmlsZScpLAogICAgICAgICAgICAgICAgY29sb3I6ICdncmV5IGRhcmtlbi0zJywKICAgICAgICAgICAgICAgIGljb246ICdtZGktZmlsZS11cGxvYWQnLAogICAgICAgICAgICAgICAgbG9hZGluZ05hbWU6IG51bGwsCiAgICAgICAgICAgICAgICBvbmx5V3JpdGVhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMudXBsb2FkRmlsZUJ1dHRvbgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuQ3JlYXRlRmlsZScpLAogICAgICAgICAgICAgICAgY29sb3I6ICdncmV5IGRhcmtlbi0zJywKICAgICAgICAgICAgICAgIGljb246ICdtZGktZmlsZS1wbHVzJywKICAgICAgICAgICAgICAgIGxvYWRpbmdOYW1lOiBudWxsLAogICAgICAgICAgICAgICAgb25seVdyaXRlYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNyZWF0ZUZpbGUKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy4kdCgnTWFjaGluZS5Db25maWdGaWxlc1BhbmVsLkNyZWF0ZURpcmVjdG9yeScpLAogICAgICAgICAgICAgICAgY29sb3I6ICdncmV5IGRhcmtlbi0zJywKICAgICAgICAgICAgICAgIGljb246ICdtZGktZm9sZGVyLXBsdXMnLAogICAgICAgICAgICAgICAgbG9hZGluZ05hbWU6IG51bGwsCiAgICAgICAgICAgICAgICBvbmx5V3JpdGVhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuY3JlYXRlRGlyZWNvdHJ5CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuJHQoJ01hY2hpbmUuQ29uZmlnRmlsZXNQYW5lbC5SZWZyZXNoRGlyZWN0b3J5JyksCiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZXkgZGFya2VuLTMnLAogICAgICAgICAgICAgICAgaWNvbjogJ21kaS1yZWZyZXNoJywKICAgICAgICAgICAgICAgIGxvYWRpbmdOYW1lOiBudWxsLAogICAgICAgICAgICAgICAgb25seVdyaXRlYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICBjbGljazogdGhpcy5yZWZyZXNoRmlsZUxpc3QKICAgICAgICAgICAgfSwKICAgICAgICBdCiAgICB9CgogICAgZ2V0IGZpbHRlcmVkVG9vbGJhckJ1dHRvbnMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG9vbGJhckJ1dHRvbnMuZmlsdGVyKChidXR0b24pID0+IHsKICAgICAgICAgICAgcmV0dXJuICh0aGlzLmRpcmVjdG9yeVBlcm1pc3Npb25zLmluY2x1ZGVzKCd3JykgJiYgYnV0dG9uLm9ubHlXcml0ZWFibGUpIHx8ICFidXR0b24ub25seVdyaXRlYWJsZQogICAgICAgIH0pCiAgICB9CgogICAgZ2V0IGFic29sdXRlUGF0aCgpIHsKICAgICAgICBsZXQgcGF0aCA9ICcvJyt0aGlzLnJvb3QKICAgICAgICBpZiAodGhpcy5jdXJyZW50UGF0aCkgcGF0aCArPSB0aGlzLmN1cnJlbnRQYXRoCgogICAgICAgIHJldHVybiBwYXRoCiAgICB9CgogICAgZ2V0IGRpcmVjdG9yeSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snZmlsZXMvZ2V0RGlyZWN0b3J5J10odGhpcy5hYnNvbHV0ZVBhdGgpCiAgICB9CgogICAgZ2V0IGRpc2tfdXNhZ2UoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0b3J5Py5kaXNrX3VzYWdlID8/IHsgdXNlZDogMCwgZnJlZTogMCwgdG90YWw6IDB9CiAgICB9CgogICAgZ2V0IGRpcmVjdG9yeVBlcm1pc3Npb25zKCkgewogICAgICAgIHJldHVybiB0aGlzLmRpcmVjdG9yeT8ucGVybWlzc2lvbnMgPz8gJ3InCiAgICB9CgogICAgZ2V0IGZpbGVzKCkgewogICAgICAgIGxldCBmaWxlcyA9IFsuLi50aGlzLmRpcmVjdG9yeT8uY2hpbGRyZW5zID8/IFtdXQoKICAgICAgICBpZiAoIXRoaXMuc2hvd0hpZGRlbkZpbGVzKSB7CiAgICAgICAgICAgIGZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5maWxlbmFtZS5zdWJzdHIoMCwgMSkgIT09ICcuJykKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmhpZGVCYWNrdXBGaWxlcykgewogICAgICAgICAgICBjb25zdCBiYWNrdXBGaWxlTWF0Y2hlciA9IC8uKlwvP3ByaW50ZXItXGR7OH1fXGR7Nn1cLmNmZyQvCiAgICAgICAgICAgIGZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gIWZpbGUuZmlsZW5hbWUubWF0Y2goYmFja3VwRmlsZU1hdGNoZXIpKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZpbGVzCiAgICB9CgogICAgZ2V0IGhlYWRlcnMoKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgeyB0ZXh0OiAnJywgdmFsdWU6ICcnLCB9LAogICAgICAgICAgICB7IHRleHQ6IHRoaXMuJHQoJ01hY2hpbmUuQ29uZmlnRmlsZXNQYW5lbC5OYW1lJyksIHZhbHVlOiAnZmlsZW5hbWUnLCB9LAogICAgICAgICAgICB7IHRleHQ6IHRoaXMuJHQoJ01hY2hpbmUuQ29uZmlnRmlsZXNQYW5lbC5GaWxlc2l6ZScpLCB2YWx1ZTogJ3NpemUnLCBhbGlnbjogJ3JpZ2h0JywgfSwKICAgICAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCdNYWNoaW5lLkNvbmZpZ0ZpbGVzUGFuZWwuTGFzdE1vZGlmaWVkJyksIHZhbHVlOiAnbW9kaWZpZWQnLCBhbGlnbjogJ3JpZ2h0JywgfSwKICAgICAgICBdCiAgICB9CgogICAgZ2V0IGNvdW50UGVyUGFnZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuY291bnRQZXJQYWdlCiAgICB9CgogICAgc2V0IGNvdW50UGVyUGFnZShuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5jb25maWdmaWxlcy5jb3VudFBlclBhZ2UnLCB2YWx1ZTogbmV3VmFsIH0pCiAgICB9CgogICAgZ2V0IHNob3dIaWRkZW5GaWxlcygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuc2hvd0hpZGRlbkZpbGVzCiAgICB9CgogICAgc2V0IHNob3dIaWRkZW5GaWxlcyhuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5jb25maWdmaWxlcy5zaG93SGlkZGVuRmlsZXMnLCB2YWx1ZTogbmV3VmFsIH0pCiAgICB9CgogICAgZ2V0IGhpZGVCYWNrdXBGaWxlcygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuaGlkZUJhY2t1cEZpbGVzCiAgICB9CgogICAgc2V0IGhpZGVCYWNrdXBGaWxlcyhuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5jb25maWdmaWxlcy5oaWRlQmFja3VwRmlsZXMnLCB2YWx1ZTogbmV3VmFsIH0pCiAgICB9CgogICAgZ2V0IHNvcnRCeSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuc29ydEJ5CiAgICB9CgogICAgc2V0IHNvcnRCeShuZXdWYWwpIHsKICAgICAgICBpZiAobmV3VmFsID09PSB1bmRlZmluZWQpIG5ld1ZhbCA9ICdmaWxlbmFtZScKCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ3ZpZXcuY29uZmlnZmlsZXMuc29ydEJ5JywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBzb3J0RGVzYygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuY29uZmlnZmlsZXMuc29ydERlc2MKICAgIH0KCiAgICBzZXQgc29ydERlc2MobmV3VmFsKSB7CiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdW5kZWZpbmVkKSBuZXdWYWwgPSBmYWxzZQoKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5jb25maWdmaWxlcy5zb3J0RGVzYycsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgcmVnaXN0ZXJlZERpcmVjdG9yaWVzKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXJ2ZXIucmVnaXN0ZXJlZF9kaXJlY3Rvcmllcy5maWx0ZXIoKGRpcjogc3RyaW5nKSA9PiAhaGlkZGVuUm9vdERpcmVjdG9yaWVzLmluY2x1ZGVzKGRpcikpLnNvcnQoKQogICAgfQoKICAgIGdldCByb290KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudmlldy5jb25maWdmaWxlcy5yb290UGF0aAogICAgfQoKICAgIHNldCByb290KG5ld1ZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmdXaXRob3V0VXBsb2FkJywgeyBuYW1lOiAndmlldy5jb25maWdmaWxlcy5yb290UGF0aCcsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgY3VycmVudFBhdGgoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3LmNvbmZpZ2ZpbGVzLmN1cnJlbnRQYXRoCiAgICB9CgogICAgc2V0IGN1cnJlbnRQYXRoKG5ld1ZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmdXaXRob3V0VXBsb2FkJywgeyBuYW1lOiAndmlldy5jb25maWdmaWxlcy5jdXJyZW50UGF0aCcsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICByZWZyZXNoRmlsZUxpc3QoKSB7CiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5nZXRfZGlyZWN0b3J5JywgeyBwYXRoOiB0aGlzLmFic29sdXRlUGF0aC5zdWJzdHJpbmcoMSkgfSwgeyBhY3Rpb246ICdmaWxlcy9nZXREaXJlY3RvcnknIH0pCiAgICB9CgogICAgY2hhbmdlUm9vdCgpIHsKICAgICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJycKICAgIH0KCiAgICBjbGlja1JvdyhpdGVtOiBGaWxlU3RhdGVGaWxlLCBmb3JjZSA9IGZhbHNlKSB7CiAgICAgICAgaWYgKCF0aGlzLmNvbnRleHRNZW51LnNob3duIHx8IGZvcmNlKSB7CiAgICAgICAgICAgIGlmIChmb3JjZSkgdGhpcy5jb250ZXh0TWVudS5zaG93biA9IGZhbHNlCgogICAgICAgICAgICBpZiAoIWl0ZW0uaXNEaXJlY3RvcnkpIHsKICAgICAgICAgICAgICAgIGlmIChbJ3BuZycsICdqcGVnJywgJ2pwZycsICdnaWYnLCAnYm1wJywgJ3RpZicsICdzdmcnXS5pbmNsdWRlcyhpdGVtLmZpbGVuYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCkgPz8gJycpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5hcGlVcmx9L3NlcnZlci9maWxlcyR7dGhpcy5hYnNvbHV0ZVBhdGh9LyR7aXRlbS5maWxlbmFtZX0/dD0ke0RhdGUubm93KCl9YAogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nSW1hZ2UuaXRlbS5uYW1lID0gaXRlbS5maWxlbmFtZQogICAgICAgICAgICAgICAgICAgIGlmIChbJ3N2ZyddLmluY2x1ZGVzKGl0ZW0uZmlsZW5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKSA/PyAnJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2godXJsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihzdmcgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nSW1hZ2Uuc2hvdyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0ltYWdlLml0ZW0uc3ZnID0gc3ZnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nSW1hZ2Uuc2hvdyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dJbWFnZS5pdGVtLnVybCA9IHVybAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2VkaXRvci9vcGVuRmlsZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDogdGhpcy5yb290LAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiB0aGlzLmN1cnJlbnRQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogaXRlbS5maWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogaXRlbS5zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uczogaXRlbS5wZXJtaXNzaW9ucwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXRoICs9ICcvJyArIGl0ZW0uZmlsZW5hbWUKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgY2xpY2tSb3dHb0JhY2soKSB7CiAgICAgICAgdGhpcy5jdXJyZW50UGF0aCA9IHRoaXMuY3VycmVudFBhdGguc3Vic3RyKDAsIHRoaXMuY3VycmVudFBhdGgubGFzdEluZGV4T2YoJy8nKSkKICAgIH0KCiAgICBzaG93Q29udGV4dE1lbnUgKGU6IGFueSwgaXRlbTogRmlsZVN0YXRlRmlsZSkgewogICAgICAgIGlmICghdGhpcy5jb250ZXh0TWVudS5zaG93bikgewogICAgICAgICAgICBlPy5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuc2hvd24gPSB0cnVlCiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUueCA9IGU/LmNsaWVudFggfHwgZT8ucGFnZVggfHwgd2luZG93LnNjcmVlblggLyAyCiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUueSA9IGU/LmNsaWVudFkgfHwgZT8ucGFnZVkgfHwgd2luZG93LnNjcmVlblkgLyAyCiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuaXRlbSA9IGl0ZW0KCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuc2hvd24gPSB0cnVlCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQoKICAgIGRvd25sb2FkRmlsZSgpIHsKICAgICAgICBjb25zdCBmaWxlbmFtZSA9ICh0aGlzLmFic29sdXRlUGF0aCsnLycrdGhpcy5jb250ZXh0TWVudS5pdGVtLmZpbGVuYW1lKQogICAgICAgIGNvbnN0IGhyZWYgPSBgJHt0aGlzLmFwaVVybH0vc2VydmVyL2ZpbGVzJHtlbmNvZGVVUkkoZmlsZW5hbWUpfWAKICAgICAgICB3aW5kb3cub3BlbihocmVmKQogICAgfQoKICAgIGNyZWF0ZURpcmVjb3RyeSgpIHsKICAgICAgICB0aGlzLmRpYWxvZ0NyZWF0ZURpcmVjdG9yeS5uYW1lID0gJycKICAgICAgICB0aGlzLmRpYWxvZ0NyZWF0ZURpcmVjdG9yeS5zaG93ID0gdHJ1ZQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dERpYWxvZ0NyZWF0ZURpcmVjdG9yeU5hbWU/LmZvY3VzKCkKICAgICAgICB9LCAyMDApCiAgICB9CgogICAgY3JlYXRlRGlyZWN0b3J5QWN0aW9uKCkgewogICAgICAgIHRoaXMuZGlhbG9nQ3JlYXRlRGlyZWN0b3J5LnNob3cgPSBmYWxzZQoKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLnBvc3RfZGlyZWN0b3J5JywgewogICAgICAgICAgICBwYXRoOiB0aGlzLmFic29sdXRlUGF0aC5zdWJzdHJpbmcoMSkrJy8nK3RoaXMuZGlhbG9nQ3JlYXRlRGlyZWN0b3J5Lm5hbWUKICAgICAgICB9LCB7IGFjdGlvbjogJ2ZpbGVzL2dldENyZWF0ZURpcicgfSkKICAgIH0KCiAgICByZW5hbWVEaXJlY3RvcnkoaXRlbTogRmlsZVN0YXRlRmlsZSkgewogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5Lml0ZW0gPSBpdGVtCiAgICAgICAgdGhpcy5kaWFsb2dSZW5hbWVEaXJlY3RvcnkubmV3TmFtZSA9IGl0ZW0uZmlsZW5hbWUKICAgICAgICB0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5zaG93ID0gdHJ1ZQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dERpYWxvZ1JlbmFtZURpcmVjdG9yeU5hbWU/LmZvY3VzKCkKICAgICAgICB9LCAyMDApCiAgICB9CgogICAgcmVuYW1lRGlyZWN0b3J5QWN0aW9uKCkgewogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5LnNob3cgPSBmYWxzZQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMubW92ZScsIHsKICAgICAgICAgICAgc291cmNlOiAodGhpcy5hYnNvbHV0ZVBhdGgrJy8nK3RoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5Lml0ZW0uZmlsZW5hbWUpLnNsaWNlKDEpLAogICAgICAgICAgICBkZXN0OiAodGhpcy5hYnNvbHV0ZVBhdGgrJy8nK3RoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5Lm5ld05hbWUpLnNsaWNlKDEpCiAgICAgICAgfSwgeyBhY3Rpb246ICdmaWxlcy9nZXRNb3ZlJyB9KQogICAgfQoKICAgIGRlbGV0ZURpcmVjdG9yeShpdGVtOiBGaWxlU3RhdGVGaWxlKSB7CiAgICAgICAgdGhpcy5kaWFsb2dEZWxldGVEaXJlY3RvcnkuaXRlbSA9IGl0ZW0KICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZURpcmVjdG9yeS5zaG93ID0gdHJ1ZQogICAgfQoKICAgIGRlbGV0ZURpcmVjdG9yeUFjdGlvbigpIHsKICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZURpcmVjdG9yeS5zaG93ID0gZmFsc2UKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLmRlbGV0ZV9kaXJlY3RvcnknLCB7IHBhdGg6IHRoaXMuYWJzb2x1dGVQYXRoKycvJyt0aGlzLmRpYWxvZ0RlbGV0ZURpcmVjdG9yeS5pdGVtLmZpbGVuYW1lLCBmb3JjZTogdHJ1ZSB9LCB7IGFjdGlvbjogJ2ZpbGVzL2dldERlbGV0ZURpcicgfSkKICAgIH0KCiAgICBjcmVhdGVGaWxlKCkgewogICAgICAgIHRoaXMuZGlhbG9nQ3JlYXRlRmlsZS5uYW1lID0gJycKICAgICAgICB0aGlzLmRpYWxvZ0NyZWF0ZUZpbGUuc2hvdyA9IHRydWUKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXREaWFsb2dDcmVhdGVGaWxlTmFtZT8uZm9jdXMoKQogICAgICAgIH0sIDIwMCkKICAgIH0KCiAgICBjcmVhdGVGaWxlQWN0aW9uKCkgewogICAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbJyddLCB0aGlzLmRpYWxvZ0NyZWF0ZUZpbGUubmFtZSkKCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncm9vdCcsIHRoaXMucm9vdCkKICAgICAgICBpZih0aGlzLmN1cnJlbnRQYXRoLmxlbmd0aCkgZm9ybURhdGEuYXBwZW5kKCdwYXRoJywgdGhpcy5jdXJyZW50UGF0aC5zbGljZSgxKSkKCiAgICAgICAgYXhpb3MucG9zdCh0aGlzLmFwaVVybCArICcvc2VydmVyL2ZpbGVzL3VwbG9hZCcsCiAgICAgICAgICAgIGZvcm1EYXRhLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfQogICAgICAgICAgICB9CiAgICAgICAgKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcyh0aGlzLiR0KCdGaWxlcy5TdWNjZXNzZnVsbHlDcmVhdGVkJywgeyBmaWxlbmFtZTogdGhpcy5kaWFsb2dDcmVhdGVGaWxlLm5hbWUgfSkudG9TdHJpbmcoKSkKICAgICAgICAgICAgdGhpcy5kaWFsb2dDcmVhdGVGaWxlLnNob3cgPSBmYWxzZQogICAgICAgICAgICB0aGlzLmRpYWxvZ0NyZWF0ZUZpbGUubmFtZSA9ICcnCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRlIGZpbGU6ICcrdGhpcy5kaWFsb2dDcmVhdGVGaWxlLm5hbWUpCiAgICAgICAgfSkKICAgIH0KCiAgICByZW5hbWVGaWxlKGl0ZW06IEZpbGVTdGF0ZUZpbGUpIHsKICAgICAgICB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUuaXRlbSA9IGl0ZW0KICAgICAgICB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUubmV3TmFtZSA9IGl0ZW0uZmlsZW5hbWUKICAgICAgICB0aGlzLmRpYWxvZ1JlbmFtZUZpbGUuc2hvdyA9IHRydWUKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXREaWFsb2dSZW5hbWVGaWxlTmFtZT8uZm9jdXMoKQogICAgICAgIH0sIDIwMCkKICAgIH0KCiAgICByZW5hbWVGaWxlQWN0aW9uKCkgewogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5zaG93ID0gZmFsc2UKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLm1vdmUnLCB7CiAgICAgICAgICAgIHNvdXJjZTogKHRoaXMuYWJzb2x1dGVQYXRoKycvJyt0aGlzLmRpYWxvZ1JlbmFtZUZpbGUuaXRlbS5maWxlbmFtZSkuc2xpY2UoMSksCiAgICAgICAgICAgIGRlc3Q6ICh0aGlzLmFic29sdXRlUGF0aCsnLycrdGhpcy5kaWFsb2dSZW5hbWVGaWxlLm5ld05hbWUpLnNsaWNlKDEpLAogICAgICAgIH0sIHsgYWN0aW9uOiAnZmlsZXMvZ2V0TW92ZScgfSkKICAgIH0KCiAgICByZW1vdmVGaWxlKCkgewogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMuZGVsZXRlX2ZpbGUnLCB7IHBhdGg6IHRoaXMuYWJzb2x1dGVQYXRoKycvJyt0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWUgfSwgeyBhY3Rpb246ICdmaWxlcy9nZXREZWxldGVGaWxlJyB9KQogICAgfQoKICAgIHVwbG9hZEZpbGVCdXR0b24oKSB7CiAgICAgICAgdGhpcy4kcmVmcy5maWxlVXBsb2FkLmNsaWNrKCkKICAgIH0KCiAgICBhc3luYyB1cGxvYWRGaWxlKCkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmZpbGVVcGxvYWQuZmlsZXM/Lmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc29ja2V0L2FkZExvYWRpbmcnLCB7IG5hbWU6ICdjb25maWdGaWxlVXBsb2FkJyB9KQogICAgICAgICAgICBsZXQgc3VjY2Vzc0ZpbGVzID0gW10KICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5udW1iZXIgPSAwCiAgICAgICAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIubWF4ID0gdGhpcy4kcmVmcy5maWxlVXBsb2FkLmZpbGVzLmxlbmd0aAogICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGhpcy4kcmVmcy5maWxlVXBsb2FkLmZpbGVzKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLm51bWJlcisrCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmRvVXBsb2FkRmlsZShmaWxlKQogICAgICAgICAgICAgICAgc3VjY2Vzc0ZpbGVzLnB1c2gocmVzdWx0KQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc29ja2V0L3JlbW92ZUxvYWRpbmcnLCB7IG5hbWU6ICdjb25maWdGaWxlVXBsb2FkJyB9KQogICAgICAgICAgICBmb3IoY29uc3QgZmlsZSBvZiBzdWNjZXNzRmlsZXMpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoJ1VwbG9hZCBvZiAnK2ZpbGUrJyBzdWNjZXNzZnVsIScpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuJHJlZnMuZmlsZVVwbG9hZC52YWx1ZSA9ICcnCiAgICAgICAgfQogICAgfQoKICAgIGRvVXBsb2FkRmlsZShmaWxlOiBGaWxlKSB7CiAgICAgICAgbGV0IHRvYXN0ID0gdGhpcy4kdG9hc3QKICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAgIGxldCBmaWxlbmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKCcgJywgJ18nKQoKICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLmZpbGVuYW1lID0gZmlsZW5hbWUKICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLnN0YXR1cyA9IHRydWUKICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLnBlcmNlbnQgPSAwCiAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5zcGVlZCA9IDAKICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy5sb2FkZWQgPSAwCiAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MudGltZSA9IDAKCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdyb290JywgdGhpcy5yb290KQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUsIHRoaXMuY3VycmVudFBhdGgrJy8nK2ZpbGVuYW1lKQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzb2NrZXQvYWRkTG9hZGluZycsIHsgbmFtZTogJ2NvbmZpZ0ZpbGVVcGxvYWQnIH0pCgogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5jYW5jZWxUb2tlblNvdXJjZSA9IGF4aW9zLkNhbmNlbFRva2VuLnNvdXJjZSgpCiAgICAgICAgICAgIGF4aW9zLnBvc3QodGhpcy5hcGlVcmwgKyAnL3NlcnZlci9maWxlcy91cGxvYWQnLAogICAgICAgICAgICAgICAgZm9ybURhdGEsIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfSwKICAgICAgICAgICAgICAgICAgICBjYW5jZWxUb2tlbjogdGhpcy51cGxvYWRTbmFja2Jhci5jYW5jZWxUb2tlblNvdXJjZS50b2tlbiwKICAgICAgICAgICAgICAgICAgICBvblVwbG9hZFByb2dyZXNzOiAocHJvZ3Jlc3NFdmVudCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLnBlcmNlbnQgPSAocHJvZ3Jlc3NFdmVudC5sb2FkZWQgKiAxMDApIC8gcHJvZ3Jlc3NFdmVudC50b3RhbAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MudGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IHByb2dyZXNzRXZlbnQudGltZVN0YW1wIC0gdGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MudGltZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHByb2dyZXNzRXZlbnQubG9hZGVkIC0gdGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MubG9hZGVkCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUpIHRoaXMudXBsb2FkU25hY2tiYXIuc3BlZWQgPSBkYXRhIC8gKHRpbWUgLyAxMDAwKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNuYWNrYmFyLmxhc3RQcm9ncmVzcy50aW1lID0gcHJvZ3Jlc3NFdmVudC50aW1lU3RhbXAKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5sYXN0UHJvZ3Jlc3MubG9hZGVkID0gcHJvZ3Jlc3NFdmVudC5sb2FkZWQKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci50b3RhbCA9IHByb2dyZXNzRXZlbnQudG90YWwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHJlc3VsdC5kYXRhLml0ZW0ucGF0aC5zdWJzdHIocmVzdWx0LmRhdGEuaXRlbS5wYXRoLmluZGV4T2YoJy8nKSsxKQogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5zdGF0dXMgPSBmYWxzZQogICAgICAgICAgICAgICAgcmVzb2x2ZShmaWxlbmFtZSkKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5zdGF0dXMgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NvY2tldC9yZW1vdmVMb2FkaW5nJywgeyBuYW1lOiAnY29uZmlnRmlsZVVwbG9hZCcgfSkKICAgICAgICAgICAgICAgIHRvYXN0LmVycm9yKCdDYW5ub3QgdXBsb2FkIHRoZSBmaWxlIScpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0KCiAgICBjYW5jZWxVcGxvYWQoKSB7CiAgICAgICAgdGhpcy51cGxvYWRTbmFja2Jhci5jYW5jZWxUb2tlblNvdXJjZS5jYW5jZWwoKQogICAgICAgIHRoaXMudXBsb2FkU25hY2tiYXIuc3RhdHVzID0gZmFsc2UKICAgIH0KCiAgICBkcmFnRmlsZShlOiBFdmVudCwgaXRlbTogRmlsZVN0YXRlRmlsZSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgIHRoaXMuZHJhZ2dpbmdGaWxlLnN0YXR1cyA9IHRydWUKICAgICAgICB0aGlzLmRyYWdnaW5nRmlsZS5pdGVtID0gaXRlbQogICAgfQoKICAgIGRyYWdlbmRGaWxlKGU6IEV2ZW50KSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgdGhpcy5kcmFnZ2luZ0ZpbGUuc3RhdHVzID0gZmFsc2UKICAgICAgICB0aGlzLmRyYWdnaW5nRmlsZS5pdGVtID0gewogICAgICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICAgIH0KICAgIH0KCiAgICBkcmFnT3ZlckZpbGVsaXN0KGU6IGFueSwgcm93OiBhbnkpIHsKICAgICAgICBpZiAodGhpcy5kcmFnZ2luZ0ZpbGUuc3RhdHVzKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAvL2Uuc3RvcFByb3BhZ2F0aW9uKCkKCiAgICAgICAgICAgIGlmIChyb3cuaXNEaXJlY3RvcnkpIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0M0EwNDcyMCcKICAgICAgICB9CiAgICB9CgogICAgZHJhZ0xlYXZlRmlsZWxpc3QoZTogYW55KSB7CiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmdGaWxlLnN0YXR1cykgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQoKICAgICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnCiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIGRyYWdEcm9wRmlsZWxpc3QoZTogYW55LCByb3c6IGFueSkgewogICAgICAgIGlmICh0aGlzLmRyYWdnaW5nRmlsZS5zdGF0dXMpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JwoKICAgICAgICAgICAgbGV0IGRlc3QgPSAnJwogICAgICAgICAgICBpZiAocm93LmZpbGVuYW1lID09PSAnLi4nKSB7CiAgICAgICAgICAgICAgICBkZXN0ID0gdGhpcy5hYnNvbHV0ZVBhdGguc2xpY2UoMSwgdGhpcy5hYnNvbHV0ZVBhdGgubGFzdEluZGV4T2YoJy8nKSsxKSt0aGlzLmRyYWdnaW5nRmlsZS5pdGVtLmZpbGVuYW1lCiAgICAgICAgICAgIH0gZWxzZSBkZXN0ID0gdGhpcy5hYnNvbHV0ZVBhdGgrJy8nK3Jvdy5maWxlbmFtZSsnLycrdGhpcy5kcmFnZ2luZ0ZpbGUuaXRlbS5maWxlbmFtZQoKICAgICAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5tb3ZlJywgewogICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLmFic29sdXRlUGF0aC5zbGljZSgxKSsnLycrdGhpcy5kcmFnZ2luZ0ZpbGUuaXRlbS5maWxlbmFtZSwKICAgICAgICAgICAgICAgIGRlc3Q6IGRlc3QKICAgICAgICAgICAgfSwgeyBhY3Rpb246ICdmaWxlcy9nZXRNb3ZlJyB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["ConfigFilesPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkSA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConfigFilesPanel.vue","sourceRoot":"src/components/panels/Machine","sourcesContent":["<style scoped>\n\n</style>\n\n<template>\n    <div>\n        <panel :title=\"$t('Machine.ConfigFilesPanel.ConfigFiles')\" card-class=\"machine-configfiles-panel\" icon=\"mdi-information\">\n            <v-card-text>\n                <v-row>\n                    <v-col class=\"col-12 col-lg pr-lg-0\">\n                        <v-select\n                            v-model=\"root\"\n                            :items=\"registeredDirectories\"\n                            label=\"Root\"\n                            outlined\n                            hide-details\n                            dense\n                            @change=\"changeRoot\"\n                            attach\n                        ></v-select>\n                    </v-col>\n                    <v-col class=\"col col-lg-auto pl-lg-0 text-right\">\n                        <input type=\"file\" ref=\"fileUpload\" style=\"display: none\" multiple @change=\"uploadFile\" />\n                        <v-btn\n                            v-for=\"button in filteredToolbarButtons\"\n                            v-bind:key=\"button.loadingName\"\n                            class=\"px-2 minwidth-0 ml-3\"\n                            @click=\"button.click\"\n                            :loading=\"button.loadingName !== null && loadings.includes(button.loadingName)\"\n                        >\n                            <v-tooltip top>\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-icon v-bind=\"attrs\" v-on=\"on\">{{ button.icon }}</v-icon>\n                                </template>\n                                <span>{{ button.text }}</span>\n                            </v-tooltip>\n                        </v-btn>\n                        <v-menu offset-y left :title=\"$t('Machine.ConfigFilesPanel.SetupCurrentList')\" attach>\n                            <template v-slot:activator=\"{ on, attrs }\">\n                                <v-btn class=\"px-2 minwidth-0 ml-3\" v-bind=\"attrs\" v-on=\"on\"><v-icon>mdi-cog</v-icon></v-btn>\n                            </template>\n                            <v-list>\n                                <v-list-item class=\"minHeight36\">\n                                    <v-checkbox class=\"mt-0\" hide-details v-model=\"showHiddenFiles\" :label=\"$t('Machine.ConfigFilesPanel.HiddenFiles')\"></v-checkbox>\n                                </v-list-item>\n                                <v-list-item class=\"minHeight36\">\n                                    <v-checkbox class=\"mt-0\" hide-details v-model=\"hideBackupFiles\" :label=\"$t('Machine.ConfigFilesPanel.HideBackupFiles')\"></v-checkbox>\n                                </v-list-item>\n                            </v-list>\n                        </v-menu>\n                    </v-col>\n                </v-row>\n            </v-card-text>\n            <v-card-text>\n                <v-row>\n                    <v-col class=\"col-12 py-2 d-flex align-center\">\n                        <span><b>{{ $t('Machine.ConfigFilesPanel.CurrentPath') }}:</b> {{ this.absolutePath }}</span>\n                        <v-spacer></v-spacer>\n                        <template v-if=\"disk_usage !== null\">\n                            <v-tooltip top>\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <span v-bind=\"attrs\" v-on=\"on\">\n                                        <b>{{ $t('Machine.ConfigFilesPanel.FreeDisk') }}:</b> {{ formatFilesize(disk_usage.free) }}\n                                    </span>\n                                </template>\n                                <span>\n                                    {{ $t('Machine.ConfigFilesPanel.Used') }}: {{ formatFilesize(disk_usage.used) }}<br />\n                                    {{ $t('Machine.ConfigFilesPanel.Free') }}: {{ formatFilesize(disk_usage.free) }}<br />\n                                    {{ $t('Machine.ConfigFilesPanel.Total') }}: {{ formatFilesize(disk_usage.total) }}\n                                </span>\n                            </v-tooltip>\n                        </template>\n                    </v-col>\n                </v-row>\n            </v-card-text>\n            <v-divider></v-divider>\n            <v-data-table\n                :items=\"files\"\n                class=\"files-table\"\n                :headers=\"headers\"\n                :options=\"options\"\n                :page.sync=\"currentPage\"\n                :custom-sort=\"sortFiles\"\n                :sort-by.sync=\"sortBy\"\n                :sort-desc.sync=\"sortDesc\"\n                :items-per-page.sync=\"countPerPage\"\n                :footer-props=\"{\n                    itemsPerPageText:  $t('Machine.ConfigFilesPanel.Files'),\n                    itemsPerPageAllText: $t('Machine.ConfigFilesPanel.AllFiles'),\n                    itemsPerPageOptions: [10,25,50,100,-1]\n                }\"\n                mobile-breakpoint=\"0\"\n                item-key=\"name\">\n\n                <template #no-data>\n                    <div class=\"text-center\">{{ $t('Machine.ConfigFilesPanel.Empty')  }}</div>\n                </template>\n\n                <template slot=\"body.prepend\" v-if=\"(currentPath !== '')\">\n                   <tr\n                        class=\"file-list-cursor\"\n                        @click=\"clickRowGoBack\"\n                        @dragover=\"dragOverFilelist($event, {isDirectory: true, filename: '..'})\"\n                        @dragleave=\"dragLeaveFilelist\"\n                        @drop.prevent.stop=\"dragDropFilelist($event, {isDirectory: true, filename: '..'})\"\n                   >\n                        <td class=\"pr-0 text-center\" style=\"width: 32px;\"><v-icon>mdi-folder-upload</v-icon></td>\n                        <td class=\" \" colspan=\"4\">..</td>\n                    </tr>\n                </template>\n\n                <template #item=\"{ index, item }\">\n                    <tr\n                        :key=\"`${index} ${item.filename}`\"\n                        v-longpress:600=\"(e) => showContextMenu(e, item)\"\n                        @contextmenu=\"showContextMenu($event, item)\"\n                        @click=\"clickRow(item)\"\n                        class=\"file-list-cursor user-select-none\"\n                        :data-name=\"item.filename\"\n                        draggable=\"true\"\n                        @drag=\"dragFile($event, item)\"\n                        @dragend=\"dragendFile($event)\"\n                        @dragover=\"dragOverFilelist($event, item)\" @dragleave=\"dragLeaveFilelist\" @drop.prevent.stop=\"dragDropFilelist($event, item)\"\n                    >\n                        <td class=\"pr-0 text-center\" style=\"width: 32px;\">\n                            <v-icon v-if=\"item.isDirectory\">mdi-folder</v-icon>\n                            <v-icon v-if=\"!item.isDirectory\">mdi-file</v-icon>\n                        </td>\n                        <td class=\" \">{{ item.filename }}</td>\n                        <td class=\"text-no-wrap text-right\">{{ item.isDirectory ? '--' : formatFilesize(item.size) }}</td>\n                        <td class=\"text-right\">{{ formatDate(item.modified) }}</td>\n                    </tr>\n                </template>\n            </v-data-table>\n        </panel>\n        <v-menu v-model=\"contextMenu.shown\" :position-x=\"contextMenu.x\" :position-y=\"contextMenu.y\" absolute offset-y>\n            <v-list>\n                <v-list-item @click=\"clickRow(contextMenu.item, true)\" v-if=\"!contextMenu.item.isDirectory\">\n                    <v-icon class=\"mr-1\">mdi-file-document-edit-outline</v-icon> {{ contextMenu.item.permissions.includes('w') ? $t('Machine.ConfigFilesPanel.EditFile') : $t('Machine.ConfigFilesPanel.ShowFile') }}\n                </v-list-item>\n                <v-list-item @click=\"downloadFile\" v-if=\"!contextMenu.item.isDirectory\">\n                    <v-icon class=\"mr-1\">mdi-cloud-download</v-icon> {{ $t('Machine.ConfigFilesPanel.Download') }}\n                </v-list-item>\n                <v-list-item @click=\"renameFile(contextMenu.item)\" v-if=\"!contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon class=\"mr-1\">mdi-rename-box</v-icon> {{ $t('Machine.ConfigFilesPanel.Rename') }}\n                </v-list-item>\n                <v-list-item @click=\"renameDirectory(contextMenu.item)\" v-if=\"contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon class=\"mr-1\">mdi-rename-box</v-icon> {{ $t('Machine.ConfigFilesPanel.Rename') }}\n                </v-list-item>\n                <v-list-item @click=\"removeFile\" v-if=\"!contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon class=\"mr-1\">mdi-delete</v-icon> {{ $t('Machine.ConfigFilesPanel.Delete') }}\n                </v-list-item>\n                <v-list-item @click=\"deleteDirectory(contextMenu.item)\" v-if=\"contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon class=\"mr-1\">mdi-delete</v-icon> {{ $t('Machine.ConfigFilesPanel.Delete') }}\n                </v-list-item>\n            </v-list>\n        </v-menu>\n        <v-dialog v-model=\"dialogImage.show\" hide-overlay fullscreen @keydown.esc=\"dialogImage.show = false; dialogImage.item.url = null; dialogImage.item.svg = null;\" class=\"fill-height\">\n            <panel :title=\"dialogImage.item.name\" card-class=\"maschine-configfiles-imageviewer-dialog\" style=\"position: relative;\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogImage.show = false; dialogImage.item.url = null; dialogImage.item.svg = null;\">\n                        <v-icon>mdi-close-thick</v-icon>\n                    </v-btn>\n                </template>\n                <div class=\"d-flex justify-center\" style=\"max-height: calc(var(--app-height) - 64px); overflow: auto;\">\n                    <img v-if=\"dialogImage.item.url\" :src=\"dialogImage.item.url\" style=\"max-height: 100%; width: auto;\" alt=\"image\" />\n                    <div v-else-if=\"dialogImage.item.svg\" class=\"fill-width\" v-html=\"dialogImage.item.svg\"></div>\n                </div>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogCreateFile.show\" max-width=\"400\">\n            <panel :title=\"$t('Machine.ConfigFilesPanel.CreateFile')\" card-class=\"maschine-configfiles-create-file-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogCreateFile.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        :label=\"$t('Machine.ConfigFilesPanel.Name')\"\n                        v-model=\"dialogCreateFile.name\"\n                        ref=\"inputDialogCreateFileName\"\n                        @keyup.enter=\"createFileAction\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogCreateFile.show = false\">{{ $t('Machine.ConfigFilesPanel.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"createFileAction\">{{ $t('Machine.ConfigFilesPanel.Create') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogRenameFile.show\" max-width=\"400\">\n            <panel :title=\"$t('Machine.ConfigFilesPanel.RenameFile')\" card-class=\"maschine-configfiles-rename-file-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogRenameFile.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        :label=\"$t('Machine.ConfigFilesPanel.Name')\"\n                        v-model=\"dialogRenameFile.newName\"\n                        ref=\"inputDialogRenameFileName\"\n                        @keyup.enter=\"renameFileAction\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogRenameFile.show = false\">{{ $t('Machine.ConfigFilesPanel.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"renameFileAction\">{{ $t('Machine.ConfigFilesPanel.Rename') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogCreateDirectory.show\" max-width=\"400\">\n            <panel :title=\"$t('Machine.ConfigFilesPanel.CreateDirectory')\" card-class=\"maschine-configfiles-create-directory-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogCreateDirectory.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        :label=\"$t('Machine.ConfigFilesPanel.Name')\"\n                        v-model=\"dialogCreateDirectory.name\"\n                        ref=\"inputDialogCreateDirectoryName\"\n                        @keyup.enter=\"createDirectoryAction\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogCreateDirectory.show = false\">{{ $t('Machine.ConfigFilesPanel.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"createDirectoryAction\">{{ $t('Machine.ConfigFilesPanel.Create') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogRenameDirectory.show\" max-width=\"400\">\n            <panel :title=\"$t('Machine.ConfigFilesPanel.RenameDirectory')\" card-class=\"maschine-configfiles-rename-directory-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogRenameDirectory.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        :label=\"$t('Machine.ConfigFilesPanel.Name')\"\n                        v-model=\"dialogRenameDirectory.newName\"\n                        ref=\"inputDialogRenameDirectoryName\"\n                        @keyup.enter=\"renameDirectoryAction\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogRenameDirectory.show = false\">{{ $t('Machine.ConfigFilesPanel.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"renameDirectoryAction\">{{ $t('Machine.ConfigFilesPanel.Rename') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogDeleteDirectory.show\" max-width=\"400\">\n            <panel :title=\"$t('Machine.ConfigFilesPanel.DeleteDirectory')\" card-class=\"maschine-configfiles-delete-directory-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogDeleteDirectory.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <p class=\"mb-0\">{{ $t('Machine.ConfigFilesPanel.DeleteDirectoryQuestion', { name: dialogDeleteDirectory.item.filename } )}}</p>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogDeleteDirectory.show = false\">{{ $t('Machine.ConfigFilesPanel.Cancel') }}</v-btn>\n                    <v-btn color=\"error\" text @click=\"deleteDirectoryAction\">{{ $t('Machine.ConfigFilesPanel.Delete') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-snackbar v-model=\"uploadSnackbar.status\" :timeout=\"-1\" :value=\"true\" fixed right bottom dark>\n            <span v-if=\"uploadSnackbar.max > 1\" class=\"mr-1\">({{ uploadSnackbar.number }}/{{ uploadSnackbar.max }})</span><strong>{{ $t('Machine.ConfigFilesPanel.Uploading') }} {{ uploadSnackbar.filename }}</strong><br />\n            {{ Math.round(uploadSnackbar.percent) }} % @ {{ formatFilesize(Math.round(uploadSnackbar.speed)) }}/s<br />\n            <v-progress-linear class=\"mt-2\" :value=\"uploadSnackbar.percent\"></v-progress-linear>\n            <template v-slot:action=\"{ attrs }\">\n                <v-btn\n                    color=\"red\"\n                    text\n                    v-bind=\"attrs\"\n                    @click=\"cancelUpload\"\n                    style=\"min-width: auto;\"\n                >\n                    <v-icon class=\"0\">mdi-close</v-icon>\n                </v-btn>\n            </template>\n        </v-snackbar>\n    </div>\n</template>\n\n<script lang=\"ts\">\n\nimport {Component, Mixins} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {formatDate, formatFilesize, sortFiles} from '@/plugins/helpers'\nimport {FileStateFile} from '@/store/files/types'\nimport axios from 'axios'\nimport Panel from '@/components/ui/Panel.vue'\nimport {hiddenRootDirectories} from '@/store/variables'\n\ninterface contextMenu {\n    shown: boolean\n    isDirectory: boolean\n    touchTimer: number | null\n    x: number\n    y: number\n    item: FileStateFile\n}\n\n\ninterface dialogImageObject {\n    show: boolean\n    item: {\n        name: string | null,\n        url: string | null,\n        svg: string | null\n    }\n}\n\ninterface dialogRenameObject {\n    show: boolean\n    newName: string\n    item: FileStateFile\n}\n\ninterface dialogDeleteObject {\n    show: boolean\n    item: FileStateFile\n}\n\ninterface uploadSnackbar {\n    status: boolean\n    filename: string\n    percent: number\n    speed: number\n    total: number\n    number: number\n    max: number\n    cancelTokenSource: any\n    lastProgress: {\n        time: number\n        loaded: number\n    }\n}\n\ninterface draggingFile {\n    status: boolean\n    item: FileStateFile\n}\n\n@Component({\n    components: {Panel}\n})\nexport default class ConfigFilesPanel extends Mixins(BaseMixin) {\n    sortFiles = sortFiles\n    formatFilesize = formatFilesize\n    formatDate = formatDate\n\n    $refs!: {\n        fileUpload: HTMLInputElement,\n        inputDialogCreateFileName: HTMLInputElement,\n        inputDialogRenameFileName: HTMLInputElement,\n        inputDialogCreateDirectoryName: HTMLInputElement,\n        inputDialogRenameDirectoryName: HTMLInputElement,\n    }\n\n    private selected = []\n    private options = { }\n    private currentPage = 1\n    private contextMenu: contextMenu = {\n        shown: false,\n        isDirectory: false,\n        touchTimer: null,\n        x: 0,\n        y: 0,\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n    private dialogImage: dialogImageObject = {\n        show: false,\n        item: {\n            name: null,\n            url: null,\n            svg: null\n        }\n    }\n    private dialogCreateFile = {\n        show: false,\n        name: '',\n    }\n    private dialogRenameFile: dialogRenameObject = {\n        show: false,\n        newName: '',\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n    private dialogCreateDirectory = {\n        show: false,\n        name: '',\n    }\n    private dialogRenameDirectory: dialogRenameObject = {\n        show: false,\n        newName: '',\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n    private dialogDeleteDirectory: dialogDeleteObject = {\n        show: false,\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n    private uploadSnackbar: uploadSnackbar = {\n        status: false,\n        filename: '',\n        percent: 0,\n        speed: 0,\n        total: 0,\n        number: 0,\n        max: 0,\n        cancelTokenSource: {},\n        lastProgress: {\n            time: 0,\n            loaded: 0\n        }\n    }\n    private draggingFile: draggingFile = {\n        status: false,\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n\n    get toolbarButtons() {\n        return [\n            {\n                text: this.$t('Machine.ConfigFilesPanel.UploadFile'),\n                color: 'grey darken-3',\n                icon: 'mdi-file-upload',\n                loadingName: null,\n                onlyWriteable: true,\n                click: this.uploadFileButton\n            }, {\n                text: this.$t('Machine.ConfigFilesPanel.CreateFile'),\n                color: 'grey darken-3',\n                icon: 'mdi-file-plus',\n                loadingName: null,\n                onlyWriteable: true,\n                click: this.createFile\n            }, {\n                text: this.$t('Machine.ConfigFilesPanel.CreateDirectory'),\n                color: 'grey darken-3',\n                icon: 'mdi-folder-plus',\n                loadingName: null,\n                onlyWriteable: true,\n                click: this.createDirecotry\n            }, {\n                text: this.$t('Machine.ConfigFilesPanel.RefreshDirectory'),\n                color: 'grey darken-3',\n                icon: 'mdi-refresh',\n                loadingName: null,\n                onlyWriteable: false,\n                click: this.refreshFileList\n            },\n        ]\n    }\n\n    get filteredToolbarButtons() {\n        return this.toolbarButtons.filter((button) => {\n            return (this.directoryPermissions.includes('w') && button.onlyWriteable) || !button.onlyWriteable\n        })\n    }\n\n    get absolutePath() {\n        let path = '/'+this.root\n        if (this.currentPath) path += this.currentPath\n\n        return path\n    }\n\n    get directory() {\n        return this.$store.getters['files/getDirectory'](this.absolutePath)\n    }\n\n    get disk_usage() {\n        return this.directory?.disk_usage ?? { used: 0, free: 0, total: 0}\n    }\n\n    get directoryPermissions() {\n        return this.directory?.permissions ?? 'r'\n    }\n\n    get files() {\n        let files = [...this.directory?.childrens ?? []]\n\n        if (!this.showHiddenFiles) {\n            files = files.filter(file => file.filename.substr(0, 1) !== '.')\n        }\n\n        if (this.hideBackupFiles) {\n            const backupFileMatcher = /.*\\/?printer-\\d{8}_\\d{6}\\.cfg$/\n            files = files.filter(file => !file.filename.match(backupFileMatcher))\n        }\n\n        return files\n    }\n\n    get headers() {\n        return [\n            { text: '', value: '', },\n            { text: this.$t('Machine.ConfigFilesPanel.Name'), value: 'filename', },\n            { text: this.$t('Machine.ConfigFilesPanel.Filesize'), value: 'size', align: 'right', },\n            { text: this.$t('Machine.ConfigFilesPanel.LastModified'), value: 'modified', align: 'right', },\n        ]\n    }\n\n    get countPerPage() {\n        return this.$store.state.gui.view.configfiles.countPerPage\n    }\n\n    set countPerPage(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.configfiles.countPerPage', value: newVal })\n    }\n\n    get showHiddenFiles() {\n        return this.$store.state.gui.view.configfiles.showHiddenFiles\n    }\n\n    set showHiddenFiles(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.configfiles.showHiddenFiles', value: newVal })\n    }\n\n    get hideBackupFiles() {\n        return this.$store.state.gui.view.configfiles.hideBackupFiles\n    }\n\n    set hideBackupFiles(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.configfiles.hideBackupFiles', value: newVal })\n    }\n\n    get sortBy() {\n        return this.$store.state.gui.view.configfiles.sortBy\n    }\n\n    set sortBy(newVal) {\n        if (newVal === undefined) newVal = 'filename'\n\n        this.$store.dispatch('gui/saveSetting', { name: 'view.configfiles.sortBy', value: newVal })\n    }\n\n    get sortDesc() {\n        return this.$store.state.gui.view.configfiles.sortDesc\n    }\n\n    set sortDesc(newVal) {\n        if (newVal === undefined) newVal = false\n\n        this.$store.dispatch('gui/saveSetting', { name: 'view.configfiles.sortDesc', value: newVal })\n    }\n\n    get registeredDirectories() {\n        return this.$store.state.server.registered_directories.filter((dir: string) => !hiddenRootDirectories.includes(dir)).sort()\n    }\n\n    get root() {\n        return this.$store.state.gui.view.configfiles.rootPath\n    }\n\n    set root(newVal) {\n        this.$store.dispatch('gui/saveSettingWithoutUpload', { name: 'view.configfiles.rootPath', value: newVal })\n    }\n\n    get currentPath() {\n        return this.$store.state.gui.view.configfiles.currentPath\n    }\n\n    set currentPath(newVal) {\n        this.$store.dispatch('gui/saveSettingWithoutUpload', { name: 'view.configfiles.currentPath', value: newVal })\n    }\n\n    refreshFileList() {\n        this.$socket.emit('server.files.get_directory', { path: this.absolutePath.substring(1) }, { action: 'files/getDirectory' })\n    }\n\n    changeRoot() {\n        this.currentPath = ''\n    }\n\n    clickRow(item: FileStateFile, force = false) {\n        if (!this.contextMenu.shown || force) {\n            if (force) this.contextMenu.shown = false\n\n            if (!item.isDirectory) {\n                if (['png', 'jpeg', 'jpg', 'gif', 'bmp', 'tif', 'svg'].includes(item.filename.split('.').pop()?.toLowerCase() ?? '')) {\n                    const url = `${this.apiUrl}/server/files${this.absolutePath}/${item.filename}?t=${Date.now()}`\n                    this.dialogImage.item.name = item.filename\n                    if (['svg'].includes(item.filename.split('.').pop()?.toLowerCase() ?? '')) {\n                        fetch(url)\n                            .then(res => res.text())\n                            .then(svg => {\n                                this.dialogImage.show = true\n                                this.dialogImage.item.svg = svg\n                            })\n                    } else {\n                        this.dialogImage.show = true\n                        this.dialogImage.item.url = url\n                    }\n                } else {\n                    this.$store.dispatch('editor/openFile', {\n                        root: this.root,\n                        path: this.currentPath,\n                        filename: item.filename,\n                        size: item.size,\n                        permissions: item.permissions\n                    })\n                }\n            } else {\n                this.currentPath += '/' + item.filename\n                this.currentPage = 1\n            }\n        }\n    }\n\n    clickRowGoBack() {\n        this.currentPath = this.currentPath.substr(0, this.currentPath.lastIndexOf('/'))\n    }\n\n    showContextMenu (e: any, item: FileStateFile) {\n        if (!this.contextMenu.shown) {\n            e?.preventDefault()\n            this.contextMenu.shown = true\n            this.contextMenu.x = e?.clientX || e?.pageX || window.screenX / 2\n            this.contextMenu.y = e?.clientY || e?.pageY || window.screenY / 2\n            this.contextMenu.item = item\n\n            this.$nextTick(() => {\n                this.contextMenu.shown = true\n            })\n        }\n    }\n\n    downloadFile() {\n        const filename = (this.absolutePath+'/'+this.contextMenu.item.filename)\n        const href = `${this.apiUrl}/server/files${encodeURI(filename)}`\n        window.open(href)\n    }\n\n    createDirecotry() {\n        this.dialogCreateDirectory.name = ''\n        this.dialogCreateDirectory.show = true\n\n        setTimeout(() => {\n            this.$refs.inputDialogCreateDirectoryName?.focus()\n        }, 200)\n    }\n\n    createDirectoryAction() {\n        this.dialogCreateDirectory.show = false\n\n        this.$socket.emit('server.files.post_directory', {\n            path: this.absolutePath.substring(1)+'/'+this.dialogCreateDirectory.name\n        }, { action: 'files/getCreateDir' })\n    }\n\n    renameDirectory(item: FileStateFile) {\n        this.dialogRenameDirectory.item = item\n        this.dialogRenameDirectory.newName = item.filename\n        this.dialogRenameDirectory.show = true\n\n        setTimeout(() => {\n            this.$refs.inputDialogRenameDirectoryName?.focus()\n        }, 200)\n    }\n\n    renameDirectoryAction() {\n        this.dialogRenameDirectory.show = false\n        this.$socket.emit('server.files.move', {\n            source: (this.absolutePath+'/'+this.dialogRenameDirectory.item.filename).slice(1),\n            dest: (this.absolutePath+'/'+this.dialogRenameDirectory.newName).slice(1)\n        }, { action: 'files/getMove' })\n    }\n\n    deleteDirectory(item: FileStateFile) {\n        this.dialogDeleteDirectory.item = item\n        this.dialogDeleteDirectory.show = true\n    }\n\n    deleteDirectoryAction() {\n        this.dialogDeleteDirectory.show = false\n        this.$socket.emit('server.files.delete_directory', { path: this.absolutePath+'/'+this.dialogDeleteDirectory.item.filename, force: true }, { action: 'files/getDeleteDir' })\n    }\n\n    createFile() {\n        this.dialogCreateFile.name = ''\n        this.dialogCreateFile.show = true\n\n        setTimeout(() => {\n            this.$refs.inputDialogCreateFileName?.focus()\n        }, 200)\n    }\n\n    createFileAction() {\n        const file = new File([''], this.dialogCreateFile.name)\n\n        let formData = new FormData()\n        formData.append('file', file)\n        formData.append('root', this.root)\n        if(this.currentPath.length) formData.append('path', this.currentPath.slice(1))\n\n        axios.post(this.apiUrl + '/server/files/upload',\n            formData, {\n                headers: { 'Content-Type': 'multipart/form-data' }\n            }\n        ).then(() => {\n            this.$toast.success(this.$t('Files.SuccessfullyCreated', { filename: this.dialogCreateFile.name }).toString())\n            this.dialogCreateFile.show = false\n            this.dialogCreateFile.name = ''\n        }).catch(() => {\n            window.console.error('Error create file: '+this.dialogCreateFile.name)\n        })\n    }\n\n    renameFile(item: FileStateFile) {\n        this.dialogRenameFile.item = item\n        this.dialogRenameFile.newName = item.filename\n        this.dialogRenameFile.show = true\n\n        setTimeout(() => {\n            this.$refs.inputDialogRenameFileName?.focus()\n        }, 200)\n    }\n\n    renameFileAction() {\n        this.dialogRenameFile.show = false\n        this.$socket.emit('server.files.move', {\n            source: (this.absolutePath+'/'+this.dialogRenameFile.item.filename).slice(1),\n            dest: (this.absolutePath+'/'+this.dialogRenameFile.newName).slice(1),\n        }, { action: 'files/getMove' })\n    }\n\n    removeFile() {\n        this.$socket.emit('server.files.delete_file', { path: this.absolutePath+'/'+this.contextMenu.item.filename }, { action: 'files/getDeleteFile' })\n    }\n\n    uploadFileButton() {\n        this.$refs.fileUpload.click()\n    }\n\n    async uploadFile() {\n        if (this.$refs.fileUpload.files?.length) {\n            this.$store.dispatch('socket/addLoading', { name: 'configFileUpload' })\n            let successFiles = []\n            this.uploadSnackbar.number = 0\n            this.uploadSnackbar.max = this.$refs.fileUpload.files.length\n            for (const file of this.$refs.fileUpload.files) {\n                this.uploadSnackbar.number++\n                const result = await this.doUploadFile(file)\n                successFiles.push(result)\n            }\n\n            this.$store.dispatch('socket/removeLoading', { name: 'configFileUpload' })\n            for(const file of successFiles) {\n                this.$toast.success('Upload of '+file+' successful!')\n            }\n\n            this.$refs.fileUpload.value = ''\n        }\n    }\n\n    doUploadFile(file: File) {\n        let toast = this.$toast\n        let formData = new FormData()\n        let filename = file.name.replace(' ', '_')\n\n        this.uploadSnackbar.filename = filename\n        this.uploadSnackbar.status = true\n        this.uploadSnackbar.percent = 0\n        this.uploadSnackbar.speed = 0\n        this.uploadSnackbar.lastProgress.loaded = 0\n        this.uploadSnackbar.lastProgress.time = 0\n\n        formData.append('root', this.root)\n        formData.append('file', file, this.currentPath+'/'+filename)\n        this.$store.dispatch('socket/addLoading', { name: 'configFileUpload' })\n\n        return new Promise(resolve => {\n            this.uploadSnackbar.cancelTokenSource = axios.CancelToken.source()\n            axios.post(this.apiUrl + '/server/files/upload',\n                formData, {\n                    headers: { 'Content-Type': 'multipart/form-data' },\n                    cancelToken: this.uploadSnackbar.cancelTokenSource.token,\n                    onUploadProgress: (progressEvent) => {\n                        this.uploadSnackbar.percent = (progressEvent.loaded * 100) / progressEvent.total\n                        if (this.uploadSnackbar.lastProgress.time) {\n                            const time = progressEvent.timeStamp - this.uploadSnackbar.lastProgress.time\n                            const data = progressEvent.loaded - this.uploadSnackbar.lastProgress.loaded\n\n                            if (time) this.uploadSnackbar.speed = data / (time / 1000)\n                        }\n\n                        this.uploadSnackbar.lastProgress.time = progressEvent.timeStamp\n                        this.uploadSnackbar.lastProgress.loaded = progressEvent.loaded\n                        this.uploadSnackbar.total = progressEvent.total\n                    }\n                }\n            ).then((result) => {\n                const filename = result.data.item.path.substr(result.data.item.path.indexOf('/')+1)\n                this.uploadSnackbar.status = false\n                resolve(filename)\n            }).catch(() => {\n                this.uploadSnackbar.status = false\n                this.$store.dispatch('socket/removeLoading', { name: 'configFileUpload' })\n                toast.error('Cannot upload the file!')\n            })\n        })\n    }\n\n    cancelUpload() {\n        this.uploadSnackbar.cancelTokenSource.cancel()\n        this.uploadSnackbar.status = false\n    }\n\n    dragFile(e: Event, item: FileStateFile) {\n        e.preventDefault()\n        this.draggingFile.status = true\n        this.draggingFile.item = item\n    }\n\n    dragendFile(e: Event) {\n        e.preventDefault()\n        this.draggingFile.status = false\n        this.draggingFile.item = {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n\n    dragOverFilelist(e: any, row: any) {\n        if (this.draggingFile.status) {\n            e.preventDefault()\n            //e.stopPropagation()\n\n            if (row.isDirectory) e.target.parentElement.style.backgroundColor = '#43A04720'\n        }\n    }\n\n    dragLeaveFilelist(e: any) {\n        if (this.draggingFile.status) {\n            e.preventDefault()\n            e.stopPropagation()\n\n            e.target.parentElement.style.backgroundColor = 'transparent'\n        }\n    }\n\n    async dragDropFilelist(e: any, row: any) {\n        if (this.draggingFile.status) {\n            e.preventDefault()\n            e.target.parentElement.style.backgroundColor = 'transparent'\n\n            let dest = ''\n            if (row.filename === '..') {\n                dest = this.absolutePath.slice(1, this.absolutePath.lastIndexOf('/')+1)+this.draggingFile.item.filename\n            } else dest = this.absolutePath+'/'+row.filename+'/'+this.draggingFile.item.filename\n\n            this.$socket.emit('server.files.move', {\n                source: this.absolutePath.slice(1)+'/'+this.draggingFile.item.filename,\n                dest: dest\n            }, { action: 'files/getMove' })\n        }\n    }\n}\n</script>\n"]}]}