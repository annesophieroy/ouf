{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MiscellaneousSlider.vue?vue&type=style&index=0&id=9fd8928e&scoped=true&lang=css&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/MiscellaneousSlider.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1645990066541},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1645990070825},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/postcss-loader/src/index.js","mtime":1645990067674},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5fZmFuLXNsaWRlci1zdWJoZWFkZXIgewogICAgaGVpZ2h0OiBhdXRvOwp9Cg=="},{"version":3,"sources":["MiscellaneousSlider.vue"],"names":[],"mappings":";AACA;AACA;AACA","file":"MiscellaneousSlider.vue","sourceRoot":"src/components/inputs","sourcesContent":["<style scoped>\n    ._fan-slider-subheader {\n        height: auto;\n    }\n</style>\n\n<template>\n    <v-container class=\"px-0 py-2\">\n        <v-row>\n            <v-col :class=\"pwm ? 'pb-1' : 'pb-3'\">\n                <v-subheader class=\"_fan-slider-subheader\">\n                    <v-btn\n                        v-if=\"lockSliders && this.isTouchDevice && pwm\"\n                        @click=\"isLocked = !isLocked\"\n                        plain\n                        small\n                        icon\n                    >\n                        <v-icon small :color=\"(isLocked ? 'red' : '')\">\n                            {{ isLocked ? 'mdi-lock-outline' : 'mdi-lock-open-variant-outline' }}\n                        </v-icon>\n                    </v-btn>\n                    <v-icon\n                        small\n                        :class=\"'mr-2 '+(value >= off_below && value > 0 ? 'icon-rotate' : '')\"\n                        v-if=\"type !== 'output_pin'\"\n                    >\n                        mdi-fan\n                    </v-icon>\n                    <span>{{ convertName(name) }}</span>\n                    <v-spacer></v-spacer>\n                    <small v-if=\"rpm || rpm === 0\" :class=\"'mr-3 ' + (rpm === 0 && value > 0 ? 'red--text' : '')\">\n                        {{ Math.round(rpm) }} RPM\n                    </small>\n                    <span class=\"font-weight-bold\" v-if=\"!controllable || (controllable && pwm)\">\n                        {{ Math.round(parseFloat(value)*100) }} %\n                    </span>\n                    <v-icon v-if=\"controllable && !pwm\" @click=\"switchOutputPin\">\n                        {{ value ? \"mdi-toggle-switch\" : \"mdi-toggle-switch-off-outline\" }}\n                    </v-icon>\n                </v-subheader>\n                <v-card-text class=\"py-0\" v-if=\"controllable && pwm\">\n                    <v-slider\n                        v-model=\"value\"\n                        v-touch=\"{start: resetLockTimer}\"\n                        :disabled=\"isLocked\"\n                        :min=\"0.0\"\n                        :max=\"1.0\"\n                        :step=\"0.01\"\n                        :color=\"value < off_below && value > 0 ? 'red' : undefined\"\n                        @change=\"changeSlider\"\n                        hide-details\n                    >\n                        <template v-slot:prepend>\n                            <v-icon @click=\"decrement\" :disabled=\"isLocked\">mdi-minus</v-icon>\n                        </template>\n\n                        <template v-slot:append>\n                            <v-icon @click=\"increment\" :disabled=\"isLocked\">mdi-plus</v-icon>\n                        </template>\n                    </v-slider>\n                </v-card-text>\n            </v-col>\n        </v-row>\n    </v-container>\n</template>\n\n\n<script lang=\"ts\">\nimport {convertName} from '@/plugins/helpers'\nimport {Component, Mixins, Prop, Watch} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {Debounce} from 'vue-debounce-decorator'\n\n@Component\nexport default class MiscellaneousSlider extends Mixins(BaseMixin) {\n    convertName = convertName\n    private timeout: number | undefined\n    private isLocked = false\n    private min = 0\n    private value = 0\n\n    @Prop({ type: Number, required: true }) target!: number\n    @Prop({ type: Number, default: 1 }) max!: number\n    @Prop({ type: String, default: '' }) name!: string\n    @Prop({ type: String, default: '' }) type!: string\n    @Prop({ type: Boolean, default: false }) controllable!: boolean\n    @Prop({ type: Boolean, default: false }) pwm!: boolean\n    @Prop({ type: [Number, Boolean], default: false }) rpm!: number | boolean\n    @Prop({ type: Number, default: 1 }) multi!: number\n    @Prop({ type: Number, default: 0 }) off_below!: number\n\n    @Watch('lockSliders', {immediate: true})\n    lockSlidersChanged(){\n        this.isLocked = this.lockSliders && this.isTouchDevice\n    }\n\n    startLockTimer() {\n        let t = this.lockSlidersDelay\n        if (!this.isTouchDevice || !this.lockSliders || (t <= 0)) return\n        this.timeout = setTimeout(() => this.isLocked = true, t * 1000)\n    }\n\n    resetLockTimer() {\n        clearTimeout(this.timeout)\n    }\n\n    get lockSliders() {\n        return this.$store.state.gui.uiSettings.lockSlidersOnTouchDevices\n    }\n\n    get lockSlidersDelay() {\n        return this.$store.state.gui.uiSettings.lockSlidersDelay\n    }\n\n    @Debounce(500)\n    changeSlider() {\n        this.sendCmd()\n    }\n\n    sendCmd() {\n        let gcode = ''\n\n        if (this.value < this.min) this.value = 0\n        if (this.target === this.value) return\n\n        const l_value = this.value * this.multi\n\n        if (this.type === 'fan')            gcode = 'M106 S' + (l_value).toFixed(0)\n        if (this.type === 'fan_generic')    gcode = 'SET_FAN_SPEED FAN=' + this.name + ' SPEED=' + (l_value)\n        if (this.type === 'output_pin')     gcode = 'SET_PIN PIN=' + this.name + ' VALUE=' + (l_value).toFixed(2)\n\n        if (gcode !== '') {\n            this.$store.dispatch('server/addEvent', {message: gcode, type: 'command'})\n            this.$socket.emit('printer.gcode.script', {script: gcode})\n        }\n\n        this.startLockTimer()\n    }\n\n    switchOutputPin() {\n        this.value = this.value ? 0 : 1\n        const gcode = 'SET_PIN PIN='+this.name+' VALUE='+(this.value*this.multi).toFixed(2)\n        this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: gcode })\n    }\n\n    decrement() {\n        this.value = this.value > 0 ? Math.round((this.value - 0.01) * 100) / 100 : 0\n        this.sendCmd()\n    }\n\n    increment() {\n        this.value = this.value < 1.0 ? Math.round((this.value + 0.01) * 100) / 100 : 1.0\n        if (this.value < this.off_below) this.value = this.off_below\n        this.sendCmd()\n    }\n\n    mounted() {\n        this.value = this.target\n    }\n\n    @Watch('target')\n    targetChanged(newVal: number) {\n        this.value = newVal / this.max\n    }\n}\n</script>\n"]}]}