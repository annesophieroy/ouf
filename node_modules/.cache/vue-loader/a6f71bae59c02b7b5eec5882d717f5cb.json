{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/ToolInput.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/inputs/ToolInput.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgQ29tcG9uZW50IGZyb20gJ3Z1ZS1jbGFzcy1jb21wb25lbnQnCmltcG9ydCB7TWl4aW5zLCBQcm9wLCBXYXRjaH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKaW1wb3J0IEJhc2VNaXhpbiBmcm9tICdAL2NvbXBvbmVudHMvbWl4aW5zL2Jhc2UnCgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvb2xJbnB1dCBleHRlbmRzIE1peGlucyhCYXNlTWl4aW4pIHsKICAgIHByaXZhdGUgdmFsdWU6IGFueSA9IDAKCiAgICBAUHJvcCh7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSkgcmVhZG9ubHkgbmFtZSE6IHN0cmluZwogICAgQFByb3AoeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwIH0pIHJlYWRvbmx5IHRhcmdldCE6IG51bWJlcgogICAgQFByb3AoeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0pIHJlYWRvbmx5IG1pbl90ZW1wITogbnVtYmVyCiAgICBAUHJvcCh7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSkgcmVhZG9ubHkgbWF4X3RlbXAhOiBudW1iZXIKICAgIEBQcm9wKHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9KSByZWFkb25seSBjb21tYW5kITogc3RyaW5nCiAgICBAUHJvcCh7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSkgcmVhZG9ubHkgYXR0cmlidXRlTmFtZSE6IHN0cmluZwogICAgQFByb3AoeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogW10gfSkgaXRlbXMhOiBudW1iZXJbXQoKICAgIGNoYW5nZVZhbHVlKG5ld1ZhbDogYW55KSB7CiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWwgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgIHRoaXMuc2V0VGVtcHMoKQogICAgICAgIH0KICAgIH0KCiAgICBvbkJsdXIoZXZlbnQ6IGFueSkgewogICAgICAgIGlmICgndGFyZ2V0JyBpbiBldmVudCAmJiBldmVudC50YXJnZXQgJiYgJ3ZhbHVlJyBpbiBldmVudC50YXJnZXQpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZSA/PyB0aGlzLnZhbHVlCiAgICAgICAgICAgIHRoaXMuc2V0VGVtcHMoKQogICAgICAgIH0KICAgIH0KCiAgICBzZXRUZW1wcygpOiB2b2lkIHsKICAgICAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICdvYmplY3QnKSB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS52YWx1ZSA/PyAwCiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwpIHRoaXMudmFsdWUgPSAwCgogICAgICAgIGlmICh0aGlzLnZhbHVlID4gdGhpcy5tYXhfdGVtcCkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0geyB2YWx1ZTogdGhpcy50YXJnZXQsIHRleHQ6IHRoaXMudGFyZ2V0IH0KICAgICAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IodGhpcy4kdCgnUGFuZWxzLlRvb2xzUGFuZWwuVGVtcFRvb0hpZ2gnLCB7IG5hbWU6IHRoaXMubmFtZSwgbWF4OiB0aGlzLm1heF90ZW1wIH0pKycnKQogICAgICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZSA8IHRoaXMubWluX3RlbXAgJiYgdGhpcy52YWx1ZSAhPSAwKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB7IHZhbHVlOiB0aGlzLnRhcmdldCwgdGV4dDogdGhpcy50YXJnZXQgfQogICAgICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcih0aGlzLiR0KCdQYW5lbHMuVG9vbHNQYW5lbC5UZW1wVG9vTG93JywgeyBuYW1lOiB0aGlzLm5hbWUsIG1pbjogdGhpcy5taW5fdGVtcCB9KSsnJykKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0ICE9PSBwYXJzZUZsb2F0KHRoaXMudmFsdWUpKSB7CiAgICAgICAgICAgIGNvbnN0IGdjb2RlID0gdGhpcy5jb21tYW5kKycgJyt0aGlzLmF0dHJpYnV0ZU5hbWUrJz0nK3RoaXMubmFtZSsnIFRBUkdFVD0nK3RoaXMudmFsdWUKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogZ2NvZGUsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgncHJpbnRlci5nY29kZS5zY3JpcHQnLCB7IHNjcmlwdDogZ2NvZGUgfSkKICAgICAgICB9CiAgICB9CgogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50YXJnZXQKICAgIH0KCiAgICBAV2F0Y2goJ3RhcmdldCcpCiAgICB0YXJnZXRDaGFuZ2VkKG5ld1ZhbDogbnVtYmVyKTogdm9pZCB7CiAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbAogICAgfQoKfQo="},{"version":3,"sources":["ToolInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"ToolInput.vue","sourceRoot":"src/components/inputs","sourcesContent":["<style scoped>\n    .tool-input {\n        min-width: 5rem;\n        margin-top: 0;\n        padding: 0;\n    }\n\n    .tool-input .v-input__slot { margin-bottom: 0; }\n    .tool-input .v-text-field__details { display: none; }\n\n    .tool-input input {\n        -moz-appearance: textfield;\n    }\n    .tool-input input::-webkit-outer-spin-button,\n    .tool-input input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n</style>\n\n<template>\n    <v-combobox\n        dense\n        hide-details\n        v-model=\"value\"\n        :items=\"items\"\n        item-text=\"value\"\n        type=\"number\"\n        @keyup.enter=\"setTemps\"\n        @keydown.tab=\"setTemps\"\n        @change=\"changeValue\"\n        @blur=\"onBlur\"\n        hide-spin-buttons\n    >\n    </v-combobox>\n</template>\n\n<script lang=\"ts\">\nimport Component from 'vue-class-component'\nimport {Mixins, Prop, Watch} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\n\n@Component\nexport default class ToolInput extends Mixins(BaseMixin) {\n    private value: any = 0\n\n    @Prop({ type: String, required: true }) readonly name!: string\n    @Prop({ type: Number, required: true, default: 0 }) readonly target!: number\n    @Prop({ type: Number, required: true }) readonly min_temp!: number\n    @Prop({ type: Number, required: true }) readonly max_temp!: number\n    @Prop({ type: String, required: true }) readonly command!: string\n    @Prop({ type: String, required: true }) readonly attributeName!: string\n    @Prop({ type: Array, default: [] }) items!: number[]\n\n    changeValue(newVal: any) {\n        if (typeof newVal === 'object') {\n            this.setTemps()\n        }\n    }\n\n    onBlur(event: any) {\n        if ('target' in event && event.target && 'value' in event.target) {\n            this.value = event.target.value ?? this.value\n            this.setTemps()\n        }\n    }\n\n    setTemps(): void {\n        if (typeof this.value === 'object') this.value = this.value.value ?? 0\n        if (this.value === null) this.value = 0\n\n        if (this.value > this.max_temp) {\n            this.value = { value: this.target, text: this.target }\n            this.$toast.error(this.$t('Panels.ToolsPanel.TempTooHigh', { name: this.name, max: this.max_temp })+'')\n        } else if (this.value < this.min_temp && this.value != 0) {\n            this.value = { value: this.target, text: this.target }\n            this.$toast.error(this.$t('Panels.ToolsPanel.TempTooLow', { name: this.name, min: this.min_temp })+'')\n        } else if (this.target !== parseFloat(this.value)) {\n            const gcode = this.command+' '+this.attributeName+'='+this.name+' TARGET='+this.value\n            this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n            this.$socket.emit('printer.gcode.script', { script: gcode })\n        }\n    }\n\n    mounted() {\n        this.value = this.target\n    }\n\n    @Watch('target')\n    targetChanged(newVal: number): void {\n        this.value = newVal\n    }\n\n}\n</script>"]}]}