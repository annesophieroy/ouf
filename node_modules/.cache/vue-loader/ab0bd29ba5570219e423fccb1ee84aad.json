{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Timelapse/TimelapseFilesPanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Timelapse/TimelapseFilesPanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnN9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnQC9jb21wb25lbnRzL21peGlucy9iYXNlJwppbXBvcnQge2Zvcm1hdEZpbGVzaXplLCBmb3JtYXREYXRlLCBzb3J0RmlsZXN9IGZyb20gJ0AvcGx1Z2lucy9oZWxwZXJzJwppbXBvcnQge0ZpbGVTdGF0ZUZpbGV9IGZyb20gJ0Avc3RvcmUvZmlsZXMvdHlwZXMnCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJwoKaW50ZXJmYWNlIGRpYWxvZ1JlbmFtZU9iamVjdCB7CiAgICBzaG93OiBib29sZWFuCiAgICBuZXdOYW1lOiBzdHJpbmcKICAgIGl0ZW06IEZpbGVTdGF0ZUZpbGUKfQoKQENvbXBvbmVudCh7CiAgICBjb21wb25lbnRzOiB7UGFuZWx9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVsYXBzZUZpbGVzUGFuZWwgZXh0ZW5kcyBNaXhpbnMoQmFzZU1peGluKSB7CiAgICBmb3JtYXREYXRlID0gZm9ybWF0RGF0ZQogICAgZm9ybWF0RmlsZXNpemUgPSBmb3JtYXRGaWxlc2l6ZQogICAgc29ydEZpbGVzID0gc29ydEZpbGVzCgogICAgJHJlZnMhOiB7CiAgICAgICAgaW5wdXRGaWVsZFJlbmFtZUZpbGU6IGFueSwKICAgICAgICBpbnB1dEZpZWxkQ3JlYXRlRGlyZWN0b3J5OiBhbnksCiAgICAgICAgaW5wdXRGaWVsZFJlbmFtZURpcmVjdG9yeTogYW55LAogICAgfQoKICAgIHByaXZhdGUgc2VhcmNoID0gJycKICAgIHByaXZhdGUgYm9vbFZpZGVvRGlhbG9nID0gZmFsc2UKICAgIHByaXZhdGUgdmlkZW9EaWFsb2dGaWxlbmFtZSA9ICcnCgogICAgcHJpdmF0ZSBkaWFsb2dDcmVhdGVEaXJlY3RvcnkgPSB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgbmFtZTogJycKICAgIH0KCiAgICBwcml2YXRlIGNvbnRleHRNZW51ID0gewogICAgICAgIHNob3duOiBmYWxzZSwKICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgdG91Y2hUaW1lcjogdW5kZWZpbmVkLAogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICBpdGVtOiB7CiAgICAgICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgZGlhbG9nUmVuYW1lRmlsZTogZGlhbG9nUmVuYW1lT2JqZWN0ID0gewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIG5ld05hbWU6ICcnLAogICAgICAgIGl0ZW06IHsKICAgICAgICAgICAgaXNEaXJlY3Rvcnk6IGZhbHNlLAogICAgICAgICAgICBmaWxlbmFtZTogJycsCiAgICAgICAgICAgIHBlcm1pc3Npb25zOiAnJywKICAgICAgICAgICAgbW9kaWZpZWQ6IG5ldyBEYXRlKCkKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBkaWFsb2dSZW5hbWVEaXJlY3Rvcnk6IGRpYWxvZ1JlbmFtZU9iamVjdCA9IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBuZXdOYW1lOiAnJywKICAgICAgICBpdGVtOiB7CiAgICAgICAgICAgIGlzRGlyZWN0b3J5OiBmYWxzZSwKICAgICAgICAgICAgZmlsZW5hbWU6ICcnLAogICAgICAgICAgICBwZXJtaXNzaW9uczogJycsCiAgICAgICAgICAgIG1vZGlmaWVkOiBuZXcgRGF0ZSgpCiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgZGlhbG9nRGVsZXRlRGlyZWN0b3J5OiBkaWFsb2dSZW5hbWVPYmplY3QgPSB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgbmV3TmFtZTogJycsCiAgICAgICAgaXRlbTogewogICAgICAgICAgICBpc0RpcmVjdG9yeTogZmFsc2UsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICAgICAgcGVybWlzc2lvbnM6ICcnLAogICAgICAgICAgICBtb2RpZmllZDogbmV3IERhdGUoKQogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGlucHV0X3J1bGVzID0gWwogICAgICAgICh2YWx1ZTogc3RyaW5nKSA9PiB2YWx1ZS5pbmRleE9mKCcgJykgPT09IC0xIHx8ICdOYW1lIGNvbnRhaW5zIHNwYWNlcyEnCiAgICBdCgogICAgZ2V0IGhlYWRlcnMoKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgeyB0ZXh0OiAnJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLCAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywgIGNvbmZpZ2FibGU6IGZhbHNlLCAgdmlzaWJsZTogdHJ1ZSwgZmlsdGVyYWJsZTogZmFsc2UgfSwKICAgICAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCdUaW1lbGFwc2UuTmFtZScpLCAgICAgICAgICAgICAgdmFsdWU6ICdmaWxlbmFtZScsICAgICAgICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywgIGNvbmZpZ2FibGU6IGZhbHNlLCAgdmlzaWJsZTogdHJ1ZSB9LAogICAgICAgICAgICB7IHRleHQ6IHRoaXMuJHQoJ1RpbWVsYXBzZS5GaWxlc2l6ZScpLCAgICAgICAgICB2YWx1ZTogJ3NpemUnLCAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ3JpZ2h0JywgY29uZmlnYWJsZTogdHJ1ZSwgICB2aXNpYmxlOiB0cnVlIH0sCiAgICAgICAgICAgIHsgdGV4dDogdGhpcy4kdCgnVGltZWxhcHNlLkxhc3RNb2RpZmllZCcpLCAgICAgIHZhbHVlOiAnbW9kaWZpZWQnLCAgICAgICAgICAgICAgICAgIGFsaWduOiAncmlnaHQnLCBjb25maWdhYmxlOiB0cnVlLCAgIHZpc2libGU6IHRydWUgfSwKICAgICAgICBdCiAgICB9CgogICAgZ2V0IGRpcmVjdG9yeSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snZmlsZXMvZ2V0RGlyZWN0b3J5J10odGhpcy5jdXJyZW50UGF0aCkKICAgIH0KCiAgICBnZXQgZGlza191c2FnZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rvcnk/LmRpc2tfdXNhZ2UgPz8geyB1c2VkOiAwLCBmcmVlOiAwLCB0b3RhbDogMH0KICAgIH0KCiAgICBnZXQgZGlyZWN0b3J5UGVybWlzc2lvbnMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0b3J5Py5wZXJtaXNzaW9ucyA/PyAncicKICAgIH0KCiAgICBnZXQgZmlsZXMoKSB7CiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmRpcmVjdG9yeT8uY2hpbGRyZW5zID8/IFtdXQogICAgfQoKICAgIGdldCBzb3J0QnkoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3Lmdjb2RlZmlsZXMuc29ydEJ5ID8/ICdtb2RpZmllZCcKICAgIH0KCiAgICBzZXQgc29ydEJ5KG5ld1ZhbCkgewogICAgICAgIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkgbmV3VmFsID0gJ21vZGlmaWVkJwoKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy50aW1lbGFwc2Uuc29ydEJ5JywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBzb3J0RGVzYygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuZ2NvZGVmaWxlcy5zb3J0RGVzYyA/PyB0cnVlCiAgICB9CgogICAgc2V0IHNvcnREZXNjKG5ld1ZhbCkgewogICAgICAgIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkgbmV3VmFsID0gZmFsc2UKCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ3ZpZXcudGltZWxhcHNlLnNvcnREZXNjJywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBjb3VudFBlclBhZ2UoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3Lmdjb2RlZmlsZXM/LmNvdW50UGVyUGFnZSA/PyAxMAogICAgfQoKICAgIHNldCBjb3VudFBlclBhZ2UobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ3ZpZXcudGltZWxhcHNlLmNvdW50UGVyUGFnZScsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgZGlzcGxheUZpbGVzKCkgewogICAgICAgIHJldHVybiB0aGlzLmZpbGVzPy5maWx0ZXIoKGZpbGUpID0+IHsKICAgICAgICAgICAgaWYgKGZpbGUuaXNEaXJlY3RvcnkpIHJldHVybiB0cnVlCgogICAgICAgICAgICByZXR1cm4gKGZpbGUuZmlsZW5hbWUuZW5kc1dpdGgoJ21wNCcpIHx8IGZpbGUuZmlsZW5hbWUuZW5kc1dpdGgoJ3ppcCcpKQogICAgICAgIH0pID8/IFtdCiAgICB9CgogICAgZ2V0IGN1cnJlbnRQYXRoKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudmlldy50aW1lbGFwc2UuY3VycmVudFBhdGgKICAgIH0KCiAgICBzZXQgY3VycmVudFBhdGgobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZ1dpdGhvdXRVcGxvYWQnLCB7IG5hbWU6ICd2aWV3LnRpbWVsYXBzZS5jdXJyZW50UGF0aCcsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBjcmVhdGVEaXJlY3RvcnkoKSB7CiAgICAgICAgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZSA9ICcnCiAgICAgICAgdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3Rvcnkuc2hvdyA9IHRydWUKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXRGaWVsZENyZWF0ZURpcmVjdG9yeT8uZm9jdXMoKQogICAgICAgIH0sIDIwMCkKICAgIH0KCiAgICBjcmVhdGVEaXJlY3RvcnlBY3Rpb24oKSB7CiAgICAgICAgaWYgKHRoaXMuZGlhbG9nQ3JlYXRlRGlyZWN0b3J5Lm5hbWUubGVuZ3RoICYmIHRoaXMuZGlhbG9nQ3JlYXRlRGlyZWN0b3J5Lm5hbWUuaW5kZXhPZignICcpID09PSAtMSkgewogICAgICAgICAgICB0aGlzLmRpYWxvZ0NyZWF0ZURpcmVjdG9yeS5zaG93ID0gZmFsc2UKICAgICAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5wb3N0X2RpcmVjdG9yeScsIHsgcGF0aDogdGhpcy5jdXJyZW50UGF0aCsnLycrdGhpcy5kaWFsb2dDcmVhdGVEaXJlY3RvcnkubmFtZSB9LCB7IGFjdGlvbjogJ2ZpbGVzL2dldENyZWF0ZURpcicgfSkKICAgICAgICB9CiAgICB9CgogICAgcmVmcmVzaEZpbGVMaXN0KCkgewogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMuZ2V0X2RpcmVjdG9yeScsIHsgcGF0aDogdGhpcy5jdXJyZW50UGF0aCB9LCB7IGFjdGlvbjogJ2ZpbGVzL2dldERpcmVjdG9yeScgfSkKICAgIH0KCiAgICBhZHZhbmNlZFNlYXJjaCh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyLCBzZWFyY2g6IHN0cmluZykgewogICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmCiAgICAgICAgICAgIHNlYXJjaCAhPSBudWxsICYmCiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYKICAgICAgICAgICAgdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoLnRvTG93ZXJDYXNlKCkpICE9PSAtMQogICAgfQoKICAgIGdldFRodW1ibmFpbChpdGVtOiBGaWxlU3RhdGVGaWxlKSB7CiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBpdGVtLmZpbGVuYW1lLnNsaWNlKDAsIGl0ZW0uZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSkKICAgICAgICBjb25zdCBwcmV2aWV3ID0gdGhpcy5maWxlcz8uZmluZCgoZmlsZSkgPT4gZmlsZS5maWxlbmFtZSA9PT0gZmlsZW5hbWUrJy5qcGcnKQogICAgICAgIGlmIChwcmV2aWV3KSB7CiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmFwaVVybH0vc2VydmVyL2ZpbGVzLyR7ZW5jb2RlVVJJKHRoaXMuY3VycmVudFBhdGgpfS8ke2VuY29kZVVSSShwcmV2aWV3LmZpbGVuYW1lKX0/dGltZXN0YW1wPSR7cHJldmlldy5tb2RpZmllZC5nZXRUaW1lKCl9YAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICcnCiAgICB9CgogICAgY2xpY2tSb3coaXRlbTogRmlsZVN0YXRlRmlsZSwgZm9yY2UgPSBmYWxzZSkgewogICAgICAgIGlmICghdGhpcy5jb250ZXh0TWVudS5zaG93biB8fCBmb3JjZSkgewogICAgICAgICAgICBpZiAoZm9yY2UpIHRoaXMuY29udGV4dE1lbnUuc2hvd24gPSBmYWxzZQoKICAgICAgICAgICAgaWYgKGl0ZW0uaXNEaXJlY3RvcnkpIHRoaXMuY3VycmVudFBhdGggKz0gJy8nICsgaXRlbS5maWxlbmFtZQogICAgICAgICAgICBlbHNlIGlmIChpdGVtLmZpbGVuYW1lLmVuZHNXaXRoKCd6aXAnKSkgewogICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZEZpbGUoaXRlbS5maWxlbmFtZSkKICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmZpbGVuYW1lLmVuZHNXaXRoKCdtcDQnKSkgewogICAgICAgICAgICAgICAgdGhpcy52aWRlb0RpYWxvZ0ZpbGVuYW1lID0gIGVuY29kZVVSSShgJHt0aGlzLmN1cnJlbnRQYXRofS8ke2l0ZW0uZmlsZW5hbWV9YCkKICAgICAgICAgICAgICAgIHRoaXMuYm9vbFZpZGVvRGlhbG9nID0gdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGNsaWNrUm93R29CYWNrKCkgewogICAgICAgIHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmN1cnJlbnRQYXRoLnN1YnN0cigwLCB0aGlzLmN1cnJlbnRQYXRoLmxhc3RJbmRleE9mKCcvJykpCiAgICB9CgogICAgc2hvd0NvbnRleHRNZW51IChlOiBhbnksIGl0ZW06IEZpbGVTdGF0ZUZpbGUpIHsKICAgICAgICBpZiAoIXRoaXMuY29udGV4dE1lbnUuc2hvd24pIHsKICAgICAgICAgICAgZT8ucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnNob3duID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnggPSBlPy5jbGllbnRYIHx8IGU/LnBhZ2VYIHx8IHdpbmRvdy5zY3JlZW5YIC8gMgogICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnkgPSBlPy5jbGllbnRZIHx8IGU/LnBhZ2VZIHx8IHdpbmRvdy5zY3JlZW5ZIC8gMgogICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51Lml0ZW0gPSBpdGVtCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuc2hvd24gPSB0cnVlCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQoKICAgIGV4aXN0c0ZyYW1lc1ppcChpdGVtOiBGaWxlU3RhdGVGaWxlKSB7CiAgICAgICAgY29uc3QgcG9zTGFzdFBvaW50ID0gaXRlbS5maWxlbmFtZS5sYXN0SW5kZXhPZignLicpCiAgICAgICAgY29uc3QgemlwRmlsZW5hbWUgPSBpdGVtLmZpbGVuYW1lLnN1YnN0cigwLCBwb3NMYXN0UG9pbnQpKycuemlwJwoKICAgICAgICByZXR1cm4gKHRoaXMuZmlsZXMuZmluZEluZGV4KChmaWxlKSA9PiBmaWxlLmZpbGVuYW1lID09PSB6aXBGaWxlbmFtZSkgIT09IC0xKQogICAgfQoKICAgIGRvd25sb2FkRmlsZShmaWxlbmFtZTogc3RyaW5nKSB7CiAgICAgICAgY29uc3QgcGF0aCA9ICh0aGlzLmN1cnJlbnRQYXRoKycvJytmaWxlbmFtZSkKICAgICAgICBjb25zdCBocmVmID0gdGhpcy5hcGlVcmwgKyAnL3NlcnZlci9maWxlcy8nICsgZW5jb2RlVVJJKHBhdGgpCgogICAgICAgIHdpbmRvdy5vcGVuKGhyZWYpCiAgICB9CgogICAgcmVuYW1lRmlsZShpdGVtOiBGaWxlU3RhdGVGaWxlKSB7CiAgICAgICAgY29uc3QgcG9zTGFzdFBvaW50ID0gaXRlbS5maWxlbmFtZS5sYXN0SW5kZXhPZignLicpCiAgICAgICAgdGhpcy5kaWFsb2dSZW5hbWVGaWxlLm5ld05hbWUgPSBpdGVtLmZpbGVuYW1lLnN1YnN0cigwLCBwb3NMYXN0UG9pbnQpCgogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5pdGVtID0gaXRlbQogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5zaG93ID0gdHJ1ZQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dEZpZWxkUmVuYW1lRmlsZT8uZm9jdXMoKQogICAgICAgIH0sIDIwMCkKICAgIH0KCiAgICByZW5hbWVGaWxlQWN0aW9uKCkgewogICAgICAgIGNvbnN0IHBvc0xhc3RQb2ludCA9IHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5pdGVtLmZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykKICAgICAgICBjb25zdCBvbGROYW1lV2l0aG91dEV4dGVuc2lvbiA9IHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5pdGVtLmZpbGVuYW1lLnN1YnN0cigwLCBwb3NMYXN0UG9pbnQpCgogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRmlsZS5zaG93ID0gZmFsc2UKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnc2VydmVyLmZpbGVzLm1vdmUnLCB7CiAgICAgICAgICAgIHNvdXJjZTogdGhpcy5jdXJyZW50UGF0aCsnLycrdGhpcy5kaWFsb2dSZW5hbWVGaWxlLml0ZW0uZmlsZW5hbWUsCiAgICAgICAgICAgIGRlc3Q6IHRoaXMuY3VycmVudFBhdGgrJy8nK3RoaXMuZGlhbG9nUmVuYW1lRmlsZS5uZXdOYW1lKycubXA0JwogICAgICAgIH0sIHsgYWN0aW9uOiAnZmlsZXMvZ2V0TW92ZScgfSkKCiAgICAgICAgY29uc3QgZmlsZUpwZyA9IHRoaXMuZmlsZXMuZmluZCgoZmlsZSkgPT4gZmlsZS5maWxlbmFtZSA9PT0gb2xkTmFtZVdpdGhvdXRFeHRlbnNpb24rJy5qcGcnKQogICAgICAgIGlmIChmaWxlSnBnKSB7CiAgICAgICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMubW92ZScsIHsKICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5jdXJyZW50UGF0aCsnLycrb2xkTmFtZVdpdGhvdXRFeHRlbnNpb24rJy5qcGcnLAogICAgICAgICAgICAgICAgZGVzdDogdGhpcy5jdXJyZW50UGF0aCsnLycrdGhpcy5kaWFsb2dSZW5hbWVGaWxlLm5ld05hbWUrJy5qcGcnCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQoKICAgIHJlbmFtZURpcmVjdG9yeShpdGVtOiBGaWxlU3RhdGVGaWxlKSB7CiAgICAgICAgdGhpcy5kaWFsb2dSZW5hbWVEaXJlY3RvcnkuaXRlbSA9IGl0ZW0KICAgICAgICB0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5uZXdOYW1lID0gaXRlbS5maWxlbmFtZQogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5LnNob3cgPSB0cnVlCgogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0RmllbGRSZW5hbWVEaXJlY3Rvcnk/LmZvY3VzKCkKICAgICAgICB9LCAyMDApCiAgICB9CgogICAgcmVuYW1lRGlyZWN0b3J5QWN0aW9uKCkgewogICAgICAgIHRoaXMuZGlhbG9nUmVuYW1lRGlyZWN0b3J5LnNob3cgPSBmYWxzZQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMubW92ZScsIHsKICAgICAgICAgICAgc291cmNlOiB0aGlzLmN1cnJlbnRQYXRoKycvJyt0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5pdGVtLmZpbGVuYW1lLAogICAgICAgICAgICBkZXN0OiB0aGlzLmN1cnJlbnRQYXRoKycvJyt0aGlzLmRpYWxvZ1JlbmFtZURpcmVjdG9yeS5uZXdOYW1lCiAgICAgICAgfSwgeyBhY3Rpb246ICdmaWxlcy9nZXRNb3ZlJyB9KQogICAgfQoKICAgIHJlbW92ZUZpbGUoKSB7CiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWUuc2xpY2UoMCwgdGhpcy5jb250ZXh0TWVudS5pdGVtLmZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykpCiAgICAgICAgY29uc3QgcHJldmlld0ZpbGVuYW1lID0gZmlsZW5hbWUrJy5qcGcnCiAgICAgICAgY29uc3QgcHJldmlld0V4aXN0cyA9ICh0aGlzLmZpbGVzLmZpbmRJbmRleCgoZmlsZSkgPT4gZmlsZS5maWxlbmFtZSA9PT0gcHJldmlld0ZpbGVuYW1lKSAhPT0gLTEpCgogICAgICAgIGlmKHByZXZpZXdFeGlzdHMpIHRoaXMuJHNvY2tldC5lbWl0KCdzZXJ2ZXIuZmlsZXMuZGVsZXRlX2ZpbGUnLCB7IHBhdGg6IHRoaXMuY3VycmVudFBhdGgrJy8nK3ByZXZpZXdGaWxlbmFtZSB9LCB7IGFjdGlvbjogJ2ZpbGVzL2dldERlbGV0ZUZpbGUnIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5kZWxldGVfZmlsZScsIHsgcGF0aDogdGhpcy5jdXJyZW50UGF0aCsnLycrdGhpcy5jb250ZXh0TWVudS5pdGVtLmZpbGVuYW1lIH0sIHsgYWN0aW9uOiAnZmlsZXMvZ2V0RGVsZXRlRmlsZScgfSkKICAgIH0KCiAgICBkZWxldGVEaXJlY3RvcnkoaXRlbTogRmlsZVN0YXRlRmlsZSkgewogICAgICAgIHRoaXMuZGlhbG9nRGVsZXRlRGlyZWN0b3J5Lml0ZW0gPSBpdGVtCiAgICAgICAgdGhpcy5kaWFsb2dEZWxldGVEaXJlY3Rvcnkuc2hvdyA9IHRydWUKICAgIH0KCiAgICBkZWxldGVEaXJlY3RvcnlBY3Rpb24oKSB7CiAgICAgICAgdGhpcy5kaWFsb2dEZWxldGVEaXJlY3Rvcnkuc2hvdyA9IGZhbHNlCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3NlcnZlci5maWxlcy5kZWxldGVfZGlyZWN0b3J5JywgeyBwYXRoOiB0aGlzLmN1cnJlbnRQYXRoKycvJyt0aGlzLmNvbnRleHRNZW51Lml0ZW0uZmlsZW5hbWUsIGZvcmNlOiB0cnVlIH0sIHsgYWN0aW9uOiAnZmlsZXMvZ2V0RGVsZXRlRGlyJyB9KQogICAgfQp9Cg=="},{"version":3,"sources":["TimelapseFilesPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"TimelapseFilesPanel.vue","sourceRoot":"src/components/panels/Timelapse","sourcesContent":["<style scoped>\n.v-data-table .v-data-table-header__icon {\n    margin-left: 7px;\n}\n\n.v-data-table th {\n    white-space: nowrap;\n}\n\n.v-data-table .file-list-cursor:hover {\n    cursor: pointer;\n}\n\n</style>\n\n<template>\n    <div>\n        <panel :title=\"$t('Timelapse.TimelapseFiles')\" icon=\"mdi-file-document-multiple-outline\" card-class=\"timelapse-files-panel\">\n            <v-card-text>\n                <v-row>\n                    <v-col class=\"col-12 d-flex align-center\">\n                        <v-text-field\n                            v-model=\"search\"\n                            append-icon=\"mdi-magnify\"\n                            :label=\"$t('Timelapse.Search')\"\n                            single-line\n                            outlined\n                            clearable\n                            hide-details\n                            dense\n                            style=\"max-width: 300px;\"\n                        ></v-text-field>\n                        <v-spacer></v-spacer>\n                        <v-btn v-if=\"this.directoryPermissions.includes('w')\" @click=\"createDirectory\" :title=\"$t('Timelapse.CreateNewDirectory')\" class=\"px-2 minwidth-0 ml-3\"><v-icon>mdi-folder-plus</v-icon></v-btn>\n                        <v-btn @click=\"refreshFileList\" :title=\"$t('Timelapse.RefreshCurrentDirectory')\" class=\"px-2 minwidth-0 ml-3\"><v-icon>mdi-refresh</v-icon></v-btn>\n                    </v-col>\n                </v-row>\n            </v-card-text>\n            <v-card-text>\n                <v-row>\n                    <v-col class=\"col-12 py-2 d-flex align-center\">\n                        <span><b>{{ $t('Timelapse.CurrentPath') }}:</b> {{ this.currentPath !== 'timelapse' ? \"/\"+this.currentPath.substring(10) : \"/\" }}</span>\n                        <v-spacer></v-spacer>\n                        <template v-if=\"this.disk_usage !== null\">\n                            <v-tooltip top>\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <span v-bind=\"attrs\" v-on=\"on\">\n                                        <b>{{ $t('Timelapse.FreeDisk') }}:</b> {{ formatFilesize(disk_usage.free) }}\n                                    </span>\n                                </template>\n                                <span>\n                                    {{ $t('Timelapse.Used') }}: {{ formatFilesize(this.disk_usage.used) }}<br />\n                                    {{ $t('Timelapse.Free') }}: {{ formatFilesize(this.disk_usage.free) }}<br />\n                                    {{ $t('Timelapse.Total') }}: {{ formatFilesize(this.disk_usage.total) }}\n                                </span>\n                            </v-tooltip>\n                        </template>\n                    </v-col>\n                </v-row>\n            </v-card-text>\n            <v-divider class=\"mb-3\"></v-divider>\n            <v-data-table\n                :items=\"displayFiles\"\n                class=\"files-table\"\n                :headers=\"headers\"\n                :custom-sort=\"sortFiles\"\n                :sort-by.sync=\"sortBy\"\n                :sort-desc.sync=\"sortDesc\"\n                :items-per-page.sync=\"countPerPage\"\n                :footer-props=\"{\n                    itemsPerPageText: $t('Timelapse.Files'),\n                    itemsPerPageAllText: $t('Timelapse.AllFiles'),\n                    itemsPerPageOptions: [10,25,50,100,-1]\n                }\"\n                item-key=\"name\"\n                :search=\"search\"\n                :custom-filter=\"advancedSearch\"\n                mobile-breakpoint=\"0\">\n\n                <template slot=\"items\">\n                    <td v-for=\"header in headers\" v-bind:key=\"header.value\">{{ header.text }}</td>\n                </template>\n\n                <template #no-data>\n                    <div class=\"text-center font-italic\">{{ $t('Timelapse.Empty') }}</div>\n                </template>\n\n                <template slot=\"body.prepend\" v-if=\"(currentPath !== 'timelapse')\">\n                    <tr\n                        class=\"file-list-cursor\"\n                        @click=\"clickRowGoBack\"\n                    >\n                        <td class=\"pr-0 text-center\" style=\"width: 32px;\"><v-icon>mdi-folder-upload</v-icon></td>\n                        <td class=\" \" :colspan=\"headers.length\">..</td>\n                    </tr>\n                </template>\n\n                <template #item=\"{ index, item }\">\n                    <tr\n                        :key=\"`${index} ${item.filename}`\"\n                        v-longpress:600=\"(e) => showContextMenu(e, item)\"\n                        @contextmenu=\"showContextMenu($event, item)\"\n                        @click=\"clickRow(item)\"\n                        class=\"file-list-cursor user-select-none\"\n                    >\n                        <td class=\"pr-0 text-center\" style=\"width: 32px;\">\n                            <template v-if=\"item.isDirectory\">\n                                <v-icon>mdi-folder</v-icon>\n                            </template>\n                            <template v-else-if=\"item.filename.endsWith('zip')\">\n                                <v-icon>mdi-folder-zip-outline</v-icon>\n                            </template>\n                            <template v-else-if=\"getThumbnail(item)\">\n                                <v-tooltip v-if=\"!item.isDirectory && getThumbnail(item)\" top content-class=\"tooltip__content-opacity1\">\n                                    <template v-slot:activator=\"{ on, attrs }\">\n                                        <vue-load-image>\n                                            <img slot=\"image\" :src=\"getThumbnail(item)\" :alt=\"item.filename\" width=\"32\" v-bind=\"attrs\" v-on=\"on\" />\n                                            <v-progress-circular slot=\"preloader\" indeterminate color=\"primary\"></v-progress-circular>\n                                            <v-icon slot=\"error\">mdi-file</v-icon>\n                                        </vue-load-image>\n                                    </template>\n                                    <span><img :src=\"getThumbnail(item)\" :alt=\"item.filename\" width=\"250\" /></span>\n                                </v-tooltip>\n                            </template>\n                            <template v-else>\n                                <v-icon>mdi-file</v-icon>\n                            </template>\n                        </td>\n                        <td class=\" \">{{ item.filename }}</td>\n                        <td class=\"text-no-wrap text-right\" v-if=\"headers.find(header => header.value === 'size').visible\">{{ item.isDirectory ? '--' : formatFilesize(item.size) }}</td>\n                        <td class=\"text-right\" v-if=\"headers.find(header => header.value === 'modified').visible\">{{ formatDate(item.modified) }}</td>\n                    </tr>\n                </template>\n            </v-data-table>\n        </panel>\n        <v-menu v-model=\"contextMenu.shown\" :position-x=\"contextMenu.x\" :position-y=\"contextMenu.y\" absolute offset-y>\n            <v-list>\n                <v-list-item @click=\"downloadFile(contextMenu.item.filename)\" v-if=\"!contextMenu.item.isDirectory\">\n                    <v-icon left>mdi-cloud-download</v-icon> {{ $t('Timelapse.Download')}}\n                </v-list-item>\n                <v-list-item @click=\"renameDirectory(contextMenu.item)\" v-if=\"contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon left>mdi-rename-box</v-icon> {{ $t('Timelapse.Rename')}}\n                </v-list-item>\n                <v-list-item @click=\"renameFile(contextMenu.item)\" v-if=\"!contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon left>mdi-rename-box</v-icon> {{ $t('Timelapse.Rename')}}\n                </v-list-item>\n                <v-list-item @click=\"removeFile\" v-if=\"!contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon left>mdi-delete</v-icon> {{ $t('Timelapse.Delete')}}\n                </v-list-item>\n                <v-list-item @click=\"deleteDirectory(contextMenu.item)\" v-if=\"contextMenu.item.isDirectory && contextMenu.item.permissions.includes('w')\">\n                    <v-icon left>mdi-delete</v-icon> {{ $t('Timelapse.Delete')}}\n                </v-list-item>\n            </v-list>\n        </v-menu>\n        <v-dialog v-model=\"dialogRenameFile.show\" max-width=\"400\">\n            <panel :title=\"$t('Timelapse.RenameFile')\" card-class=\"gcode-files-rename-file-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogRenameFile.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        v-model=\"dialogRenameFile.newName\"\n                        :label=\"$t('Timelapse.Name')\"\n                        ref=\"inputFieldRenameFile\"\n                        @keypress.enter=\"renameFileAction\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogRenameFile.show = false\">{{ $t('Timelapse.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"renameFileAction\">{{ $t('Timelapse.Rename') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogCreateDirectory.show\" max-width=\"400\">\n            <panel :title=\"$t('Timelapse.NewDirectory')\" card-class=\"gcode-files-new-directory-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogCreateDirectory.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        v-model=\"dialogCreateDirectory.name\"\n                        ref=\"inputFieldCreateDirectory\"\n                        @keypress.enter=\"createDirectoryAction\"\n                        :label=\"$t('Timelapse.Name')\"\n                        :rules=\"input_rules\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogCreateDirectory.show = false\">{{ $t('Timelapse.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"createDirectoryAction\">{{ $t('Timelapse.Create') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogRenameDirectory.show\" max-width=\"400\">\n            <panel :title=\"$t('Timelapse.RenameDirectory')\" card-class=\"gcode-files-rename-directory-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogRenameDirectory.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <v-text-field\n                        v-model=\"dialogRenameDirectory.newName\"\n                        ref=\"inputFieldRenameDirectory\"\n                        :label=\"$t('Timelapse.Name')\"\n                        @keyup.enter=\"renameDirectoryAction\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogRenameDirectory.show = false\">{{ $t('Timelapse.Cancel') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"renameDirectoryAction\">{{ $t('Timelapse.Rename') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"dialogDeleteDirectory.show\" max-width=\"400\">\n            <panel :title=\"$t('Timelapse.DeleteDirectory')\" card-class=\"gcode-files-delete-directory-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"dialogDeleteDirectory.show = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text>\n                    <p class=\"mb-0\">{{ $t('Timelapse.DeleteDirectoryQuestion', { name: dialogDeleteDirectory.item.filename } )}}</p>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"\" text @click=\"dialogDeleteDirectory.show = false\">{{ $t('Timelapse.Cancel') }}</v-btn>\n                    <v-btn color=\"error\" text @click=\"deleteDirectoryAction\">{{ $t('Timelapse.Delete') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"boolVideoDialog\" :max-width=\"700\">\n            <panel :title=\"$t('Timelapse.Video')\" icon=\"mdi-file-video\" card-class=\"timelapse-video-dialog\" :margin-bottom=\"false\">\n                <template v-slot:buttons>\n                    <v-btn icon tile @click=\"boolVideoDialog = false\"><v-icon>mdi-close-thick</v-icon></v-btn>\n                </template>\n                <v-card-text class=\"\">\n                    <v-row>\n                        <v-col class=\"pb-0\">\n                            <video :src=\"hostUrl+'server/files/'+videoDialogFilename\" controls style=\"width: 100%;\">\n                                Sorry, your browser doesn't support embedded videos,\n                                but don't worry, you can <a :href=\"hostUrl+'server/files/'+videoDialogFilename\">download it</a>\n                                and watch it with your favorite video player!\n                            </video>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col class=\"text-center\">\n                            <v-btn text color=\"primary\" :href=\"hostUrl+'server/files/'+videoDialogFilename\" target=\"_blank\">{{ $t('Timelapse.Download') }}</v-btn>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n            </panel>\n        </v-dialog>\n    </div>\n</template>\n<script lang=\"ts\">\nimport {Component, Mixins} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {formatFilesize, formatDate, sortFiles} from '@/plugins/helpers'\nimport {FileStateFile} from '@/store/files/types'\nimport Panel from '@/components/ui/Panel.vue'\n\ninterface dialogRenameObject {\n    show: boolean\n    newName: string\n    item: FileStateFile\n}\n\n@Component({\n    components: {Panel}\n})\nexport default class TimelapseFilesPanel extends Mixins(BaseMixin) {\n    formatDate = formatDate\n    formatFilesize = formatFilesize\n    sortFiles = sortFiles\n\n    $refs!: {\n        inputFieldRenameFile: any,\n        inputFieldCreateDirectory: any,\n        inputFieldRenameDirectory: any,\n    }\n\n    private search = ''\n    private boolVideoDialog = false\n    private videoDialogFilename = ''\n\n    private dialogCreateDirectory = {\n        show: false,\n        name: ''\n    }\n\n    private contextMenu = {\n        shown: false,\n        isDirectory: false,\n        touchTimer: undefined,\n        x: 0,\n        y: 0,\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n\n    private dialogRenameFile: dialogRenameObject = {\n        show: false,\n        newName: '',\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n\n    private dialogRenameDirectory: dialogRenameObject = {\n        show: false,\n        newName: '',\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n\n    private dialogDeleteDirectory: dialogRenameObject = {\n        show: false,\n        newName: '',\n        item: {\n            isDirectory: false,\n            filename: '',\n            permissions: '',\n            modified: new Date()\n        }\n    }\n\n    private input_rules = [\n        (value: string) => value.indexOf(' ') === -1 || 'Name contains spaces!'\n    ]\n\n    get headers() {\n        return [\n            { text: '',                                     value: '',                          align: 'left',  configable: false,  visible: true, filterable: false },\n            { text: this.$t('Timelapse.Name'),              value: 'filename',                  align: 'left',  configable: false,  visible: true },\n            { text: this.$t('Timelapse.Filesize'),          value: 'size',                      align: 'right', configable: true,   visible: true },\n            { text: this.$t('Timelapse.LastModified'),      value: 'modified',                  align: 'right', configable: true,   visible: true },\n        ]\n    }\n\n    get directory() {\n        return this.$store.getters['files/getDirectory'](this.currentPath)\n    }\n\n    get disk_usage() {\n        return this.directory?.disk_usage ?? { used: 0, free: 0, total: 0}\n    }\n\n    get directoryPermissions() {\n        return this.directory?.permissions ?? 'r'\n    }\n\n    get files() {\n        return [...this.directory?.childrens ?? []]\n    }\n\n    get sortBy() {\n        return this.$store.state.gui.view.gcodefiles.sortBy ?? 'modified'\n    }\n\n    set sortBy(newVal) {\n        if (newVal === undefined) newVal = 'modified'\n\n        this.$store.dispatch('gui/saveSetting', { name: 'view.timelapse.sortBy', value: newVal })\n    }\n\n    get sortDesc() {\n        return this.$store.state.gui.view.gcodefiles.sortDesc ?? true\n    }\n\n    set sortDesc(newVal) {\n        if (newVal === undefined) newVal = false\n\n        this.$store.dispatch('gui/saveSetting', { name: 'view.timelapse.sortDesc', value: newVal })\n    }\n\n    get countPerPage() {\n        return this.$store.state.gui.view.gcodefiles?.countPerPage ?? 10\n    }\n\n    set countPerPage(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.timelapse.countPerPage', value: newVal })\n    }\n\n    get displayFiles() {\n        return this.files?.filter((file) => {\n            if (file.isDirectory) return true\n\n            return (file.filename.endsWith('mp4') || file.filename.endsWith('zip'))\n        }) ?? []\n    }\n\n    get currentPath() {\n        return this.$store.state.gui.view.timelapse.currentPath\n    }\n\n    set currentPath(newVal) {\n        this.$store.dispatch('gui/saveSettingWithoutUpload', { name: 'view.timelapse.currentPath', value: newVal })\n    }\n\n    createDirectory() {\n        this.dialogCreateDirectory.name = ''\n        this.dialogCreateDirectory.show = true\n\n        setTimeout(() => {\n            this.$refs.inputFieldCreateDirectory?.focus()\n        }, 200)\n    }\n\n    createDirectoryAction() {\n        if (this.dialogCreateDirectory.name.length && this.dialogCreateDirectory.name.indexOf(' ') === -1) {\n            this.dialogCreateDirectory.show = false\n            this.$socket.emit('server.files.post_directory', { path: this.currentPath+'/'+this.dialogCreateDirectory.name }, { action: 'files/getCreateDir' })\n        }\n    }\n\n    refreshFileList() {\n        this.$socket.emit('server.files.get_directory', { path: this.currentPath }, { action: 'files/getDirectory' })\n    }\n\n    advancedSearch(value: string | number, search: string) {\n        return value != null &&\n            search != null &&\n            typeof value === 'string' &&\n            value.toString().toLowerCase().indexOf(search.toLowerCase()) !== -1\n    }\n\n    getThumbnail(item: FileStateFile) {\n        const filename = item.filename.slice(0, item.filename.lastIndexOf('.'))\n        const preview = this.files?.find((file) => file.filename === filename+'.jpg')\n        if (preview) {\n            return `${this.apiUrl}/server/files/${encodeURI(this.currentPath)}/${encodeURI(preview.filename)}?timestamp=${preview.modified.getTime()}`\n        }\n\n        return ''\n    }\n\n    clickRow(item: FileStateFile, force = false) {\n        if (!this.contextMenu.shown || force) {\n            if (force) this.contextMenu.shown = false\n\n            if (item.isDirectory) this.currentPath += '/' + item.filename\n            else if (item.filename.endsWith('zip')) {\n                this.downloadFile(item.filename)\n            } else if (item.filename.endsWith('mp4')) {\n                this.videoDialogFilename =  encodeURI(`${this.currentPath}/${item.filename}`)\n                this.boolVideoDialog = true\n            }\n        }\n    }\n\n    clickRowGoBack() {\n        this.currentPath = this.currentPath.substr(0, this.currentPath.lastIndexOf('/'))\n    }\n\n    showContextMenu (e: any, item: FileStateFile) {\n        if (!this.contextMenu.shown) {\n            e?.preventDefault()\n            this.contextMenu.shown = true\n            this.contextMenu.x = e?.clientX || e?.pageX || window.screenX / 2\n            this.contextMenu.y = e?.clientY || e?.pageY || window.screenY / 2\n            this.contextMenu.item = item\n            this.$nextTick(() => {\n                this.contextMenu.shown = true\n            })\n        }\n    }\n\n    existsFramesZip(item: FileStateFile) {\n        const posLastPoint = item.filename.lastIndexOf('.')\n        const zipFilename = item.filename.substr(0, posLastPoint)+'.zip'\n\n        return (this.files.findIndex((file) => file.filename === zipFilename) !== -1)\n    }\n\n    downloadFile(filename: string) {\n        const path = (this.currentPath+'/'+filename)\n        const href = this.apiUrl + '/server/files/' + encodeURI(path)\n\n        window.open(href)\n    }\n\n    renameFile(item: FileStateFile) {\n        const posLastPoint = item.filename.lastIndexOf('.')\n        this.dialogRenameFile.newName = item.filename.substr(0, posLastPoint)\n\n        this.dialogRenameFile.item = item\n        this.dialogRenameFile.show = true\n\n        setTimeout(() => {\n            this.$refs.inputFieldRenameFile?.focus()\n        }, 200)\n    }\n\n    renameFileAction() {\n        const posLastPoint = this.dialogRenameFile.item.filename.lastIndexOf('.')\n        const oldNameWithoutExtension = this.dialogRenameFile.item.filename.substr(0, posLastPoint)\n\n        this.dialogRenameFile.show = false\n        this.$socket.emit('server.files.move', {\n            source: this.currentPath+'/'+this.dialogRenameFile.item.filename,\n            dest: this.currentPath+'/'+this.dialogRenameFile.newName+'.mp4'\n        }, { action: 'files/getMove' })\n\n        const fileJpg = this.files.find((file) => file.filename === oldNameWithoutExtension+'.jpg')\n        if (fileJpg) {\n            this.$socket.emit('server.files.move', {\n                source: this.currentPath+'/'+oldNameWithoutExtension+'.jpg',\n                dest: this.currentPath+'/'+this.dialogRenameFile.newName+'.jpg'\n            })\n        }\n    }\n\n    renameDirectory(item: FileStateFile) {\n        this.dialogRenameDirectory.item = item\n        this.dialogRenameDirectory.newName = item.filename\n        this.dialogRenameDirectory.show = true\n\n        setTimeout(() => {\n            this.$refs.inputFieldRenameDirectory?.focus()\n        }, 200)\n    }\n\n    renameDirectoryAction() {\n        this.dialogRenameDirectory.show = false\n        this.$socket.emit('server.files.move', {\n            source: this.currentPath+'/'+this.dialogRenameDirectory.item.filename,\n            dest: this.currentPath+'/'+this.dialogRenameDirectory.newName\n        }, { action: 'files/getMove' })\n    }\n\n    removeFile() {\n        const filename = this.contextMenu.item.filename.slice(0, this.contextMenu.item.filename.lastIndexOf('.'))\n        const previewFilename = filename+'.jpg'\n        const previewExists = (this.files.findIndex((file) => file.filename === previewFilename) !== -1)\n\n        if(previewExists) this.$socket.emit('server.files.delete_file', { path: this.currentPath+'/'+previewFilename }, { action: 'files/getDeleteFile' })\n        this.$socket.emit('server.files.delete_file', { path: this.currentPath+'/'+this.contextMenu.item.filename }, { action: 'files/getDeleteFile' })\n    }\n\n    deleteDirectory(item: FileStateFile) {\n        this.dialogDeleteDirectory.item = item\n        this.dialogDeleteDirectory.show = true\n    }\n\n    deleteDirectoryAction() {\n        this.dialogDeleteDirectory.show = false\n        this.$socket.emit('server.files.delete_directory', { path: this.currentPath+'/'+this.contextMenu.item.filename, force: true }, { action: 'files/getDeleteDir' })\n    }\n}\n</script>\n"]}]}