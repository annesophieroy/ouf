{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Machine/UpdatePanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/Machine/UpdatePanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/thread-loader/dist/cjs.js","mtime":1645990064416},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIE1peGluc30gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKaW1wb3J0IEJhc2VNaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvYmFzZScKaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJwppbXBvcnQge1NlcnZlclVwZGF0ZU1hbmdlclN0YXRlVmVyc2lvbkluZm9HaXRSZXBvQ29tbWl0c30gZnJvbSAnQC9zdG9yZS9zZXJ2ZXIvdXBkYXRlTWFuYWdlci90eXBlcycKaW1wb3J0IFZ1ZUkxOG4gZnJvbSAndnVlLWkxOG4nCmltcG9ydCBEYXRlVGltZUZvcm1hdE9wdGlvbnMgPSBWdWVJMThuLkRhdGVUaW1lRm9ybWF0T3B0aW9ucwoKaW50ZXJmYWNlIGdyb3VwZWRDb21taXQgewogICAgZGF0ZTogRGF0ZSwKICAgIGNvbW1pdHM6IFNlcnZlclVwZGF0ZU1hbmdlclN0YXRlVmVyc2lvbkluZm9HaXRSZXBvQ29tbWl0c1tdCn0KCmludGVyZmFjZSBjb21taXRzT3ZlcmxheSB7CiAgICBib29sOiBib29sZWFuCiAgICBvd25lcjogc3RyaW5nCiAgICBtb2R1bDogc3RyaW5nCiAgICByZXBvTmFtZTogc3RyaW5nCiAgICBjb21taXRzOiBTZXJ2ZXJVcGRhdGVNYW5nZXJTdGF0ZVZlcnNpb25JbmZvR2l0UmVwb0NvbW1pdHNbXQogICAgZ3JvdXBlZENvbW1pdHM6IGdyb3VwZWRDb21taXRbXQp9CgpAQ29tcG9uZW50KHsKICAgIGNvbXBvbmVudHM6IHtQYW5lbH0KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXBkYXRlUGFuZWwgZXh0ZW5kcyBNaXhpbnMoQmFzZU1peGluKSB7CiAgICBwcml2YXRlIG9wZW5Db21taXRzOiBzdHJpbmdbXSA9IFtdCgogICAgcHJpdmF0ZSBkYXRlT3B0aW9uczogRGF0ZVRpbWVGb3JtYXRPcHRpb25zID0gewogICAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgICBtb250aDogJ3Nob3J0JywKICAgICAgICBkYXk6ICdudW1lcmljJwogICAgfQoKICAgIHByaXZhdGUgY29tbWl0c092ZXJsYXk6IGNvbW1pdHNPdmVybGF5ID0gewogICAgICAgIGJvb2w6IGZhbHNlLAogICAgICAgIG93bmVyOiAnJywKICAgICAgICBtb2R1bDogJycsCiAgICAgICAgcmVwb05hbWU6ICcnLAogICAgICAgIGNvbW1pdHM6IFtdLAogICAgICAgIGdyb3VwZWRDb21taXRzOiBbXQogICAgfQoKICAgIGdldCBsYW5ndWFnZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmdlbmVyYWwubGFuZ3VhZ2UgPz8gJ2VuJwogICAgfQoKICAgIGdldCBlbmFibGVVcGRhdGVNYW5hZ2VyKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXJ2ZXIuY29tcG9uZW50cy5pbmNsdWRlcygndXBkYXRlX21hbmFnZXInKQogICAgfQoKICAgIGdldCB2ZXJzaW9uX2luZm8oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlci51cGRhdGVNYW5hZ2VyLnZlcnNpb25faW5mbwogICAgfQoKICAgIGdldCB1cGRhdGVhYmxlU29mdHdhcmVzKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydzZXJ2ZXIvdXBkYXRlTWFuYWdlci9nZXRVcGRhdGVhYmxlU29mdHdhcmVzJ10KICAgIH0KCiAgICBnZXQgc2hvd1VwZGF0ZUFsbCgpIHsKICAgICAgICBsZXQgdXBkYXRlYWJsZU1vZHVscyA9IDAKCiAgICAgICAgT2JqZWN0LmtleXModGhpcy51cGRhdGVhYmxlU29mdHdhcmVzKS5mb3JFYWNoKChtb2R1bGVuYW1lKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMudXBkYXRlYWJsZVNvZnR3YXJlc1ttb2R1bGVuYW1lXQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAndmVyc2lvbicgaW4gbW9kdWxlICYmCiAgICAgICAgICAgICAgICAncmVtb3RlX3ZlcnNpb24nIGluIG1vZHVsZSAmJgogICAgICAgICAgICAgICAgc2VtdmVyLnZhbGlkKG1vZHVsZS5yZW1vdGVfdmVyc2lvbikgJiYKICAgICAgICAgICAgICAgIHNlbXZlci52YWxpZChtb2R1bGUudmVyc2lvbikgJiYKICAgICAgICAgICAgICAgIHNlbXZlci5ndChtb2R1bGUucmVtb3RlX3ZlcnNpb24sIG1vZHVsZS52ZXJzaW9uKQogICAgICAgICAgICApIHVwZGF0ZWFibGVNb2R1bHMrKwogICAgICAgIH0pCgogICAgICAgIGlmICh0aGlzLnZlcnNpb25faW5mbz8uc3lzdGVtPy5wYWNrYWdlX2NvdW50ID4gMCkgdXBkYXRlYWJsZU1vZHVscysrCiAgICAgICAgcmV0dXJuICh1cGRhdGVhYmxlTW9kdWxzID4gMSkKICAgIH0KCiAgICBidG5TeW5jKCkgewogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnVwZGF0ZS5zdGF0dXMnLCB7IHJlZnJlc2g6IHRydWUgfSwgeyBhY3Rpb246ICdzZXJ2ZXIvdXBkYXRlTWFuYWdlci9nZXRTdGF0dXMnLCBsb2FkaW5nOiAnbG9hZGluZ0J0blN5bmNVcGRhdGVNYW5hZ2VyJyB9KQogICAgfQoKICAgIGdldEJ0bkNvbG9yKG9iamVjdDogYW55KSB7CiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgJ2RlYnVnX2VuYWJsZWQnIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgIW9iamVjdC5kZWJ1Z19lbmFibGVkICYmCiAgICAgICAgICAgICAgICAnZGV0YWNoZWQnIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgb2JqZWN0LmRldGFjaGVkCiAgICAgICAgICAgICkgcmV0dXJuICdvcmFuZ2UnCiAgICAgICAgICAgIGlmICgnaXNfZGlydHknIGluIG9iamVjdCAmJiBvYmplY3QuaXNfZGlydHkpIHJldHVybiAnb3JhbmdlJwogICAgICAgICAgICBpZiAoJ2lzX3ZhbGlkJyBpbiBvYmplY3QgJiYgIW9iamVjdC5pc192YWxpZCkgcmV0dXJuICdyZWQnCgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAndmVyc2lvbicgaW4gb2JqZWN0ICYmCiAgICAgICAgICAgICAgICAncmVtb3RlX3ZlcnNpb24nIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgc2VtdmVyLnZhbGlkKG9iamVjdC5yZW1vdGVfdmVyc2lvbikgJiYKICAgICAgICAgICAgICAgIHNlbXZlci52YWxpZChvYmplY3QudmVyc2lvbikgJiYKICAgICAgICAgICAgICAgIHNlbXZlci5ndChvYmplY3QucmVtb3RlX3ZlcnNpb24sIG9iamVjdC52ZXJzaW9uKQogICAgICAgICAgICApIHJldHVybiAncHJpbWFyeScKCiAgICAgICAgICAgIGlmICgob2JqZWN0LmNvbW1pdHNfYmVoaW5kID8/IFtdKS5sZW5ndGgpIHJldHVybiAncHJpbWFyeScKCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICd2ZXJzaW9uJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgICAgICdyZW1vdGVfdmVyc2lvbicgaW4gb2JqZWN0ICYmICgKICAgICAgICAgICAgICAgICAgICBvYmplY3QudmVyc2lvbiA9PT0gJz8nIHx8IG9iamVjdC5yZW1vdGVfdmVyc2lvbiA9PT0gJz8nCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkgcmV0dXJuICdncmF5JwoKICAgICAgICAgICAgcmV0dXJuICdncmVlbicKICAgICAgICB9CgogICAgICAgIHJldHVybiAncmVkJwogICAgfQoKICAgIGdldEJ0blRleHQob2JqZWN0OiBhbnkpIHsKICAgICAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBmYWxzZSkgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAnZGVidWdfZW5hYmxlZCcgaW4gb2JqZWN0ICYmCiAgICAgICAgICAgICAgICAhb2JqZWN0LmRlYnVnX2VuYWJsZWQgJiYKICAgICAgICAgICAgICAgICdkZXRhY2hlZCcgaW4gb2JqZWN0ICYmCiAgICAgICAgICAgICAgICBvYmplY3QuZGV0YWNoZWQKICAgICAgICAgICAgKSByZXR1cm4gdGhpcy4kdCgnTWFjaGluZS5VcGRhdGVQYW5lbC5EZXRhY2hlZCcpCiAgICAgICAgICAgIGlmICgnaXNfdmFsaWQnIGluIG9iamVjdCAmJiAhb2JqZWN0LmlzX3ZhbGlkKSByZXR1cm4gdGhpcy4kdCgnTWFjaGluZS5VcGRhdGVQYW5lbC5JbnZhbGlkJykKICAgICAgICAgICAgaWYgKCdpc19kaXJ0eScgaW4gb2JqZWN0ICYmIG9iamVjdC5pc19kaXJ0eSkgcmV0dXJuIHRoaXMuJHQoJ01hY2hpbmUuVXBkYXRlUGFuZWwuRGlydHknKQoKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgJ3ZlcnNpb24nIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgJ3JlbW90ZV92ZXJzaW9uJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgICAgIHNlbXZlci52YWxpZChvYmplY3QucmVtb3RlX3ZlcnNpb24pICYmCiAgICAgICAgICAgICAgICBzZW12ZXIudmFsaWQob2JqZWN0LnZlcnNpb24pICYmCiAgICAgICAgICAgICAgICBzZW12ZXIuZ3Qob2JqZWN0LnJlbW90ZV92ZXJzaW9uLCBvYmplY3QudmVyc2lvbikKICAgICAgICAgICAgKSByZXR1cm4gdGhpcy4kdCgnTWFjaGluZS5VcGRhdGVQYW5lbC5VcGRhdGUnKQoKICAgICAgICAgICAgaWYgKChvYmplY3QuY29tbWl0c19iZWhpbmQgPz8gW10pLmxlbmd0aCkgcmV0dXJuIHRoaXMuJHQoJ01hY2hpbmUuVXBkYXRlUGFuZWwuVXBkYXRlJykKCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICd2ZXJzaW9uJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgICAgICdyZW1vdGVfdmVyc2lvbicgaW4gb2JqZWN0ICYmICgKICAgICAgICAgICAgICAgICAgICBvYmplY3QudmVyc2lvbiA9PT0gJz8nIHx8IG9iamVjdC5yZW1vdGVfdmVyc2lvbiA9PT0gJz8nCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkgcmV0dXJuIHRoaXMuJHQoJ01hY2hpbmUuVXBkYXRlUGFuZWwuVW5rbm93bicpCgogICAgICAgICAgICByZXR1cm4gdGhpcy4kdCgnTWFjaGluZS5VcGRhdGVQYW5lbC5VcFRvRGF0ZScpCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy4kdCgnTWFjaGluZS5VcGRhdGVQYW5lbC5FUlJPUicpCiAgICB9CgogICAgZ2V0QnRuSWNvbihvYmplY3Q6IGFueSkgewogICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICdkZWJ1Z19lbmFibGVkJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgICAgICFvYmplY3QuZGVidWdfZW5hYmxlZCAmJgogICAgICAgICAgICAgICAgJ2RldGFjaGVkJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgICAgIG9iamVjdC5kZXRhY2hlZAogICAgICAgICAgICApIHJldHVybiAnYWxlcnQtY2lyY2xlJwogICAgICAgICAgICBpZiAoJ2lzX3ZhbGlkJyBpbiBvYmplY3QgJiYgIW9iamVjdC5pc192YWxpZCkgcmV0dXJuICdhbGVydC1jaXJjbGUnCiAgICAgICAgICAgIGlmICgnaXNfZGlydHknIGluIG9iamVjdCAmJiBvYmplY3QuaXNfZGlydHkpIHJldHVybiAnYWxlcnQtY2lyY2xlJwoKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgJ3ZlcnNpb24nIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgJ3JlbW90ZV92ZXJzaW9uJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgICAgIHNlbXZlci52YWxpZChvYmplY3QucmVtb3RlX3ZlcnNpb24pICYmCiAgICAgICAgICAgICAgICBzZW12ZXIudmFsaWQob2JqZWN0LnZlcnNpb24pICYmCiAgICAgICAgICAgICAgICBzZW12ZXIuZ3Qob2JqZWN0LnJlbW90ZV92ZXJzaW9uLCBvYmplY3QudmVyc2lvbikKICAgICAgICAgICAgKSByZXR1cm4gJ3Byb2dyZXNzLXVwbG9hZCcKCiAgICAgICAgICAgIGlmICgob2JqZWN0LmNvbW1pdHNfYmVoaW5kID8/IFtdKS5sZW5ndGgpIHJldHVybiAncHJvZ3Jlc3MtdXBsb2FkJwoKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgJ3ZlcnNpb24nIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgJ3JlbW90ZV92ZXJzaW9uJyBpbiBvYmplY3QgJiYgKAogICAgICAgICAgICAgICAgICAgIG9iamVjdC52ZXJzaW9uID09PSAnPycgfHwgb2JqZWN0LnJlbW90ZV92ZXJzaW9uID09PSAnPycKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKSByZXR1cm4gJ2hlbHAtY2lyY2xlLW91dGxpbmUnCgogICAgICAgICAgICByZXR1cm4gJ2NoZWNrJwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICdFUlJPUicKICAgIH0KCiAgICBnZXRCdG5EaXNhYmxlZChvYmplY3Q6IGFueSkgewogICAgICAgIGlmIChbJ3ByaW50aW5nJywgJ3BhdXNlZCddLmluY2x1ZGVzKHRoaXMucHJpbnRlcl9zdGF0ZSkpIHJldHVybiB0cnVlCgogICAgICAgIGlmICgnaXNfdmFsaWQnIGluIG9iamVjdCAmJiAhb2JqZWN0LmlzX3ZhbGlkKSByZXR1cm4gZmFsc2UKICAgICAgICBpZiAoJ2lzX2RpcnR5JyBpbiBvYmplY3QgJiYgb2JqZWN0LmlzX2RpcnR5KSByZXR1cm4gZmFsc2UKCiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKChvYmplY3QuY29tbWl0c19iZWhpbmQgPz8gW10pLmxlbmd0aCkgcmV0dXJuIGZhbHNlCgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAndmVyc2lvbicgaW4gb2JqZWN0ICYmCiAgICAgICAgICAgICAgICAncmVtb3RlX3ZlcnNpb24nIGluIG9iamVjdCAmJgogICAgICAgICAgICAgICAgc2VtdmVyLnZhbGlkKG9iamVjdC5yZW1vdGVfdmVyc2lvbikgJiYKICAgICAgICAgICAgICAgIHNlbXZlci52YWxpZChvYmplY3QudmVyc2lvbikgJiYKICAgICAgICAgICAgICAgIHNlbXZlci5ndChvYmplY3QucmVtb3RlX3ZlcnNpb24sIG9iamVjdC52ZXJzaW9uKQogICAgICAgICAgICApIHJldHVybiBmYWxzZQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBnZXRWZXJzaW9uT3V0cHV0KG9iamVjdDogYW55KSB7CiAgICAgICAgY29uc3QgbG9jYWxfdmVyc2lvbiA9IG9iamVjdC52ZXJzaW9uID8/ICc/JwogICAgICAgIGNvbnN0IHJlbW90ZV92ZXJzaW9uID0gIG9iamVjdC5yZW1vdGVfdmVyc2lvbiA/PyAnPycKICAgICAgICBjb25zdCBjb21taXRzX2JlaGluZCA9IG9iamVjdC5jb21taXRzX2JlaGluZCA/PyBbXQoKICAgICAgICBsZXQgb3V0cHV0ID0gJycKICAgICAgICBpZiAoJ3JlbW90ZV9hbGlhcycgaW4gb2JqZWN0ICYmIG9iamVjdC5yZW1vdGVfYWxpYXMgIT09ICdvcmlnaW4nKSBvdXRwdXQgKz0gb2JqZWN0LnJlbW90ZV9hbGlhcwogICAgICAgIGlmICgnYnJhbmNoJyBpbiBvYmplY3QgJiYgIVsnbWFzdGVyJywgJ21haW4nXS5pbmNsdWRlcyhvYmplY3QuYnJhbmNoKSkgewogICAgICAgICAgICBpZiAob3V0cHV0ICE9PSAnJykgb3V0cHV0ICs9ICcvJwoKICAgICAgICAgICAgb3V0cHV0ICs9IG9iamVjdC5icmFuY2gKICAgICAgICB9CiAgICAgICAgaWYgKG91dHB1dCAhPT0gJycpIG91dHB1dCArPSAnOiAnCgogICAgICAgIGlmIChzZW12ZXIudmFsaWQocmVtb3RlX3ZlcnNpb24pICYmIHNlbXZlci52YWxpZChsb2NhbF92ZXJzaW9uKSAmJiBzZW12ZXIuZ3QocmVtb3RlX3ZlcnNpb24sIGxvY2FsX3ZlcnNpb24pKQogICAgICAgICAgICBvdXRwdXQgKz0gbG9jYWxfdmVyc2lvbisnID4gJytyZW1vdGVfdmVyc2lvbgogICAgICAgIGVsc2UgaWYgKGNvbW1pdHNfYmVoaW5kLmxlbmd0aCkKICAgICAgICAgICAgb3V0cHV0ICs9IGxvY2FsX3ZlcnNpb24rJyA+ICcrIHRoaXMuJHRjKCdNYWNoaW5lLlVwZGF0ZVBhbmVsLkNvbW1pdHNBdmFpbGFiZScsIGNvbW1pdHNfYmVoaW5kLmxlbmd0aCwgeyBjb3VudDogY29tbWl0c19iZWhpbmQubGVuZ3RoIH0pCiAgICAgICAgZWxzZSBpZiAoJ2Z1bGxfdmVyc2lvbl9zdHJpbmcnIGluIG9iamVjdCAmJiBvYmplY3QuZnVsbF92ZXJzaW9uX3N0cmluZyAhPT0gJz8nKQogICAgICAgICAgICBvdXRwdXQgKz0gb2JqZWN0LmZ1bGxfdmVyc2lvbl9zdHJpbmcKICAgICAgICBlbHNlCiAgICAgICAgICAgIG91dHB1dCArPSBsb2NhbF92ZXJzaW9uCgogICAgICAgIHJldHVybiBvdXRwdXQKICAgIH0KCiAgICBnZXRWZXJzaW9uQ2xpY2thYmxlKG9iamVjdDogYW55KSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgJ2NvbW1pdHNfYmVoaW5kJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgb2JqZWN0LmNvbW1pdHNfYmVoaW5kLmxlbmd0aAogICAgICAgICkKICAgIH0KCiAgICBnZXRSZWNvdmVyeU9wdGlvbnMob2JqZWN0OiBhbnkpIHsKICAgICAgICBpZiAoJ2lzX3ZhbGlkJyBpbiBvYmplY3QgJiYgIW9iamVjdC5pc192YWxpZCkgcmV0dXJuIHRydWUKICAgICAgICBlbHNlIGlmICgnaXNfZGlydHknIGluIG9iamVjdCAmJiBvYmplY3QuaXNfZGlydHkpIHJldHVybiB0cnVlCgogICAgICAgIHJldHVybiBmYWxzZQogICAgfQoKICAgIHVwZGF0ZUFsbCgpIHsKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgnbWFjaGluZS51cGRhdGUuZnVsbCcsIHsgIH0pCiAgICB9CgogICAgdXBkYXRlTW9kdWxlKGtleTogc3RyaW5nKSB7CiAgICAgICAgaWYgKFsna2xpcHBlcicsICdtb29ucmFrZXInXS5pbmNsdWRlcyhrZXkpKSB0aGlzLiRzb2NrZXQuZW1pdCgnbWFjaGluZS51cGRhdGUuJytrZXksIHsgfSkKICAgICAgICBlbHNlIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnVwZGF0ZS5jbGllbnQnLCB7IG5hbWU6IGtleSB9KQogICAgfQoKICAgIHJlY292ZXJ5KG5hbWU6IHN0cmluZywgaGFyZDogYm9vbGVhbikgewogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnVwZGF0ZS5yZWNvdmVyJywgeyBuYW1lOiBuYW1lLCBoYXJkOiBoYXJkIH0pCiAgICB9CgogICAgdXBkYXRlU3lzdGVtKCkgewogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdtYWNoaW5lLnVwZGF0ZS5zeXN0ZW0nLCB7IH0pCiAgICB9CgogICAgb3BlbkNvbW1pdHNPdmVybGF5KGtleTogc3RyaW5nLCBvYmplY3Q6IGFueSkgewogICAgICAgIGlmICgKICAgICAgICAgICAgJ2NvbW1pdHNfYmVoaW5kJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgJ293bmVyJyBpbiBvYmplY3QgJiYKICAgICAgICAgICAgb2JqZWN0LmNvbW1pdHNfYmVoaW5kLmxlbmd0aAogICAgICAgICkgewogICAgICAgICAgICB0aGlzLm9wZW5Db21taXRzID0gW10KICAgICAgICAgICAgdGhpcy5jb21taXRzT3ZlcmxheS5vd25lciA9IG9iamVjdC5vd25lcgogICAgICAgICAgICB0aGlzLmNvbW1pdHNPdmVybGF5Lm1vZHVsID0ga2V5CiAgICAgICAgICAgIHRoaXMuY29tbWl0c092ZXJsYXkucmVwb05hbWUgPSBvYmplY3QucmVwb19uYW1lID8/IGtleQogICAgICAgICAgICB0aGlzLmNvbW1pdHNPdmVybGF5LmNvbW1pdHMgPSBvYmplY3QuY29tbWl0c19iZWhpbmQKICAgICAgICAgICAgdGhpcy5jb21taXRzT3ZlcmxheS5ncm91cGVkQ29tbWl0cyA9IFtdCgogICAgICAgICAgICBsZXQgbGFzdERhdGU6IG51bGwgfCBEYXRlID0gbnVsbAogICAgICAgICAgICBsZXQgdG1wQ29tbWl0czogU2VydmVyVXBkYXRlTWFuZ2VyU3RhdGVWZXJzaW9uSW5mb0dpdFJlcG9Db21taXRzW10gPSBbXQoKICAgICAgICAgICAgb2JqZWN0LmNvbW1pdHNfYmVoaW5kLmZvckVhY2goKGNvbW1pdDogYW55KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjb21taXREYXRlID0gbmV3IERhdGUoY29tbWl0LmRhdGUgKiAxMDAwKQogICAgICAgICAgICAgICAgaWYgKGxhc3REYXRlID09PSBudWxsIHx8CiAgICAgICAgICAgICAgICAgICAgY29tbWl0RGF0ZS5nZXRGdWxsWWVhcigpICE9PSBsYXN0RGF0ZS5nZXRGdWxsWWVhcigpIHx8CiAgICAgICAgICAgICAgICAgICAgY29tbWl0RGF0ZS5nZXRNb250aCgpICE9PSBsYXN0RGF0ZS5nZXRNb250aCgpIHx8CiAgICAgICAgICAgICAgICAgICAgY29tbWl0RGF0ZS5nZXREYXkoKSAhPT0gbGFzdERhdGUuZ2V0RGF5KCkKICAgICAgICAgICAgICAgICkgewoKICAgICAgICAgICAgICAgICAgICBpZiAodG1wQ29tbWl0cy5sZW5ndGggJiYgbGFzdERhdGUgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21taXRzT3ZlcmxheS5ncm91cGVkQ29tbWl0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGxhc3REYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0czogWy4uLnRtcENvbW1pdHNdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBsYXN0RGF0ZSA9IGNvbW1pdERhdGUKICAgICAgICAgICAgICAgICAgICB0bXBDb21taXRzID0gW10KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0bXBDb21taXRzLnB1c2goY29tbWl0KQogICAgICAgICAgICB9KQoKICAgICAgICAgICAgaWYgKGxhc3REYXRlICYmIHRtcENvbW1pdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdHNPdmVybGF5Lmdyb3VwZWRDb21taXRzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGRhdGU6IGxhc3REYXRlLAogICAgICAgICAgICAgICAgICAgIGNvbW1pdHM6IFsuLi50bXBDb21taXRzXQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jb21taXRzT3ZlcmxheS5ib29sID0gdHJ1ZQogICAgICAgIH0KICAgIH0KCiAgICBjb252ZXJ0Q29tbWl0RGF0ZSh0aW1lc3RhbXA6IG51bWJlcikgewogICAgICAgIGNvbnN0IGNvbW1pdERheSA9IG5ldyBEYXRlKHRpbWVzdGFtcCAqIDEwMDApCiAgICAgICAgY29tbWl0RGF5LnNldEhvdXJzKDAsMCwwLDApCiAgICAgICAgY29uc3QgdG9kYXlEYXkgPSBuZXcgRGF0ZSgpCiAgICAgICAgdG9kYXlEYXkuc2V0SG91cnMoMCwwLDAsMCkKICAgICAgICBjb25zdCBkaWZmID0gTWF0aC5mbG9vcih0b2RheURheS5nZXRUaW1lKCkgLSBjb21taXREYXkuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KQoKICAgICAgICBpZiAoZGlmZiA9PT0gMCkgewogICAgICAgICAgICBjb25zdCBkaWZmSG91cnMgPSBNYXRoLmZsb29yKCgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC0gdGltZXN0YW1wICogMTAwMCkgLyAoMTAwMCAqIDYwICogNjApKQoKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ01hY2hpbmUuVXBkYXRlUGFuZWwuQ29tbWl0dGVkSG91cnNBZ28nLCB7IGhvdXJzOiBkaWZmSG91cnMgfSkKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoZGlmZiA9PT0gMSkgcmV0dXJuIHRoaXMuJHQoJ01hY2hpbmUuVXBkYXRlUGFuZWwuQ29tbWl0dGVkWWVzdGVyZGF5JykKICAgICAgICBlbHNlIGlmIChkaWZmIDwgMjkpIHJldHVybiB0aGlzLiR0KCdNYWNoaW5lLlVwZGF0ZVBhbmVsLkNvbW1pdHRlZERheXNBZ28nLCB7IGRheXM6IGRpZmYgfSkKICAgICAgICBlbHNlIHJldHVybiB0aGlzLiR0KCdNYWNoaW5lLlVwZGF0ZVBhbmVsLkNvbW1pdHRlZE9uRGF0ZScsIHsgZGF0ZTogY29tbWl0RGF5LnRvTG9jYWxlRGF0ZVN0cmluZyh0aGlzLmxhbmd1YWdlLCB0aGlzLmRhdGVPcHRpb25zKSB9KQogICAgfQp9Cg=="},null]}