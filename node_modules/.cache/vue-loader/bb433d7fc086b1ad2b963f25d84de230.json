{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/pages/Heightmap.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/pages/Heightmap.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIE1peGlucywgV2F0Y2h9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnQC9jb21wb25lbnRzL21peGlucy9iYXNlJwppbXBvcnQgQ29udHJvbE1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvY29udHJvbCcKCmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJ2VjaGFydHMtZm9yLXZ1ZScKaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICdlY2hhcnRzJwppbXBvcnQge0VDaGFydHN9IGZyb20gJ2VjaGFydHMvY29yZScKaW1wb3J0ICdlY2hhcnRzLWdsJwppbXBvcnQgUGFuZWwgZnJvbSAnQC9jb21wb25lbnRzL3VpL1BhbmVsLnZ1ZScKCmludGVyZmFjZSBIZWlnaHRtYXBTZXJpZSB7CiAgICB0eXBlOiBzdHJpbmcKICAgIG5hbWU6IHN0cmluZwogICAgZGF0YTogbnVtYmVyW11bXQogICAgZGF0YVNoYXBlPzogbnVtYmVyW10KICAgIGl0ZW1TdHlsZT86IHsKICAgICAgICBvcGFjaXR5PzogbnVtYmVyCiAgICAgICAgY29sb3I/OiBudW1iZXJbXQogICAgfQogICAgd2lyZWZyYW1lOiB7CiAgICAgICAgc2hvdzogYm9vbGVhbgogICAgfQp9CgpAQ29tcG9uZW50KHsKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBQYW5lbCwKICAgICAgICBFQ2hhcnRzOiBjcmVhdGVDb21wb25lbnQoeyBlY2hhcnRzIH0pLAogICAgfQp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlSGVpZ2h0bWFwIGV4dGVuZHMgTWl4aW5zKEJhc2VNaXhpbiwgQ29udHJvbE1peGluKSB7CgogICAgJHJlZnMhOiB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgaGVpZ2h0bWFwOiBhbnksCiAgICAgICAgaW5wdXREaWFsb2dSZW5hbWVIZWlnaHRtYXBOYW1lOiBIVE1MSW5wdXRFbGVtZW50LAogICAgfQoKICAgIHByaXZhdGUgcmVuYW1lRGlhbG9nID0gZmFsc2UKICAgIHByaXZhdGUgcmVtb3ZlRGlhbG9nUHJvZmlsZSA9ICcnCiAgICBwcml2YXRlIHJlbW92ZURpYWxvZyA9IGZhbHNlCiAgICBwcml2YXRlIGNhbGlicmF0ZURpYWxvZyA9IGZhbHNlCiAgICBwcml2YXRlIG5ld05hbWUgPSAnJwogICAgcHJpdmF0ZSBvbGROYW1lID0gJycKCiAgICBwcml2YXRlIGhlaWdodG1hcFNjYWxlID0gMC41CiAgICBwcml2YXRlIHByb2JlZE9wYWNpdHkgPSAxCiAgICBwcml2YXRlIG1lc2hPcGFjaXR5ID0gMQogICAgcHJpdmF0ZSBmbGF0T3BhY2l0eSA9IDAuNQoKICAgIHByaXZhdGUgY29sb3JBeGlzTmFtZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNSknCiAgICBwcml2YXRlIGNvbG9yQXhpc0xhYmVsID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC41KScKICAgIHByaXZhdGUgY29sb3JBeGlzTGluZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMiknCiAgICBwcml2YXRlIGNvbG9yQXhpc1RpY2sgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJwogICAgcHJpdmF0ZSBjb2xvclNwbGl0TGluZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMiknCgogICAgcHJpdmF0ZSBjb2xvckF4aXNQb2ludGVyID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC44KScKCiAgICBwcml2YXRlIGNvbG9yVmlzdWFsTWFwID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC44KScKICAgIHByaXZhdGUgZm9udFNpemVWaXN1YWxNYXAgPSAxNAoKICAgIGdldCBjaGFydE9wdGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwwLjkpJywKICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAwLAogICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmJywKICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE0cHgnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFkZGluZzogMTUsCiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IHRoaXMudG9vbHRpcEZvcm1hdHRlcgogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXJrTW9kZTogdHJ1ZSwKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSwKICAgICAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0aGlzLnNlbGVjdGVkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHZpc3VhbE1hcDogewogICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgICAgIG1pbjogdGhpcy52aXN1YWxNYXBSYW5nZVswXSwKICAgICAgICAgICAgICAgIG1heDogdGhpcy52aXN1YWxNYXBSYW5nZVsxXSwKICAgICAgICAgICAgICAgIGNhbGN1bGFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBkaW1lbnNpb246IDIsCiAgICAgICAgICAgICAgICBpblJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFsnIzMxMzY5NScsICcjNDU3NWI0JywgJyM3NGFkZDEnLCAnI2FiZDllOScsICcjZTBmM2Y4JywgJyNmZmZmYmYnLCAnI2ZlZTA5MCcsICcjZmRhZTYxJywgJyNmNDZkNDMnLCAnI2Q3MzAyNycsICcjYTUwMDI2J10KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXJpZXNJbmRleDogdGhpcy52aXN1YWxNYXBTZXJpZXNJbmRleCwKICAgICAgICAgICAgICAgIGxlZnQ6IHRoaXMuaXNNb2JpbGUgPyAxMCA6IDMwLAogICAgICAgICAgICAgICAgdG9wOiAyMCwKICAgICAgICAgICAgICAgIGJvdHRvbTogMCwKICAgICAgICAgICAgICAgIGl0ZW1XaWR0aDogdGhpcy5pc01vYmlsZSA/IDEwIDogMzAsCiAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0OiAzNTAsCiAgICAgICAgICAgICAgICBwcmVjaXNpb246IDMsCiAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb2xvclZpc3VhbE1hcCwKICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogdGhpcy5mb250U2l6ZVZpc3VhbE1hcAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeEF4aXMzRDogewogICAgICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgICAgICAgIG5hbWVUZXh0U3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb2xvckF4aXNOYW1lCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWluOiB0aGlzLnJhbmdlWFswXSwKICAgICAgICAgICAgICAgIG1heDogdGhpcy5yYW5nZVhbMV0sCiAgICAgICAgICAgICAgICBtaW5JbnRlcnZhbDogMQogICAgICAgICAgICB9LAogICAgICAgICAgICB5QXhpczNEOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICAgICAgbmFtZVRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yQXhpc05hbWUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtaW46IHRoaXMucmFuZ2VZWzBdLAogICAgICAgICAgICAgICAgbWF4OiB0aGlzLnJhbmdlWVsxXSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgekF4aXMzRDogewogICAgICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgICAgICAgIG1pbjogdGhpcy5oZWlnaHRtYXBTY2FsZSAqIC0xLAogICAgICAgICAgICAgICAgbWF4OiB0aGlzLmhlaWdodG1hcFNjYWxlLAogICAgICAgICAgICAgICAgbmFtZVRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yQXhpc05hbWUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBheGlzUG9pbnRlcjogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24odmFsdWU6IGFueSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoMikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdyaWQzRDogewogICAgICAgICAgICAgICAgYXhpc0xhYmVsOiB7CiAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yQXhpc0xhYmVsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7CiAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yQXhpc0xpbmUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXhpc1RpY2s6IHsKICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JBeGlzVGljawogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzcGxpdExpbmU6IHsKICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JTcGxpdExpbmUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JBeGlzUG9pbnRlcgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb2xvckF4aXNQb2ludGVyCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcmllczogdGhpcy5zZXJpZXMKICAgICAgICB9CiAgICB9CgogICAgZ2V0IGNoYXJ0ICgpOiBFQ2hhcnRzIHwgbnVsbCB7CiAgICAgICAgY29uc3QgaGVpZ2h0bWFwID0gdGhpcy4kcmVmcy5oZWlnaHRtYXAKICAgICAgICByZXR1cm4gaGVpZ2h0bWFwPy5pbnN0ID8/IG51bGwKICAgIH0KCiAgICBnZXQgcHJvZmlsZXMgKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmludGVyL2dldEJlZE1lc2hQcm9maWxlcyddCiAgICB9CgogICAgZ2V0IGJlZF9tZXNoKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLmJlZF9tZXNoID8/IG51bGwKICAgIH0KCiAgICBAV2F0Y2goJ2JlZF9tZXNoJywgeyBkZWVwOiB0cnVlIH0pCiAgICBiZWRfbWVzaENoYW5nZWQoKSB7CiAgICAgICAgdGhpcy5jaGFydD8uc2V0T3B0aW9uKHRoaXMuY2hhcnRPcHRpb25zKQogICAgfQoKICAgIGdldCBzaG93UHJvYmVkKCk6IGJvb2xlYW4gewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudmlldy5oZWlnaHRtYXAucHJvYmVkID8/IHRydWUKICAgIH0KCiAgICBzZXQgc2hvd1Byb2JlZChuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5oZWlnaHRtYXAucHJvYmVkJywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBzaG93TWVzaCgpOiBib29sZWFuIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuaGVpZ2h0bWFwLm1lc2ggPz8gdHJ1ZQogICAgfQoKICAgIHNldCBzaG93TWVzaChuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5oZWlnaHRtYXAubWVzaCcsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgc2hvd0ZsYXQoKTogYm9vbGVhbiB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS52aWV3LmhlaWdodG1hcC5mbGF0ID8/IHRydWUKICAgIH0KCiAgICBzZXQgc2hvd0ZsYXQobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ3ZpZXcuaGVpZ2h0bWFwLmZsYXQnLCB2YWx1ZTogbmV3VmFsIH0pCiAgICB9CgogICAgZ2V0IHdpcmVmcmFtZSgpOiBib29sZWFuIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuaGVpZ2h0bWFwLndpcmVmcmFtZSA/PyB0cnVlCiAgICB9CgogICAgc2V0IHdpcmVmcmFtZShuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAndmlldy5oZWlnaHRtYXAud2lyZWZyYW1lJywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBzY2FsZSgpOiBib29sZWFuIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuaGVpZ2h0bWFwLnNjYWxlID8/IHRydWUKICAgIH0KCiAgICBzZXQgc2NhbGUobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ3ZpZXcuaGVpZ2h0bWFwLnNjYWxlJywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCBzY2FsZVZpc3VhbE1hcCgpOiBib29sZWFuIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLnZpZXcuaGVpZ2h0bWFwLnNjYWxlVmlzdWFsTWFwID8/IGZhbHNlCiAgICB9CgogICAgc2V0IHNjYWxlVmlzdWFsTWFwKG5ld1ZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7IG5hbWU6ICd2aWV3LmhlaWdodG1hcC5zY2FsZVZpc3VhbE1hcCcsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgcmFuZ2VYKCk6IG51bWJlcltdIHsKICAgICAgICBjb25zdCBheGlzX21pbmltdW0gPSB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLnRvb2xoZWFkPy5heGlzX21pbmltdW0KICAgICAgICBjb25zdCBheGlzX21heGltdW0gPSB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLnRvb2xoZWFkPy5heGlzX21heGltdW0KCiAgICAgICAgcmV0dXJuIFtheGlzX21pbmltdW1bMF0gPz8gMCwgYXhpc19tYXhpbXVtWzBdID8/IDBdCiAgICB9CgogICAgZ2V0IHJhbmdlWSgpOiBudW1iZXJbXSB7CiAgICAgICAgY29uc3QgYXhpc19taW5pbXVtID0gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci50b29saGVhZD8uYXhpc19taW5pbXVtID8/IFswLDBdCiAgICAgICAgY29uc3QgYXhpc19tYXhpbXVtID0gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci50b29saGVhZD8uYXhpc19tYXhpbXVtID8/IFswLDBdCgogICAgICAgIHJldHVybiBbYXhpc19taW5pbXVtWzFdID8/IDAsIGF4aXNfbWF4aW11bVsxXSA/PyAwXQogICAgfQoKICAgIGdldCBoZWlnaHRtYXBMaW1pdCgpOiBudW1iZXJbXSB7CiAgICAgICAgbGV0IG1pbiA9IDAKICAgICAgICBsZXQgbWF4ID0gMAoKICAgICAgICBpZiAodGhpcy5iZWRfbWVzaCkgewogICAgICAgICAgICBjb25zdCBwb2ludHMgPSBbXQogICAgICAgICAgICBpZiAodGhpcy5zaG93UHJvYmVkKSB7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiB0aGlzLmJlZF9tZXNoLnByb2JlZF9tYXRyaXgpIGZvciAoY29uc3QgY29sIG9mIHJvdykgcG9pbnRzLnB1c2goY29sKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLnNob3dNZXNoKSB7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiB0aGlzLmJlZF9tZXNoLm1lc2hfbWF0cml4KSBmb3IgKGNvbnN0IGNvbCBvZiByb3cpIHBvaW50cy5wdXNoKGNvbCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWluID0gTWF0aC5taW4obWluLCAuLi5wb2ludHMpCiAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgLi4ucG9pbnRzKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFttaW4sIG1heF0KICAgIH0KCiAgICBnZXQgcHJvYmVkSGVpZ2h0bWFwTGltaXQoKTogbnVtYmVyW10gewogICAgICAgIGxldCBtaW4gPSAwCiAgICAgICAgbGV0IG1heCA9IDAKCiAgICAgICAgaWYgKHRoaXMuYmVkX21lc2gpIHsKICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gW10KICAgICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgdGhpcy5iZWRfbWVzaC5wcm9iZWRfbWF0cml4KSBmb3IgKGNvbnN0IGNvbCBvZiByb3cpIHBvaW50cy5wdXNoKGNvbCkKCiAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgLi4ucG9pbnRzKQogICAgICAgICAgICBtYXggPSBNYXRoLm1heChtYXgsIC4uLnBvaW50cykKICAgICAgICB9CgogICAgICAgIHJldHVybiBbbWluLCBtYXhdCiAgICB9CgogICAgZ2V0IGhlaWdodG1hcFJhbmdlTGltaXQoKTogbnVtYmVyW10gewogICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSB0aGlzLmhlaWdodG1hcExpbWl0CgogICAgICAgIGNvbnN0IG1pblJhbmdlID0gTWF0aC5yb3VuZChNYXRoLm1heChNYXRoLmFicyhtaW4pLCBNYXRoLmFicyhtYXgpKSAqIDEwKSAvIDEwCiAgICAgICAgY29uc3QgbWF4UmFuZ2UgPSBNYXRoLm1heChtaW5SYW5nZSwgMC41KQoKICAgICAgICByZXR1cm4gW21pblJhbmdlLCBtYXhSYW5nZV0KICAgIH0KCiAgICBnZXQgc2VsZWN0ZWQoKTogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICdwcm9iZWQnOiB0aGlzLnNob3dQcm9iZWQsCiAgICAgICAgICAgICdtZXNoJzogdGhpcy5zaG93TWVzaCwKICAgICAgICAgICAgJ2ZsYXQnOiB0aGlzLnNob3dGbGF0LAogICAgICAgIH0KICAgIH0KCiAgICBnZXQgc2VyaWVzKCk6IEhlaWdodG1hcFNlcmllW10gewogICAgICAgIGNvbnN0IHNlcmllcyA9IFtdCgogICAgICAgIGlmICh0aGlzLmJlZF9tZXNoKSB7CiAgICAgICAgICAgIHNlcmllcy5wdXNoKHRoaXMuc2VyaWVzUHJvYmVkKQogICAgICAgICAgICBzZXJpZXMucHVzaCh0aGlzLnNlcmllc01lc2gpCiAgICAgICAgICAgIHNlcmllcy5wdXNoKHRoaXMuc2VyaWVzRmxhdCkKICAgICAgICB9CgogICAgICAgIHJldHVybiBzZXJpZXMKICAgIH0KCiAgICBnZXQgc2VyaWVzUHJvYmVkKCk6IEhlaWdodG1hcFNlcmllIHsKICAgICAgICBjb25zdCBzZXJpZTogSGVpZ2h0bWFwU2VyaWUgPSB7CiAgICAgICAgICAgIHR5cGU6ICdzdXJmYWNlJywKICAgICAgICAgICAgbmFtZTogJ3Byb2JlZCcsCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IHRoaXMucHJvYmVkT3BhY2l0eQogICAgICAgICAgICB9LAogICAgICAgICAgICB3aXJlZnJhbWU6IHsKICAgICAgICAgICAgICAgIHNob3c6IHRoaXMud2lyZWZyYW1lCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmJlZF9tZXNoKSB7CiAgICAgICAgICAgIGNvbnN0IHhDb3VudCA9IHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeFswXS5sZW5ndGgKICAgICAgICAgICAgY29uc3QgeUNvdW50ID0gdGhpcy5iZWRfbWVzaC5wcm9iZWRfbWF0cml4Lmxlbmd0aAogICAgICAgICAgICBjb25zdCB4TWluID0gdGhpcy5iZWRfbWVzaC5tZXNoX21pblswXQogICAgICAgICAgICBjb25zdCB4TWF4ID0gdGhpcy5iZWRfbWVzaC5tZXNoX21heFswXQogICAgICAgICAgICBjb25zdCB5TWluID0gdGhpcy5iZWRfbWVzaC5tZXNoX21pblsxXQogICAgICAgICAgICBjb25zdCB5TWF4ID0gdGhpcy5iZWRfbWVzaC5tZXNoX21heFsxXQogICAgICAgICAgICBjb25zdCB4U3RlcCA9ICh4TWF4IC0geE1pbikgLyAoeENvdW50IC0gMSkKICAgICAgICAgICAgY29uc3QgeVN0ZXAgPSAoeU1heCAtIHlNaW4pIC8gKHlDb3VudCAtIDEpCgogICAgICAgICAgICBjb25zdCBkYXRhOiBhbnlbXSA9IFtdCgogICAgICAgICAgICBsZXQgeVBvaW50ID0gMAogICAgICAgICAgICB0aGlzLmJlZF9tZXNoLnByb2JlZF9tYXRyaXguZm9yRWFjaCgobWVzaFJvdzogbnVtYmVyW10pID0+IHsKICAgICAgICAgICAgICAgIGxldCB4UG9pbnQgPSAwCiAgICAgICAgICAgICAgICBtZXNoUm93LmZvckVhY2goKHZhbHVlOiBudW1iZXIpID0+IHsKICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goWwogICAgICAgICAgICAgICAgICAgICAgICAoeE1pbiArIHhTdGVwICogeFBvaW50KSwKICAgICAgICAgICAgICAgICAgICAgICAgKHlNaW4gKyB5U3RlcCAqIHlQb2ludCksCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgICAgICB4UG9pbnQrKwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHlQb2ludCsrCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBzZXJpZS5kYXRhID0gZGF0YQogICAgICAgICAgICBzZXJpZS5kYXRhU2hhcGUgPSBbeUNvdW50LCB4Q291bnRdCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2VyaWUKICAgIH0KCiAgICBnZXQgc2VyaWVzTWVzaCgpOiBIZWlnaHRtYXBTZXJpZSB7CiAgICAgICAgY29uc3Qgc2VyaWU6IEhlaWdodG1hcFNlcmllID0gewogICAgICAgICAgICB0eXBlOiAnc3VyZmFjZScsCiAgICAgICAgICAgIG5hbWU6ICdtZXNoJywKICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgICAgb3BhY2l0eTogdGhpcy5tZXNoT3BhY2l0eQogICAgICAgICAgICB9LAogICAgICAgICAgICB3aXJlZnJhbWU6IHsKICAgICAgICAgICAgICAgIHNob3c6IHRoaXMud2lyZWZyYW1lLAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5iZWRfbWVzaCkgewogICAgICAgICAgICBjb25zdCB4Q291bnQgPSB0aGlzLmJlZF9tZXNoLm1lc2hfbWF0cml4WzBdLmxlbmd0aAogICAgICAgICAgICBjb25zdCB5Q291bnQgPSB0aGlzLmJlZF9tZXNoLm1lc2hfbWF0cml4Lmxlbmd0aAogICAgICAgICAgICBjb25zdCB4TWluID0gdGhpcy5iZWRfbWVzaC5tZXNoX21pblswXQogICAgICAgICAgICBjb25zdCB4TWF4ID0gdGhpcy5iZWRfbWVzaC5tZXNoX21heFswXQogICAgICAgICAgICBjb25zdCB5TWluID0gdGhpcy5iZWRfbWVzaC5tZXNoX21pblsxXQogICAgICAgICAgICBjb25zdCB5TWF4ID0gdGhpcy5iZWRfbWVzaC5tZXNoX21heFsxXQogICAgICAgICAgICBjb25zdCB4U3RlcCA9ICh4TWF4IC0geE1pbikgLyAoeENvdW50IC0gMSkKICAgICAgICAgICAgY29uc3QgeVN0ZXAgPSAoeU1heCAtIHlNaW4pIC8gKHlDb3VudCAtIDEpCgogICAgICAgICAgICBjb25zdCBkYXRhOiBhbnlbXSA9IFtdCgogICAgICAgICAgICBsZXQgeVBvaW50ID0gMAogICAgICAgICAgICB0aGlzLmJlZF9tZXNoLm1lc2hfbWF0cml4LmZvckVhY2goKG1lc2hSb3c6IG51bWJlcltdKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgeFBvaW50ID0gMAogICAgICAgICAgICAgICAgbWVzaFJvdy5mb3JFYWNoKCh2YWx1ZTogbnVtYmVyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFsKICAgICAgICAgICAgICAgICAgICAgICAgKHhNaW4gKyB4U3RlcCAqIHhQb2ludCksCiAgICAgICAgICAgICAgICAgICAgICAgICh5TWluICsgeVN0ZXAgKiB5UG9pbnQpLAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgeFBvaW50KysKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB5UG9pbnQrKwogICAgICAgICAgICB9KQoKICAgICAgICAgICAgc2VyaWUuZGF0YSA9IGRhdGEKICAgICAgICAgICAgc2VyaWUuZGF0YVNoYXBlID0gW3lDb3VudCwgeENvdW50XQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlcmllCiAgICB9CgogICAgZ2V0IHNlcmllc0ZsYXQoKTogSGVpZ2h0bWFwU2VyaWUgewogICAgICAgIGNvbnN0IHNlcmllOiBIZWlnaHRtYXBTZXJpZSA9IHsKICAgICAgICAgICAgdHlwZTogJ3N1cmZhY2UnLAogICAgICAgICAgICBuYW1lOiAnZmxhdCcsCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgIGNvbG9yOiBbMSwgMSwgMSwgMV0sCiAgICAgICAgICAgICAgICBvcGFjaXR5OiB0aGlzLmZsYXRPcGFjaXR5CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdpcmVmcmFtZTogewogICAgICAgICAgICAgICAgc2hvdzogdGhpcy53aXJlZnJhbWUKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci5jb25maWdmaWxlPy5zZXR0aW5ncz8uYmVkX21lc2gKICAgICAgICBpZiAoY29uZmlnKSB7CiAgICAgICAgICAgIGxldCBwcm9iZV9jb3VudCA9IFsxLDFdCiAgICAgICAgICAgIGlmIChjb25maWcucHJvYmVfY291bnQgJiYgdHlwZW9mIGNvbmZpZy5wcm9iZV9jb3VudCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIHByb2JlX2NvdW50ID0gY29uZmlnLnByb2JlX2NvdW50LnNwbGl0KCcsJykKICAgICAgICAgICAgfSBlbHNlIGlmIChjb25maWcucHJvYmVfY291bnQpIHsKICAgICAgICAgICAgICAgIHByb2JlX2NvdW50ID0gY29uZmlnLnByb2JlX2NvdW50CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnJvdW5kX3Byb2JlX2NvdW50KSB7CiAgICAgICAgICAgICAgICBwcm9iZV9jb3VudCA9IFtjb25maWcucm91bmRfcHJvYmVfY291bnQsIGNvbmZpZy5yb3VuZF9wcm9iZV9jb3VudF0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IG1lc2hfbWluID0gW10KICAgICAgICAgICAgbGV0IG1lc2hfbWF4ID0gW10KCiAgICAgICAgICAgIGlmIChjb25maWcubWVzaF9taW4gJiYgY29uZmlnLm1lc2hfbWF4KSB7CiAgICAgICAgICAgICAgICAvLyBpcyBubyBkZWx0YQogICAgICAgICAgICAgICAgbWVzaF9taW4gPSAodHlwZW9mIGNvbmZpZy5tZXNoX21pbiA9PT0gJ3N0cmluZycpID8gY29uZmlnLm1lc2hfbWluLnNwbGl0KCcsJykgOiBjb25maWcubWVzaF9taW4KICAgICAgICAgICAgICAgIG1lc2hfbWF4ID0gKHR5cGVvZiBjb25maWcubWVzaF9tYXggPT09ICdzdHJpbmcnKSA/IGNvbmZpZy5tZXNoX21heC5zcGxpdCgnLCcpIDogY29uZmlnLm1lc2hfbWF4CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBkZWx0YSBtaW4vbWF4CiAgICAgICAgICAgICAgICBtZXNoX21pbiA9IFsKICAgICAgICAgICAgICAgICAgICBjb25maWcubWVzaF9yYWRpdXMgKiAtMSwKICAgICAgICAgICAgICAgICAgICBjb25maWcubWVzaF9yYWRpdXMgKiAtMQogICAgICAgICAgICAgICAgXQoKICAgICAgICAgICAgICAgIG1lc2hfbWF4ID0gWwogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5tZXNoX3JhZGl1cywKICAgICAgICAgICAgICAgICAgICBjb25maWcubWVzaF9yYWRpdXMKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgeENvdW50ID0gcHJvYmVfY291bnRbMF0KICAgICAgICAgICAgY29uc3QgeUNvdW50ID0gcHJvYmVfY291bnRbMV0KICAgICAgICAgICAgY29uc3QgeE1pbiA9IHBhcnNlRmxvYXQobWVzaF9taW5bMF0pCiAgICAgICAgICAgIGNvbnN0IHhNYXggPSBwYXJzZUZsb2F0KG1lc2hfbWF4WzBdKQogICAgICAgICAgICBjb25zdCB5TWluID0gcGFyc2VGbG9hdChtZXNoX21pblsxXSkKICAgICAgICAgICAgY29uc3QgeU1heCA9IHBhcnNlRmxvYXQobWVzaF9tYXhbMV0pCiAgICAgICAgICAgIGNvbnN0IHhTdGVwID0gKHhNYXggLSB4TWluKSAvICh4Q291bnQgLSAxKQogICAgICAgICAgICBjb25zdCB5U3RlcCA9ICh5TWF4IC0geU1pbikgLyAoeUNvdW50IC0gMSkKCiAgICAgICAgICAgIGNvbnN0IGRhdGE6IG51bWJlcltdW10gPSBbXQoKICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB5Q291bnQ7IHkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB4Q291bnQ7IHgrKykgewogICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChbCiAgICAgICAgICAgICAgICAgICAgICAgIHhNaW4gKyB4U3RlcCAqIHgsCiAgICAgICAgICAgICAgICAgICAgICAgIHlNaW4gKyB5U3RlcCAqIHksCiAgICAgICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBzZXJpZS5kYXRhID0gZGF0YQogICAgICAgICAgICBzZXJpZS5kYXRhU2hhcGUgPSBbeUNvdW50LCB4Q291bnRdCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2VyaWUKICAgIH0KCiAgICBnZXQgdmlzdWFsTWFwUmFuZ2UoKTogbnVtYmVyW10gewogICAgICAgIGlmICghdGhpcy5zY2FsZVZpc3VhbE1hcCkgcmV0dXJuIFstMC4xLCAwLjFdCgogICAgICAgIHJldHVybiB0aGlzLmhlaWdodG1hcExpbWl0CiAgICB9CgogICAgZ2V0IHZpc3VhbE1hcFNlcmllc0luZGV4KCk6IG51bWJlcltdIHsKICAgICAgICBjb25zdCBvdXRwdXQgPSBbXQoKICAgICAgICBpZiAodGhpcy5zaG93UHJvYmVkKSBvdXRwdXQucHVzaCgwKQogICAgICAgIGVsc2UgaWYgKHRoaXMuc2hvd01lc2gpIG91dHB1dC5wdXNoKDEpCgogICAgICAgIHJldHVybiBvdXRwdXQKICAgIH0KCiAgICBnZXQgYmVkTWVzaE1heFBvaW50KCkgewogICAgICAgIGlmICh0aGlzLmJlZF9tZXNoLnByb2ZpbGVfbmFtZSA9PT0gJycpIHJldHVybiB7IHJvdzogMCwgY29sOiAwLCBwb3NpdGlvblg6IDAsIHBvc2l0aW9uWTogMCwgdmFsdWU6IDAgfQoKICAgICAgICBjb25zdCBbICwgbWF4XSA9IHRoaXMucHJvYmVkSGVpZ2h0bWFwTGltaXQKCiAgICAgICAgbGV0IHJvdyA9IDAKICAgICAgICBsZXQgY29sID0gMAogICAgICAgIHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeC5mb3JFYWNoKChyb3dQb2ludHM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyKSA9PiB7CiAgICAgICAgICAgIGlmIChNYXRoLm1heCguLi5yb3dQb2ludHMpID09PSBtYXgpIHsKICAgICAgICAgICAgICAgIHJvdyA9IGluZGV4ICsgMQogICAgICAgICAgICAgICAgY29sID0gcm93UG9pbnRzLmZpbmRJbmRleCgocG9pbnQ6IG51bWJlcikgPT4gcG9pbnQgPT09IG1heCkgKyAxCiAgICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICBjb25zdCBwb3NpdGlvblggPSBNYXRoLnJvdW5kKCh0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzBdICsgKHRoaXMuYmVkX21lc2gubWVzaF9tYXhbMF0gLSB0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzBdKSAvIHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeFswXS5sZW5ndGggKiAoY29sIC0gMSkpICogMTApIC8gMTAKICAgICAgICBjb25zdCBwb3NpdGlvblkgPSBNYXRoLnJvdW5kKCh0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzFdICsgKHRoaXMuYmVkX21lc2gubWVzaF9tYXhbMV0gLSB0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzFdKSAvIHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeC5sZW5ndGggKiAocm93IC0gMSkpICogMTApIC8gMTAKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcm93LAogICAgICAgICAgICBjb2wsCiAgICAgICAgICAgIHBvc2l0aW9uWCwKICAgICAgICAgICAgcG9zaXRpb25ZLAogICAgICAgICAgICB2YWx1ZTogTWF0aC5yb3VuZChtYXggKiAxMDAwKSAvIDEwMDAKICAgICAgICB9CiAgICB9CgogICAgZ2V0IGJlZE1lc2hNaW5Qb2ludCgpIHsKICAgICAgICBpZiAodGhpcy5iZWRfbWVzaC5wcm9maWxlX25hbWUgPT09ICcnKSByZXR1cm4geyByb3c6IDAsIGNvbDogMCwgcG9zaXRpb25YOiAwLCBwb3NpdGlvblk6IDAsIHZhbHVlOiAwIH0KCiAgICAgICAgY29uc3QgW21pbiwgXSA9IHRoaXMucHJvYmVkSGVpZ2h0bWFwTGltaXQKCiAgICAgICAgbGV0IHJvdyA9IDAKICAgICAgICBsZXQgY29sID0gMAogICAgICAgIHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeC5mb3JFYWNoKChyb3dQb2ludHM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyKSA9PiB7CiAgICAgICAgICAgIGlmIChNYXRoLm1pbiguLi5yb3dQb2ludHMpID09PSBtaW4pIHsKICAgICAgICAgICAgICAgIHJvdyA9IGluZGV4ICsgMQogICAgICAgICAgICAgICAgY29sID0gcm93UG9pbnRzLmZpbmRJbmRleCgocG9pbnQ6IG51bWJlcikgPT4gcG9pbnQgPT09IG1pbikgKyAxCiAgICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICBjb25zdCBwb3NpdGlvblggPSBNYXRoLnJvdW5kKCh0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzBdICsgKHRoaXMuYmVkX21lc2gubWVzaF9tYXhbMF0gLSB0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzBdKSAvIHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeFswXS5sZW5ndGggKiAoY29sIC0gMSkpICogMTApIC8gMTAKICAgICAgICBjb25zdCBwb3NpdGlvblkgPSBNYXRoLnJvdW5kKCh0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzFdICsgKHRoaXMuYmVkX21lc2gubWVzaF9tYXhbMV0gLSB0aGlzLmJlZF9tZXNoLm1lc2hfbWluWzFdKSAvIHRoaXMuYmVkX21lc2gucHJvYmVkX21hdHJpeC5sZW5ndGggKiAocm93IC0gMSkpICogMTApIC8gMTAKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcm93LAogICAgICAgICAgICBjb2wsCiAgICAgICAgICAgIHBvc2l0aW9uWCwKICAgICAgICAgICAgcG9zaXRpb25ZLAogICAgICAgICAgICB2YWx1ZTogTWF0aC5yb3VuZChtaW4gKiAxMDAwKSAvIDEwMDAKICAgICAgICB9CiAgICB9CgogICAgZ2V0IG1lc2hMb2FkZWQoKSB7CiAgICAgICAgaWYodGhpcy5iZWRfbWVzaCAhPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5iZWRfbWVzaC5wcm9maWxlX25hbWUgIT09ICcnCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfQoKICAgIHRvb2x0aXBGb3JtYXR0ZXIoZGF0YTogYW55KTogc3RyaW5nIHsKICAgICAgICBjb25zdCBvdXRwdXRBcnJheTogc3RyaW5nW10gPSBbXQogICAgICAgIG91dHB1dEFycmF5LnB1c2goJzxiPicrZGF0YS5zZXJpZXNOYW1lKyc8L2I+JykKCiAgICAgICAgT2JqZWN0LmtleXMoZGF0YS5lbmNvZGUpLnNvcnQoKS5mb3JFYWNoKChheGlzTmFtZTogc3RyaW5nKSA9PiB7CiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2goJzxiPicgKyBheGlzTmFtZS50b1VwcGVyQ2FzZSgpICsgJzwvYj46ICcrZGF0YS5kYXRhW2RhdGEuZW5jb2RlW2F4aXNOYW1lXVswXV0udG9GaXhlZChheGlzTmFtZSA9PT0gJ3onID8gMyA6IDEpICsgJyBtbScpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG91dHB1dEFycmF5LmpvaW4oJzxiciAvPicpCiAgICB9CgogICAgbG9hZFByb2ZpbGUobmFtZTogc3RyaW5nKTogdm9pZCB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogJ0JFRF9NRVNIX1BST0ZJTEUgTE9BRD0nK25hbWUsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsgc2NyaXB0OiAnQkVEX01FU0hfUFJPRklMRSBMT0FEPScrbmFtZSB9LCB7IGxvYWRpbmc6ICdiZWRNZXNoTG9hZF8nK25hbWUgfSkKICAgIH0KCiAgICBvcGVuUmVuYW1lUHJvZmlsZSgpOiB2b2lkIHsKICAgICAgICB0aGlzLm5ld05hbWUgPSB0aGlzLmJlZF9tZXNoPy5wcm9maWxlX25hbWUgPz8gJycKICAgICAgICB0aGlzLm9sZE5hbWUgPSB0aGlzLmJlZF9tZXNoLnByb2ZpbGVfbmFtZQogICAgICAgIHRoaXMucmVuYW1lRGlhbG9nID0gdHJ1ZQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dERpYWxvZ1JlbmFtZUhlaWdodG1hcE5hbWU/LmZvY3VzKCkKICAgICAgICB9LCAyMDApCiAgICB9CgogICAgcmVuYW1lUHJvZmlsZSgpOiB2b2lkIHsKICAgICAgICB0aGlzLnJlbmFtZURpYWxvZyA9IGZhbHNlCgogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7IG1lc3NhZ2U6ICdCRURfTUVTSF9QUk9GSUxFIFNBVkU9Jyt0aGlzLm5ld05hbWUsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7IG1lc3NhZ2U6ICdCRURfTUVTSF9QUk9GSUxFIFJFTU9WRT0nK3RoaXMub2xkTmFtZSwgdHlwZTogJ2NvbW1hbmQnIH0pCgogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsgc2NyaXB0OiAnQkVEX01FU0hfUFJPRklMRSBTQVZFPScrdGhpcy5uZXdOYW1lIH0sIHsgbG9hZGluZzogJ2JlZE1lc2hSZW5hbWUnIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgeyBzY3JpcHQ6ICdCRURfTUVTSF9QUk9GSUxFIFJFTU9WRT0nK3RoaXMub2xkTmFtZSB9LCB7IGxvYWRpbmc6ICdiZWRNZXNoUmVuYW1lJyB9KQoKICAgICAgICB0aGlzLm5ld05hbWUgPSAnJwogICAgICAgIHRoaXMub2xkTmFtZSA9ICcnCiAgICB9CgogICAgb3BlblJlbW92ZVByb2ZpbGUobmFtZTogc3RyaW5nKTogdm9pZCB7CiAgICAgICAgdGhpcy5yZW1vdmVEaWFsb2dQcm9maWxlID0gbmFtZQogICAgICAgIHRoaXMucmVtb3ZlRGlhbG9nID0gdHJ1ZQogICAgfQoKICAgIHJlbW92ZVByb2ZpbGUoKTogdm9pZCB7CiAgICAgICAgdGhpcy5yZW1vdmVEaWFsb2cgPSBmYWxzZQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7IG1lc3NhZ2U6ICdCRURfTUVTSF9QUk9GSUxFIFJFTU9WRT0nK3RoaXMucmVtb3ZlRGlhbG9nUHJvZmlsZSwgdHlwZTogJ2NvbW1hbmQnIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgeyBzY3JpcHQ6ICdCRURfTUVTSF9QUk9GSUxFIFJFTU9WRT0nK3RoaXMucmVtb3ZlRGlhbG9nUHJvZmlsZSB9LCB7CiAgICAgICAgICAgIGFjdGlvbjogJ3ByaW50ZXIvcmVtb3ZlQmVkTWVzaFByb2ZpbGUnLAogICAgICAgICAgICBhY3Rpb25QYXlsb2FkOiB7bmFtZTogdGhpcy5yZW1vdmVEaWFsb2dQcm9maWxlfSwKICAgICAgICAgICAgbG9hZGluZzogJ2JlZE1lc2hSZW5hbWVfJyt0aGlzLnJlbW92ZURpYWxvZ1Byb2ZpbGUKICAgICAgICB9KQogICAgICAgIHRoaXMucmVtb3ZlRGlhbG9nUHJvZmlsZSA9ICcnCiAgICB9CgogICAgaG9tZVByaW50ZXIoKTogdm9pZCB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogJ0cyOCcsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsgc2NyaXB0OiAnRzI4JyB9LCB7IGxvYWRpbmc6ICdob21lQWxsJyB9KQogICAgfQoKICAgIGNsZWFyQmVkTWVzaCgpOiB2b2lkIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VydmVyL2FkZEV2ZW50JywgeyBtZXNzYWdlOiAnQkVEX01FU0hfQ0xFQVInLCB0eXBlOiAnY29tbWFuZCcgfSkKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgncHJpbnRlci5nY29kZS5zY3JpcHQnLCB7IHNjcmlwdDogJ0JFRF9NRVNIX0NMRUFSJyB9LCB7IGxvYWRpbmc6ICdiZWRNZXNoQ2xlYXInIH0pCiAgICB9CgogICAgY2FsaWJyYXRlTWVzaCgpOiB2b2lkIHsKICAgICAgICB0aGlzLmNhbGlicmF0ZURpYWxvZyA9IGZhbHNlCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogJ0JFRF9NRVNIX0NBTElCUkFURScsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsgc2NyaXB0OiAnQkVEX01FU0hfQ0FMSUJSQVRFJyB9LCB7IGxvYWRpbmc6ICdiZWRNZXNoQ2FsaWJyYXRlJyB9KQogICAgfQoKICAgIGJlZm9yZURlc3Ryb3koKTogdm9pZCB7CiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm4KICAgICAgICBpZiAodGhpcy5jaGFydCkgdGhpcy5jaGFydC5kaXNwb3NlKCkKICAgIH0KfQo="},{"version":3,"sources":["Heightmap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Heightmap.vue","sourceRoot":"src/pages","sourcesContent":["<style scoped>\n.rename-profile {\n    text-transform: none;\n}\n</style>\n\n<template>\n    <div>\n        <v-row v-if=\"klipperReadyForGui\">\n            <v-col class=\"col-12 col-md-8 pb-0\">\n                <panel card-class=\"heightmap-map-panel\" :title=\"$t('Heightmap.Heightmap')\" icon=\"mdi-grid\">\n                    <template v-slot:buttons-title>\n                        <v-btn text tile color=\"primary\" class=\"ml-1 d-none d-sm-inline-flex rename-profile\" v-if=\"meshLoaded\" @click=\"openRenameProfile()\">{{ bed_mesh.profile_name }}</v-btn>\n                    </template>\n                    <template v-slot:buttons>\n                        <v-btn text tile color=\"primary\" class=\"d-sm-none\" v-if=\"meshLoaded\" @click=\"openRenameProfile()\">{{ bed_mesh ? bed_mesh.profile_name : \"\" }}</v-btn>\n                        <v-btn icon tile class=\"d-none d-sm-flex\" @click=\"homePrinter\" :color=\"homedAxes.includes('xyz') ? 'primary' : 'warning'\" :loading=\"loadings.includes('homeAll')\" :title=\"$t('Heightmap.TitleHomeAll')\" :ripple=\"true\"><v-icon>mdi-home</v-icon></v-btn>\n                        <v-btn text tile class=\"d-none d-sm-flex\" @click=\"clearBedMesh\" :loading=\"loadings.includes('bedMeshClear')\" v-if=\"meshLoaded\" :title=\"$t('Heightmap.TitleClear')\">{{ $t('Heightmap.Clear') }}</v-btn>\n                        <v-btn text tile class=\"d-none d-sm-flex\" @click=\"calibrateDialog = true\" :loading=\"loadings.includes('bedMeshCalibrate')\" :disabled=\"printerIsPrinting\" :title=\"$t('Heightmap.TitleCalibrate')\">{{ $t('Heightmap.Calibrate') }}</v-btn>\n                    </template>\n                    <v-card-text class=\"d-sm-none text-center pb-0\">\n                        <v-item-group tile class=\"v-btn-toggle\" name=\"controllers\">\n                            <v-btn text small class=\"px-2 minwidth-0\" :color=\"homedAxes.includes('xyz') ? 'primary' : 'warning'\" @click=\"homePrinter\" :loading=\"loadings.includes('homeAll')\" :title=\"$t('Heightmap.TitleHomeAll')\"><v-icon :color=\"homedAxes.includes('xyz') ? 'primary' : 'warning'\" small>mdi-home</v-icon></v-btn>\n                            <v-btn text small class=\"px-2 minwidth-0\" color=\"primary\" @click=\"clearBedMesh\" :loading=\"loadings.includes('bedMeshClear')\" v-if=\"bed_mesh\" :title=\"$t('Heightmap.TitleClear')\">{{ $t('Heightmap.Clear') }}</v-btn>\n                            <v-btn text small class=\"px-2 minwidth-0\" color=\"primary\" @click=\"calibrateDialog = true\" :loading=\"loadings.includes('bedMeshCalibrate')\" :disabled=\"printerIsPrinting\" :title=\"$t('Heightmap.TitleCalibrate')\">{{ $t('Heightmap.Calibrate') }}</v-btn>\n                        </v-item-group>\n                    </v-card-text>\n                    <template v-if=\"!(meshLoaded)\">\n                        <v-card-text class=\"text-center py-3 font-italic\">\n                            {{ $t('Heightmap.NoBedMeshHasBeenLoadedYet') }}\n                        </v-card-text>\n                    </template>\n                    <template v-else>\n                        <v-card-text class=\"py-0 px-0\">\n                            <v-row>\n                                <v-col class=\"\">\n                                    <ECharts\n                                        ref=\"heightmap\"\n                                        :option=\"chartOptions\"\n                                        :init-options=\"{ renderer: 'svg' }\"\n                                        style=\"height: 400px; width: 100%; overflow: hidden;\"\n                                    ></ECharts>\n                                </v-col>\n                            </v-row>\n                            <v-row>\n                                <v-col class=\"col-12 col-sm-auto pt-0 pb-0 pl-sm-6 d-flex justify-center justify-sm-start\">\n                                    <v-switch v-model=\"scaleVisualMap\" :label=\"$t('Heightmap.Scale')\" class=\"mt-0 ml-5\"></v-switch>\n                                </v-col>\n                                <v-col class=\"d-flex justify-center pt-0 pb-6 pb-sm-3 pr-sm-16\">\n                                    <v-checkbox v-model=\"showProbed\" :label=\"$t('Heightmap.Probed')\" hide-details class=\"mx-3 mt-0\" ></v-checkbox>\n                                    <v-checkbox v-model=\"showMesh\" :label=\"$t('Heightmap.Mesh')\" hide-details class=\"mx-3 mt-0\" ></v-checkbox>\n                                    <v-checkbox v-model=\"showFlat\" :label=\"$t('Heightmap.Flat')\" hide-details class=\"mx-3 mt-0\" ></v-checkbox>\n                                </v-col>\n                            </v-row>\n                        </v-card-text>\n                        <v-divider></v-divider>\n                        <v-card-text class=\"pt-0 pb-3\">\n                            <v-row>\n                                <v-col class=\"col-4\">\n                                    <v-checkbox v-model=\"wireframe\" :label=\"$t('Heightmap.Wireframe')\" hide-details ></v-checkbox>\n                                </v-col>\n                                <v-col class=\"col-8\">\n                                    <v-slider :label=\"$t('Heightmap.Scale')\" :min=\"heightmapRangeLimit[0]\" :max=\"heightmapRangeLimit[1]\" v-model=\"heightmapScale\" :step=\"0.1\" ticks=\"always\" class=\"mt-4\" hide-details ></v-slider>\n                                </v-col>\n                            </v-row>\n                        </v-card-text>\n                    </template>\n                </panel>\n            </v-col>\n            <v-col class=\"col-12 col-md-4\">\n                <panel :title=\"$t('Heightmap.CurrentMesh.Headline')\" v-if=\"meshLoaded\" card-class=\"heightmap-current-mesh-panel\" icon=\"mdi-information\" :collapsible=\"true\" class=\"mt-0\">\n                    <v-card-text class=\"py-3 px-0\">\n                        <v-row class=\"px-3\">\n                            <v-col>{{ $t('Heightmap.CurrentMesh.Name') }}</v-col>\n                            <v-col class=\"text-right\">{{ bed_mesh.profile_name }}</v-col>\n                        </v-row>\n                        <v-divider class=\"my-3\"></v-divider>\n                        <v-row class=\"px-3\">\n                            <v-col>{{ $t('Heightmap.CurrentMesh.Size') }}</v-col>\n                            <v-col class=\"text-right\">{{ bed_mesh.probed_matrix[0].length }}x{{ bed_mesh.probed_matrix.length }}</v-col>\n                        </v-row>\n                        <v-divider class=\"my-3\"></v-divider>\n                        <v-row class=\"px-3\">\n                            <v-col>{{ $t('Heightmap.CurrentMesh.Max') }} [{{ bedMeshMaxPoint.positionX }}, {{ bedMeshMaxPoint.positionY }}]</v-col>\n                            <v-col class=\"text-right\">{{ bedMeshMaxPoint.value }} mm</v-col>\n                        </v-row>\n                        <v-divider class=\"my-3\"></v-divider>\n                        <v-row class=\"px-3\">\n                            <v-col>{{ $t('Heightmap.CurrentMesh.Min') }} [{{ bedMeshMinPoint.positionX }}, {{ bedMeshMinPoint.positionY }}]</v-col>\n                            <v-col class=\"text-right\">{{ bedMeshMinPoint.value }} mm</v-col>\n                        </v-row>\n                        <v-divider class=\"my-3\"></v-divider>\n                        <v-row class=\"px-3\">\n                            <v-col>{{ $t('Heightmap.CurrentMesh.Variance') }}</v-col>\n                            <v-col class=\"text-right\">{{ Math.abs(bedMeshMinPoint.value - bedMeshMaxPoint.value).toFixed(3) }} mm</v-col>\n                        </v-row>\n                    </v-card-text>\n                </panel>\n                <panel :title=\"$t('Heightmap.Profiles')\" card-class=\"heightmap-profiles-panel\" icon=\"mdi-stack-overflow\" :collapsible=\"true\" class=\"mt-6 mt-md-0\">\n                    <v-card-text class=\"py-0 px-0\" v-if=\"profiles.length\">\n                        <v-simple-table>\n                            <template v-slot:default>\n                                <tbody>\n                                <tr v-for=\"(profile, index) in profiles\" :key=\"index\" >\n                                    <td><span @click=\"loadProfile(profile.name)\" :class=\"profile.is_active ? 'font-weight-bold' : ''\" style=\"cursor: pointer;\">{{ profile.name }}</span><small class=\"ml-2\" v-if=\"'deleted' in profile.data\">({{ $t('Heightmap.Deleted') }})</small></td>\n                                    <td>\n                                        <v-tooltip top color=\"rgba(0,0,0,0.8)\">\n                                            <template v-slot:activator=\"{ on, attrs }\">\n                                                <small v-bind=\"attrs\" v-on=\"on\">{{ profile.variance.toFixed(3) }}</small>\n                                            </template>\n                                            <span>max: {{ profile.max }}<br />min: {{ profile.min }}</span>\n                                        </v-tooltip>\n                                    </td>\n                                    <td class=\"text-right\">\n                                        <v-btn-toggle dense no-gutters>\n                                            <v-btn class=\"minwidth-0\" @click=\"loadProfile(profile.name)\" :loading=\"loadings.includes('bedMeshLoad_'+profile.name)\" :disabled=\"profile.is_active || 'deleted' in profile.data\" ><v-icon small>mdi-view-grid-plus</v-icon></v-btn>\n                                            <v-btn class=\"minwidth-0\" @click=\"openRemoveProfile(profile.name)\" :loading=\"loadings.includes('bedMeshRemove_'+profile.name)\" :disabled=\"'deleted' in profile.data\" :title=\"$t('Heightmap.DeleteBedMeshProfile')\" ><v-icon small>mdi-delete</v-icon></v-btn>\n                                        </v-btn-toggle>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </template>\n                        </v-simple-table>\n                    </v-card-text>\n                    <v-card-text v-else>\n                        <p>{{ $t('Heightmap.NoProfile') }}</p>\n                    </v-card-text>\n                </panel>\n            </v-col>\n        </v-row>\n        <v-row v-else>\n            <v-alert\n                border=\"left\"\n                colored-border\n                type=\"warning\"\n                elevation=\"2\"\n                class=\"mx-auto mt-6\"\n                max-width=\"500\"\n                icon=\"mdi-lock-outline\"\n            >{{ $t('Heightmap.ErrorKlipperNotReady') }}</v-alert>\n        </v-row>\n        <v-dialog v-model=\"renameDialog\" persistent :max-width=\"400\" @keydown.esc=\"renameDialog = false\">\n            <panel :title=\"$t('Heightmap.RenameBedMeshProfile')\" icon=\"mdi-grid\" card-class=\"heightmap-rename-dialog\" :margin-bottom=\"false\">\n                <v-card-text>\n                    <v-text-field\n                        :label=\"$t('Heightmap.Name')\" \n                        v-model=\"newName\"\n                        ref=\"inputDialogRenameHeightmapName\"\n                        @keyup.enter=\"renameProfile\"\n                        required\n                    ></v-text-field>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn text @click=\"renameDialog = false\">{{ $t('Heightmap.Abort') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"renameProfile\">{{ $t('Heightmap.Rename') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"calibrateDialog\" persistent :max-width=\"400\" @keydown.esc=\"calibrateDialog = false\">\n            <panel :title=\"$t('Heightmap.BedMeshCalibrate')\" icon=\"mdi-grid\" card-class=\"heightmap-calibrate-dialog\" :margin-bottom=\"false\">\n                <v-card-text>\n                    <p>{{ $t('Heightmap.DoYouReallyWantToCalibrate') }}</p>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn text @click=\"calibrateDialog = false\">{{ $t('Heightmap.Abort') }}</v-btn>\n                    <v-btn color=\"primary\" text @click=\"calibrateMesh\">{{ $t('Heightmap.Calibrate') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n        <v-dialog v-model=\"removeDialog\" persistent :max-width=\"400\" @keydown.esc=\"removeDialog = false\">\n            <panel :title=\"$t('Heightmap.BedMeshRemove')\" icon=\"mdi-grid\" card-class=\"heightmap-calibrate-dialog\" :margin-bottom=\"false\">\n                <v-card-text>\n                    <p>{{ $t('Heightmap.DoYouReallyWantToDelete', { name: removeDialogProfile })  }}</p>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn text @click=\"removeDialog = false\">{{ $t('Heightmap.Abort') }}</v-btn>\n                    <v-btn color=\"error\" text @click=\"removeProfile\">{{ $t('Heightmap.Remove') }}</v-btn>\n                </v-card-actions>\n            </panel>\n        </v-dialog>\n    </div>\n</template>\n<script lang=\"ts\">\nimport {Component, Mixins, Watch} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport ControlMixin from '@/components/mixins/control'\n\nimport { createComponent } from 'echarts-for-vue'\nimport * as echarts from 'echarts'\nimport {ECharts} from 'echarts/core'\nimport 'echarts-gl'\nimport Panel from '@/components/ui/Panel.vue'\n\ninterface HeightmapSerie {\n    type: string\n    name: string\n    data: number[][]\n    dataShape?: number[]\n    itemStyle?: {\n        opacity?: number\n        color?: number[]\n    }\n    wireframe: {\n        show: boolean\n    }\n}\n\n@Component({\n    components: {\n        Panel,\n        ECharts: createComponent({ echarts }),\n    }\n})\nexport default class PageHeightmap extends Mixins(BaseMixin, ControlMixin) {\n\n    $refs!: {\n        // eslint-disable-next-line\n        heightmap: any,\n        inputDialogRenameHeightmapName: HTMLInputElement,\n    }\n\n    private renameDialog = false\n    private removeDialogProfile = ''\n    private removeDialog = false\n    private calibrateDialog = false\n    private newName = ''\n    private oldName = ''\n\n    private heightmapScale = 0.5\n    private probedOpacity = 1\n    private meshOpacity = 1\n    private flatOpacity = 0.5\n\n    private colorAxisName = 'rgba(255,255,255,0.5)'\n    private colorAxisLabel = 'rgba(255,255,255,0.5)'\n    private colorAxisLine = 'rgba(255,255,255,0.2)'\n    private colorAxisTick = 'rgba(255,255,255,0.2)'\n    private colorSplitLine = 'rgba(255,255,255,0.2)'\n\n    private colorAxisPointer = 'rgba(255,255,255,0.8)'\n\n    private colorVisualMap = 'rgba(255,255,255,0.8)'\n    private fontSizeVisualMap = 14\n\n    get chartOptions() {\n        return {\n            tooltip: {\n                backgroundColor: 'rgba(0,0,0,0.9)',\n                borderWidth: 0,\n                textStyle: {\n                    color: '#fff',\n                    fontSize: '14px'\n                },\n                padding: 15,\n                formatter: this.tooltipFormatter\n            },\n            darkMode: true,\n            animation: false,\n            legend: {\n                show: false,\n                selected: this.selected\n            },\n            visualMap: {\n                show: true,\n                min: this.visualMapRange[0],\n                max: this.visualMapRange[1],\n                calculable: true,\n                dimension: 2,\n                inRange: {\n                    color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n                },\n                seriesIndex: this.visualMapSeriesIndex,\n                left: this.isMobile ? 10 : 30,\n                top: 20,\n                bottom: 0,\n                itemWidth: this.isMobile ? 10 : 30,\n                itemHeight: 350,\n                precision: 3,\n                textStyle: {\n                    color: this.colorVisualMap,\n                    fontSize: this.fontSizeVisualMap\n                },\n            },\n            xAxis3D: {\n                type: 'value',\n                nameTextStyle: {\n                    color: this.colorAxisName\n                },\n                min: this.rangeX[0],\n                max: this.rangeX[1],\n                minInterval: 1\n            },\n            yAxis3D: {\n                type: 'value',\n                nameTextStyle: {\n                    color: this.colorAxisName\n                },\n                min: this.rangeY[0],\n                max: this.rangeY[1],\n            },\n            zAxis3D: {\n                type: 'value',\n                min: this.heightmapScale * -1,\n                max: this.heightmapScale,\n                nameTextStyle: {\n                    color: this.colorAxisName\n                },\n                axisPointer: {\n                    label: {\n                        formatter: function(value: any) {\n                            value = parseFloat(value)\n                            return value.toFixed(2)\n                        }\n                    }\n                }\n\n            },\n            grid3D: {\n                axisLabel: {\n                    textStyle: {\n                        color: this.colorAxisLabel\n                    }\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: this.colorAxisLine\n                    }\n                },\n                axisTick: {\n                    lineStyle: {\n                        color: this.colorAxisTick\n                    }\n                },\n                splitLine: {\n                    lineStyle: {\n                        color: this.colorSplitLine\n                    }\n                },\n                axisPointer: {\n                    lineStyle: {\n                        color: this.colorAxisPointer\n                    },\n                    label: {\n                        textStyle: {\n                            color: this.colorAxisPointer\n                        }\n                    }\n                }\n            },\n            series: this.series\n        }\n    }\n\n    get chart (): ECharts | null {\n        const heightmap = this.$refs.heightmap\n        return heightmap?.inst ?? null\n    }\n\n    get profiles () {\n        return this.$store.getters['printer/getBedMeshProfiles']\n    }\n\n    get bed_mesh() {\n        return this.$store.state.printer.bed_mesh ?? null\n    }\n\n    @Watch('bed_mesh', { deep: true })\n    bed_meshChanged() {\n        this.chart?.setOption(this.chartOptions)\n    }\n\n    get showProbed(): boolean {\n        return this.$store.state.gui.view.heightmap.probed ?? true\n    }\n\n    set showProbed(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.heightmap.probed', value: newVal })\n    }\n\n    get showMesh(): boolean {\n        return this.$store.state.gui.view.heightmap.mesh ?? true\n    }\n\n    set showMesh(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.heightmap.mesh', value: newVal })\n    }\n\n    get showFlat(): boolean {\n        return this.$store.state.gui.view.heightmap.flat ?? true\n    }\n\n    set showFlat(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.heightmap.flat', value: newVal })\n    }\n\n    get wireframe(): boolean {\n        return this.$store.state.gui.view.heightmap.wireframe ?? true\n    }\n\n    set wireframe(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.heightmap.wireframe', value: newVal })\n    }\n\n    get scale(): boolean {\n        return this.$store.state.gui.view.heightmap.scale ?? true\n    }\n\n    set scale(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.heightmap.scale', value: newVal })\n    }\n\n    get scaleVisualMap(): boolean {\n        return this.$store.state.gui.view.heightmap.scaleVisualMap ?? false\n    }\n\n    set scaleVisualMap(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'view.heightmap.scaleVisualMap', value: newVal })\n    }\n\n    get rangeX(): number[] {\n        const axis_minimum = this.$store.state.printer.toolhead?.axis_minimum\n        const axis_maximum = this.$store.state.printer.toolhead?.axis_maximum\n\n        return [axis_minimum[0] ?? 0, axis_maximum[0] ?? 0]\n    }\n\n    get rangeY(): number[] {\n        const axis_minimum = this.$store.state.printer.toolhead?.axis_minimum ?? [0,0]\n        const axis_maximum = this.$store.state.printer.toolhead?.axis_maximum ?? [0,0]\n\n        return [axis_minimum[1] ?? 0, axis_maximum[1] ?? 0]\n    }\n\n    get heightmapLimit(): number[] {\n        let min = 0\n        let max = 0\n\n        if (this.bed_mesh) {\n            const points = []\n            if (this.showProbed) {\n                for (const row of this.bed_mesh.probed_matrix) for (const col of row) points.push(col)\n            }\n            if (this.showMesh) {\n                for (const row of this.bed_mesh.mesh_matrix) for (const col of row) points.push(col)\n            }\n\n            min = Math.min(min, ...points)\n            max = Math.max(max, ...points)\n        }\n\n        return [min, max]\n    }\n\n    get probedHeightmapLimit(): number[] {\n        let min = 0\n        let max = 0\n\n        if (this.bed_mesh) {\n            const points = []\n            for (const row of this.bed_mesh.probed_matrix) for (const col of row) points.push(col)\n\n            min = Math.min(min, ...points)\n            max = Math.max(max, ...points)\n        }\n\n        return [min, max]\n    }\n\n    get heightmapRangeLimit(): number[] {\n        const [min, max] = this.heightmapLimit\n\n        const minRange = Math.round(Math.max(Math.abs(min), Math.abs(max)) * 10) / 10\n        const maxRange = Math.max(minRange, 0.5)\n\n        return [minRange, maxRange]\n    }\n\n    get selected(): { [key: string]: boolean } {\n        return {\n            'probed': this.showProbed,\n            'mesh': this.showMesh,\n            'flat': this.showFlat,\n        }\n    }\n\n    get series(): HeightmapSerie[] {\n        const series = []\n\n        if (this.bed_mesh) {\n            series.push(this.seriesProbed)\n            series.push(this.seriesMesh)\n            series.push(this.seriesFlat)\n        }\n\n        return series\n    }\n\n    get seriesProbed(): HeightmapSerie {\n        const serie: HeightmapSerie = {\n            type: 'surface',\n            name: 'probed',\n            data: [],\n            itemStyle: {\n                opacity: this.probedOpacity\n            },\n            wireframe: {\n                show: this.wireframe\n            }\n        }\n\n        if (this.bed_mesh) {\n            const xCount = this.bed_mesh.probed_matrix[0].length\n            const yCount = this.bed_mesh.probed_matrix.length\n            const xMin = this.bed_mesh.mesh_min[0]\n            const xMax = this.bed_mesh.mesh_max[0]\n            const yMin = this.bed_mesh.mesh_min[1]\n            const yMax = this.bed_mesh.mesh_max[1]\n            const xStep = (xMax - xMin) / (xCount - 1)\n            const yStep = (yMax - yMin) / (yCount - 1)\n\n            const data: any[] = []\n\n            let yPoint = 0\n            this.bed_mesh.probed_matrix.forEach((meshRow: number[]) => {\n                let xPoint = 0\n                meshRow.forEach((value: number) => {\n                    data.push([\n                        (xMin + xStep * xPoint),\n                        (yMin + yStep * yPoint),\n                        value\n                    ])\n                    xPoint++\n                })\n                yPoint++\n            })\n\n            serie.data = data\n            serie.dataShape = [yCount, xCount]\n        }\n\n        return serie\n    }\n\n    get seriesMesh(): HeightmapSerie {\n        const serie: HeightmapSerie = {\n            type: 'surface',\n            name: 'mesh',\n            data: [],\n            itemStyle: {\n                opacity: this.meshOpacity\n            },\n            wireframe: {\n                show: this.wireframe,\n            }\n        }\n\n        if (this.bed_mesh) {\n            const xCount = this.bed_mesh.mesh_matrix[0].length\n            const yCount = this.bed_mesh.mesh_matrix.length\n            const xMin = this.bed_mesh.mesh_min[0]\n            const xMax = this.bed_mesh.mesh_max[0]\n            const yMin = this.bed_mesh.mesh_min[1]\n            const yMax = this.bed_mesh.mesh_max[1]\n            const xStep = (xMax - xMin) / (xCount - 1)\n            const yStep = (yMax - yMin) / (yCount - 1)\n\n            const data: any[] = []\n\n            let yPoint = 0\n            this.bed_mesh.mesh_matrix.forEach((meshRow: number[]) => {\n                let xPoint = 0\n                meshRow.forEach((value: number) => {\n                    data.push([\n                        (xMin + xStep * xPoint),\n                        (yMin + yStep * yPoint),\n                        value\n                    ])\n                    xPoint++\n                })\n                yPoint++\n            })\n\n            serie.data = data\n            serie.dataShape = [yCount, xCount]\n        }\n\n        return serie\n    }\n\n    get seriesFlat(): HeightmapSerie {\n        const serie: HeightmapSerie = {\n            type: 'surface',\n            name: 'flat',\n            data: [],\n            itemStyle: {\n                color: [1, 1, 1, 1],\n                opacity: this.flatOpacity\n            },\n            wireframe: {\n                show: this.wireframe\n            }\n        }\n\n        const config = this.$store.state.printer.configfile?.settings?.bed_mesh\n        if (config) {\n            let probe_count = [1,1]\n            if (config.probe_count && typeof config.probe_count === 'string') {\n                probe_count = config.probe_count.split(',')\n            } else if (config.probe_count) {\n                probe_count = config.probe_count\n            } else if (config.round_probe_count) {\n                probe_count = [config.round_probe_count, config.round_probe_count]\n            }\n\n            let mesh_min = []\n            let mesh_max = []\n\n            if (config.mesh_min && config.mesh_max) {\n                // is no delta\n                mesh_min = (typeof config.mesh_min === 'string') ? config.mesh_min.split(',') : config.mesh_min\n                mesh_max = (typeof config.mesh_max === 'string') ? config.mesh_max.split(',') : config.mesh_max\n            } else {\n                // delta min/max\n                mesh_min = [\n                    config.mesh_radius * -1,\n                    config.mesh_radius * -1\n                ]\n\n                mesh_max = [\n                    config.mesh_radius,\n                    config.mesh_radius\n                ]\n            }\n\n            const xCount = probe_count[0]\n            const yCount = probe_count[1]\n            const xMin = parseFloat(mesh_min[0])\n            const xMax = parseFloat(mesh_max[0])\n            const yMin = parseFloat(mesh_min[1])\n            const yMax = parseFloat(mesh_max[1])\n            const xStep = (xMax - xMin) / (xCount - 1)\n            const yStep = (yMax - yMin) / (yCount - 1)\n\n            const data: number[][] = []\n\n            for (let y = 0; y < yCount; y++) {\n                for (let x = 0; x < xCount; x++) {\n                    data.push([\n                        xMin + xStep * x,\n                        yMin + yStep * y,\n                        0\n                    ])\n                }\n            }\n\n            serie.data = data\n            serie.dataShape = [yCount, xCount]\n        }\n\n        return serie\n    }\n\n    get visualMapRange(): number[] {\n        if (!this.scaleVisualMap) return [-0.1, 0.1]\n\n        return this.heightmapLimit\n    }\n\n    get visualMapSeriesIndex(): number[] {\n        const output = []\n\n        if (this.showProbed) output.push(0)\n        else if (this.showMesh) output.push(1)\n\n        return output\n    }\n\n    get bedMeshMaxPoint() {\n        if (this.bed_mesh.profile_name === '') return { row: 0, col: 0, positionX: 0, positionY: 0, value: 0 }\n\n        const [ , max] = this.probedHeightmapLimit\n\n        let row = 0\n        let col = 0\n        this.bed_mesh.probed_matrix.forEach((rowPoints: number[], index: number) => {\n            if (Math.max(...rowPoints) === max) {\n                row = index + 1\n                col = rowPoints.findIndex((point: number) => point === max) + 1\n            }\n        })\n\n        const positionX = Math.round((this.bed_mesh.mesh_min[0] + (this.bed_mesh.mesh_max[0] - this.bed_mesh.mesh_min[0]) / this.bed_mesh.probed_matrix[0].length * (col - 1)) * 10) / 10\n        const positionY = Math.round((this.bed_mesh.mesh_min[1] + (this.bed_mesh.mesh_max[1] - this.bed_mesh.mesh_min[1]) / this.bed_mesh.probed_matrix.length * (row - 1)) * 10) / 10\n\n        return {\n            row,\n            col,\n            positionX,\n            positionY,\n            value: Math.round(max * 1000) / 1000\n        }\n    }\n\n    get bedMeshMinPoint() {\n        if (this.bed_mesh.profile_name === '') return { row: 0, col: 0, positionX: 0, positionY: 0, value: 0 }\n\n        const [min, ] = this.probedHeightmapLimit\n\n        let row = 0\n        let col = 0\n        this.bed_mesh.probed_matrix.forEach((rowPoints: number[], index: number) => {\n            if (Math.min(...rowPoints) === min) {\n                row = index + 1\n                col = rowPoints.findIndex((point: number) => point === min) + 1\n            }\n        })\n\n        const positionX = Math.round((this.bed_mesh.mesh_min[0] + (this.bed_mesh.mesh_max[0] - this.bed_mesh.mesh_min[0]) / this.bed_mesh.probed_matrix[0].length * (col - 1)) * 10) / 10\n        const positionY = Math.round((this.bed_mesh.mesh_min[1] + (this.bed_mesh.mesh_max[1] - this.bed_mesh.mesh_min[1]) / this.bed_mesh.probed_matrix.length * (row - 1)) * 10) / 10\n\n        return {\n            row,\n            col,\n            positionX,\n            positionY,\n            value: Math.round(min * 1000) / 1000\n        }\n    }\n\n    get meshLoaded() {\n        if(this.bed_mesh !== null) {\n            return this.bed_mesh.profile_name !== ''\n        } else {\n            return false\n        }\n    }\n\n    tooltipFormatter(data: any): string {\n        const outputArray: string[] = []\n        outputArray.push('<b>'+data.seriesName+'</b>')\n\n        Object.keys(data.encode).sort().forEach((axisName: string) => {\n            outputArray.push('<b>' + axisName.toUpperCase() + '</b>: '+data.data[data.encode[axisName][0]].toFixed(axisName === 'z' ? 3 : 1) + ' mm')\n        })\n\n        return outputArray.join('<br />')\n    }\n\n    loadProfile(name: string): void {\n        this.$store.dispatch('server/addEvent', { message: 'BED_MESH_PROFILE LOAD='+name, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'BED_MESH_PROFILE LOAD='+name }, { loading: 'bedMeshLoad_'+name })\n    }\n\n    openRenameProfile(): void {\n        this.newName = this.bed_mesh?.profile_name ?? ''\n        this.oldName = this.bed_mesh.profile_name\n        this.renameDialog = true\n\n        setTimeout(() => {\n            this.$refs.inputDialogRenameHeightmapName?.focus()\n        }, 200)\n    }\n\n    renameProfile(): void {\n        this.renameDialog = false\n\n        this.$store.dispatch('server/addEvent', { message: 'BED_MESH_PROFILE SAVE='+this.newName, type: 'command' })\n        this.$store.dispatch('server/addEvent', { message: 'BED_MESH_PROFILE REMOVE='+this.oldName, type: 'command' })\n\n        this.$socket.emit('printer.gcode.script', { script: 'BED_MESH_PROFILE SAVE='+this.newName }, { loading: 'bedMeshRename' })\n        this.$socket.emit('printer.gcode.script', { script: 'BED_MESH_PROFILE REMOVE='+this.oldName }, { loading: 'bedMeshRename' })\n\n        this.newName = ''\n        this.oldName = ''\n    }\n\n    openRemoveProfile(name: string): void {\n        this.removeDialogProfile = name\n        this.removeDialog = true\n    }\n\n    removeProfile(): void {\n        this.removeDialog = false\n        this.$store.dispatch('server/addEvent', { message: 'BED_MESH_PROFILE REMOVE='+this.removeDialogProfile, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'BED_MESH_PROFILE REMOVE='+this.removeDialogProfile }, {\n            action: 'printer/removeBedMeshProfile',\n            actionPayload: {name: this.removeDialogProfile},\n            loading: 'bedMeshRename_'+this.removeDialogProfile\n        })\n        this.removeDialogProfile = ''\n    }\n\n    homePrinter(): void {\n        this.$store.dispatch('server/addEvent', { message: 'G28', type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'G28' }, { loading: 'homeAll' })\n    }\n\n    clearBedMesh(): void {\n        this.$store.dispatch('server/addEvent', { message: 'BED_MESH_CLEAR', type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'BED_MESH_CLEAR' }, { loading: 'bedMeshClear' })\n    }\n\n    calibrateMesh(): void {\n        this.calibrateDialog = false\n        this.$store.dispatch('server/addEvent', { message: 'BED_MESH_CALIBRATE', type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: 'BED_MESH_CALIBRATE' }, { loading: 'bedMeshCalibrate' })\n    }\n\n    beforeDestroy(): void {\n        if (typeof window === 'undefined') return\n        if (this.chart) this.chart.dispose()\n    }\n}\n</script>"]}]}