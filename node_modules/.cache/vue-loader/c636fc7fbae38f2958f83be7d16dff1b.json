{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/StatusPanelExcludeObjectDialogMap.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/StatusPanelExcludeObjectDialogMap.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBDb21wb25lbnQgZnJvbSAndnVlLWNsYXNzLWNvbXBvbmVudCcKaW1wb3J0IHtNaXhpbnMsIFByb3B9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnQC9jb21wb25lbnRzL21peGlucy9iYXNlJwppbXBvcnQge2RlZmF1bHRQcmltYXJ5Q29sb3J9IGZyb20gJ0Avc3RvcmUvdmFyaWFibGVzJwoKQENvbXBvbmVudApleHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0dXNQYW5lbE9iamVjdHNEaWFsb2dNYXAgZXh0ZW5kcyBNaXhpbnMoQmFzZU1peGluKSB7CiAgICBwcml2YXRlIGNvb3JkaW5hdGlvbkNyb3NzQ29sb3IgPSAnIzg4OCcKICAgIHByaXZhdGUgc3RyaXBlc09mZnNldCA9IDUwCgogICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIGRlZmF1bHQ6ICcnIH0pIHJlYWRvbmx5IGhvdmVyTmFtZSE6IHN0cmluZwoKICAgICRyZWZzITogewogICAgICAgIHRvb2x0aXBPYmplY3RNYXA6IEhUTUxEaXZFbGVtZW50CiAgICB9CgogICAgZ2V0IHByaW50aW5nX29iamVjdHMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuZXhjbHVkZV9vYmplY3Q/Lm9iamVjdHMgPz8gW10KICAgIH0KCiAgICBnZXQgY3VycmVudF9vYmplY3QoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuZXhjbHVkZV9vYmplY3Q/LmN1cnJlbnRfb2JqZWN0ID8/IG51bGwKICAgIH0KCiAgICBnZXQgZXhjbHVkZWRfb2JqZWN0cygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci5leGNsdWRlX29iamVjdD8uZXhjbHVkZWRfb2JqZWN0cyA/PyBbXQogICAgfQoKICAgIGdldCB2aWV3Qm94KCkgewogICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRYKHRoaXMuc3RlcHBlclhtaW4pKycgJyt0aGlzLmNvbnZlcnRZKHRoaXMuc3RlcHBlclltYXgpKycgJyt0aGlzLmFic29sdXRlWCsnICcrdGhpcy5hYnNvbHV0ZVkKICAgIH0KICAgIAogICAgZ2V0IHN0ZXBwZXJYbWluKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLmNvbmZpZ2ZpbGU/LnNldHRpbmdzPy5zdGVwcGVyX3g/LnBvc2l0aW9uX21pbiA/PyAwCiAgICB9CiAgICAKICAgIGdldCBzdGVwcGVyWG1heCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci5jb25maWdmaWxlPy5zZXR0aW5ncz8uc3RlcHBlcl94Py5wb3NpdGlvbl9tYXggPz8gMAogICAgfQogICAgCiAgICBnZXQgc3RlcHBlclltaW4oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuY29uZmlnZmlsZT8uc2V0dGluZ3M/LnN0ZXBwZXJfeT8ucG9zaXRpb25fbWluID8/IDIwMAogICAgfQogICAgCiAgICBnZXQgc3RlcHBlclltYXgoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuY29uZmlnZmlsZT8uc2V0dGluZ3M/LnN0ZXBwZXJfeT8ucG9zaXRpb25fbWF4ID8/IDIwMAogICAgfQoKICAgIGdldCBhYnNvbHV0ZVgoKSB7CiAgICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMuc3RlcHBlclhtaW4pICsgTWF0aC5hYnModGhpcy5zdGVwcGVyWG1heCkKICAgIH0KCiAgICBnZXQgYWJzb2x1dGVZKCkgewogICAgICAgIHJldHVybiBNYXRoLmFicyh0aGlzLnN0ZXBwZXJZbWluKSArIE1hdGguYWJzKHRoaXMuc3RlcHBlclltYXgpCiAgICB9CgogICAgZ2V0IHhTdHJpcGVzKCkgewogICAgICAgIGNvbnN0IG91dHB1dCA9IFtdCiAgICAgICAgY29uc3QgbWluWHN0cmlwZSA9IE1hdGguZmxvb3IodGhpcy5zdGVwcGVyWG1pbiAvIHRoaXMuc3RyaXBlc09mZnNldCkgKiB0aGlzLnN0cmlwZXNPZmZzZXQKICAgICAgICBjb25zdCBtYXhYc3RyaXBlID0gTWF0aC5mbG9vcih0aGlzLnN0ZXBwZXJYbWF4IC8gdGhpcy5zdHJpcGVzT2Zmc2V0KSAqIHRoaXMuc3RyaXBlc09mZnNldAoKICAgICAgICBmb3IgKGxldCBpID0gbWluWHN0cmlwZTsgaSA8PSBtYXhYc3RyaXBlOyBpID0gaSArIHRoaXMuc3RyaXBlc09mZnNldCkgewogICAgICAgICAgICBvdXRwdXQucHVzaChpKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG91dHB1dAogICAgfQoKICAgIGdldCB5U3RyaXBlcygpIHsKICAgICAgICBjb25zdCBvdXRwdXQgPSBbXQogICAgICAgIGNvbnN0IG1pbllzdHJpcGUgPSBNYXRoLmZsb29yKHRoaXMuc3RlcHBlclltaW4gLyB0aGlzLnN0cmlwZXNPZmZzZXQpICogdGhpcy5zdHJpcGVzT2Zmc2V0CiAgICAgICAgY29uc3QgbWF4WXN0cmlwZSA9IE1hdGguZmxvb3IodGhpcy5zdGVwcGVyWW1heCAvIHRoaXMuc3RyaXBlc09mZnNldCkgKiB0aGlzLnN0cmlwZXNPZmZzZXQKCiAgICAgICAgZm9yIChsZXQgaSA9IG1pbllzdHJpcGU7IGkgPD0gbWF4WXN0cmlwZTsgaSA9IGkgKyB0aGlzLnN0cmlwZXNPZmZzZXQpIHsKICAgICAgICAgICAgb3V0cHV0LnB1c2goaSkKICAgICAgICB9CgogICAgICAgIHJldHVybiBvdXRwdXQKICAgIH0KCiAgICBnZXQgcHJpbWFyeUNvbG9yKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkudGhlbWU/LnByaW1hcnkgPz8gZGVmYXVsdFByaW1hcnlDb2xvcgogICAgfQoKICAgIGNvbnZlcnRYKHg6IG51bWJlcikgewoKCiAgICAgICAgcmV0dXJuIHgKICAgIH0KCiAgICBjb252ZXJ0WSh5OiBudW1iZXIpIHsKCiAgICAgICAgcmV0dXJuIHkgKiAtMQogICAgfQoKICAgIHNob3dPYmplY3RUb29sdGlwKHRleHQ6IHN0cmluZykgewogICAgICAgIGlmICh0aGlzLiRyZWZzLnRvb2x0aXBPYmplY3RNYXApIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy50b29sdGlwT2JqZWN0TWFwLmlubmVySFRNTCA9IHRleHQKICAgICAgICAgICAgdGhpcy4kcmVmcy50b29sdGlwT2JqZWN0TWFwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snCiAgICAgICAgfQoKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3ZlVG9vbHRpcCkKICAgIH0KCiAgICBoaWRlT2JqZWN0VG9vbHRpcCgpIHsKICAgICAgICBpZiAodGhpcy4kcmVmcy50b29sdGlwT2JqZWN0TWFwKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMudG9vbHRpcE9iamVjdE1hcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnCiAgICAgICAgfQoKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3ZlVG9vbHRpcCkKICAgIH0KCiAgICBtb3ZlVG9vbHRpcChldmVudDogYW55KSB7CiAgICAgICAgaWYgKHRoaXMuJHJlZnMudG9vbHRpcE9iamVjdE1hcCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLnRvb2x0aXBPYmplY3RNYXAuc3R5bGUubGVmdCA9IChldmVudC5sYXllclggLSAyMCkgKyAncHgnCiAgICAgICAgICAgIHRoaXMuJHJlZnMudG9vbHRpcE9iamVjdE1hcC5zdHlsZS50b3AgPSAoZXZlbnQubGF5ZXJZIC0gNDUpICsgJ3B4JwogICAgICAgIH0KICAgIH0KCiAgICBvcGVuRXhjbHVkZU9iamVjdERpYWxvZyhuYW1lOiBzdHJpbmcpIHsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6bmFtZScsIG5hbWUpCiAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmJvb2wnLCB0cnVlKQogICAgfQp9Cg=="},{"version":3,"sources":["StatusPanelExcludeObjectDialogMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"StatusPanelExcludeObjectDialogMap.vue","sourceRoot":"src/components/panels","sourcesContent":["<style lang=\"scss\" scoped>\n    svg {\n        //background: rgba(200, 200, 200);\n        border: 2px solid #888;\n    }\n\n    #tooltipObjectMap {\n        display: none;\n        position: absolute;\n        background: black;\n        border-radius: 3px;\n        color: white;\n        padding: 3px 7px;\n        z-index: 100;\n\n        &:before {\n            display: block;\n            content: ' ';\n            width: 0;\n            height: 0;\n            position: absolute;\n            bottom: -10px;\n            left: 10px;\n            border-top: 10px solid black;\n            border-left: 10px solid transparent;\n            border-right: 10px solid transparent;\n        }\n    }\n</style>\n\n<template>\n    <div style=\"position: relative;\">\n        <div id=\"tooltipObjectMap\" ref=\"tooltipObjectMap\"></div>\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" :viewBox=\"viewBox\" xml:space=\"preserve\">\n            <defs>\n                <marker id=\"arrowhead\" markerWidth=\"5\" markerHeight=\"4\" refX=\"2\" refY=\"2\" orient=\"auto\">\n                    <polygon points=\"0 0, 5 2, 0 4\" :fill=\"coordinationCrossColor\" />\n                </marker>\n            </defs>\n            <line :x1=\"convertX(0)\" :y1=\"convertY(1)\" :x2=\"convertX(stepperXmax / 4)\" :y2=\"convertY(1)\" :stroke=\"coordinationCrossColor\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\" />\n            <line :x1=\"convertX(1)\" :y1=\"convertY(0)\" :x2=\"convertX(1)\" :y2=\"convertY(stepperYmax / 4)\" :stroke=\"coordinationCrossColor\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\" />\n            <g>\n                <line v-for=\"x in xStripes\" v-bind:key=\"'xLines'+x\" :x1=\"convertX(x)\" :x2=\"convertX(x)\" :y1=\"convertY(stepperYmin)\" :y2=\"convertY(stepperYmax)\" :stroke=\"coordinationCrossColor\" :stroke-opacity=\"0.25\" stroke-width=\"1\" />\n                <line v-for=\"y in yStripes\" v-bind:key=\"'yLines'+y\" :x1=\"convertX(stepperXmin)\" :x2=\"convertX(stepperXmax)\" :y1=\"convertY(y)\" :y2=\"convertY(y)\" :stroke=\"coordinationCrossColor\" :stroke-opacity=\"0.25\" stroke-width=\"1\" />\n            </g>\n\n            <g v-for=\"(object, index) in printing_objects\" v-bind:key=\"index\">\n                <polygon\n                    :points=\"object.polygon.map(point => convertX(point[0])+','+convertY(point[1])).join(' ')\"\n                    style=\"cursor: pointer;\"\n                    :stroke=\"current_object === object.name ? primaryColor : '#666'\"\n                    stroke-width=\"2\"\n                    fill-rule=\"evenodd\"\n                    :fill=\"hoverName === object.name ? primaryColor : (excluded_objects.includes(object.name) ? '#6668' : '#bbb')\"\n                    @mouseover=\"showObjectTooltip(object.name)\"\n                    @mouseout=\"hideObjectTooltip\"\n                    @click=\"openExcludeObjectDialog(object.name)\"\n                />\n            </g>\n        </svg>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport Component from 'vue-class-component'\nimport {Mixins, Prop} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport {defaultPrimaryColor} from '@/store/variables'\n\n@Component\nexport default class StatusPanelObjectsDialogMap extends Mixins(BaseMixin) {\n    private coordinationCrossColor = '#888'\n    private stripesOffset = 50\n\n    @Prop({ required: false, default: '' }) readonly hoverName!: string\n\n    $refs!: {\n        tooltipObjectMap: HTMLDivElement\n    }\n\n    get printing_objects() {\n        return this.$store.state.printer.exclude_object?.objects ?? []\n    }\n\n    get current_object() {\n        return this.$store.state.printer.exclude_object?.current_object ?? null\n    }\n\n    get excluded_objects() {\n        return this.$store.state.printer.exclude_object?.excluded_objects ?? []\n    }\n\n    get viewBox() {\n        return this.convertX(this.stepperXmin)+' '+this.convertY(this.stepperYmax)+' '+this.absoluteX+' '+this.absoluteY\n    }\n    \n    get stepperXmin() {\n        return this.$store.state.printer.configfile?.settings?.stepper_x?.position_min ?? 0\n    }\n    \n    get stepperXmax() {\n        return this.$store.state.printer.configfile?.settings?.stepper_x?.position_max ?? 0\n    }\n    \n    get stepperYmin() {\n        return this.$store.state.printer.configfile?.settings?.stepper_y?.position_min ?? 200\n    }\n    \n    get stepperYmax() {\n        return this.$store.state.printer.configfile?.settings?.stepper_y?.position_max ?? 200\n    }\n\n    get absoluteX() {\n        return Math.abs(this.stepperXmin) + Math.abs(this.stepperXmax)\n    }\n\n    get absoluteY() {\n        return Math.abs(this.stepperYmin) + Math.abs(this.stepperYmax)\n    }\n\n    get xStripes() {\n        const output = []\n        const minXstripe = Math.floor(this.stepperXmin / this.stripesOffset) * this.stripesOffset\n        const maxXstripe = Math.floor(this.stepperXmax / this.stripesOffset) * this.stripesOffset\n\n        for (let i = minXstripe; i <= maxXstripe; i = i + this.stripesOffset) {\n            output.push(i)\n        }\n\n        return output\n    }\n\n    get yStripes() {\n        const output = []\n        const minYstripe = Math.floor(this.stepperYmin / this.stripesOffset) * this.stripesOffset\n        const maxYstripe = Math.floor(this.stepperYmax / this.stripesOffset) * this.stripesOffset\n\n        for (let i = minYstripe; i <= maxYstripe; i = i + this.stripesOffset) {\n            output.push(i)\n        }\n\n        return output\n    }\n\n    get primaryColor() {\n        return this.$store.state.gui.theme?.primary ?? defaultPrimaryColor\n    }\n\n    convertX(x: number) {\n\n\n        return x\n    }\n\n    convertY(y: number) {\n\n        return y * -1\n    }\n\n    showObjectTooltip(text: string) {\n        if (this.$refs.tooltipObjectMap) {\n            this.$refs.tooltipObjectMap.innerHTML = text\n            this.$refs.tooltipObjectMap.style.display = 'block'\n        }\n\n        window.addEventListener('mousemove', this.moveTooltip)\n    }\n\n    hideObjectTooltip() {\n        if (this.$refs.tooltipObjectMap) {\n            this.$refs.tooltipObjectMap.style.display = 'none'\n        }\n\n        window.removeEventListener('mousemove', this.moveTooltip)\n    }\n\n    moveTooltip(event: any) {\n        if (this.$refs.tooltipObjectMap) {\n            this.$refs.tooltipObjectMap.style.left = (event.layerX - 20) + 'px'\n            this.$refs.tooltipObjectMap.style.top = (event.layerY - 45) + 'px'\n        }\n    }\n\n    openExcludeObjectDialog(name: string) {\n        this.$emit('update:name', name)\n        this.$emit('update:bool', true)\n    }\n}\n</script>"]}]}