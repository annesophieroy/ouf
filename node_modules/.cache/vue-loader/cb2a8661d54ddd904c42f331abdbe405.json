{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/ControlPanelExtruder.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/ControlPanelExtruder.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnN9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnLi4vbWl4aW5zL2Jhc2UnCgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xQYW5lbEV4dHJ1ZGVyIGV4dGVuZHMgTWl4aW5zKEJhc2VNaXhpbikgewoKICAgIGdldCBmaWxhbWVudERpYW1ldGVyKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wcmludGVyLmNvbmZpZ2ZpbGU/LnNldHRpbmdzPy5leHRydWRlcj8uZmlsYW1lbnRfZGlhbWV0ZXIgPz8gMS43NQogICAgfQoKICAgIGdldCBmZWVkYW1vdW50cygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmNvbnRyb2wuZXh0cnVkZXI/LmZlZWRhbW91bnRzID8/IFtdCiAgICB9CgogICAgZ2V0IGZlZWRyYXRlcygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmNvbnRyb2wuZXh0cnVkZXI/LmZlZWRyYXRlcyA/PyBbXQogICAgfQoKICAgIGdldCBmZWVkYW1vdW50c1NvcnRlZCgpIHsKICAgICAgICByZXR1cm4gWy4uLnRoaXMuZmVlZGFtb3VudHNdLnNvcnQoKGEsYikgPT4geyByZXR1cm4gYi1hIH0pCiAgICB9CgogICAgZ2V0IGZlZWRyYXRlc1NvcnRlZCAoKSB7CiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmZlZWRyYXRlc10uc29ydCgoYSxiKSA9PiB7IHJldHVybiBiLWEgfSkKICAgIH0KCiAgICBnZXQgY3VycmVudEZlZWRBbW91bnQoKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodGhpcy4kc3RvcmUuc3RhdGUuZ3VpLmNvbnRyb2wuZXh0cnVkZXIuZmVlZGFtb3VudCkKICAgIH0KCiAgICBzZXQgY3VycmVudEZlZWRBbW91bnQobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ2NvbnRyb2wuZXh0cnVkZXIuZmVlZGFtb3VudCcsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgY3VycmVudEZlZWRSYXRlKCkgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5jb250cm9sLmV4dHJ1ZGVyLmZlZWRyYXRlKQogICAgfQoKICAgIHNldCBjdXJyZW50RmVlZFJhdGUobmV3VmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9zYXZlU2V0dGluZycsIHsgbmFtZTogJ2NvbnRyb2wuZXh0cnVkZXIuZmVlZHJhdGUnLCB2YWx1ZTogbmV3VmFsIH0pCiAgICB9CgogICAgZ2V0IGJvb2xFeHRydWRlUG9zc2libGUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByaW50ZXIvZ2V0RXh0cnVkZVBvc3NpYmxlJ10KICAgIH0KCiAgICBnZXQgbWluRXh0cnVkZVRlbXAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByaW50ZXIuY29uZmlnZmlsZS5zZXR0aW5ncy5leHRydWRlci5taW5fZXh0cnVkZV90ZW1wCiAgICB9CgogICAgZG9TZW5kKGdjb2RlOiBzdHJpbmcpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VydmVyL2FkZEV2ZW50JywgeyBtZXNzYWdlOiBnY29kZSwgdHlwZTogJ2NvbW1hbmQnIH0pCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ3ByaW50ZXIuZ2NvZGUuc2NyaXB0JywgeyBzY3JpcHQ6IGdjb2RlIH0pCiAgICB9CgogICAgc2V0RmVlZEFtb3VudCh2YWx1ZTogbnVtYmVyKSB7CiAgICAgICAgdGhpcy5jdXJyZW50RmVlZEFtb3VudCA9IHZhbHVlCiAgICB9CgogICAgc2V0RmVlZHJhdGUodmFsdWU6IG51bWJlcikgewogICAgICAgIHRoaXMuY3VycmVudEZlZWRSYXRlID0gdmFsdWUKICAgIH0KCiAgICBzZW5kUmV0cmFjdCgpIHsKICAgICAgICBjb25zdCBnY29kZSA9ICdNODNcbkcxIEUtJyt0aGlzLmN1cnJlbnRGZWVkQW1vdW50KycgRicrKHRoaXMuY3VycmVudEZlZWRSYXRlICogNjApCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogZ2NvZGUsIHR5cGU6ICdjb21tYW5kJyB9KQogICAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCdwcmludGVyLmdjb2RlLnNjcmlwdCcsIHsgc2NyaXB0OiBnY29kZSB9LCB7IGxvYWRpbmc6ICdidG5SZXRyYWN0JyB9KQogICAgfQoKICAgIHNlbmREZXRyYWN0KCkgewogICAgICAgIGNvbnN0IGdjb2RlID0gJ004M1xuRzEgRScrdGhpcy5jdXJyZW50RmVlZEFtb3VudCsnIEYnKyh0aGlzLmN1cnJlbnRGZWVkUmF0ZSAqIDYwKQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXJ2ZXIvYWRkRXZlbnQnLCB7IG1lc3NhZ2U6IGdjb2RlLCB0eXBlOiAnY29tbWFuZCcgfSkKICAgICAgICB0aGlzLiRzb2NrZXQuZW1pdCgncHJpbnRlci5nY29kZS5zY3JpcHQnLCB7IHNjcmlwdDogZ2NvZGUgfSwgeyBsb2FkaW5nOiAnYnRuRGV0cmFjdCcgfSkKICAgIH0KfQo="},{"version":3,"sources":["ControlPanelExtruder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ControlPanelExtruder.vue","sourceRoot":"src/components/panels","sourcesContent":["<style lang=\"scss\" scoped>\n.btnHomeAxis {\n    width: 36px;\n    min-width: 36px !important;\n}\n\n.btnMinWidthAuto {\n    min-width: auto !important;\n}\n\n.steps {\n    width: 100%;\n    > div {\n        width: 100%;\n        display: flex;\n        > button {\n            flex-grow: 1;\n        }\n    }\n}\n</style>\n\n<template>\n    <div class=\"mt-6\">\n        <v-row>\n            <v-col class=\"pa-0\">\n                <v-divider></v-divider>\n            </v-col>\n        </v-row>\n        <v-row class=\"\">\n            <v-col class=\"col col-md-6 pt-2\">\n                <span class=\"text--disabled\" style=\"font-size: .9em\">{{ $t(\"Panels.ControlPanel.FeedAmountIn\") }} [mm]</span>\n                <v-btn-toggle class=\"mt-1\" dense no-gutters style=\"flex-wrap: nowrap; width: 100%;\" >\n                    <v-btn v-for=\"amount in feedamountsSorted\" v-bind:key=\"amount\" @click=\"setFeedAmount(amount)\" dense :class=\"(amount === currentFeedAmount ? 'v-btn--active' : '') + ' btnMinWidthAuto flex-grow-1 px-0 _btnFeedrate'\">{{ amount }}</v-btn>\n                </v-btn-toggle>\n            </v-col>\n            <v-col class=\"col col-md-6 pt-2\">\n                <span class=\"text--disabled\" style=\"font-size: .9em\">{{ $t(\"Panels.ControlPanel.FeedrateIn\") }} [mm/s]</span>\n                <v-btn-toggle class=\"mt-1\" dense no-gutters style=\"flex-wrap: nowrap; width: 100%;\" >\n                    <v-tooltip top v-for=\"rate in feedratesSorted\" v-bind:key=\"rate\" color=\"panel\">\n                        <template v-slot:activator=\"{ on, attrs }\">\n                            <v-btn v-bind=\"attrs\" v-on=\"on\" @click=\"setFeedrate(rate)\" dense :class=\"(rate === currentFeedRate ? 'v-btn--active' : '') + ' btnMinWidthAuto flex-grow-1 px-0 _btnFeedrate'\">{{ rate }}</v-btn>\n                        </template>\n                        <span v-if=\"filamentDiameter\">{{ Math.round(Math.pow(filamentDiameter / 2, 2) * Math.PI * rate * 10) / 10 }} mm&sup3;/s</span>\n                    </v-tooltip>\n                </v-btn-toggle>\n            </v-col>\n        </v-row>\n        <v-row class=\"\">\n            <v-col class=\"col text-center pt-0\">\n                <v-tooltip top :disabled=\"boolExtrudePossible\" color=\"panel\">\n                    <template v-slot:activator=\"{ on }\">\n                        <div v-on=\"on\" class=\"d-inline-block\">\n                            <v-btn small @click=\"sendRetract()\" class=\"mx-3\" :loading=\"loadings.includes('btnRetract')\" :disabled=\"!boolExtrudePossible\"><v-icon small class=\"mr-1\">mdi-arrow-up-bold</v-icon> {{ $t('Panels.ControlPanel.Retract') }}</v-btn>\n                        </div>\n                    </template>\n                    <span>\n                        {{ $t(\"Panels.ControlPanel.HotendTooCold\") }} {{ minExtrudeTemp }} °C\n                    </span>\n                </v-tooltip>\n                <v-tooltip top :disabled=\"boolExtrudePossible\" color=\"panel\">\n                    <template v-slot:activator=\"{ on }\">\n                        <div v-on=\"on\" class=\"d-inline-block\">\n                            <v-btn small @click=\"sendDetract()\" class=\"mx-3\" :loading=\"loadings.includes('btnDetract')\" :disabled=\"!boolExtrudePossible\"><v-icon small class=\"mr-1\">mdi-arrow-down-bold</v-icon> {{ $t('Panels.ControlPanel.Extrude') }}</v-btn>\n                        </div>\n                    </template>\n                    <span>\n                        {{ $t(\"Panels.ControlPanel.HotendTooCold\") }} {{ minExtrudeTemp }} °C\n                    </span>\n                </v-tooltip>\n            </v-col>\n        </v-row>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Mixins} from 'vue-property-decorator'\nimport BaseMixin from '../mixins/base'\n\n@Component\nexport default class ControlPanelExtruder extends Mixins(BaseMixin) {\n\n    get filamentDiameter() {\n        return this.$store.state.printer.configfile?.settings?.extruder?.filament_diameter ?? 1.75\n    }\n\n    get feedamounts() {\n        return this.$store.state.gui.control.extruder?.feedamounts ?? []\n    }\n\n    get feedrates() {\n        return this.$store.state.gui.control.extruder?.feedrates ?? []\n    }\n\n    get feedamountsSorted() {\n        return [...this.feedamounts].sort((a,b) => { return b-a })\n    }\n\n    get feedratesSorted () {\n        return [...this.feedrates].sort((a,b) => { return b-a })\n    }\n\n    get currentFeedAmount() {\n        return parseFloat(this.$store.state.gui.control.extruder.feedamount)\n    }\n\n    set currentFeedAmount(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'control.extruder.feedamount', value: newVal })\n    }\n\n    get currentFeedRate() {\n        return parseFloat(this.$store.state.gui.control.extruder.feedrate)\n    }\n\n    set currentFeedRate(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'control.extruder.feedrate', value: newVal })\n    }\n\n    get boolExtrudePossible() {\n        return this.$store.getters['printer/getExtrudePossible']\n    }\n\n    get minExtrudeTemp() {\n        return this.$store.state.printer.configfile.settings.extruder.min_extrude_temp\n    }\n\n    doSend(gcode: string) {\n        this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: gcode })\n    }\n\n    setFeedAmount(value: number) {\n        this.currentFeedAmount = value\n    }\n\n    setFeedrate(value: number) {\n        this.currentFeedRate = value\n    }\n\n    sendRetract() {\n        const gcode = 'M83\\nG1 E-'+this.currentFeedAmount+' F'+(this.currentFeedRate * 60)\n        this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: gcode }, { loading: 'btnRetract' })\n    }\n\n    sendDetract() {\n        const gcode = 'M83\\nG1 E'+this.currentFeedAmount+' F'+(this.currentFeedRate * 60)\n        this.$store.dispatch('server/addEvent', { message: gcode, type: 'command' })\n        this.$socket.emit('printer.gcode.script', { script: gcode }, { loading: 'btnDetract' })\n    }\n}\n</script>\n"]}]}