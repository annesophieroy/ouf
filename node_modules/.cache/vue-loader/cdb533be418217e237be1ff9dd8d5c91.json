{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/settings/SettingsRemotePrintersTab.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/settings/SettingsRemotePrintersTab.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnN9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnLi4vbWl4aW5zL2Jhc2UnCmltcG9ydCBTZXR0aW5nc1JvdyBmcm9tICdAL2NvbXBvbmVudHMvc2V0dGluZ3MvU2V0dGluZ3NSb3cudnVlJwppbXBvcnQge0d1aVJlbW90ZXByaW50ZXJzU3RhdGVQcmludGVyfSBmcm9tICdAL3N0b3JlL2d1aS9yZW1vdGVwcmludGVycy90eXBlcycKCmludGVyZmFjZSBwcmludGVyRm9ybSB7CiAgICBib29sOiBib29sZWFuCiAgICBob3N0bmFtZTogc3RyaW5nCiAgICBwb3J0OiBudW1iZXIKICAgIGlkOiBzdHJpbmcgfCBudWxsCiAgICBuYW1lc3BhY2U6IHN0cmluZyB8IG51bGwKfQoKQENvbXBvbmVudCh7CiAgICBjb21wb25lbnRzOiB7U2V0dGluZ3NSb3d9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdzUmVtb3RlUHJpbnRlcnNUYWIgZXh0ZW5kcyBNaXhpbnMoQmFzZU1peGluKSB7CiAgICBwcml2YXRlIGZvcm06IHByaW50ZXJGb3JtID0gewogICAgICAgIGJvb2w6IGZhbHNlLAogICAgICAgIGhvc3RuYW1lOiAnJywKICAgICAgICBwb3J0OiA3MTI1LAogICAgICAgIGlkOiBudWxsLAogICAgICAgIG5hbWVzcGFjZTogbnVsbAogICAgfQoKICAgIGdldCBwcmludGVycygpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snZ3VpL3JlbW90ZXByaW50ZXJzL2dldFJlbW90ZXByaW50ZXJzJ10gPz8gW10KICAgIH0KCiAgICBnZXQgcHJvdG9jb2woKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNvY2tldC5wcm90b2NvbCA/PyAnd3MnCiAgICB9CgogICAgZm9ybWF0UHJpbnRlck5hbWUocHJpbnRlcjogR3VpUmVtb3RlcHJpbnRlcnNTdGF0ZVByaW50ZXIpIHsKICAgICAgICByZXR1cm4gcHJpbnRlci5ob3N0bmFtZSsocHJpbnRlci5wb3J0ICE9PSA4MCA/ICc6JytwcmludGVyLnBvcnQgOiAnJykKICAgIH0KCiAgICBjcmVhdGVQcmludGVyKCkgewogICAgICAgIHRoaXMuZm9ybS5ob3N0bmFtZSA9ICcnCiAgICAgICAgdGhpcy5mb3JtLnBvcnQgPSA3MTI1CiAgICAgICAgdGhpcy5mb3JtLmlkID0gbnVsbAogICAgICAgIHRoaXMuZm9ybS5uYW1lc3BhY2UgPSBudWxsCiAgICAgICAgdGhpcy5mb3JtLmJvb2wgPSB0cnVlCiAgICB9CgogICAgc3RvcmVQcmludGVyKCkgewogICAgICAgIGNvbnN0IHByaW50ZXIgPSB7CiAgICAgICAgICAgIGhvc3RuYW1lOiB0aGlzLmZvcm0uaG9zdG5hbWUsCiAgICAgICAgICAgIHBvcnQ6IHRoaXMuZm9ybS5wb3J0CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3JlbW90ZXByaW50ZXJzL3N0b3JlJywgeyB2YWx1ZXM6IHByaW50ZXIgfSkKCiAgICAgICAgdGhpcy5mb3JtLmhvc3RuYW1lID0gJycKICAgICAgICB0aGlzLmZvcm0ucG9ydCA9IDcxMjUKICAgICAgICB0aGlzLmZvcm0uaWQgPSBudWxsCiAgICAgICAgdGhpcy5mb3JtLmJvb2wgPSBmYWxzZQogICAgfQoKICAgIGVkaXRQcmludGVyKHByaW50ZXI6IEd1aVJlbW90ZXByaW50ZXJzU3RhdGVQcmludGVyKSB7CiAgICAgICAgdGhpcy5mb3JtLmlkID0gcHJpbnRlci5pZCA/PyBudWxsCiAgICAgICAgdGhpcy5mb3JtLmhvc3RuYW1lID0gcHJpbnRlci5ob3N0bmFtZQogICAgICAgIHRoaXMuZm9ybS5wb3J0ID0gcHJpbnRlci5wb3J0CiAgICAgICAgdGhpcy5mb3JtLmJvb2wgPSB0cnVlCiAgICB9CgogICAgdXBkYXRlUHJpbnRlcigpIHsKICAgICAgICBjb25zdCB2YWx1ZXMgPSB7CiAgICAgICAgICAgIGhvc3RuYW1lOiB0aGlzLmZvcm0uaG9zdG5hbWUsCiAgICAgICAgICAgIHBvcnQ6IHRoaXMuZm9ybS5wb3J0CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3JlbW90ZXByaW50ZXJzL3VwZGF0ZScsIHsgaWQ6IHRoaXMuZm9ybS5pZCwgdmFsdWVzIH0pCgogICAgICAgIHRoaXMuZm9ybS5pZCA9IG51bGwKICAgICAgICB0aGlzLmZvcm0uaG9zdG5hbWUgPSAnJwogICAgICAgIHRoaXMuZm9ybS5wb3J0ID0gNzEyNQogICAgICAgIHRoaXMuZm9ybS5ib29sID0gZmFsc2UKICAgIH0KCiAgICBkZWxQcmludGVyKGlkOiBzdHJpbmcpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3JlbW90ZXByaW50ZXJzL2RlbGV0ZScsIGlkKQogICAgfQp9Cg=="},{"version":3,"sources":["SettingsRemotePrintersTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"SettingsRemotePrintersTab.vue","sourceRoot":"src/components/settings","sourcesContent":["\n<template>\n    <div>\n        <v-card flat v-if=\"!form.bool\">\n            <v-card-text>\n                <h3 class=\"text-h5 mb-3\">{{ $t('Settings.RemotePrintersTab.RemotePrinters') }}</h3>\n                <div v-for=\"(printer, index) in printers\" v-bind:key=\"printer.id\">\n                    <v-divider class=\"my-2\" v-if=\"index\"></v-divider>\n                    <settings-row\n                        :title=\"formatPrinterName(printer)\"\n                        :loading=\"printer.socket.isConnecting\"\n                        :icon=\"printer.socket.isConnected ? 'mdi-checkbox-marked-circle' : 'mdi-cancel'\"\n                    >\n                        <v-btn small outlined @click=\"editPrinter(printer)\">\n                            <v-icon left small>mdi-pencil</v-icon>{{ $t('Settings.Edit') }}\n                        </v-btn>\n                        <v-btn small outlined @click=\"delPrinter(printer.id)\" class=\"ml-3 minwidth-0 px-2\" color=\"error\">\n                            <v-icon small>mdi-delete</v-icon>\n                        </v-btn>\n                    </settings-row>\n                </div>\n            </v-card-text>\n            <v-card-actions class=\"d-flex justify-end\">\n                <v-btn text color=\"primary\" @click=\"createPrinter\">{{ $t(\"Settings.RemotePrintersTab.AddPrinter\")}}</v-btn>\n            </v-card-actions>\n        </v-card>\n        <v-card flat v-else>\n            <v-card-title>\n                {{ form.id !== null ? $t('Settings.RemotePrintersTab.EditPrinter') : $t('Settings.RemotePrintersTab.AddPrinter') }}\n            </v-card-title>\n            <v-card-text>\n                <settings-row :title=\"$t('Settings.RemotePrintersTab.Hostname')\">\n                    <v-text-field\n                        v-model=\"form.hostname\"\n                        :rules=\"[\n                            v => !!v || 'Hostname is required',\n                            v => !v.startsWith('http:') || 'invalid hostname/IP',\n                            v => !v.startsWith('https:') || 'invalid hostname/IP',\n                        ]\"\n                        hide-details=\"auto\"\n                        required\n                        dense\n                        outlined\n                    ></v-text-field>\n                </settings-row>\n                <v-divider class=\"my-2\"></v-divider>\n                <settings-row :title=\"$t('Settings.RemotePrintersTab.Port')\">\n                    <v-text-field\n                        v-model=\"form.port\"\n                        :rules=\"[v => !!v || 'Port is required']\"\n                        hide-details=\"auto\"\n                        required\n                        dense\n                        outlined\n                    ></v-text-field>\n                </settings-row>\n            </v-card-text>\n            <v-card-actions class=\"d-flex justify-end\">\n                <v-btn text @click=\"form.bool = false\">{{ $t(\"Settings.Cancel\")}}</v-btn>\n                <v-btn text color=\"primary\" @click=\"storePrinter\" v-if=\"form.id === null\">{{ $t(\"Settings.RemotePrintersTab.AddPrinter\")}}</v-btn>\n                <v-btn text color=\"primary\" @click=\"updatePrinter\" v-else>{{ $t(\"Settings.RemotePrintersTab.UpdatePrinter\")}}</v-btn>\n            </v-card-actions>\n        </v-card>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Mixins} from 'vue-property-decorator'\nimport BaseMixin from '../mixins/base'\nimport SettingsRow from '@/components/settings/SettingsRow.vue'\nimport {GuiRemoteprintersStatePrinter} from '@/store/gui/remoteprinters/types'\n\ninterface printerForm {\n    bool: boolean\n    hostname: string\n    port: number\n    id: string | null\n    namespace: string | null\n}\n\n@Component({\n    components: {SettingsRow}\n})\nexport default class SettingsRemotePrintersTab extends Mixins(BaseMixin) {\n    private form: printerForm = {\n        bool: false,\n        hostname: '',\n        port: 7125,\n        id: null,\n        namespace: null\n    }\n\n    get printers() {\n        return this.$store.getters['gui/remoteprinters/getRemoteprinters'] ?? []\n    }\n\n    get protocol() {\n        return this.$store.state.socket.protocol ?? 'ws'\n    }\n\n    formatPrinterName(printer: GuiRemoteprintersStatePrinter) {\n        return printer.hostname+(printer.port !== 80 ? ':'+printer.port : '')\n    }\n\n    createPrinter() {\n        this.form.hostname = ''\n        this.form.port = 7125\n        this.form.id = null\n        this.form.namespace = null\n        this.form.bool = true\n    }\n\n    storePrinter() {\n        const printer = {\n            hostname: this.form.hostname,\n            port: this.form.port\n        }\n\n        this.$store.dispatch('gui/remoteprinters/store', { values: printer })\n\n        this.form.hostname = ''\n        this.form.port = 7125\n        this.form.id = null\n        this.form.bool = false\n    }\n\n    editPrinter(printer: GuiRemoteprintersStatePrinter) {\n        this.form.id = printer.id ?? null\n        this.form.hostname = printer.hostname\n        this.form.port = printer.port\n        this.form.bool = true\n    }\n\n    updatePrinter() {\n        const values = {\n            hostname: this.form.hostname,\n            port: this.form.port\n        }\n\n        this.$store.dispatch('gui/remoteprinters/update', { id: this.form.id, values })\n\n        this.form.id = null\n        this.form.hostname = ''\n        this.form.port = 7125\n        this.form.bool = false\n    }\n\n    delPrinter(id: string) {\n        this.$store.dispatch('gui/remoteprinters/delete', id)\n    }\n}\n</script>"]}]}