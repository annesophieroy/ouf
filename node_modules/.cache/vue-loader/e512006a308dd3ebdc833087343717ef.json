{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/pages/Console.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/pages/Console.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnMsIFdhdGNofSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZU1peGluIGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvYmFzZScKaW1wb3J0IENvbnNvbGVUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvY29uc29sZS9Db25zb2xlVGFibGUudnVlJwppbXBvcnQge0NvbW1hbmRIZWxwLCBWVGV4dGFyZWFUeXBlfSBmcm9tICdAL3N0b3JlL3ByaW50ZXIvdHlwZXMnCmltcG9ydCB7cmV2ZXJzZVN0cmluZywgc3RyTG9uZ2VzdEVxdWFsfSBmcm9tICdAL3BsdWdpbnMvaGVscGVycycKaW1wb3J0IENvbW1hbmRIZWxwTW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL0NvbW1hbmRIZWxwTW9kYWwudnVlJwoKQENvbXBvbmVudCh7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgQ29tbWFuZEhlbHBNb2RhbCwKICAgICAgICBDb25zb2xlVGFibGUsCiAgICB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2VDb25zb2xlIGV4dGVuZHMgTWl4aW5zKEJhc2VNaXhpbikgewogICAgcHJpdmF0ZSBnY29kZSA9ICcnCiAgICBwcml2YXRlIGxhc3RDb21tYW5kTnVtYmVyOiBudW1iZXIgfCBudWxsID0gbnVsbAogICAgcHJpdmF0ZSBpdGVtcyA9IFtdCgogICAgJHJlZnMhOiB7CiAgICAgICAgZ2NvZGVDb21tYW5kRmllbGQ6IFZUZXh0YXJlYVR5cGUsCiAgICAgICAgY29uc29sZTogQ29uc29sZVRhYmxlLAogICAgICAgIGNvbnNvbGVTY3JvbGw6IGFueQogICAgfQoKICAgIGdldCBoZWxwbGlzdCgpOiBDb21tYW5kSGVscFtdIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucHJpbnRlci5oZWxwbGlzdCA/PyBbXQogICAgfQoKICAgIGdldCBjb25zb2xlRGlyZWN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuY29uc29sZS5kaXJlY3Rpb24gPz8gJ3RhYmxlJwogICAgfQoKICAgIGdldCBldmVudHMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3NlcnZlci9nZXRDb25zb2xlRXZlbnRzJ10odGhpcy5jb25zb2xlRGlyZWN0aW9uID09PSAndGFibGUnKQogICAgfQoKICAgIEBXYXRjaCgnZXZlbnRzJykKICAgIGV2ZW50c0NoYW5nZWQoKSB7CiAgICAgICAgaWYgKHRoaXMuY29uc29sZURpcmVjdGlvbiA9PT0gJ3NoZWxsJykgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKQogICAgICAgICAgICB9LCA1MCkKICAgICAgICB9CiAgICB9CgogICAgZ2V0IGhpZGVXYWl0VGVtcGVyYXR1cmVzKCk6IGJvb2xlYW4gewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuY29uc29sZS5oaWRlV2FpdFRlbXBlcmF0dXJlcwogICAgfQoKICAgIHNldCBoaWRlV2FpdFRlbXBlcmF0dXJlcyhuZXdWYWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3VpL3NhdmVTZXR0aW5nJywgeyBuYW1lOiAnY29uc29sZS5oaWRlV2FpdFRlbXBlcmF0dXJlcycsIHZhbHVlOiBuZXdWYWwgfSkKICAgIH0KCiAgICBnZXQgaGlkZVRsQ29tbWFuZHMoKTogYm9vbGVhbiB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmd1aS5jb25zb2xlLmhpZGVXYWl0VGVtcGVyYXR1cmVzCiAgICB9CgogICAgc2V0IGhpZGVUbENvbW1hbmRzKG5ld1ZhbCkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvc2F2ZVNldHRpbmcnLCB7IG5hbWU6ICdjb25zb2xlLmhpZGVUbENvbW1hbmRzJywgdmFsdWU6IG5ld1ZhbCB9KQogICAgfQoKICAgIGdldCByb3dzKCk6IG51bWJlciB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2NvZGU/LnNwbGl0KCdcbicpLmxlbmd0aCA/PyAxCiAgICB9CgogICAgZ2V0IGN1c3RvbUZpbHRlcnMoKTogYW55W10gewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuY29uc29sZS5jb25zb2xlZmlsdGVycwogICAgfQoKICAgIGdldCBsYXN0Q29tbWFuZHMoKTogc3RyaW5nW10gewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ndWkuZ2NvZGVoaXN0b3J5LmVudHJpZXMgPz8gW10KICAgIH0KCiAgICBjb21tYW5kQ2xpY2sobXNnOiBzdHJpbmcpOiB2b2lkIHsKICAgICAgICB0aGlzLmdjb2RlID0gbXNnCgogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5nY29kZUNvbW1hbmRGaWVsZC5mb2N1cygpCiAgICAgICAgfSkKICAgIH0KCiAgICBkb1NlbmQoY21kOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7CiAgICAgICAgaWYgKCFjbWQuc2hpZnRLZXkpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZ2NvZGUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncHJpbnRlci9zZW5kR2NvZGUnLCB0aGlzLmdjb2RlKQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2d1aS9nY29kZWhpc3RvcnkvYWRkVG9IaXN0b3J5JywgdGhpcy5nY29kZSkKICAgICAgICAgICAgICAgIHRoaXMuZ2NvZGUgPSAnJwogICAgICAgICAgICAgICAgdGhpcy5sYXN0Q29tbWFuZE51bWJlciA9IG51bGwKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuY29uc29sZS4kZWwuc2Nyb2xsKHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgMjApCiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgdGhpcy5nY29kZSArPSAnXG4nCiAgICB9CgogICAgb25LZXlVcCgpOiB2b2lkIHsKICAgICAgICBpZiAodGhpcy5sYXN0Q29tbWFuZE51bWJlciA9PT0gbnVsbCAmJiB0aGlzLmxhc3RDb21tYW5kcy5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5sYXN0Q29tbWFuZE51bWJlciA9IHRoaXMubGFzdENvbW1hbmRzLmxlbmd0aCAtIDEKICAgICAgICAgICAgdGhpcy5nY29kZSA9IHRoaXMubGFzdENvbW1hbmRzW3RoaXMubGFzdENvbW1hbmROdW1iZXJdCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxhc3RDb21tYW5kTnVtYmVyICYmIHRoaXMubGFzdENvbW1hbmROdW1iZXIgPiAwKSB7CiAgICAgICAgICAgIHRoaXMubGFzdENvbW1hbmROdW1iZXItLQogICAgICAgICAgICB0aGlzLmdjb2RlID0gdGhpcy5sYXN0Q29tbWFuZHNbdGhpcy5sYXN0Q29tbWFuZE51bWJlcl0KICAgICAgICB9CiAgICB9CgogICAgb25LZXlEb3duKCk6IHZvaWQgewogICAgICAgIGlmICh0aGlzLmxhc3RDb21tYW5kTnVtYmVyICE9PSBudWxsICYmIHRoaXMubGFzdENvbW1hbmROdW1iZXIgPCAodGhpcy5sYXN0Q29tbWFuZHMubGVuZ3RoIC0gMSkpIHsKICAgICAgICAgICAgdGhpcy5sYXN0Q29tbWFuZE51bWJlcisrCiAgICAgICAgICAgIHRoaXMuZ2NvZGUgPSB0aGlzLmxhc3RDb21tYW5kc1t0aGlzLmxhc3RDb21tYW5kTnVtYmVyXQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5sYXN0Q29tbWFuZE51bWJlciAhPT0gbnVsbCAmJiB0aGlzLmxhc3RDb21tYW5kTnVtYmVyID09PSAodGhpcy5sYXN0Q29tbWFuZHMubGVuZ3RoIC0gMSkpIHsKICAgICAgICAgICAgdGhpcy5sYXN0Q29tbWFuZE51bWJlciA9IG51bGwKICAgICAgICAgICAgdGhpcy5nY29kZSA9ICcnCiAgICAgICAgfQogICAgfQoKICAgIGdldEF1dG9jb21wbGV0ZShlOiBFdmVudCk6IHZvaWQgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgIGlmICh0aGlzLmdjb2RlLmxlbmd0aCkgewogICAgICAgICAgICBsZXQgY2hlY2sgPSB0aGlzLmdjb2RlLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLiRyZWZzLmdjb2RlQ29tbWFuZEZpZWxkLiRyZWZzLmlucHV0CiAgICAgICAgICAgIGNvbnN0IHNlbnRlbmNlID0gdGV4dGFyZWEudmFsdWUKICAgICAgICAgICAgY29uc3QgbGVuID0gc2VudGVuY2UubGVuZ3RoCiAgICAgICAgICAgIGNvbnN0IHBvcyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lUG9zID0gbGVuIC0gcmV2ZXJzZVN0cmluZyhzZW50ZW5jZSkuaW5kZXhPZignXG4nLCBsZW4gLSBwb3MpCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFbmRQb3MgPSBzZW50ZW5jZS5pbmRleE9mKCdcbicsIGN1cnJlbnRMaW5lUG9zKSA+IC0xID8gc2VudGVuY2UuaW5kZXhPZignXG4nLCBjdXJyZW50TGluZVBvcykgLSAxIDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIKICAgICAgICAgICAgaWYgKHRoaXMucm93cyA+IDEpIHsKICAgICAgICAgICAgICAgIGNoZWNrID0gc2VudGVuY2Uuc3Vic3RyKGN1cnJlbnRMaW5lUG9zLCBjdXJyZW50RW5kUG9zIC0gY3VycmVudExpbmVQb3MpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGNvbW1hbmRzID0gdGhpcy5oZWxwbGlzdC5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQuY29tbWFuZExvdy5zdGFydHNXaXRoKGNoZWNrLnRvTG93ZXJDYXNlKCkpKQogICAgICAgICAgICBpZiAoY29tbWFuZHM/Lmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucm93cyA+IDEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdjb2RlID0gdGhpcy5nY29kZS5yZXBsYWNlKGNoZWNrLCBjb21tYW5kc1swXS5jb21tYW5kKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdjb2RlID0gY29tbWFuZHNbMF0uY29tbWFuZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYoY29tbWFuZHM/Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgIGxldCBjb21tYW5kcyA9IHRoaXMuaGVscGxpc3QuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50LmNvbW1hbmRMb3cuc3RhcnRzV2l0aChjaGVjay50b0xvd2VyQ2FzZSgpKSkKICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd3MgPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nY29kZSA9IHRoaXMuZ2NvZGUucmVwbGFjZShjaGVjaywgY29tbWFuZHMucmVkdWNlKChhY2MsIHZhbCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyTG9uZ2VzdEVxdWFsKGFjYywgdmFsLmNvbW1hbmQpCiAgICAgICAgICAgICAgICAgICAgfSwgY29tbWFuZHNbMF0uY29tbWFuZCkpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2NvZGUgPSBjb21tYW5kcy5yZWR1Y2UoKGFjYywgdmFsKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJMb25nZXN0RXF1YWwoYWNjLCB2YWwuY29tbWFuZCkKICAgICAgICAgICAgICAgICAgICB9LCBjb21tYW5kc1swXS5jb21tYW5kKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNvbW1hbmRzICYmIGNvbW1hbmRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGxldCBvdXRwdXQgPSAnJwogICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzLmZvckVhY2goY29tbWFuZCA9PiBvdXRwdXQgKz0gJzxhIGNsYXNzPVwnY29tbWFuZCBibHVlLS10ZXh0XCc+Jytjb21tYW5kLmNvbW1hbmQrJzwvYT46ICcrY29tbWFuZC5kZXNjcmlwdGlvbisnPGJyIC8+JykKCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlcnZlci9hZGRFdmVudCcsIHsgbWVzc2FnZTogb3V0cHV0LCB0eXBlOiAnYXV0b2NvbXBsZXRlJyB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuJHJlZnMuZ2NvZGVDb21tYW5kRmllbGQuZm9jdXMoKQogICAgfQoKICAgIHRvZ2dsZUZpbHRlcihmaWx0ZXI6IHN0cmluZyk6IHZvaWQgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdndWkvdXBkYXRlQ29uc29sZUZpbHRlcicsICBmaWx0ZXIpCiAgICB9CgogICAgbW91bnRlZCgpIHsKICAgICAgICBpZiAodGhpcy5jb25zb2xlRGlyZWN0aW9uID09PSAnc2hlbGwnKSB0aGlzLnNjcm9sbFRvQm90dG9tKCkKICAgIH0KCiAgICBzY3JvbGxUb0JvdHRvbSgpIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmNvbnNvbGVTY3JvbGwpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXlzY3JvbGwgPSB0aGlzLiRyZWZzLmNvbnNvbGVTY3JvbGwub3NJbnN0YW5jZSgpCiAgICAgICAgICAgICAgICBvdmVybGF5c2Nyb2xsPy5zY3JvbGwoeyB5OiAnMTAwJScgfSkKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICB9Cn0K"},{"version":3,"sources":["Console.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Console.vue","sourceRoot":"src/pages","sourcesContent":["<style scoped>\n\n.consoleScrollContainer {\n    min-height: 200px;\n    height: calc(var(--app-height) - 180px);\n}\n\n.gcode-command-field {\n    font-family: 'Roboto Mono', monospace;\n}\n</style>\n\n<template>\n    <div class=\"d-flex flex-column\">\n        <v-row :class=\"this.consoleDirection === 'table' ? 'order-0' : 'order-1 mt-3'\">\n            <v-col>\n                <v-textarea\n                    v-model=\"gcode\"\n                    :items=\"items\"\n                    :label=\"$t('Console.SendCode')\"\n                    solo\n                    class=\"gcode-command-field\"\n                    ref=\"gcodeCommandField\"\n                    autocomplete=\"off\"\n                    no-resize\n                    auto-grow\n                    :rows=\"rows\"\n                    @keydown.enter.prevent.stop=\"doSend\"\n                    @keyup.up=\"onKeyUp\"\n                    @keyup.down=\"onKeyDown\"\n                    @keydown.tab=\"getAutocomplete\"\n                    hide-details\n                    outlined\n                    dense\n                    :prepend-icon=\"isTouchDevice ? 'mdi-chevron-double-right' : ''\"\n                    @click:prepend=\"getAutocomplete\"\n                    append-icon=\"mdi-send\"\n                    @click:append=\"doSend\"\n                ></v-textarea>\n            </v-col>\n\n            <v-col class=\"col-auto d-flex align-center\">\n                <command-help-modal\n                    @onCommand=\"gcode = $event\"\n                ></command-help-modal>\n                <v-menu offset-y :top=\"consoleDirection === 'shell'\" :close-on-content-click=\"false\" :title=\"$t('Console.SetupConsole')\">\n                    <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn class=\"ml-3 px-2 minwidth-0\" color=\"lightgray\" v-bind=\"attrs\" v-on=\"on\"><v-icon>mdi-filter</v-icon></v-btn>\n                    </template>\n                    <v-list>\n                        <v-list-item class=\"minHeight36\">\n                            <v-checkbox class=\"mt-0\" v-model=\"hideWaitTemperatures\" hide-details :label=\"$t('Console.HideTemperatures')\"></v-checkbox>\n                        </v-list-item>\n                        <v-list-item class=\"minHeight36\" v-if=\"moonrakerComponents.includes('timelapse')\">\n                            <v-checkbox class=\"mt-0\" v-model=\"hideTlCommands\" hide-details :label=\"$t('Console.HideTimelapse')\"></v-checkbox>\n                        </v-list-item>\n                        <v-list-item class=\"minHeight36\" v-for=\"(filter, index) in customFilters\" v-bind:key=\"index\">\n                            <v-checkbox class=\"mt-0\" v-model=\"filter.bool\" @change=\"toggleFilter(filter)\" hide-details :label=\"filter.name\"></v-checkbox>\n                        </v-list-item>\n                    </v-list>\n                </v-menu>\n            </v-col>\n        </v-row>\n        <v-row :class=\"this.consoleDirection === 'table' ? 'order-1' : 'order-0 mt-0'\">\n            <v-col :class=\"this.consoleDirection === 'table' ? 'col' : 'col pt-0'\">\n                <v-card>\n                    <v-card-text class=\"pa-0\">\n                        <overlay-scrollbars ref=\"consoleScroll\" class=\"consoleScrollContainer d-flex flex-column\">\n                            <console-table ref=\"console\"\n                                           :is-mini=\"false\"\n                                           :events=\"events\"\n                                           @command-click=\"commandClick\"\n                            />\n                        </overlay-scrollbars>\n                    </v-card-text>\n                </v-card>\n            </v-col>\n        </v-row>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Mixins, Watch} from 'vue-property-decorator'\nimport BaseMixin from '@/components/mixins/base'\nimport ConsoleTable from '@/components/console/ConsoleTable.vue'\nimport {CommandHelp, VTextareaType} from '@/store/printer/types'\nimport {reverseString, strLongestEqual} from '@/plugins/helpers'\nimport CommandHelpModal from '@/components/CommandHelpModal.vue'\n\n@Component({\n    components: {\n        CommandHelpModal,\n        ConsoleTable,\n    }\n})\nexport default class PageConsole extends Mixins(BaseMixin) {\n    private gcode = ''\n    private lastCommandNumber: number | null = null\n    private items = []\n\n    $refs!: {\n        gcodeCommandField: VTextareaType,\n        console: ConsoleTable,\n        consoleScroll: any\n    }\n\n    get helplist(): CommandHelp[] {\n        return this.$store.state.printer.helplist ?? []\n    }\n\n    get consoleDirection() {\n        return this.$store.state.gui.console.direction ?? 'table'\n    }\n\n    get events() {\n        return this.$store.getters['server/getConsoleEvents'](this.consoleDirection === 'table')\n    }\n\n    @Watch('events')\n    eventsChanged() {\n        if (this.consoleDirection === 'shell') {\n            setTimeout(() => {\n                this.scrollToBottom()\n            }, 50)\n        }\n    }\n\n    get hideWaitTemperatures(): boolean {\n        return this.$store.state.gui.console.hideWaitTemperatures\n    }\n\n    set hideWaitTemperatures(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'console.hideWaitTemperatures', value: newVal })\n    }\n\n    get hideTlCommands(): boolean {\n        return this.$store.state.gui.console.hideWaitTemperatures\n    }\n\n    set hideTlCommands(newVal) {\n        this.$store.dispatch('gui/saveSetting', { name: 'console.hideTlCommands', value: newVal })\n    }\n\n    get rows(): number {\n        return this.gcode?.split('\\n').length ?? 1\n    }\n\n    get customFilters(): any[] {\n        return this.$store.state.gui.console.consolefilters\n    }\n\n    get lastCommands(): string[] {\n        return this.$store.state.gui.gcodehistory.entries ?? []\n    }\n\n    commandClick(msg: string): void {\n        this.gcode = msg\n\n        this.$nextTick(() => {\n            this.$refs.gcodeCommandField.focus()\n        })\n    }\n\n    doSend(cmd: KeyboardEvent): void {\n        if (!cmd.shiftKey) {\n            if (this.gcode !== '') {\n                this.$store.dispatch('printer/sendGcode', this.gcode)\n                this.$store.dispatch('gui/gcodehistory/addToHistory', this.gcode)\n                this.gcode = ''\n                this.lastCommandNumber = null\n                setTimeout(() => {\n                    this.$refs.console.$el.scroll({\n                        top: 0,\n                        left: 0,\n                        behavior: 'smooth'\n                    })\n                }, 20)\n            }\n        } else this.gcode += '\\n'\n    }\n\n    onKeyUp(): void {\n        if (this.lastCommandNumber === null && this.lastCommands.length) {\n            this.lastCommandNumber = this.lastCommands.length - 1\n            this.gcode = this.lastCommands[this.lastCommandNumber]\n        } else if (this.lastCommandNumber && this.lastCommandNumber > 0) {\n            this.lastCommandNumber--\n            this.gcode = this.lastCommands[this.lastCommandNumber]\n        }\n    }\n\n    onKeyDown(): void {\n        if (this.lastCommandNumber !== null && this.lastCommandNumber < (this.lastCommands.length - 1)) {\n            this.lastCommandNumber++\n            this.gcode = this.lastCommands[this.lastCommandNumber]\n        } else if (this.lastCommandNumber !== null && this.lastCommandNumber === (this.lastCommands.length - 1)) {\n            this.lastCommandNumber = null\n            this.gcode = ''\n        }\n    }\n\n    getAutocomplete(e: Event): void {\n        e.preventDefault()\n        if (this.gcode.length) {\n            let check = this.gcode.toLowerCase()\n            const textarea = this.$refs.gcodeCommandField.$refs.input\n            const sentence = textarea.value\n            const len = sentence.length\n            const pos = textarea.selectionStart\n            const currentLinePos = len - reverseString(sentence).indexOf('\\n', len - pos)\n            const currentEndPos = sentence.indexOf('\\n', currentLinePos) > -1 ? sentence.indexOf('\\n', currentLinePos) - 1 : Number.MAX_SAFE_INTEGER\n            if (this.rows > 1) {\n                check = sentence.substr(currentLinePos, currentEndPos - currentLinePos)\n            }\n            let commands = this.helplist.filter((element) => element.commandLow.startsWith(check.toLowerCase()))\n            if (commands?.length === 1) {\n                if (this.rows > 1) {\n                    this.gcode = this.gcode.replace(check, commands[0].command)\n                } else {\n                    this.gcode = commands[0].command\n                }\n            } else if(commands?.length > 1) {\n                let commands = this.helplist.filter((element) => element.commandLow.startsWith(check.toLowerCase()))\n                if (this.rows > 1) {\n                    this.gcode = this.gcode.replace(check, commands.reduce((acc, val) => {\n                        return strLongestEqual(acc, val.command)\n                    }, commands[0].command))\n                } else {\n                    this.gcode = commands.reduce((acc, val) => {\n                        return strLongestEqual(acc, val.command)\n                    }, commands[0].command)\n                }\n                if (commands && commands.length) {\n                    let output = ''\n                    commands.forEach(command => output += '<a class=\\'command blue--text\\'>'+command.command+'</a>: '+command.description+'<br />')\n\n                    this.$store.dispatch('server/addEvent', { message: output, type: 'autocomplete' })\n                }\n            }\n        }\n        this.$refs.gcodeCommandField.focus()\n    }\n\n    toggleFilter(filter: string): void {\n        this.$store.dispatch('gui/updateConsoleFilter',  filter)\n    }\n\n    mounted() {\n        if (this.consoleDirection === 'shell') this.scrollToBottom()\n    }\n\n    scrollToBottom() {\n        this.$nextTick(() => {\n            if (this.$refs.consoleScroll) {\n                const overlayscroll = this.$refs.consoleScroll.osInstance()\n                overlayscroll?.scroll({ y: '100%' })\n            }\n        })\n    }\n}\n</script>\n"]}]}