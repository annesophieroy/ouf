{"remainingRequest":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/MacrogroupPanel.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/src/components/panels/MacrogroupPanel.vue","mtime":1644874918000},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/babel-loader/lib/index.js","mtime":1645990067759},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/ts-loader/index.js","mtime":1645990068168},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/cache-loader/dist/cjs.js","mtime":1645990064605},{"path":"/Users/anne-sophieroy/Downloads/Mainsail/mainsail-maintenance/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1645990069130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Q29tcG9uZW50LCBNaXhpbnMsIFByb3B9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlTWl4aW4gZnJvbSAnLi4vbWl4aW5zL2Jhc2UnCmltcG9ydCBQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvUGFuZWwudnVlJwppbXBvcnQgTWFjcm9CdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL2lucHV0cy9NYWNyb0J1dHRvbi52dWUnCmltcG9ydCB7UHJpbnRlclN0YXRlTWFjcm99IGZyb20gJ0Avc3RvcmUvcHJpbnRlci90eXBlcycKaW1wb3J0IHtHdWlNYWNyb3NTdGF0ZU1hY3JvZ3JvdXBNYWNyb30gZnJvbSAnQC9zdG9yZS9ndWkvbWFjcm9zL3R5cGVzJwpAQ29tcG9uZW50KHsKICAgIGNvbXBvbmVudHM6IHtNYWNyb0J1dHRvbiwgUGFuZWx9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hY3JvZ3JvdXBQYW5lbCBleHRlbmRzIE1peGlucyhCYXNlTWl4aW4pIHsKCiAgICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlIH0pIHBhbmVsSWQhOiBzdHJpbmcKCiAgICBnZXQgbWFjcm9ncm91cCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snZ3VpL21hY3Jvcy9nZXRNYWNyb2dyb3VwJ10odGhpcy5wYW5lbElkKQogICAgfQoKICAgIGdldCBhbGxNYWNyb3MoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByaW50ZXIvZ2V0QWxsTWFjcm9zJ10gPz8gW10KICAgIH0KCiAgICBnZXQgbWFjcm9zKCkgewogICAgICAgIGxldCBtYWNyb3MgPSB0aGlzLm1hY3JvZ3JvdXA/Lm1hY3JvcyA/PyBbXQoKICAgICAgICBtYWNyb3MgPSBtYWNyb3MuZmlsdGVyKChtYWNybzogR3VpTWFjcm9zU3RhdGVNYWNyb2dyb3VwTWFjcm8pID0+IHsKICAgICAgICAgICAgaWYgKCF0aGlzLmFsbE1hY3Jvcy5maW5kKChleGlzdE1hY3JvOiBQcmludGVyU3RhdGVNYWNybykgPT4gZXhpc3RNYWNyby5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG1hY3JvLm5hbWUudG9Mb3dlckNhc2UoKSkpIHJldHVybiBmYWxzZQoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIChtYWNyby5zaG93SW5TdGFuZGJ5ICYmIFsnc3RhbmRieScsICdjYW5jZWxsZWQnLCAnY29tcGxldGUnLCAnZXJyb3InXS5pbmNsdWRlcyh0aGlzLnByaW50ZXJfc3RhdGUpKSB8fAogICAgICAgICAgICAgICAgKG1hY3JvLnNob3dJblBhdXNlICYmIHRoaXMucHJpbnRlcl9zdGF0ZSA9PT0gJ3BhdXNlZCcpIHx8CiAgICAgICAgICAgICAgICAobWFjcm8uc2hvd0luUHJpbnRpbmcgJiYgdGhpcy5wcmludGVyX3N0YXRlID09PSAncHJpbnRpbmcnKQogICAgICAgICAgICApCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG1hY3Jvcy5zb3J0KChhOiBHdWlNYWNyb3NTdGF0ZU1hY3JvZ3JvdXBNYWNybywgYjogR3VpTWFjcm9zU3RhdGVNYWNyb2dyb3VwTWFjcm8pID0+IGEucG9zIC0gYi5wb3MpCiAgICB9CgogICAgZ2V0IG1hY3JvZ3JvdXBTdGF0dXMoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHRoaXMubWFjcm9ncm91cC5zaG93SW5TdGFuZGJ5ICYmIFsnc3RhbmRieScsICdjYW5jZWxsZWQnLCAnY29tcGxldGUnLCAnZXJyb3InXS5pbmNsdWRlcyh0aGlzLnByaW50ZXJfc3RhdGUpKSB8fAogICAgICAgICAgICAodGhpcy5tYWNyb2dyb3VwLnNob3dJblBhdXNlICYmIHRoaXMucHJpbnRlcl9zdGF0ZSA9PT0gJ3BhdXNlZCcpIHx8CiAgICAgICAgICAgICh0aGlzLm1hY3JvZ3JvdXAuc2hvd0luUHJpbnRpbmcgJiYgdGhpcy5wcmludGVyX3N0YXRlID09PSAncHJpbnRpbmcnKQogICAgICAgICkKICAgIH0KCiAgICBnZXRDb2xvcihtYWNybzogR3VpTWFjcm9zU3RhdGVNYWNyb2dyb3VwTWFjcm8pIHsKICAgICAgICBpZiAobWFjcm8uY29sb3IgPT09ICdncm91cCcpIHsKICAgICAgICAgICAgaWYgKHRoaXMubWFjcm9ncm91cC5jb2xvciA9PT0gJ2N1c3RvbScpIHJldHVybiB0aGlzLm1hY3JvZ3JvdXAuY29sb3JDdXN0b20KICAgICAgICAgICAgZWxzZSByZXR1cm4gdGhpcy5tYWNyb2dyb3VwLmNvbG9yCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbWFjcm8uY29sb3IKICAgIH0KfQo="},{"version":3,"sources":["MacrogroupPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"MacrogroupPanel.vue","sourceRoot":"src/components/panels","sourcesContent":["<style lang=\"scss\" scoped>\n\n</style>\n\n<template>\n    <panel\n        v-if=\"klipperReadyForGui && macros.length > 0 && macrogroupStatus\"\n        icon=\"mdi-code-tags\"\n        :title=\"macrogroup.name\"\n        :collapsible=\"true\"\n        :card-class=\"'macrogroup_'+panelId+'_panel'\"\n    >\n        <v-card-text class=\"py-2\">\n            <v-row>\n                <v-col class=\"text-center\">\n                    <macro-button v-for=\"(macro, index) in macros\"\n                                  :key=\"'macroparam_'+index\"\n                                  :macro=\"macro\"\n                                  :color=\"getColor(macro)\"\n                                  class=\"mx-1 my-1\"\n                    />\n                </v-col>\n            </v-row>\n        </v-card-text>\n    </panel>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Mixins, Prop} from 'vue-property-decorator'\nimport BaseMixin from '../mixins/base'\nimport Panel from '@/components/ui/Panel.vue'\nimport MacroButton from '@/components/inputs/MacroButton.vue'\nimport {PrinterStateMacro} from '@/store/printer/types'\nimport {GuiMacrosStateMacrogroupMacro} from '@/store/gui/macros/types'\n@Component({\n    components: {MacroButton, Panel}\n})\nexport default class MacrogroupPanel extends Mixins(BaseMixin) {\n\n    @Prop({ required: true }) panelId!: string\n\n    get macrogroup() {\n        return this.$store.getters['gui/macros/getMacrogroup'](this.panelId)\n    }\n\n    get allMacros() {\n        return this.$store.getters['printer/getAllMacros'] ?? []\n    }\n\n    get macros() {\n        let macros = this.macrogroup?.macros ?? []\n\n        macros = macros.filter((macro: GuiMacrosStateMacrogroupMacro) => {\n            if (!this.allMacros.find((existMacro: PrinterStateMacro) => existMacro.name.toLowerCase() === macro.name.toLowerCase())) return false\n\n            return (\n                (macro.showInStandby && ['standby', 'cancelled', 'complete', 'error'].includes(this.printer_state)) ||\n                (macro.showInPause && this.printer_state === 'paused') ||\n                (macro.showInPrinting && this.printer_state === 'printing')\n            )\n        })\n\n        return macros.sort((a: GuiMacrosStateMacrogroupMacro, b: GuiMacrosStateMacrogroupMacro) => a.pos - b.pos)\n    }\n\n    get macrogroupStatus() {\n        return (\n            (this.macrogroup.showInStandby && ['standby', 'cancelled', 'complete', 'error'].includes(this.printer_state)) ||\n            (this.macrogroup.showInPause && this.printer_state === 'paused') ||\n            (this.macrogroup.showInPrinting && this.printer_state === 'printing')\n        )\n    }\n\n    getColor(macro: GuiMacrosStateMacrogroupMacro) {\n        if (macro.color === 'group') {\n            if (this.macrogroup.color === 'custom') return this.macrogroup.colorCustom\n            else return this.macrogroup.color\n        }\n\n        return macro.color\n    }\n}\n</script>\n"]}]}